import{a as w}from"./chunk-ZH5YMVVM.js";import{e as ve}from"./chunk-E3XKS6FU.js";import{a as T}from"./chunk-UTQ6RLWD.js";import{h as Ee,i as _e,o as Se,x as he}from"./chunk-5WAFVXVX.js";import{a as B,b as ne}from"./chunk-FVIPMTMU.js";import{$c as le,Ab as j,Ba as u,Cb as X,Db as Y,Eb as o,Fc as ie,Ha as m,Ib as Z,Ic as oe,Jb as ee,Jc as F,Ka as l,Kb as te,La as x,Nc as U,Oa as Q,Oc as q,Qc as p,Rc as re,Sa as W,Tc as ae,Va as c,Wc as se,Xa as d,Yc as me,Zc as ue,_ as A,ab as S,b as z,bb as s,bd as pe,cb as r,cd as ce,db as f,eb as _,fa as v,fb as h,ga as E,mb as I,nd as de,pb as $,pd as fe,qb as M,qd as Ce,rb as L,rd as O,sd as ge,ub as H,vb as J,wb as K}from"./chunk-LR2XCKTF.js";var y=class t{constructor(i){this.router=i}destroy$=new z;ngOnInit(){p("LoginComponent.OnInit()")}ngOnDestroy(){this.destroy$.next()}static \u0275fac=function(e){return new(e||t)(m(oe))};static \u0275cmp=l({type:t,selectors:[["gitfire-login"]],decls:12,vars:1,consts:[[1,"h3","mb-3","fw-normal"],[3,"isLogin"],["routerLink","/Gitfire/signup"],["routerLink","/Gitfire/reset"],["routerLink","/"]],template:function(e,a){e&1&&(s(0,"h1",0),o(1,"\u30ED\u30B0\u30A4\u30F3\u60C5\u5831"),r(),f(2,"gitfire-login-input-auth",1),s(3,"div")(4,"a",2),o(5,"\u30A2\u30AB\u30A6\u30F3\u30C8\u3092\u4F5C\u6210\u3059\u308B"),r()(),s(6,"div")(7,"a",3),o(8,"\u30D1\u30B9\u30EF\u30FC\u30C9\u3092\u5FD8\u308C\u305F\u5834\u5408"),r()(),s(9,"div")(10,"a",4),o(11,"Top"),r()()),e&2&&(u(2),S("isLogin",!0))},dependencies:[F,w],encapsulation:2})};function Re(t,i){if(t&1){let e=I();_(0,"button",4),M("click",function(){v(e);let n=L();return E(n.remove())}),_(1,"span",5),o(2,"\xD7"),h()()}}var V=class t extends ne{constructor(e){super();this.localSession=e}ngOnInit(){p("CookieConfirmComponent.OnInit()")}onClickDeny(e){this.localSession.declineAccess(),this.remove()}onClickGrant(e){this.localSession.grantAccess(),this.remove()}static \u0275fac=function(a){return new(a||t)(m(T))};static \u0275cmp=l({type:t,selectors:[["ng-component"]],features:[Q],decls:12,vars:4,consts:[["aria-label","Close",1,"app-cookie-confirm-text","toast-close-button"],["role","alertdialog","aria-live","polite",1,"app-cookie-confirm-text"],["href","/policy.htm"],[1,"btn","btn-outline-primary",3,"click"],["aria-label","Close",1,"app-cookie-confirm-text","toast-close-button",3,"click"],["aria-hidden","true"]],template:function(a,n){if(a&1){let C=I();c(0,Re,3,0,"button",0),_(1,"div",1)(2,"p"),o(3,"\u5F53\u30B5\u30A4\u30C8\u3067\u306F\u5229\u7528\u8005\u306E\u5229\u4FBF\u6027\u306E\u305F\u3081\u306B\u30AF\u30C3\u30AD\u30FC (Cookies) \u3092\u4F7F\u7528\u3057\u307E\u3059\u3002\u8A73\u3057\u304F\u306F"),_(4,"a",2),o(5," [\u30D7\u30E9\u30A4\u30D0\u30B7\u30FC\u30DD\u30EA\u30B7\u30FC] "),h(),o(6,"\u3092\u3054\u89A7\u304F\u3060\u3055\u3044\u3002"),h(),_(7,"div")(8,"button",3),M("click",function(G){return v(C),E(n.onClickGrant(G))}),o(9,"\u8A31\u53EF\u3059\u308B"),h(),_(10,"button",3),M("click",function(G){return v(C),E(n.onClickDeny(G))}),o(11,"\u62D2\u5426\u3059\u308B"),h()()()}if(a&2){let C=n.options();d(C.closeButton?0:-1),u(),Y(C.messageClass),W("aria-label",n.message())}},styles:["[_nghost-%COMP%]{background:#eefef0;display:block}.app-cookie-confirm-text[_ngcontent-%COMP%]{color:#000}a[_ngcontent-%COMP%]:link{color:red}a[_ngcontent-%COMP%]:visited{color:#a00}a[_ngcontent-%COMP%]:hover{color:red}a[_ngcontent-%COMP%]:active{color:#ff8000}"]})};var b=class t{constructor(i,e){this.toastr=i;this.localSession=e}ngOnInit(){p("SignupComponent.OnInit()")}ngAfterViewInit(){this.maybeConfirm()}maybeConfirm(){if(!this.localSession.shouldConfirm())return;let i={toastComponent:V,disableTimeOut:!0,tapToDismiss:!1,preventDuplicates:!0};this.toastr.info(void 0,void 0,i)}static \u0275fac=function(e){return new(e||t)(m(B),m(T))};static \u0275cmp=l({type:t,selectors:[["gitfire-signup"]],decls:9,vars:1,consts:[[1,"h3","mb-3","fw-normal"],[3,"isSignup"],["routerLink","/Gitfire/login"],["routerLink","/"]],template:function(e,a){e&1&&(s(0,"h1",0),o(1,"\u30A2\u30AB\u30A6\u30F3\u30C8\u306E\u4F5C\u6210"),r(),f(2,"gitfire-login-input-auth",1),s(3,"div")(4,"a",2),o(5,"\u30ED\u30B0\u30A4\u30F3"),r()(),s(6,"div")(7,"a",3),o(8,"Top"),r()()),e&2&&(u(2),S("isSignup",!0))},dependencies:[F,w],encapsulation:2})};var ke=["resetForm"];function De(t,i){t&1&&(s(0,"div",9),o(1,"E \u30E1\u30FC\u30EB\u306F\u5FC5\u9808\u3067\u3059\u3002"),r())}function Ie(t,i){t&1&&(s(0,"div",9),o(1,"E \u30E1\u30FC\u30EB\u30A2\u30C9\u30EC\u30B9\u3092\u5165\u529B\u3057\u3066\u304F\u3060\u3055\u3044\u3002"),r())}function Ae(t,i){if(t&1&&(c(0,De,2,0,"div",9),c(1,Ie,2,0,"div",9)),t&2){L();let e=j(6);d(e.errors!=null&&e.errors.required?0:-1),u(),d(e.errors!=null&&e.errors.minlength?1:-1)}}var k=class t{constructor(i,e,a){this.auth=i;this.dialog=e;this.toastr=a}emailInput="";resetForm;ngOnInit(){p("ResetPasswordComponent.OnInit()")}onClickReset(i){this.dialog.createSimpleBuilder().setType(1).setSize(1).setTitle("\u78BA\u8A8D").setMessage(`\u30E1\u30FC\u30EB\u30A2\u30C9\u30EC\u30B9\u306F\u6B63\u3057\u3044\u3067\u3059\u304B\uFF1F ${this.emailInput}`).okButton(()=>{this.tryResetPassword(this.emailInput)}).cancelButton(()=>{}).open()}async tryResetPassword(i){try{await this.auth.sendPasswordResetEmail(i),this.toastr.info("\u30E1\u30FC\u30EB\u3092\u9001\u4FE1\u3057\u307E\u3057\u305F\u3002")}catch(e){ae("Error while sent reset mail",e);let a=e instanceof Error?e.message:"Unknown error";this.toastr.error("\u5931\u6557\u3057\u307E\u3057\u305F\u3002( ${errmsg} )")}}static \u0275fac=function(e){return new(e||t)(m(he),m(ve),m(B))};static \u0275cmp=l({type:t,selectors:[["gitfire-login-reset-password"]],viewQuery:function(e,a){if(e&1&&H(ke,5),e&2){let n;J(n=K())&&(a.resetForm=n.first)}},decls:19,vars:5,consts:[["resetForm",""],["email","ngModel"],[1,"row","p-3"],[1,"visually-hidden"],["autofocus","","type","email","name","email","placeholder","Email address","required","","autofill","","maxlength","1024","minlength","5",1,"form-control","col-8",3,"ngModelChange","ngModel"],[1,"btn","btn-warning",3,"click","disabled"],["routerLink","/"],["routerLink","/Gitfire/signup"],["routerLink","/Gitfire/login"],[1,"invalid-feedback"]],template:function(e,a){if(e&1){let n=I();s(0,"form",null,0)(2,"div",2)(3,"label",3),o(4,"Email"),r(),s(5,"input",4,1),te("ngModelChange",function(g){return v(n),ee(a.emailInput,g)||(a.emailInput=g),E(g)}),r(),s(7,"button",5),$("click",function(g){return v(n),E(a.onClickReset(g))}),o(8,"\u30D1\u30B9\u30EF\u30FC\u30C9\u30EA\u30BB\u30C3\u30C8"),r(),c(9,Ae,2,2),r()(),s(10,"div")(11,"a",6),o(12,"Top"),r()(),s(13,"div")(14,"a",7),o(15,"\u30A2\u30AB\u30A6\u30F3\u30C8\u3092\u4F5C\u6210\u3059\u308B"),r()(),s(16,"div")(17,"a",8),o(18,"\u30ED\u30B0\u30A4\u30F3"),r()()}if(e&2){let n=j(6);u(2),X("was-validated",n.dirty||n.touched),u(3),Z("ngModel",a.emailInput),u(2),S("disabled",!n.valid),u(2),d(n.invalid?9:-1)}},dependencies:[O,ce,se,me,ue,de,fe,Ce,pe,le,F],encapsulation:2})};function xe(t,i){t&1&&f(0,"gitfire-signup")}function Me(t,i){t&1&&f(0,"gitfire-login")}function Le(t,i){t&1&&f(0,"gitfire-login-reset-password")}var D=class t{constructor(i){this.route=i;this.mode=i.snapshot.data.mode}mode;ngOnInit(){p("LoginRouterComponent.OnInit()")}static \u0275fac=function(e){return new(e||t)(m(ie))};static \u0275cmp=l({type:t,selectors:[["ng-component"]],decls:3,vars:1,template:function(e,a){if(e&1&&c(0,xe,1,0,"gitfire-signup")(1,Me,1,0,"gitfire-login")(2,Le,1,0,"gitfire-login-reset-password"),e&2){let n;d((n=a.mode)==="signup"?0:n==="login"?1:n==="reset"?2:-1)}},dependencies:[b,y,k],encapsulation:2})};var Be=[{path:"",component:D}],N=class t{static \u0275fac=function(e){return new(e||t)};static \u0275mod=x({type:t});static \u0275inj=A({imports:[U.forChild(Be),U]})};var Fe=class t{constructor(){re("Dynamically loaded GitfireLoginModule")}static \u0275fac=function(e){return new(e||t)};static \u0275mod=x({type:t});static \u0275inj=A({providers:[Ee(()=>_e(q.firebaseConfig))],imports:[O,ge,N,Se.initializeApp(q.firebaseConfig),y,b,w,D,k]})};export{Fe as a};
