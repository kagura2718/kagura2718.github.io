"use strict";(self.webpackChunkKaguraGithubPages=self.webpackChunkKaguraGithubPages||[]).push([[257],{9935:(R,Z,o)=>{o.d(Z,{i:()=>P});var n=o(1180),e=o(9336),x=o(7398),t=o(2181),O=o(2032),s=o(6328),v=o(6699),M=o(7081),f=o(2096),y=o(6232),k=o(2459),C=o(553);class P{constructor(c){(0,n.Z)(this,"master",void 0),this.master=c}buildEvolutionForm(c,p){const _=c.raw,l=_.pokemonId;let h=l;"form"in _&&(h=`${h}:${_.form}`);const i={nodeId:h,key:h,label:l,stats:_.stats,type1:_.type};if(_.type2&&(i.type2=_.type2),p){h=`${h}:${p}`,i.key=h,i.nodeId=h,i.label=`${i.label}:${p}`,i.isMega=!0,i.isTemp=!0;const u=_.tempEvoOverrides.find(g=>g.tempEvoId===p);if(!u)throw new Error(`Unable find ${p} on ${h} settings.`);i.stats=u.stats,i.type1=u.typeOverride,"typeOverride2"in u?i.type2=u.typeOverride2:delete i.type2,i.megaBranch=p}return i}fetchEvolutionRoot$(c){return(0,f.of)(c).pipe((0,e.j)(_=>{const l=_.raw.pokemonId,h=_.raw.parentPokemonId;if(!h)return y.E;const i=_.raw.form,r=`${l}_NORMAL`;return this.master.fetchMasterJson(`pokemon/forms/${h}.json`).pipe((0,x.U)(u=>{for(const g of u){const a=g.raw.evolutionBranch;if(a){for(const T of a)if(T.evolution===l&&T.form===i)return g;if(!i)for(const T of a)if(T.evolution===l&&T.form===r)return g}}return(0,C.jG)(`Not found branches. id:${l} -> parent:${h}`),null}),(0,t.h)(u=>!!u))})).pipe((0,O.Z)())}_buildEvolutionTree(c,p){const _=c.raw.evolutionBranch,l=this.buildEvolutionForm(c,p);let h=null;!p&&_&&(h=(0,k.D)(_).pipe((0,s.b)(r=>{if("temporaryEvolution"in r)return(0,f.of)(this._buildEvolutionTree(c,r.temporaryEvolution));const u=r.evolution,g=r.form;return this.master.fetchMasterJson(`pokemon/forms/${u}.json`).pipe((0,x.U)(a=>{for(const T of a)if(!g&&!("form"in T.raw)||"form"in T.raw&&T.raw.form===g)return this._buildEvolutionTree(T);throw new Error(`Not found ${g} in ${u}`)}))}),(0,v.R)((r,u)=>[...r,u],[]),(0,O.Z)(),(0,M.d)(1)));const i={formJson:c,form:l};return null!==h&&(i.children$=h),i}buildEvolutionTree(c){return this._buildEvolutionTree(c)}}},2933:(R,Z,o)=>{o.d(Z,{l:()=>j});var n=o(1180),e=o(5879),x=o(553),t=o(9071),O=o(8645),s=o(2572),v=o(7398),M=o(3019),f=o(2181),y=o(9773),k=o(4664),C=o(3997),P=o(4154),E=o(3766),c=o(6814),p=o(5739),_=o(9515),l=o(2457),h=o(1143),i=o(5719);const r=["pokemonNameInput"];function u(A,U){if(1&A&&(e.TgZ(0,"option"),e._uU(1),e.qZA()),2&A){const I=U.$implicit;e.xp6(1),e.Oqu(I.raw.form||"")}}function g(A,U){if(1&A&&e._UZ(0,"app-pokemon-type",18),2&A){const I=e.oxw();e.Q6J("pokemonType",I.outputType2)("isDisplayName",!0)("isDisplayTitle",!0)("isType2",!0)}}function a(A,U){if(1&A){const I=e.EpF();e.TgZ(0,"div",19)(1,"label",20)(2,"input",21),e.NdJ("ngModelChange",function(d){e.CHM(I);const D=e.oxw();return e.KtG(D.inputIsAlola=d)}),e.qZA(),e.TgZ(3,"span",22),e._uU(4,"POKEMON.POKEMON_FORM_ALOLA"),e.qZA()()()}if(2&A){const I=e.oxw();e.xp6(2),e.Q6J("ngModel",I.inputIsAlola)}}function T(A,U){if(1&A){const I=e.EpF();e.TgZ(0,"div",23)(1,"label",20)(2,"input",21),e.NdJ("ngModelChange",function(d){e.CHM(I);const D=e.oxw();return e.KtG(D.inputIsGalarian=d)}),e.qZA(),e.TgZ(3,"span",22),e._uU(4,"POKEMON.POKEMON_FORM_GALARIAN"),e.qZA()()()}if(2&A){const I=e.oxw();e.xp6(2),e.Q6J("ngModel",I.inputIsGalarian)}}function $(A,U){if(1&A){const I=e.EpF();e.TgZ(0,"div",24)(1,"label",20)(2,"input",21),e.NdJ("ngModelChange",function(d){e.CHM(I);const D=e.oxw();return e.KtG(D.inputIsMega=d)}),e.qZA(),e.TgZ(3,"span",22),e._uU(4,"POKEMON.POKEMON_FORM_MEGA_EVOLUTION"),e.qZA()()()}if(2&A){const I=e.oxw();e.xp6(2),e.Q6J("ngModel",I.inputIsMega)}}function F(A,U){1&A&&(e.TgZ(0,"div",25)(1,"label",20),e._uU(2,"Other: "),e.qZA()())}const S=function(){return{theme:"bootstrap-5"}};let j=(()=>{var A;class U{constructor(m,d){(0,n.Z)(this,"master",void 0),(0,n.Z)(this,"translate",void 0),(0,n.Z)(this,"pokemonNameInput",void 0),(0,n.Z)(this,"destroy$",new O.x),(0,n.Z)(this,"level$",void 0),(0,n.Z)(this,"pokemonId$",new O.x),(0,n.Z)(this,"pokemonForm$",void 0),(0,n.Z)(this,"pokemonFormNullable$",void 0),(0,n.Z)(this,"pokemonFormId$",new O.x),(0,n.Z)(this,"idDatabase$",void 0),(0,n.Z)(this,"outputType1",null),(0,n.Z)(this,"outputType2",null),(0,n.Z)(this,"inputIsMega",void 0),(0,n.Z)(this,"inputHasMega",void 0),(0,n.Z)(this,"inputIsShadow",void 0),(0,n.Z)(this,"inputIsAlola",void 0),(0,n.Z)(this,"inputHasAlola",void 0),(0,n.Z)(this,"inputIsGalarian",void 0),(0,n.Z)(this,"inputHasGalarian",void 0),(0,n.Z)(this,"inputHasOtherForm",void 0),(0,n.Z)(this,"basenameSource$",void 0),(0,n.Z)(this,"pokemonSetting$",void 0),(0,n.Z)(this,"pokemonFormCombo$",void 0),(0,n.Z)(this,"pokemonFormComboDisabled$",void 0),(0,n.Z)(this,"basenameChanged$",new O.x),(0,n.Z)(this,"inputSelectedForm",void 0),(0,n.Z)(this,"validatedName",new e.vpe),(0,n.Z)(this,"valueChanged",new e.vpe),(0,n.Z)(this,"idChanged",new e.vpe),(0,n.Z)(this,"valueCleared",new e.vpe),(0,n.Z)(this,"selectedForm",new e.vpe),(0,n.Z)(this,"selectedRawForm",new e.vpe),this.master=m,this.translate=d,(0,x.eM)("TODO translate service?",d)}ngAfterViewInit(){}ngOnInit(){this.idDatabase$=this.master.basenameDatabase$,this.basenameSource$=(0,s.a)([this.master.pokemonTranslator$,this.master.pokemonConversion$,this.idDatabase$]).pipe((0,v.U)(([m,d,D])=>this.toBasenameSource(m,d,D))),this.pokemonSetting$=this.pokemonId$.pipe((0,k.w)(m=>this.master.fetchMasterJson(`pokemon/forms/${m}.json`).pipe())),this.pokemonFormCombo$=(0,M.T)(this.pokemonSetting$,this.valueCleared.pipe((0,v.U)(()=>[]))).pipe(),this.pokemonFormComboDisabled$=this.pokemonFormCombo$.pipe((0,v.U)(m=>m&&m.length<=1)),this.pokemonForm$=(0,s.a)([this.pokemonSetting$,this.pokemonFormId$]).pipe((0,v.U)(([m,d])=>{for(const D of m)if(d&&""!==d){if("form"in D.raw&&d===D.raw.form)return D}else if(!("form"in D.raw))return D;return(0,x.wb)(`Not matched formId ${d} on`,m),null}),(0,f.h)(m=>!!m)),this.pokemonForm$.pipe((0,C.x)(),(0,y.R)(this.destroy$)).subscribe(m=>{this.selectedRawForm.next(m)}),(0,s.a)([this.master.level$,this.pokemonForm$]).pipe((0,y.R)(this.destroy$)).subscribe(([m,d])=>{const D=new t.PokemonForm(m,d);this.selectedForm.next(D)}),this.pokemonId$.pipe((0,y.R)(this.destroy$)).subscribe(m=>{(0,x.eM)("Clearing current status checker",m),this.validatedName.next(m)}),this.basenameChanged$.pipe((0,k.w)(m=>this.idDatabase$.pipe((0,v.U)(d=>d.ids.includes(m)?m:null))),(0,y.R)(this.destroy$)).subscribe({next:m=>{m&&this.pokemonId$.next(m),this.pokemonFormId$.next(""),this.valueChanged.next()},error:m=>{(0,x.wb)("while get basename",m)}}),this.pokemonFormId$.pipe((0,y.R)(this.destroy$)).subscribe(m=>{this.valueChanged.next()}),this.pokemonFormNullable$=(0,M.T)(this.pokemonForm$,this.valueCleared.pipe((0,v.U)(()=>null))).pipe(),this.pokemonFormNullable$.pipe((0,y.R)(this.destroy$)).subscribe(m=>{if(!m)return this.outputType1=null,void(this.outputType2=null);this.outputType1=m.built.pokemonType,this.outputType2="number"==typeof m.built.pokemonType2?m.built.pokemonType2:null})}ngOnDestroy(){this.destroy$.next()}onChangeBasename(m){const d=m;this.basenameChanged$.next(d),this.idChanged.next(d&&""!==d?d:null),(!d||""===d)&&this.valueCleared.next()}toBasenameSource(m,d,D){const L=[];for(const W of D.ids){const K=d.table[W];if(!K){(0,x.jG)(`Not found pokemon:${K} in local database. Ignoring.`);continue}const b=m[K],N=this.translate.PRIMARY_LOCALE;let B;B="en"!==N?`${b[N]} (${K})`:b[N],L.push({id:W,text:B,additional:b})}return L}onChangeForm(m){this.pokemonFormId$.next(m||"")}onFocusPokemonName(m){(0,x.eM)("TODO event focust",m)}}return A=U,(0,n.Z)(U,"\u0275fac",function(m){return new(m||A)(e.Y36(P.m),e.Y36(E.xq))}),(0,n.Z)(U,"\u0275cmp",e.Xpm({type:A,selectors:[["app-pokemon-form"]],viewQuery:function(m,d){if(1&m&&e.Gf(r,5),2&m){let D;e.iGM(D=e.CRH())&&(d.pokemonNameInput=D.first)}},outputs:{validatedName:"validatedName",valueChanged:"valueChanged",idChanged:"idChanged",valueCleared:"valueCleared",selectedForm:"selectedForm",selectedRawForm:"selectedRawForm"},features:[e._Bn([])],decls:29,vars:31,consts:[[1,"form-group"],[1,"row","input-group","m-2",3,"title"],["translate","",1,"col-3","p-2","text-end"],[1,"col-8",3,"data","width","options","placeholder","allowClear","valueChanged","focus"],["pokemonNameInput",""],[1,"row","input-group","m-2"],[1,"col-8"],[1,"form-select",3,"ngModel","disabled","ngModelChange"],[4,"ngFor","ngForOf"],[1,"row","m-2"],[1,"col-3","text-center",3,"pokemonFormJson"],[1,"col-4","m-1"],[3,"pokemonType","isDisplayName","isDisplayTitle"],[3,"pokemonType","isDisplayName","isDisplayTitle","isType2",4,"ngIf"],["class","form-check","title","Pokemon has an Alola form.",4,"ngIf"],["class","form-check","title","Pokemon has an Galarian form.",4,"ngIf"],["class","form-check","title","Pokemon has a Mega evoluted form.",4,"ngIf"],["class","form-check","title","Pokemon has other form",4,"ngIf"],[3,"pokemonType","isDisplayName","isDisplayTitle","isType2"],["title","Pokemon has an Alola form.",1,"form-check"],[1,"form-check-label"],["type","checkbox",1,"form-check-input",3,"ngModel","ngModelChange"],["translate",""],["title","Pokemon has an Galarian form.",1,"form-check"],["title","Pokemon has a Mega evoluted form.",1,"form-check"],["title","Pokemon has other form",1,"form-check"]],template:function(m,d){1&m&&(e.TgZ(0,"div")(1,"div",0)(2,"div",1),e.ALo(3,"translate"),e.TgZ(4,"label",2),e._uU(5,"POKEMON.POKEMON_LABEL"),e.qZA(),e.TgZ(6,"ng-select2",3,4),e.NdJ("valueChanged",function(L){return d.onChangeBasename(L)})("focus",function(L){return d.onFocusPokemonName(L)}),e.ALo(8,"async"),e.ALo(9,"translate"),e.qZA()(),e.TgZ(10,"div",5)(11,"label",2),e._uU(12,"POKEMON.POKEMON_OTHER_FORMS"),e.qZA(),e.TgZ(13,"span",6)(14,"select",7),e.NdJ("ngModelChange",function(L){return d.onChangeForm(L)})("ngModelChange",function(L){return d.inputSelectedForm=L}),e.ALo(15,"async"),e.YNc(16,u,2,1,"option",8),e.ALo(17,"async"),e.qZA()()(),e.TgZ(18,"div",9),e._UZ(19,"app-pokemon-thumb",10),e.ALo(20,"async"),e.TgZ(21,"span",11),e._UZ(22,"app-pokemon-type",12),e.qZA(),e.TgZ(23,"span",11),e.YNc(24,g,1,4,"app-pokemon-type",13),e.qZA()(),e.YNc(25,a,5,1,"div",14),e.YNc(26,T,5,1,"div",15),e.YNc(27,$,5,1,"div",16),e.YNc(28,F,3,0,"div",17),e.qZA()()),2&m&&(e.xp6(2),e.s9C("title",e.lcZ(3,18,"POKEMON.TOOLTIP_POKEMON_SELECT2")),e.xp6(4),e.s9C("placeholder",e.lcZ(9,22,"POKEMON.POKEMON_SELECT2_PLACEHOLDER")),e.Q6J("data",e.lcZ(8,20,d.basenameSource$))("width","100%")("options",e.DdM(30,S))("allowClear",!0),e.xp6(8),e.Q6J("ngModel",d.inputSelectedForm)("disabled",e.lcZ(15,24,d.pokemonFormComboDisabled$)),e.xp6(2),e.Q6J("ngForOf",e.lcZ(17,26,d.pokemonFormCombo$)),e.xp6(3),e.Q6J("pokemonFormJson",e.lcZ(20,28,d.pokemonFormNullable$)),e.xp6(3),e.Q6J("pokemonType",d.outputType1)("isDisplayName",!0)("isDisplayTitle",!0),e.xp6(2),e.Q6J("ngIf",null!=d.outputType2),e.xp6(1),e.Q6J("ngIf",d.inputHasAlola),e.xp6(1),e.Q6J("ngIf",d.inputHasGalarian),e.xp6(1),e.Q6J("ngIf",d.inputHasMega),e.xp6(1),e.Q6J("ngIf",d.inputHasOtherForm))},dependencies:[c.sg,c.O5,p.YN,p.Kr,p.Wl,p.EJ,p.JJ,p.On,_.Pi,l.c,h.a,i.A,c.Ov,_.X$],styles:["[_nghost-%COMP%]{display:block}",".toolInputGroup[_ngcontent-%COMP%]{border:solid #eeeeee;border-radius:5px}.toolSmallText[_ngcontent-%COMP%]{font-size:.8em}.toolExtraSmallText[_ngcontent-%COMP%]{font-size:.5em}.appPokemonThumb[_ngcontent-%COMP%]{max-width:40px;max-height:40px}"]})),U})()},8377:(R,Z,o)=>{o.d(Z,{i:()=>P});var n=o(1180),e=o(7328),x=o(8645),t=o(5879),O=o(4154),s=o(6814),v=o(5719),M=o(9515);function f(E,c){if(1&E&&(t.TgZ(0,"span",11),t._uU(1,", "),t._UZ(2,"app-pokemon-type",12),t.ALo(3,"async"),t.qZA()),2&E){const p=t.oxw(2);t.xp6(2),t.Q6J("pokemonType",t.lcZ(3,2,p.pokemonType2$))("isDisplayName",!0)}}function y(E,c){if(1&E&&(t.TgZ(0,"div",10),t._uU(1),t.TgZ(2,"span",11),t._uU(3," ( "),t._UZ(4,"app-pokemon-type",12),t.ALo(5,"async"),t.qZA(),t.YNc(6,f,4,4,"span",13),t.ALo(7,"async"),t._uU(8," )"),t.qZA()),2&E){const p=t.oxw();t.xp6(1),t.Oqu(p.pokemonName),t.xp6(3),t.Q6J("pokemonType",t.lcZ(5,4,p.pokemonType$))("isDisplayName",!0),t.xp6(2),t.Q6J("ngIf",null!==t.lcZ(7,6,p.pokemonType2$))}}function k(E,c){if(1&E&&(t.TgZ(0,"span",4),t._uU(1),t.qZA()),2&E){const p=t.oxw();t.xp6(1),t.hij("SCP: ",p.status.SCP,"")}}function C(E,c){if(1&E&&(t.TgZ(0,"div")(1,"span"),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.TgZ(4,"span",5),t._uU(5),t.ALo(6,"translate"),t.ALo(7,"translate"),t.qZA()()),2&E){const p=c.ngIf;t.xp6(2),t.hij("",t.lcZ(3,5,"POKEMON.LABEL_UNLOCK")," "),t.xp6(3),t.HOy("",t.lcZ(6,7,"POKEMON.LABEL_STARDUST"),": ",p.requireStardust,"",t.lcZ(7,9,"POKEMON.LABEL_CANDY"),": ",p.requireCandy,"")}}let P=(()=>{var E;class c{constructor(_){(0,n.Z)(this,"master",void 0),(0,n.Z)(this,"status",void 0),(0,n.Z)(this,"pokemonName",null),(0,n.Z)(this,"pokemonType",null),(0,n.Z)(this,"pokemonType$",new e.t),(0,n.Z)(this,"pokemonType2",null),(0,n.Z)(this,"unlockCost",null),(0,n.Z)(this,"pokemonType2$",new e.t),(0,n.Z)(this,"destroy$",new x.x),this.master=_}ngOnInit(){}ngOnDestroy(){this.destroy$.next()}ngOnChanges(_){if("pokemonType"in _){const l=_.pokemonType.currentValue;"number"==typeof l&&this.pokemonType$.next(l)}if("pokemonType2"in _){const l=_.pokemonType2.currentValue;this.pokemonType2$.next("number"==typeof l?l:null)}}}return E=c,(0,n.Z)(c,"\u0275fac",function(_){return new(_||E)(t.Y36(O.m))}),(0,n.Z)(c,"\u0275cmp",t.Xpm({type:E,selectors:[["app-pokemon-status"]],inputs:{status:"status",pokemonName:"pokemonName",pokemonType:"pokemonType",pokemonType2:"pokemonType2",unlockCost:"unlockCost"},features:[t.TTD],decls:20,vars:20,consts:[[1,"card","m-1"],[1,"card-body"],["class","card-title",4,"ngIf"],[1,"card-text"],[1,"p-1","text-secondary"],[1,"p-1","text-primary"],["class","p-1 text-secondary",4,"ngIf"],[1,"p-1","text-info",3,"title"],[1,"p-1","text-secondary",3,"title"],[4,"ngIf"],[1,"card-title"],[1,"toolSmallText"],[3,"pokemonType","isDisplayName"],["class","toolSmallText",4,"ngIf"]],template:function(_,l){1&_&&(t.TgZ(0,"span",0)(1,"div",1),t.YNc(2,y,9,8,"div",2),t.TgZ(3,"div",3)(4,"div")(5,"span",4),t._uU(6),t.qZA(),t.TgZ(7,"span",5),t._uU(8),t.qZA(),t.YNc(9,k,2,1,"span",6),t.qZA(),t.TgZ(10,"div")(11,"span",7),t._uU(12),t.ALo(13,"number"),t.qZA(),t.TgZ(14,"span",7),t._uU(15),t.ALo(16,"number"),t.qZA(),t.TgZ(17,"span",8),t._uU(18),t.qZA()(),t.YNc(19,C,8,11,"div",9),t.qZA()()()),2&_&&(t.xp6(2),t.Q6J("ngIf",l.pokemonName),t.xp6(4),t.hij("CP: ",l.status.CP,""),t.xp6(2),t.hij("PL: ",l.status.PL,""),t.xp6(1),t.Q6J("ngIf",l.status.SCP),t.xp6(2),t.hYB("title","Raw: ",l.status.AP,"\nActual: ",l.status.ActualAP,""),t.xp6(1),t.hij("AP: ",t.xi3(13,14,l.status.AP,".5"),""),t.xp6(2),t.hYB("title","Raw: ",l.status.DP,"\nActual: ",l.status.ActualDP,""),t.xp6(1),t.hij("DP: ",t.xi3(16,17,l.status.DP,".5"),""),t.xp6(2),t.hYB("title","Raw: ",l.status.HP,"\nActual: ",l.status.ActualHP,""),t.xp6(1),t.hij("HP: ",l.status.HP,""),t.xp6(1),t.Q6J("ngIf",l.unlockCost))},dependencies:[s.O5,v.A,s.Ov,s.JJ,M.X$],styles:[".toolInputGroup[_ngcontent-%COMP%]{border:solid #eeeeee;border-radius:5px}.toolSmallText[_ngcontent-%COMP%]{font-size:.8em}.toolExtraSmallText[_ngcontent-%COMP%]{font-size:.5em}.appPokemonThumb[_ngcontent-%COMP%]{max-width:40px;max-height:40px}"]})),c})()},1143:(R,Z,o)=>{o.d(Z,{a:()=>_});var n=o(1180),e=o(7328),x=o(5619),t=o(8645),O=o(2572),s=o(3019),v=o(2181),M=o(4664),f=o(7398),y=o(3620),k=o(553),C=o(6570),P=o(5879),E=o(4154),c=o(6814);function p(l,h){if(1&l){const i=P.EpF();P.TgZ(0,"img",1),P.NdJ("error",function(){P.CHM(i);const u=P.oxw();return P.KtG(u.onErrorLoadImage())}),P.ALo(1,"async"),P.qZA()}if(2&l){const i=h.ngIf,r=P.oxw();P.Udp("height",r.size,"px")("width",r.size,"px"),P.s9C("src",i,P.LSH),P.MGl("alt","",P.lcZ(1,6,r.pokemonName$),"'s picture")}}let _=(()=>{var l;class h{constructor(r){(0,n.Z)(this,"master",void 0),(0,n.Z)(this,"pokemonFormJson",null),(0,n.Z)(this,"pokemonFormJson$",new e.t),(0,n.Z)(this,"size",null),(0,n.Z)(this,"opts",null),(0,n.Z)(this,"opts$",new x.X(null)),(0,n.Z)(this,"imageUrl$",void 0),(0,n.Z)(this,"pokemonName$",void 0),(0,n.Z)(this,"destroy$",new t.x),(0,n.Z)(this,"onErrorImage$",new t.x),this.master=r}onErrorLoadImage(){(0,k.wb)("PokemonThumbComponent.onErrorLoadImage()"),this.onErrorImage$.next()}ngOnInit(){const r=(0,O.a)([this.pokemonFormJson$,this.opts$]).pipe((0,v.h)(([a,T])=>!!a),(0,v.h)(a=>!0),(0,M.w)(([a,T])=>new C.g(a.built.pokedexNumber,this.master,T).dataURL$)),u=this.pokemonFormJson$.pipe((0,v.h)(a=>!a),(0,f.U)(()=>null),(0,y.b)(500)),g=this.onErrorImage$.pipe((0,f.U)(()=>this.master.getNoImageUrl()));this.imageUrl$=(0,s.T)(r,u,g),this.pokemonName$=this.pokemonFormJson$.pipe((0,v.h)(a=>!!a),(0,f.U)(a=>a.raw.pokemonId),(0,v.h)(a=>!!a),(0,M.w)(a=>this.master.readPokemonName(a)))}ngOnDestroy(){this.destroy$.next()}ngOnChanges(r){"opts"in r&&this.opts$.next(r.opts.currentValue),"pokemonFormJson"in r&&this.pokemonFormJson$.next(r.pokemonFormJson.currentValue)}}return l=h,(0,n.Z)(h,"\u0275fac",function(r){return new(r||l)(P.Y36(E.m))}),(0,n.Z)(h,"\u0275cmp",P.Xpm({type:l,selectors:[["app-pokemon-thumb"]],inputs:{pokemonFormJson:"pokemonFormJson",size:"size",opts:"opts"},features:[P.TTD],decls:2,vars:3,consts:[["class","img-fluid","style","max-height: 100%;",3,"height","width","src","alt","error",4,"ngIf"],[1,"img-fluid",2,"max-height","100%",3,"src","alt","error"]],template:function(r,u){1&r&&(P.YNc(0,p,2,8,"img",0),P.ALo(1,"async")),2&r&&P.Q6J("ngIf",P.lcZ(1,1,u.imageUrl$))},dependencies:[c.O5,c.Ov],styles:[".toolInputGroup[_ngcontent-%COMP%]{border:solid #eeeeee;border-radius:5px}.toolSmallText[_ngcontent-%COMP%]{font-size:.8em}.toolExtraSmallText[_ngcontent-%COMP%]{font-size:.5em}.appPokemonThumb[_ngcontent-%COMP%]{max-width:40px;max-height:40px}"]})),h})()},5719:(R,Z,o)=>{o.d(Z,{A:()=>p});var n=o(1180),e=o(7328),x=o(2181),t=o(4664),O=o(7398),s=o(5879),v=o(4154),M=o(3766),f=o(6814),y=o(9515);function k(_,l){1&_&&(s.TgZ(0,"span",3),s._uU(1,"POKEMON.POKEMON_ATTRIBUTE_TYPE1"),s.qZA())}function C(_,l){1&_&&(s.TgZ(0,"span",3),s._uU(1,"POKEMON.POKEMON_ATTRIBUTE_TYPE2"),s.qZA())}function P(_,l){if(1&_&&(s.ynx(0),s.YNc(1,k,2,0,"span",2),s.YNc(2,C,2,0,"span",2),s._uU(3,": "),s.BQk()),2&_){const h=s.oxw();s.xp6(1),s.Q6J("ngIf",!h.isType2),s.xp6(1),s.Q6J("ngIf",h.isType2)}}function E(_,l){if(1&_&&(s._UZ(0,"img",4),s.ALo(1,"async")),2&_){const h=l.ngIf,i=s.oxw();s.s9C("title",s.lcZ(1,2,i.typeName$)),s.s9C("src",h,s.LSH)}}function c(_,l){if(1&_&&(s.TgZ(0,"span"),s._uU(1),s.ALo(2,"async"),s.qZA()),2&_){const h=s.oxw();s.xp6(1),s.Oqu(s.lcZ(2,1,h.typeName$))}}let p=(()=>{var _;class l{constructor(i,r){(0,n.Z)(this,"master",void 0),(0,n.Z)(this,"translate",void 0),(0,n.Z)(this,"pokemonType",void 0),(0,n.Z)(this,"isDisplayName",!1),(0,n.Z)(this,"isDisplayTitle",!1),(0,n.Z)(this,"iconSize",void 0),(0,n.Z)(this,"isType2",!1),(0,n.Z)(this,"pokemonType$",new e.t),(0,n.Z)(this,"typeName$",void 0),(0,n.Z)(this,"iconUrl$",void 0),this.master=i,this.translate=r}ngOnInit(){const i=this.pokemonType$.pipe((0,x.h)(r=>null!==r));this.typeName$=i.pipe((0,t.w)(r=>this.master.readEnumTypeName$(r))),this.iconUrl$=i.pipe((0,O.U)(r=>this.master.getTypeIconUrl(r,this.iconSize)))}ngOnChanges(i){"pokemonType"in i&&this.pokemonType$.next(i.pokemonType.currentValue)}}return _=l,(0,n.Z)(l,"\u0275fac",function(i){return new(i||_)(s.Y36(v.m),s.Y36(M.xq))}),(0,n.Z)(l,"\u0275cmp",s.Xpm({type:_,selectors:[["app-pokemon-type"]],inputs:{pokemonType:"pokemonType",isDisplayName:"isDisplayName",isDisplayTitle:"isDisplayTitle",iconSize:"iconSize",isType2:"isType2"},features:[s.TTD],decls:4,vars:5,consts:[[4,"ngIf"],[3,"title","src",4,"ngIf"],["translate","",4,"ngIf"],["translate",""],[3,"title","src"]],template:function(i,r){1&i&&(s.YNc(0,P,4,2,"ng-container",0),s.YNc(1,E,2,4,"img",1),s.ALo(2,"async"),s.YNc(3,c,3,3,"span",0)),2&i&&(s.Q6J("ngIf",r.isDisplayTitle),s.xp6(1),s.Q6J("ngIf",s.lcZ(2,3,r.iconUrl$)),s.xp6(2),s.Q6J("ngIf",r.isDisplayName))},dependencies:[f.O5,y.Pi,f.Ov]})),l})()},8822:(R,Z,o)=>{o.d(Z,{k:()=>h});var n=o(1180),e=o(5879),x=o(8645),t=o(5619),O=o(2572),s=o(7398),v=o(9773),M=o(6814),f=o(5739),y=o(9515),k=o(8377);function C(i,r){1&i&&(e.TgZ(0,"div",17),e._uU(1,"Looks good"),e.qZA())}function P(i,r){1&i&&(e.TgZ(0,"div",18),e._uU(1,"Looks bad"),e.qZA())}function E(i,r){1&i&&(e.TgZ(0,"div",17),e._uU(1,"Looks good"),e.qZA())}function c(i,r){1&i&&(e.TgZ(0,"div",18),e._uU(1,"Looks bad"),e.qZA())}function p(i,r){1&i&&(e.TgZ(0,"span",19),e._uU(1,"POKEMON.STATUS_NOT_YET_KNOWN_LABEL"),e.qZA())}function _(i,r){1&i&&e._UZ(0,"app-pokemon-status",20),2&i&&e.Q6J("status",r.ngIf)}function l(i,r){if(1&i){const u=e.EpF();e.TgZ(0,"div",1)(1,"div",2)(2,"label",3),e._uU(3,"CP"),e.qZA(),e.TgZ(4,"span",4)(5,"input",5,6),e.NdJ("ngModelChange",function(a){const $=e.CHM(u).ngIf;return e.KtG($.CP=a)})("ngModelChange",function(a){e.CHM(u);const T=e.MAs(6),$=e.oxw();return e.KtG($.onChangeCP(T,a))}),e.qZA(),e.YNc(7,C,2,0,"div",7),e.YNc(8,P,2,0,"div",8),e.qZA(),e.TgZ(9,"label",9),e._uU(10,"HP"),e.qZA(),e.TgZ(11,"span",10)(12,"input",11,12),e.NdJ("ngModelChange",function(a){const $=e.CHM(u).ngIf;return e.KtG($.HP=a)})("ngModelChange",function(a){e.CHM(u);const T=e.MAs(13),$=e.oxw();return e.KtG($.onChangeHP(T,a))}),e.qZA(),e.YNc(14,E,2,0,"div",7),e.YNc(15,c,2,0,"div",8),e.qZA()(),e.TgZ(16,"div",13)(17,"span",14),e.YNc(18,p,2,0,"span",15),e.ALo(19,"async"),e.YNc(20,_,1,1,"app-pokemon-status",16),e.ALo(21,"async"),e.qZA()()()}if(2&i){const u=r.ngIf,g=e.MAs(6),a=e.MAs(13),T=e.oxw();e.xp6(5),e.ekj("is-valid",g.dirty&&u.isCPValid)("is-invalid",g.dirty&&!u.isCPValid),e.Q6J("disabled",T.disabled)("ngModel",u.CP),e.xp6(2),e.Q6J("ngIf",(g.dirty||g.touched)&&u.isCPValid),e.xp6(1),e.Q6J("ngIf",(g.dirty||g.touched)&&!u.isCPValid),e.xp6(4),e.ekj("is-valid",a.dirty&&u.isHPValid)("is-invalid",a.dirty&&!u.isHPValid),e.Q6J("disabled",T.disabled)("ngModel",u.HP),e.xp6(2),e.Q6J("ngIf",(a.dirty||a.touched)&&u.isHPValid),e.xp6(1),e.Q6J("ngIf",(a.dirty||a.touched)&&!u.isHPValid),e.xp6(3),e.Q6J("ngIf",!e.lcZ(19,18,T.currentStatus$)),e.xp6(2),e.Q6J("ngIf",e.lcZ(21,20,T.currentStatus$))}}let h=(()=>{var i;class r{constructor(){(0,n.Z)(this,"validatorResult",void 0),(0,n.Z)(this,"disabled",!1),(0,n.Z)(this,"currentStatus$",void 0),(0,n.Z)(this,"initialize",void 0),(0,n.Z)(this,"valueChanged",new e.vpe),(0,n.Z)(this,"destroy$",new x.x),(0,n.Z)(this,"inputStatus",{isCPValid:!1,isHPValid:!1}),(0,n.Z)(this,"inputStatus$",void 0),(0,n.Z)(this,"inputCP$",new x.x),(0,n.Z)(this,"inputHP$",new t.X(null))}ngOnDestroy(){this.destroy$.next()}ngOnInit(){this.inputStatus$=(0,O.a)([this.inputCP$,this.inputHP$]).pipe((0,s.U)(([a,T])=>({CP:a,HP:T})));let g=!1;this.inputStatus$.pipe((0,v.R)(this.destroy$)).subscribe(a=>{g||this.valueChanged.next(a)}),this.validatorResult.pipe((0,v.R)(this.destroy$)).subscribe(a=>{const T=this.inputStatus;T.isCPValid=a,T.isHPValid=a}),this.initialize.pipe((0,v.R)(this.destroy$)).subscribe(()=>{const a=this.inputStatus;delete a.CP,delete a.HP,a.isCPValid=!1,a.isHPValid=!1;try{g=!0,this.inputHP$.next(null),this.inputCP$.next(null)}finally{g=!1}a.controlCP&&a.controlCP.markAsPristine(),a.controlHP&&a.controlHP.markAsPristine()})}onChangeHP(g,a){this.inputStatus.controlHP=g.control,this.inputHP$.next(a)}onChangeCP(g,a){this.inputStatus.controlCP=g.control,this.inputCP$.next(a)}}return i=r,(0,n.Z)(r,"\u0275fac",function(g){return new(g||i)}),(0,n.Z)(r,"\u0275cmp",e.Xpm({type:i,selectors:[["app-pokemon-visible-status"]],inputs:{validatorResult:"validatorResult",disabled:"disabled",currentStatus$:"currentStatus$",initialize:"initialize"},outputs:{valueChanged:"valueChanged"},decls:1,vars:1,consts:[["class","form-group",4,"ngIf"],[1,"form-group"],[1,"row","input-group","m-2"],["title","Pokemon's CP",1,"col-1","form-check-label","p-2","text-end"],[1,"col-6"],["type","number","min","10","max","10000","name","currentCP",1,"form-control",3,"disabled","ngModel","ngModelChange"],["currentCP","ngModel"],["class","valid-feedback",4,"ngIf"],["class","invalid-feedback",4,"ngIf"],["title","Pokemon's HP",1,"col-1","form-check-label","p-2","text-end"],[1,"col-4"],["type","number","min","1","max","1000","name","currentHP",1,"form-control",3,"disabled","ngModel","ngModelChange"],["currentHP","ngModel"],[1,"row"],[1,"col-12"],["class","text-warning","translate","",4,"ngIf"],[3,"status",4,"ngIf"],[1,"valid-feedback"],[1,"invalid-feedback"],["translate","",1,"text-warning"],[3,"status"]],template:function(g,a){1&g&&e.YNc(0,l,22,22,"div",0),2&g&&e.Q6J("ngIf",a.inputStatus)},dependencies:[M.O5,f.Fj,f.wV,f.JJ,f.qQ,f.Fd,f.On,y.Pi,k.i,M.Ov],styles:["[_nghost-%COMP%]{display:block}"]})),r})()},6570:(R,Z,o)=>{o.d(Z,{g:()=>M});var n=o(1180),e=o(8645),x=o(7328),t=o(2572),O=o(3019),s=o(7398),v=o(553);class M{constructor(y,k,C,P){(0,n.Z)(this,"master",void 0),(0,n.Z)(this,"resizeOpts",void 0),(0,n.Z)(this,"dataURL$",void 0),(0,n.Z)(this,"image1$",new e.x),(0,n.Z)(this,"image2$",new x.t),this.master=k,this.resizeOpts=P;const E=new e.x,c=document.createElement("img"),p=document.createElement("img");c.src=this.master.getPokemonThumbUrl(y),c.crossOrigin="anonymous",c.onload=()=>{this.image1$.next(c)},c.onerror=l=>{(0,v.wb)(`Failed to load ${c.src}. `,l),P?.suppressNoImage?E.next():((0,v.wb)("Fallback to no image source."),c.src=this.master.getNoImageUrl())},C?.isShadow?(p.src=this.master.getThumbUrl("Shadow"),p.crossOrigin="anonymous",p.onload=()=>{this.image2$.next(p)}):C?.megaBranch?(p.src=this.master.getThumbUrl("Mega"),p.crossOrigin="anonymous",p.onload=()=>{this.image2$.next(p)}):this.image2$.next(null);const _=(0,t.a)([this.image1$,this.image2$]).pipe((0,s.U)(([l,h])=>this.composeImageUrl(l,h)));this.dataURL$=(0,O.T)(E.pipe((0,s.U)(()=>null)),_)}composeImageUrl(y,k){const C=document.createElement("canvas"),P=C.getContext("2d");if(null===P)throw new Error("No valid canvas 2d context");let E;if(this.resizeOpts){const _=this.resizeOpts;C.width=_.size||y.width,C.height=_.size||y.height,E=this.resizeOpts.overlayRate}else C.width=y.width,C.height=y.height;"number"!=typeof E&&(E=.3);const c=C.width*E,p=C.height*E;return P.drawImage(y,0,0,C.width,C.height),null!==k&&P.drawImage(k,C.width-c,C.height-p,c,p),C.toDataURL()}}},1479:(R,Z,o)=>{o.d(Z,{w:()=>x});var n=o(5592),e=o(6232);function x(t,O,s){if(null==O&&(O=t,t=0),O<=0)return e.E;const v=O+t;return new n.y(s?M=>{let f=t;return s.schedule(function(){f<v?(M.next(f++),this.schedule()):M.complete()})}:M=>{let f=t;for(;f<v&&!M.closed;)M.next(f++);M.complete()})}},9336:(R,Z,o)=>{o.d(Z,{j:()=>x});var n=o(9360),e=o(564);function x(t,O=1/0,s){return O=(O||0)<1?1/0:O,(0,n.e)((v,M)=>(0,e.p)(v,M,t,O,void 0,!0,s))}}}]);