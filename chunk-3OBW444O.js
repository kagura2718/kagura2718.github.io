import{Q as g,a,aa as i,d as f,ha as d,ja as l,na as p,oa as m,pa as b}from"./chunk-KNL377UP.js";function C(e){e||(e=i(l));let o=new a(t=>{if(e.destroyed){t.next();return}return e.onDestroy(t.next.bind(t))});return t=>t.pipe(g(o))}function O(e,o){let t=o?.injector??i(d),n=new f(1),u=m(()=>{let s;try{s=e()}catch(r){b(()=>n.error(r));return}b(()=>n.next(s))},{injector:t,manualCleanup:!0});return t.get(l).onDestroy(()=>{u.destroy(),n.complete()}),n.asObservable()}function S(e){e===void 0&&(e=i(d));let o=e.get(p);return t=>new a(n=>{let u=o.add(),s=!1;function r(){s||(u(),s=!0)}let v=t.subscribe({next:c=>{n.next(c),r()},complete:()=>{n.complete(),r()},error:c=>{n.error(c),r()}});return v.add(()=>{n.unsubscribe(),r()}),v})}export{C as a,O as b,S as c};
