import{c as oe}from"./chunk-EH3KOD6T.js";import{T as Z,U as X,Y,_ as J,a as P,aa as h,ba as Q,ca as ee,da as v,f as q,g as G,ha as te,j as S,jc as N,k as D,la as m,na as re,qa as O,ua as ne}from"./chunk-RKIVUD57.js";import{G as $,I as ce,O as F,S as ue,T as x,U as _,W as p,a as ie,g as M,t as se,x as ae}from"./chunk-242NDBMP.js";var be="firebase",Ie="11.10.0";p(be,Ie,"app");var I=new Z("ANGULARFIRE2_VERSION");function Re(e,t,r){if(t){if(t.length===1)return t[0];let i=t.filter(a=>a.app===r);if(i.length===1)return i[0]}return r.container.getProvider(e).getImmediate({optional:!0})}var pe=(e,t)=>{let r=t?[t]:_(),n=[];return r.forEach(o=>{o.container.getProvider(e).instances.forEach(a=>{n.includes(a)||n.push(a)})}),n},k=(function(e){return e[e.SILENT=0]="SILENT",e[e.WARN=1]="WARN",e[e.VERBOSE=2]="VERBOSE",e})(k||{}),le=N()&&typeof Zone<"u"?k.WARN:k.SILENT;var b=class{zone;delegate;constructor(t,r=G){this.zone=t,this.delegate=r}now(){return this.delegate.now()}schedule(t,r,n){let o=this.zone,i=function(a){o?o.runGuarded(()=>{t.apply(this,[a])}):t.apply(this,[a])};return this.delegate.schedule(i,r,n)}},R=(()=>{class e{outsideAngular;insideAngular;constructor(){let r=h(m);this.outsideAngular=r.runOutsideAngular(()=>new b(typeof Zone>"u"?void 0:Zone.current)),this.insideAngular=r.run(()=>new b(typeof Zone>"u"?void 0:Zone.current,q))}static \u0275fac=function(n){return new(n||e)};static \u0275prov=Y({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})(),de=!1;function ye(e,t){!de&&(le>k.SILENT||N())&&(de=!0,console.warn("Calling Firebase APIs outside of an Injection context may destabilize your application leading to subtle change-detection and hydration bugs. Find more at https://github.com/angular/angularfire/blob/main/docs/zones.md")),le>=t&&console.warn(`Firebase API called outside injection context: ${e.name}`)}function Ce(e){let t=h(m,{optional:!0});return t?t.runOutsideAngular(()=>e()):e()}function g(e){let t=h(m,{optional:!0});return t?t.run(()=>e()):e()}var Pe=(e,t,r)=>(...n)=>(t&&setTimeout(t,0),v(r,()=>g(()=>e.apply(void 0,n)))),z=(e,t,r)=>(r||=t?k.WARN:k.VERBOSE,function(){let n,o=arguments,i,a,u;try{i=h(R),a=h(re),u=h(ee)}catch{return ye(e,r),e.apply(this,o)}for(let s=0;s<arguments.length;s++)typeof o[s]=="function"&&(t&&(n||=g(()=>a.add())),o[s]=Pe(o[s],n,u));let c=Ce(()=>e.apply(this,o));return t?c instanceof P?c.pipe(D(i.outsideAngular),S(i.insideAngular),oe(u)):c instanceof Promise?g(()=>{let s=a.add();return new Promise((w,l)=>{c.then(C=>v(u,()=>g(()=>w(C))),C=>v(u,()=>g(()=>l(C)))).finally(s)})}):typeof c=="function"&&n?function(){return setTimeout(n,0),c.apply(this,arguments)}:g(()=>c):c instanceof P?c.pipe(D(i.outsideAngular),S(i.insideAngular)):g(()=>c)});var A=class{constructor(t){return t}},H=class{constructor(){return _()}};function Se(e){return e&&e.length===1?e[0]:new A(x())}var L=new J("angularfire2._apps"),De={provide:A,useFactory:Se,deps:[[new O,L]]},Oe={provide:H,deps:[[new O,L]]};function Ne(e){return(t,r)=>{let n=r.get(ne);p("angularfire",I.full,"core"),p("angularfire",I.full,"app"),p("angular",X.full,n.toString());let o=t.runOutsideAngular(()=>e(r));return new A(o)}}function yt(e,...t){return Q([De,Oe,{provide:L,useFactory:Ne(e),multi:!0,deps:[m,te,R,...t]}])}var Ct=z(ue,!0);var Me=new Map,$e={activated:!1,tokenObservers:[]},Fe={initialized:!1,enabled:!1};function d(e){return Me.get(e)||Object.assign({},$e)}function me(){return Fe}var xe="https://content-firebaseappcheck.googleapis.com/v1";var ze="exchangeDebugToken",fe={OFFSET_DURATION:300*1e3,RETRIAL_MIN_WAIT:30*1e3,RETRIAL_MAX_WAIT:960*1e3},Lt=1440*60*1e3;var K=class{constructor(t,r,n,o,i){if(this.operation=t,this.retryPolicy=r,this.getWaitDuration=n,this.lowerBound=o,this.upperBound=i,this.pending=null,this.nextErrorWaitInterval=o,o>i)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}async process(t){this.stop();try{this.pending=new M,this.pending.promise.catch(r=>{}),await He(this.getNextRun(t)),this.pending.resolve(),await this.pending.promise,this.pending=new M,this.pending.promise.catch(r=>{}),await this.operation(),this.pending.resolve(),await this.pending.promise,this.process(!0).catch(()=>{})}catch(r){this.retryPolicy(r)?this.process(!1).catch(()=>{}):this.stop()}}getNextRun(t){if(t)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{let r=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),r}}};function He(e){return new Promise(t=>{setTimeout(t,e)})}var Le={"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.","initial-throttle":"{$httpStatus} error. Attempts allowed again after {$time}",throttled:"Requests throttled due to previous {$httpStatus} error. Attempts allowed again after {$time}"},f=new ae("appCheck","AppCheck",Le);function ke(e){if(!d(e).activated)throw f.create("use-before-activation",{appName:e.name})}async function Ae({url:e,body:t},r){let n={"Content-Type":"application/json"},o=r.getImmediate({optional:!0});if(o){let l=await o.getHeartbeatsHeader();l&&(n["X-Firebase-Client"]=l)}let i={method:"POST",body:JSON.stringify(t),headers:n},a;try{a=await fetch(e,i)}catch(l){throw f.create("fetch-network-error",{originalErrorMessage:l?.message})}if(a.status!==200)throw f.create("fetch-status-error",{httpStatus:a.status});let u;try{u=await a.json()}catch(l){throw f.create("fetch-parse-error",{originalErrorMessage:l?.message})}let c=u.ttl.match(/^([\d.]+)(s)$/);if(!c||!c[2]||isNaN(Number(c[1])))throw f.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${u.ttl}`});let s=Number(c[1])*1e3,w=Date.now();return{token:u.token,expireTimeMillis:w+s,issuedAtTimeMillis:w}}function Ee(e,t){let{projectId:r,appId:n,apiKey:o}=e.options;return{url:`${xe}/projects/${r}/apps/${n}:${ze}?key=${o}`,body:{debug_token:t}}}var je="firebase-app-check-database",Be=1,W="firebase-app-check-store";var y=null;function Ke(){return y||(y=new Promise((e,t)=>{try{let r=indexedDB.open(je,Be);r.onsuccess=n=>{e(n.target.result)},r.onerror=n=>{var o;t(f.create("storage-open",{originalErrorMessage:(o=n.target.error)===null||o===void 0?void 0:o.message}))},r.onupgradeneeded=n=>{let o=n.target.result;n.oldVersion===0&&o.createObjectStore(W,{keyPath:"compositeKey"})}}catch(r){t(f.create("storage-open",{originalErrorMessage:r?.message}))}}),y)}function We(e,t){return Ve(Ue(e),t)}async function Ve(e,t){let n=(await Ke()).transaction(W,"readwrite"),i=n.objectStore(W).put({compositeKey:e,value:t});return new Promise((a,u)=>{i.onsuccess=c=>{a()},n.onerror=c=>{var s;u(f.create("storage-set",{originalErrorMessage:(s=c.target.error)===null||s===void 0?void 0:s.message}))}})}function Ue(e){return`${e.options.appId}-${e.name}`}var E=new ce("@firebase/app-check");function j(e,t){return se()?We(e,t).catch(r=>{E.warn(`Failed to write token to IndexedDB. Error: ${r}`)}):Promise.resolve()}function Te(){return me().enabled}async function we(){let e=me();if(e.enabled&&e.token)return e.token.promise;throw Error(`
            Can't get debug token in production mode.
        `)}var qe={error:"UNKNOWN_ERROR"};function Ge(e){return ie.encodeString(JSON.stringify(e),!1)}async function V(e,t=!1,r=!1){let n=e.app;ke(n);let o=d(n),i=o.token,a;if(i&&!T(i)&&(o.token=void 0,i=void 0),!i){let s=await o.cachedTokenPromise;s&&(T(s)?i=s:await j(n,void 0))}if(!t&&i&&T(i))return{token:i.token};let u=!1;if(Te())try{o.exchangeTokenPromise||(o.exchangeTokenPromise=Ae(Ee(n,await we()),e.heartbeatServiceProvider).finally(()=>{o.exchangeTokenPromise=void 0}),u=!0);let s=await o.exchangeTokenPromise;return await j(n,s),o.token=s,{token:s.token}}catch(s){return s.code==="appCheck/throttled"||s.code==="appCheck/initial-throttle"?E.warn(s.message):r&&E.error(s),B(s)}try{o.exchangeTokenPromise||(o.exchangeTokenPromise=o.provider.getToken().finally(()=>{o.exchangeTokenPromise=void 0}),u=!0),i=await d(n).exchangeTokenPromise}catch(s){s.code==="appCheck/throttled"||s.code==="appCheck/initial-throttle"?E.warn(s.message):r&&E.error(s),a=s}let c;return i?a?T(i)?c={token:i.token,internalError:a}:c=B(a):(c={token:i.token},o.token=i,await j(n,i)):c=B(a),u&&Je(n,c),c}async function Ze(e){let t=e.app;ke(t);let{provider:r}=d(t);if(Te()){let n=await we(),{token:o}=await Ae(Ee(t,n),e.heartbeatServiceProvider);return{token:o}}else{let{token:n}=await r.getToken();return{token:n}}}function Xe(e,t,r,n){let{app:o}=e,i=d(o),a={next:r,error:n,type:t};if(i.tokenObservers=[...i.tokenObservers,a],i.token&&T(i.token)){let u=i.token;Promise.resolve().then(()=>{r({token:u.token}),he(e)}).catch(()=>{})}i.cachedTokenPromise.then(()=>he(e))}function ve(e,t){let r=d(e),n=r.tokenObservers.filter(o=>o.next!==t);n.length===0&&r.tokenRefresher&&r.tokenRefresher.isRunning()&&r.tokenRefresher.stop(),r.tokenObservers=n}function he(e){let{app:t}=e,r=d(t),n=r.tokenRefresher;n||(n=Ye(e),r.tokenRefresher=n),!n.isRunning()&&r.isTokenAutoRefreshEnabled&&n.start()}function Ye(e){let{app:t}=e;return new K(async()=>{let r=d(t),n;if(r.token?n=await V(e,!0):n=await V(e),n.error)throw n.error;if(n.internalError)throw n.internalError},()=>!0,()=>{let r=d(t);if(r.token){let n=r.token.issuedAtTimeMillis+(r.token.expireTimeMillis-r.token.issuedAtTimeMillis)*.5+3e5,o=r.token.expireTimeMillis-300*1e3;return n=Math.min(n,o),Math.max(0,n-Date.now())}else return 0},fe.RETRIAL_MIN_WAIT,fe.RETRIAL_MAX_WAIT)}function Je(e,t){let r=d(e).tokenObservers;for(let n of r)try{n.type==="EXTERNAL"&&t.error!=null?n.error(t.error):n.next(t)}catch{}}function T(e){return e.expireTimeMillis-Date.now()>0}function B(e){return{token:Ge(qe),error:e}}var U=class{constructor(t,r){this.app=t,this.heartbeatServiceProvider=r}_delete(){let{tokenObservers:t}=d(this.app);for(let r of t)ve(this.app,r.next);return Promise.resolve()}};function Qe(e,t){return new U(e,t)}function et(e){return{getToken:t=>V(e,t),getLimitedUseToken:()=>Ze(e),addTokenListener:t=>Xe(e,"INTERNAL",t),removeTokenListener:t=>ve(e.app,t)}}var tt="@firebase/app-check",rt="0.10.1";var nt="app-check",ge="app-check-internal";function ot(){F(new $(nt,e=>{let t=e.getProvider("app").getImmediate(),r=e.getProvider("heartbeat");return Qe(t,r)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider(ge).initialize()})),F(new $(ge,e=>{let t=e.getProvider("app-check").getImmediate();return et(t)},"PUBLIC").setInstantiationMode("EXPLICIT")),p(tt,rt)}ot();var it="app-check";var _e=class{constructor(){return pe(it)}};var st=["localhost","0.0.0.0","127.0.0.1"],Jt=typeof window<"u"&&st.includes(window.location.hostname);export{I as a,Re as b,pe as c,R as d,z as e,A as f,H as g,yt as h,Ct as i,_e as j};
