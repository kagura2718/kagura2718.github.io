(self.webpackChunkKaguraGithubPages=self.webpackChunkKaguraGithubPages||[]).push([[682],{1356:(et,H,S)=>{!function(B){"use strict";var r=B.S2={L:{}};r.L.LatLng=function(e,n,a){var s=parseFloat(e,10),c=parseFloat(n,10);if(isNaN(s)||isNaN(c))throw new Error("Invalid LatLng object: ("+e+", "+n+")");return!0!==a&&(s=Math.max(Math.min(s,90),-90),c=(c+180)%360+(c<-180||180===c?180:-180)),{lat:s,lng:c}},r.L.LatLng.DEG_TO_RAD=Math.PI/180,r.L.LatLng.RAD_TO_DEG=180/Math.PI,r.LatLngToXYZ=function(e){var n=r.L.LatLng.DEG_TO_RAD,a=e.lat*n,s=e.lng*n,c=Math.cos(a);return[Math.cos(s)*c,Math.sin(s)*c,Math.sin(a)]},r.XYZToLatLng=function(e){var n=r.L.LatLng.RAD_TO_DEG,a=Math.atan2(e[2],Math.sqrt(e[0]*e[0]+e[1]*e[1])),s=Math.atan2(e[1],e[0]);return r.L.LatLng(a*n,s*n)},r.XYZToFaceUV=function(e){var n=function(e){var n=[Math.abs(e[0]),Math.abs(e[1]),Math.abs(e[2])];return n[0]>n[1]?n[0]>n[2]?0:2:n[1]>n[2]?1:2}(e);e[n]<0&&(n+=3);var a=function(e,n){var a,s;switch(e){case 0:a=n[1]/n[0],s=n[2]/n[0];break;case 1:a=-n[0]/n[1],s=n[2]/n[1];break;case 2:a=-n[0]/n[2],s=-n[1]/n[2];break;case 3:a=n[2]/n[0],s=n[1]/n[0];break;case 4:a=n[2]/n[1],s=-n[0]/n[1];break;case 5:a=-n[1]/n[2],s=-n[0]/n[2];break;default:throw{error:"Invalid face"}}return[a,s]}(n,e);return[n,a]},r.FaceUVToXYZ=function(e,n){var a=n[0],s=n[1];switch(e){case 0:return[1,a,s];case 1:return[-a,1,s];case 2:return[-a,-s,1];case 3:return[-1,-s,-a];case 4:return[s,-1,-a];case 5:return[s,a,-1];default:throw{error:"Invalid face"}}};var J=function(e){return e>=.5?1/3*(4*e*e-1):1/3*(1-4*(1-e)*(1-e))};r.STToUV=function(e){return[J(e[0]),J(e[1])]};var W=function(e){return e>=0?.5*Math.sqrt(1+3*e):1-.5*Math.sqrt(1-3*e)};r.UVToST=function(e){return[W(e[0]),W(e[1])]},r.STToIJ=function(e,n){var a=1<<n,s=function(c){var p=Math.floor(c*a);return Math.max(0,Math.min(a-1,p))};return[s(e[0]),s(e[1])]},r.IJToST=function(e,n,a){var s=1<<n;return[(e[0]+a[0])/s,(e[1]+a[1])/s]};var X=function(e,n,a,s){if(0==s){1==a&&(n.x=e-1-n.x,n.y=e-1-n.y);var m=n.x;n.x=n.y,n.y=m}},P=function(e,n,a,s){var c={a:[[0,"d"],[1,"a"],[3,"b"],[2,"a"]],b:[[2,"b"],[1,"b"],[3,"a"],[0,"c"]],c:[[2,"c"],[3,"d"],[1,"c"],[0,"b"]],d:[[0,"a"],[3,"c"],[1,"d"],[2,"d"]]};"number"!=typeof s&&console.warn(new Error("called pointToHilbertQuadList without face value, defaulting to '0'").stack);for(var p=s%2?"d":"a",m=[],T=a-1;T>=0;T--){var b=1<<T,N=c[p][2*(e&b?1:0)+(n&b?1:0)];m.push(N[0]),p=N[1]}return m};r.S2Cell=function(){},r.S2Cell.FromHilbertQuadKey=function(e){var m,T,b,M,v,N,n=e.split("/"),a=parseInt(n[0]),s=n[1],c=s.length,p={x:0,y:0};for(m=c-1;m>=0;m--)T=c-m,M=0,v=0,"1"===(b=s[m])?v=1:"2"===b?(M=1,v=1):"3"===b&&(M=1),N=Math.pow(2,T-1),X(N,p,M,v),p.x+=N*M,p.y+=N*v;if(a%2==1){var V=p.x;p.x=p.y,p.y=V}return r.S2Cell.FromFaceIJ(parseInt(a),[p.x,p.y],T)},r.S2Cell.FromLatLng=function(e,n){if(!e.lat&&0!==e.lat||!e.lng&&0!==e.lng)throw new Error("Pass { lat: lat, lng: lng } to S2.S2Cell.FromLatLng");var a=r.LatLngToXYZ(e),s=r.XYZToFaceUV(a),c=r.UVToST(s[1]),p=r.STToIJ(c,n);return r.S2Cell.FromFaceIJ(s[0],p,n)},r.S2Cell.FromFaceIJ=function(e,n,a){var s=new r.S2Cell;return s.face=e,s.ij=n,s.level=a,s},r.S2Cell.prototype.toString=function(){return"F"+this.face+"ij["+this.ij[0]+","+this.ij[1]+"]@"+this.level},r.S2Cell.prototype.getLatLng=function(){var e=r.IJToST(this.ij,this.level,[.5,.5]),n=r.STToUV(e),a=r.FaceUVToXYZ(this.face,n);return r.XYZToLatLng(a)},r.S2Cell.prototype.getCornerLatLngs=function(){for(var e=[],n=[[0,0],[0,1],[1,1],[1,0]],a=0;a<4;a++){var s=r.IJToST(this.ij,this.level,n[a]),c=r.STToUV(s),p=r.FaceUVToXYZ(this.face,c);e.push(r.XYZToLatLng(p))}return e},r.S2Cell.prototype.getFaceAndQuads=function(){var e=P(this.ij[0],this.ij[1],this.level,this.face);return[this.face,e]},r.S2Cell.prototype.toHilbertQuadkey=function(){var e=P(this.ij[0],this.ij[1],this.level,this.face);return this.face.toString(10)+"/"+e.join("")},r.latLngToNeighborKeys=r.S2Cell.latLngToNeighborKeys=function(e,n,a){return r.S2Cell.FromLatLng({lat:e,lng:n},a).getNeighbors().map(function(s){return s.toHilbertQuadkey()})},r.S2Cell.prototype.getNeighbors=function(){var e=function(p,m,T){var b=1<<T;if(m[0]>=0&&m[1]>=0&&m[0]<b&&m[1]<b)return r.S2Cell.FromFaceIJ(p,m,T);var M=r.IJToST(m,T,[.5,.5]),v=r.STToUV(M),N=r.FaceUVToXYZ(p,v),V=r.XYZToFaceUV(N);return p=V[0],M=r.UVToST(v=V[1]),m=r.STToIJ(M,T),r.S2Cell.FromFaceIJ(p,m,T)},n=this.face,a=this.ij[0],s=this.ij[1],c=this.level;return[e(n,[a-1,s],c),e(n,[a,s-1],c),e(n,[a+1,s],c),e(n,[a,s+1],c)]},r.FACE_BITS=3,r.MAX_LEVEL=30,r.POS_BITS=2*r.MAX_LEVEL+1,r.facePosLevelToId=r.S2Cell.facePosLevelToId=r.fromFacePosLevel=function(e,n,a){var c,p,m,s=B.dcodeIO&&B.dcodeIO.Long||S(5853);for(a||(a=n.length),n.length>a&&(n=n.substr(0,a)),c=s.fromString(e.toString(10),!0,10).toString(2);c.length<r.FACE_BITS;)c="0"+c;for(p=s.fromString(n,!0,4).toString(2);p.length<2*a;)p="0"+p;for(m=c+p,m+="1";m.length<r.FACE_BITS+r.POS_BITS;)m+="0";return s.fromString(m,!0,2).toString(10)},r.keyToId=r.S2Cell.keyToId=r.toId=r.toCellId=r.fromKey=function(e){var n=e.split("/");return r.fromFacePosLevel(n[0],n[1],n[1].length)},r.idToKey=r.S2Cell.idToKey=r.S2Cell.toKey=r.toKey=r.fromId=r.fromCellId=r.S2Cell.toHilbertQuadkey=r.toHilbertQuadkey=function(e){for(var n=B.dcodeIO&&B.dcodeIO.Long||S(5853),a=n.fromString(e,!0,10).toString(2);a.length<r.FACE_BITS+r.POS_BITS;)a="0"+a;for(var s=a.lastIndexOf("1"),c=a.substring(0,3),p=a.substring(3,s),m=p.length/2,T=n.fromString(c,!0,2).toString(10),b=n.fromString(p,!0,2).toString(4);b.length<m;)b="0"+b;return T+"/"+b},r.keyToLatLng=r.S2Cell.keyToLatLng=function(e){return r.S2Cell.FromHilbertQuadKey(e).getLatLng()},r.idToLatLng=r.S2Cell.idToLatLng=function(e){var n=r.idToKey(e);return r.keyToLatLng(n)},r.S2Cell.latLngToKey=r.latLngToKey=r.latLngToQuadkey=function(e,n,a){if(isNaN(a)||a<1||a>30)throw new Error("'level' is not a number between 1 and 30 (but it should be)");return r.S2Cell.FromLatLng({lat:e,lng:n},a).toHilbertQuadkey()},r.stepKey=function(e,n){var b,a=B.dcodeIO&&B.dcodeIO.Long||S(5853),s=e.split("/"),c=s[0],m=s[1].length,T=a.fromString(s[1],!0,4);n>0?b=T.add(Math.abs(n)):n<0&&(b=T.subtract(Math.abs(n)));var M=b.toString(4);for("0"===M&&console.warning(new Error("face/position wrapping is not yet supported"));M.length<m;)M="0"+M;return c+"/"+M},r.S2Cell.prevKey=r.prevKey=function(e){return r.stepKey(e,-1)},r.S2Cell.nextKey=r.nextKey=function(e){return r.stepKey(e,1)}}(et.exports)},5682:(et,H,S)=>{"use strict";S.r(H),S.d(H,{S2mapModule:()=>$});var B=S(2200),r=S(9417),L=S(8132),E=S(467),J=S(1356),W=S(8018);const P=f=>{var j,h,g,d="The Google Maps JavaScript API",_="google",I="importLibrary",K="__ib__",Z=document,k=window,nt=k[_]||(k[_]={}),Y=nt.maps||(nt.maps={}),rt=new Set,tt=new URLSearchParams,st=()=>j||(j=new Promise(function(){var it=(0,E.A)(function*(ot,at){for(g in yield h=Z.createElement("script"),tt.set("libraries",[...rt]+""),f)tt.set(g.replace(/[A-Z]/g,lt=>"_"+lt[0].toLowerCase()),f[g]);tt.set("callback",_+".maps."+K),function X(f,j){f.src=j}(h,"https://maps.googleapis.com/maps/api/js?"+tt),Y[K]=ot,h.onerror=()=>j=at(Error(d+" could not load.")),h.nonce=Z.querySelector("script[nonce]")?.nonce||"",Z.head.append(h)});return function(ot,at){return it.apply(this,arguments)}}()));Y[I]?console.warn(d+" only loads once. Ignoring:",f):Y[I]=(it,...ot)=>rt.add(it)&&st().then(()=>Y[I](it,...ot))};let v=!1;function Q(){return(Q=(0,E.A)(function*(f){if(!window?.google?.maps?.importLibrary)throw new Error("google.maps.importLibrary is not installed.");return yield google.maps.importLibrary(f)})).apply(this,arguments)}var G=S(5312),z=S(6977),U=S(152),l=S(4412),i=S(1413),t=S(4572),u=S(1217),o=S(3664),F=S(1639),w=S(8001);function O(f,j){if(1&f&&(o.j41(0,"span"),o.EFF(1),o.k0s()),2&f){const h=o.XpG();o.R7$(),o.SpI("Zoom: ",h.mapZoomLevel)}}let x=(()=>{class f{translate;http;cellMainScales={};cellSubScales={};googleMap;S2LEVEL_MAX=20;S2LevelRange=[1,this.S2LEVEL_MAX];S2LevelSubScaleMax=3;inputS2Level=1;inputS2LevelSubScale=0;inputS2Level$=new l.t(this.inputS2Level);inputS2LevelSubScale$=new l.t(this.inputS2LevelSubScale);mapBounds$=new i.B;isDeveloper=!G.cA.production;mapZoomLevel;destroy$=new i.B;constructor(h,g){this.translate=h,this.http=g}ngOnInit(){var h=this;return(0,E.A)(function*(){!function N(f){v?(f=>{JSON.stringify(f)})(f):(function q(f){const j=!!window.google?.maps?.importLibrary;j&&(f=>{JSON.stringify(f)})(f),j||P(f)}(f),v=!0)}({key:G.cA.googleMapApiKey,v:"weekly"});const{Place:g}=yield function V(f){return Q.apply(this,arguments)}("places");(0,G.C_)("Google API loaded",g);const d={center:{lat:G.cA.MapDefaultLocation.lat,lng:G.cA.MapDefaultLocation.lng},zoom:7},_=document.getElementById("toolsS2MapMain");h.googleMap=new google.maps.Map(_,d),h.googleMap.addListener("bounds_changed",h.onMapBoundsChanged.bind(h)),(0,t.z)([h.inputS2Level$,h.mapBounds$]).pipe((0,z.Q)(h.destroy$)).subscribe(([I,K])=>{const Z=h.googleMap.getZoom();"number"==typeof Z?(h.S2LevelRange=h.getZoomLevelS2Range(Z),h.S2LevelSubScaleMax=Math.min(Math.max(h.S2LEVEL_MAX-I,0),3),h.drawMainScales(I,K)):(0,G.sJ)("Unexpectedly failed to get zoom",Z)}),(0,t.z)([h.inputS2Level$,h.inputS2LevelSubScale$,h.mapBounds$]).pipe((0,U.B)(100),(0,z.Q)(h.destroy$)).subscribe(([I,K,Z])=>{h.drawSubScales(I+K,Z)})})()}ngOnDestroy(){this.destroy$.next()}onChangeLevel(h){this.inputS2Level$.next(h)}clearScales(h){for(const g in h)h[g].setMap(null),delete h[g]}drawSubScales(h,g){this.clearScales(this.cellSubScales);const d=this.googleMap.getCenter();if(!d)return void(0,G.sJ)("Unexpectedly failed to get map center");const _=this.toS2Cell(d,h);this.drawWithNeighbors(this.cellSubScales,g,_,.3)}drawMainScales(h,g){this.clearScales(this.cellMainScales);const d=this.googleMap.getCenter();if(!d)return;const _=this.toS2Cell(d,h);this.drawWithNeighbors(this.cellMainScales,g,_)}drawWithNeighbors(h,g,d,_=1){const I=this.toGoogleBounds(d);if(!g.intersects(I))return;const K=d.toHilbertQuadkey();if(K in h)return;const Z=d.getCornerLatLngs(),k=Z.map(Y=>this.toGoogleLatLng(Y));k.push(this.toGoogleLatLng(Z[0]));const nt=new google.maps.Polyline({path:k,geodesic:!0,strokeColor:"#FF0000",strokeOpacity:.8*_,strokeWeight:1*_,map:this.googleMap});h[K]=nt;for(const Y of d.getNeighbors()){const rt=Y.getLatLng();new google.maps.LatLng(this.toGoogleLatLng(rt)),this.drawWithNeighbors(h,g,Y,_)}}toS2Cell(h,g){return J.S2.S2Cell.FromLatLng({lat:h.lat(),lng:h.lng()},g)}toGoogleBounds(h){const g=h.getCornerLatLngs();return new google.maps.LatLngBounds(g[0],g[1]).extend(g[2]).extend(g[3])}toGoogleLatLng(h){return{lat:h.lat,lng:h.lng}}onMapBoundsChanged(){const h=this.googleMap.getZoom();if(!h)return;this.mapZoomLevel=h;const g=this.getZoomLevelS2Range(h);if(this.inputS2Level<g[0]||g[1]<this.inputS2Level){const _=this.clamp(this.inputS2Level,g[0],g[1]);this.inputS2Level=_,this.inputS2Level$.next(_)}const d=this.googleMap.getBounds();d?this.mapBounds$.next(d):(0,G.sJ)("Unexpectedly failed to get bounds.")}clamp(h,g,d){return Math.trunc(Math.min(d,Math.max(g,h)))}getZoomLevelS2Range(h){const g=this.clamp(Math.trunc(h),0,22),d=[{min:1,max:3},{min:1,max:6},{min:1,max:7},{min:1,max:7},{min:1,max:8},{min:1,max:8},{min:1,max:9},{min:1,max:9},{min:1,max:10},{min:1,max:11},{min:1,max:12},{min:1,max:12},{min:1,max:13},{min:1,max:13},{min:1,max:14},{min:8,max:15},{min:8,max:16},{min:9,max:17},{min:9,max:18},{min:10,max:19},{min:10,max:this.S2LEVEL_MAX},{min:11,max:this.S2LEVEL_MAX},{min:12,max:this.S2LEVEL_MAX}];return[d[g].min,d[g].max]}onChangeSubScale(h){this.inputS2LevelSubScale$.next(h)}static \u0275fac=function(g){return new(g||f)(o.rXU(F.EY),o.rXU(w.kl))};static \u0275cmp=o.VBU({type:f,selectors:[["app-s2-map"]],decls:18,vars:25,consts:[["id","toolsS2MapMain",2,"width","100%","height","600px"],[4,"ngIf"],[1,"form-group","m-2"],[1,"input-group","row","m-2"],[1,"col-1","form-check-label","p-2","text-end",3,"title"],[1,"col-2"],["type","number",1,"form-control",3,"ngModelChange","min","max","ngModel"],["fill","#7878dd","src","/assets/octicons/question.svg",1,"col-1",3,"title"]],template:function(g,d){1&g&&(o.nrm(0,"div",0),o.DNE(1,O,2,1,"span",1),o.j41(2,"div",2)(3,"div",3)(4,"label",4),o.nI1(5,"translate"),o.EFF(6),o.nI1(7,"translate"),o.k0s(),o.j41(8,"span",5)(9,"input",6),o.mxI("ngModelChange",function(I){return o.DH7(d.inputS2Level,I)||(d.inputS2Level=I),I}),o.bIt("ngModelChange",function(I){return d.onChangeLevel(I)}),o.k0s()(),o.j41(10,"label",4),o.nI1(11,"translate"),o.EFF(12),o.nI1(13,"translate"),o.k0s(),o.j41(14,"span",5)(15,"input",6),o.mxI("ngModelChange",function(I){return o.DH7(d.inputS2LevelSubScale,I)||(d.inputS2LevelSubScale=I),I}),o.bIt("ngModelChange",function(I){return d.onChangeSubScale(I)}),o.k0s()(),o.nrm(16,"app-inline-svg",7),o.nI1(17,"translate"),o.k0s()()),2&g&&(o.R7$(),o.Y8G("ngIf",d.isDeveloper),o.R7$(3),o.Y8G("title",o.mNQ(o.bMT(5,15,"TOOLTIP_S2_CELL_LEVEL"))),o.R7$(2),o.JRh(o.bMT(7,17,"LABEL_S2_CELL_LEVEL")),o.R7$(3),o.Y8G("min",d.S2LevelRange[0])("max",d.S2LevelRange[1]),o.R50("ngModel",d.inputS2Level),o.R7$(),o.Y8G("title",o.mNQ(o.bMT(11,19,"TOOLTIP_S2_CELL_SUB_SCALE"))),o.R7$(2),o.JRh(o.bMT(13,21,"LABEL_S2_CELL_SUB_SCALES")),o.R7$(3),o.Y8G("min",0)("max",d.S2LevelSubScaleMax),o.R50("ngModel",d.inputS2LevelSubScale),o.R7$(),o.Y8G("title",o.mNQ(o.bMT(17,23,"TOOLTIP_S2CELL_LEVEL"))))},dependencies:[B.MD,B.bT,r.YN,r.me,r.Q0,r.BC,r.VZ,r.zX,r.vS,u.d,W.D9],encapsulation:2})}return f})();var y=S(2615);const R=[{path:"map/index.htm",redirectTo:"map"},{path:"map",component:x,data:{gitweeTitle:"TITLE_TOOL_S2GEO_MAP"}}];let A=(()=>{class f{constructor(){(0,G.Oi)("S2mapRoutingModule.constructor()")}static \u0275fac=function(g){return new(g||f)};static \u0275mod=o.$C({type:f});static \u0275inj=y.G2t({imports:[L.iI.forChild(R),L.iI]})}return f})();var C=S(7281),D=S(5427);let $=(()=>{class f{constructor(){(0,G.rD)("Dynamically loaded S2mapModule")}static \u0275fac=function(g){return new(g||f)};static \u0275mod=o.$C({type:f});static \u0275inj=y.G2t({providers:[{provide:F.fm,useValue:"app/tools/s2map/s2map/"}],imports:[B.MD,r.YN,C.$,D.j,A,x]})}return f})()},5853:function(et,H){var S,r;void 0!==(r="function"==typeof(S=function(){"use strict";function L(i,t,u){this.low=0|i,this.high=0|t,this.unsigned=!!u}function E(i){return!0===(i&&i.__isLong__)}Object.defineProperty(L.prototype,"__isLong__",{value:!0,enumerable:!1,configurable:!1}),L.isLong=E;var J={},W={};function X(i,t){var u,o,F;return t?(F=0<=(i>>>=0)&&i<256)&&(o=W[i])?o:(u=e(i,(0|i)<0?-1:0,!0),F&&(W[i]=u),u):(F=-128<=(i|=0)&&i<128)&&(o=J[i])?o:(u=e(i,i<0?-1:0,!1),F&&(J[i]=u),u)}function P(i,t){if(isNaN(i)||!isFinite(i))return t?N:v;if(t){if(i<0)return N;if(i>=T)return z}else{if(i<=-b)return U;if(i+1>=b)return G}return i<0?P(-i,t).neg():e(i%m|0,i/m|0,t)}function e(i,t,u){return new L(i,t,u)}L.fromInt=X,L.fromNumber=P,L.fromBits=e;var n=Math.pow;function a(i,t,u){if(0===i.length)throw Error("empty string");if("NaN"===i||"Infinity"===i||"+Infinity"===i||"-Infinity"===i)return v;if("number"==typeof t?(u=t,t=!1):t=!!t,(u=u||10)<2||36<u)throw RangeError("radix");var o;if((o=i.indexOf("-"))>0)throw Error("interior hyphen");if(0===o)return a(i.substring(1),t,u).neg();for(var F=P(n(u,8)),w=v,O=0;O<i.length;O+=8){var x=Math.min(8,i.length-O),y=parseInt(i.substring(O,O+x),u);if(x<8){var R=P(n(u,x));w=w.mul(R).add(P(y))}else w=(w=w.mul(F)).add(P(y))}return w.unsigned=t,w}function s(i){return i instanceof L?i:"number"==typeof i?P(i):"string"==typeof i?a(i):e(i.low,i.high,i.unsigned)}L.fromString=a,L.fromValue=s;var m=4294967296,T=m*m,b=T/2,M=X(1<<24),v=X(0);L.ZERO=v;var N=X(0,!0);L.UZERO=N;var V=X(1);L.ONE=V;var Q=X(1,!0);L.UONE=Q;var q=X(-1);L.NEG_ONE=q;var G=e(-1,2147483647,!1);L.MAX_VALUE=G;var z=e(-1,-1,!0);L.MAX_UNSIGNED_VALUE=z;var U=e(0,-2147483648,!1);L.MIN_VALUE=U;var l=L.prototype;return l.toInt=function(){return this.unsigned?this.low>>>0:this.low},l.toNumber=function(){return this.unsigned?(this.high>>>0)*m+(this.low>>>0):this.high*m+(this.low>>>0)},l.toString=function(t){if((t=t||10)<2||36<t)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative()){if(this.eq(U)){var u=P(t),o=this.div(u),F=o.mul(u).sub(this);return o.toString(t)+F.toInt().toString(t)}return"-"+this.neg().toString(t)}for(var w=P(n(t,6),this.unsigned),O=this,x="";;){var y=O.div(w),A=(O.sub(y.mul(w)).toInt()>>>0).toString(t);if((O=y).isZero())return A+x;for(;A.length<6;)A="0"+A;x=""+A+x}},l.getHighBits=function(){return this.high},l.getHighBitsUnsigned=function(){return this.high>>>0},l.getLowBits=function(){return this.low},l.getLowBitsUnsigned=function(){return this.low>>>0},l.getNumBitsAbs=function(){if(this.isNegative())return this.eq(U)?64:this.neg().getNumBitsAbs();for(var t=0!=this.high?this.high:this.low,u=31;u>0&&!(t&1<<u);u--);return 0!=this.high?u+33:u+1},l.isZero=function(){return 0===this.high&&0===this.low},l.isNegative=function(){return!this.unsigned&&this.high<0},l.isPositive=function(){return this.unsigned||this.high>=0},l.isOdd=function(){return!(1&~this.low)},l.isEven=function(){return!(1&this.low)},l.equals=function(t){return E(t)||(t=s(t)),(this.unsigned===t.unsigned||this.high>>>31!=1||t.high>>>31!=1)&&this.high===t.high&&this.low===t.low},l.eq=l.equals,l.notEquals=function(t){return!this.eq(t)},l.neq=l.notEquals,l.lessThan=function(t){return this.comp(t)<0},l.lt=l.lessThan,l.lessThanOrEqual=function(t){return this.comp(t)<=0},l.lte=l.lessThanOrEqual,l.greaterThan=function(t){return this.comp(t)>0},l.gt=l.greaterThan,l.greaterThanOrEqual=function(t){return this.comp(t)>=0},l.gte=l.greaterThanOrEqual,l.compare=function(t){if(E(t)||(t=s(t)),this.eq(t))return 0;var u=this.isNegative(),o=t.isNegative();return u&&!o?-1:!u&&o?1:this.unsigned?t.high>>>0>this.high>>>0||t.high===this.high&&t.low>>>0>this.low>>>0?-1:1:this.sub(t).isNegative()?-1:1},l.comp=l.compare,l.negate=function(){return!this.unsigned&&this.eq(U)?U:this.not().add(V)},l.neg=l.negate,l.add=function(t){E(t)||(t=s(t));var A=0,C=0,D=0,$=0;return D+=($+=(65535&this.low)+(65535&t.low))>>>16,C+=(D+=(this.low>>>16)+(t.low>>>16))>>>16,A+=(C+=(65535&this.high)+(65535&t.high))>>>16,A+=(this.high>>>16)+(t.high>>>16),e((D&=65535)<<16|($&=65535),(A&=65535)<<16|(C&=65535),this.unsigned)},l.subtract=function(t){return E(t)||(t=s(t)),this.add(t.neg())},l.sub=l.subtract,l.multiply=function(t){if(this.isZero()||(E(t)||(t=s(t)),t.isZero()))return v;if(this.eq(U))return t.isOdd()?U:v;if(t.eq(U))return this.isOdd()?U:v;if(this.isNegative())return t.isNegative()?this.neg().mul(t.neg()):this.neg().mul(t).neg();if(t.isNegative())return this.mul(t.neg()).neg();if(this.lt(M)&&t.lt(M))return P(this.toNumber()*t.toNumber(),this.unsigned);var o=65535&this.high,F=this.low>>>16,w=65535&this.low,x=65535&t.high,y=t.low>>>16,R=65535&t.low,A=0,C=0,D=0,$=0;return D+=($+=w*R)>>>16,C+=(D+=F*R)>>>16,D&=65535,C+=(D+=w*y)>>>16,A+=(C+=o*R)>>>16,C&=65535,A+=(C+=F*y)>>>16,C&=65535,A+=(C+=w*x)>>>16,A+=(this.high>>>16)*R+o*y+F*x+w*(t.high>>>16),e((D&=65535)<<16|($&=65535),(A&=65535)<<16|(C&=65535),this.unsigned)},l.mul=l.multiply,l.divide=function(t){if(E(t)||(t=s(t)),t.isZero())throw Error("division by zero");if(this.isZero())return this.unsigned?N:v;var u,o,F;if(this.unsigned){if(t.unsigned||(t=t.toUnsigned()),t.gt(this))return N;if(t.gt(this.shru(1)))return Q;F=N}else{if(this.eq(U))return t.eq(V)||t.eq(q)?U:t.eq(U)?V:(u=this.shr(1).div(t).shl(1)).eq(v)?t.isNegative()?V:q:(o=this.sub(t.mul(u)),F=u.add(o.div(t)));if(t.eq(U))return this.unsigned?N:v;if(this.isNegative())return t.isNegative()?this.neg().div(t.neg()):this.neg().div(t).neg();if(t.isNegative())return this.div(t.neg()).neg();F=v}for(o=this;o.gte(t);){u=Math.max(1,Math.floor(o.toNumber()/t.toNumber()));for(var O=Math.ceil(Math.log(u)/Math.LN2),x=O<=48?1:n(2,O-48),y=P(u),R=y.mul(t);R.isNegative()||R.gt(o);)R=(y=P(u-=x,this.unsigned)).mul(t);y.isZero()&&(y=V),F=F.add(y),o=o.sub(R)}return F},l.div=l.divide,l.modulo=function(t){return E(t)||(t=s(t)),this.sub(this.div(t).mul(t))},l.mod=l.modulo,l.not=function(){return e(~this.low,~this.high,this.unsigned)},l.and=function(t){return E(t)||(t=s(t)),e(this.low&t.low,this.high&t.high,this.unsigned)},l.or=function(t){return E(t)||(t=s(t)),e(this.low|t.low,this.high|t.high,this.unsigned)},l.xor=function(t){return E(t)||(t=s(t)),e(this.low^t.low,this.high^t.high,this.unsigned)},l.shiftLeft=function(t){return E(t)&&(t=t.toInt()),0==(t&=63)?this:t<32?e(this.low<<t,this.high<<t|this.low>>>32-t,this.unsigned):e(0,this.low<<t-32,this.unsigned)},l.shl=l.shiftLeft,l.shiftRight=function(t){return E(t)&&(t=t.toInt()),0==(t&=63)?this:t<32?e(this.low>>>t|this.high<<32-t,this.high>>t,this.unsigned):e(this.high>>t-32,this.high>=0?0:-1,this.unsigned)},l.shr=l.shiftRight,l.shiftRightUnsigned=function(t){if(E(t)&&(t=t.toInt()),0==(t&=63))return this;var u=this.high;return t<32?e(this.low>>>t|u<<32-t,u>>>t,this.unsigned):e(32===t?u:u>>>t-32,0,this.unsigned)},l.shru=l.shiftRightUnsigned,l.toSigned=function(){return this.unsigned?e(this.low,this.high,!1):this},l.toUnsigned=function(){return this.unsigned?this:e(this.low,this.high,!0)},l.toBytes=function(i){return i?this.toBytesLE():this.toBytesBE()},l.toBytesLE=function(){var i=this.high,t=this.low;return[255&t,t>>>8&255,t>>>16&255,t>>>24&255,255&i,i>>>8&255,i>>>16&255,i>>>24&255]},l.toBytesBE=function(){var i=this.high,t=this.low;return[i>>>24&255,i>>>16&255,i>>>8&255,255&i,t>>>24&255,t>>>16&255,t>>>8&255,255&t]},L})?S.apply(H,[]):S)&&(et.exports=r)}}]);