"use strict";(self.webpackChunkKaguraGithubPages=self.webpackChunkKaguraGithubPages||[]).push([[257],{9935:(L,A,o)=>{o.d(A,{i:()=>d});var e=o(9336),v=o(7398),t=o(2181),M=o(2032),s=o(6328),O=o(6699),D=o(304),T=o(2096),f=o(6232),I=o(2459),C=o(553);class d{master;constructor(c){this.master=c}buildEvolutionForm(c,l){const r=c.raw,m=r.pokemonId;let _=m;"form"in r&&(_=`${_}:${r.form}`);const n={nodeId:_,key:_,label:m,stats:r.stats,type1:r.type};if(r.type2&&(n.type2=r.type2),l){_=`${_}:${l}`,n.key=_,n.nodeId=_,n.label=`${n.label}:${l}`,n.isMega=!0,n.isTemp=!0;const p=r.tempEvoOverrides.find(a=>a.tempEvoId===l);if(!p)throw new Error(`Unable find ${l} on ${_} settings.`);n.stats=p.stats,n.type1=p.typeOverride,"typeOverride2"in p?n.type2=p.typeOverride2:delete n.type2,n.megaBranch=l}return n}fetchEvolutionRoot$(c){return(0,T.of)(c).pipe((0,e.j)(r=>{const m=r.raw.pokemonId,_=r.raw.parentPokemonId;if(!_)return f.E;const n=r.raw.form,u=`${m}_NORMAL`;return this.master.fetchMasterJson(`pokemon/forms/${_}.json`).pipe((0,v.U)(p=>{for(const a of p){const E=a.raw.evolutionBranch;if(E){for(const x of E)if(x.evolution===m&&x.form===n)return a;if(!n)for(const x of E)if(x.evolution===m&&x.form===u)return a}}return(0,C.jG)(`Not found branches. id:${m} -> parent:${_}`),null}),(0,t.h)(p=>!!p))})).pipe((0,M.Z)())}_buildEvolutionTree(c,l){const r=c.raw.evolutionBranch,m=this.buildEvolutionForm(c,l);let _=null;!l&&r&&(_=(0,I.D)(r).pipe((0,s.b)(u=>{if("temporaryEvolution"in u)return(0,T.of)(this._buildEvolutionTree(c,u.temporaryEvolution));const p=u.evolution,a=u.form;return this.master.fetchMasterJson(`pokemon/forms/${p}.json`).pipe((0,v.U)(E=>{for(const x of E)if(!a&&!("form"in x.raw)||"form"in x.raw&&x.raw.form===a)return this._buildEvolutionTree(x);throw new Error(`Not found ${a} in ${p}`)}))}),(0,O.R)((u,p)=>[...u,p],[]),(0,M.Z)(),(0,D.d)(1)));const n={formJson:c,form:m};return null!==_&&(n.children$=_),n}buildEvolutionTree(c){return this._buildEvolutionTree(c)}}},2933:(L,A,o)=>{o.d(A,{l:()=>b});var e=o(9212),v=o(553),t=o(9071),M=o(8645),s=o(2572),O=o(7398),D=o(3019),T=o(2181),f=o(9773),I=o(4664),C=o(3997),d=o(4154),g=o(3766),c=o(6814),l=o(5739),r=o(9515),m=o(2457),_=o(1143),n=o(5719);const u=["pokemonNameInput"];function p(y,R){if(1&y&&(e.TgZ(0,"option"),e._uU(1),e.qZA()),2&y){const i=R.$implicit;e.xp6(),e.Oqu(i.raw.form||"")}}function a(y,R){if(1&y&&e._UZ(0,"app-pokemon-type",18),2&y){const i=e.oxw();e.Q6J("pokemonType",i.outputType2)("isDisplayName",!0)("isDisplayTitle",!0)("isType2",!0)}}function E(y,R){if(1&y){const i=e.EpF();e.TgZ(0,"div",19)(1,"label",20)(2,"input",21),e.NdJ("ngModelChange",function(P){e.CHM(i);const k=e.oxw();return e.KtG(k.inputIsAlola=P)}),e.qZA(),e.TgZ(3,"span",22),e._uU(4,"POKEMON.POKEMON_FORM_ALOLA"),e.qZA()()()}if(2&y){const i=e.oxw();e.xp6(2),e.Q6J("ngModel",i.inputIsAlola)}}function x(y,R){if(1&y){const i=e.EpF();e.TgZ(0,"div",23)(1,"label",20)(2,"input",21),e.NdJ("ngModelChange",function(P){e.CHM(i);const k=e.oxw();return e.KtG(k.inputIsGalarian=P)}),e.qZA(),e.TgZ(3,"span",22),e._uU(4,"POKEMON.POKEMON_FORM_GALARIAN"),e.qZA()()()}if(2&y){const i=e.oxw();e.xp6(2),e.Q6J("ngModel",i.inputIsGalarian)}}function $(y,R){if(1&y){const i=e.EpF();e.TgZ(0,"div",24)(1,"label",20)(2,"input",21),e.NdJ("ngModelChange",function(P){e.CHM(i);const k=e.oxw();return e.KtG(k.inputIsMega=P)}),e.qZA(),e.TgZ(3,"span",22),e._uU(4,"POKEMON.POKEMON_FORM_MEGA_EVOLUTION"),e.qZA()()()}if(2&y){const i=e.oxw();e.xp6(2),e.Q6J("ngModel",i.inputIsMega)}}function F(y,R){1&y&&(e.TgZ(0,"div",25)(1,"label",20),e._uU(2,"Other: "),e.qZA()())}const W=()=>({theme:"bootstrap-5"});let b=(()=>{class y{master;translate;pokemonNameInput;destroy$=new M.x;level$;pokemonId$=new M.x;pokemonForm$;pokemonFormNullable$;pokemonFormId$=new M.x;idDatabase$;outputType1=null;outputType2=null;inputIsMega;inputHasMega;inputIsShadow;inputIsAlola;inputHasAlola;inputIsGalarian;inputHasGalarian;inputHasOtherForm;basenameSource$;pokemonSetting$;pokemonFormCombo$;pokemonFormComboDisabled$;basenameChanged$=new M.x;inputSelectedForm;validatedName=new e.vpe;valueChanged=new e.vpe;idChanged=new e.vpe;valueCleared=new e.vpe;selectedForm=new e.vpe;selectedRawForm=new e.vpe;constructor(i,h){this.master=i,this.translate=h,(0,v.eM)("TODO translate service?",h)}ngAfterViewInit(){}ngOnInit(){this.idDatabase$=this.master.basenameDatabase$,this.basenameSource$=(0,s.a)([this.master.pokemonTranslator$,this.master.pokemonConversion$,this.idDatabase$]).pipe((0,O.U)(([i,h,P])=>this.toBasenameSource(i,h,P))),this.pokemonSetting$=this.pokemonId$.pipe((0,I.w)(i=>this.master.fetchMasterJson(`pokemon/forms/${i}.json`).pipe())),this.pokemonFormCombo$=(0,D.T)(this.pokemonSetting$,this.valueCleared.pipe((0,O.U)(()=>[]))).pipe(),this.pokemonFormComboDisabled$=this.pokemonFormCombo$.pipe((0,O.U)(i=>i&&i.length<=1)),this.pokemonForm$=(0,s.a)([this.pokemonSetting$,this.pokemonFormId$]).pipe((0,O.U)(([i,h])=>{for(const P of i)if(h&&""!==h){if("form"in P.raw&&h===P.raw.form)return P}else if(!("form"in P.raw))return P;return(0,v.wb)(`Not matched formId ${h} on`,i),null}),(0,T.h)(i=>!!i)),this.pokemonForm$.pipe((0,C.x)(),(0,f.R)(this.destroy$)).subscribe(i=>{this.selectedRawForm.next(i)}),(0,s.a)([this.master.level$,this.pokemonForm$]).pipe((0,f.R)(this.destroy$)).subscribe(([i,h])=>{const P=new t.PokemonForm(i,h);this.selectedForm.next(P)}),this.pokemonId$.pipe((0,f.R)(this.destroy$)).subscribe(i=>{(0,v.eM)("Clearing current status checker",i),this.validatedName.next(i)}),this.basenameChanged$.pipe((0,I.w)(i=>this.idDatabase$.pipe((0,O.U)(h=>h.ids.includes(i)?i:null))),(0,f.R)(this.destroy$)).subscribe({next:i=>{i&&this.pokemonId$.next(i),this.pokemonFormId$.next(""),this.valueChanged.next()},error:i=>{(0,v.wb)("while get basename",i)}}),this.pokemonFormId$.pipe((0,f.R)(this.destroy$)).subscribe(i=>{this.valueChanged.next()}),this.pokemonFormNullable$=(0,D.T)(this.pokemonForm$,this.valueCleared.pipe((0,O.U)(()=>null))).pipe(),this.pokemonFormNullable$.pipe((0,f.R)(this.destroy$)).subscribe(i=>{if(!i)return this.outputType1=null,void(this.outputType2=null);this.outputType1=i.built.pokemonType,this.outputType2="number"==typeof i.built.pokemonType2?i.built.pokemonType2:null})}ngOnDestroy(){this.destroy$.next()}onChangeBasename(i){const h=i;this.basenameChanged$.next(h),this.idChanged.next(h&&""!==h?h:null),(!h||""===h)&&this.valueCleared.next()}toBasenameSource(i,h,P){const k=[];for(const U of P.ids){const K=h.table[U];if(!K){(0,v.jG)(`Not found pokemon:${K} in local database. Ignoring.`);continue}const Z=i[K],N=this.translate.PRIMARY_LOCALE;let B;B="en"!==N?`${Z[N]} (${K})`:Z[N],k.push({id:U,text:B,additional:Z})}return k}onChangeForm(i){this.pokemonFormId$.next(i||"")}onFocusPokemonName(i){(0,v.eM)("TODO event focust",i)}static \u0275fac=function(h){return new(h||y)(e.Y36(d.m),e.Y36(g.xq))};static \u0275cmp=e.Xpm({type:y,selectors:[["app-pokemon-form"]],viewQuery:function(h,P){if(1&h&&e.Gf(u,5),2&h){let k;e.iGM(k=e.CRH())&&(P.pokemonNameInput=k.first)}},outputs:{validatedName:"validatedName",valueChanged:"valueChanged",idChanged:"idChanged",valueCleared:"valueCleared",selectedForm:"selectedForm",selectedRawForm:"selectedRawForm"},features:[e._Bn([])],decls:29,vars:31,consts:[[1,"form-group"],[1,"row","input-group","m-2",3,"title"],["translate","",1,"col-3","p-2","text-end"],[1,"col-8",3,"data","width","options","placeholder","allowClear","valueChanged","focus"],["pokemonNameInput",""],[1,"row","input-group","m-2"],[1,"col-8"],[1,"form-select",3,"ngModel","disabled","ngModelChange"],[4,"ngFor","ngForOf"],[1,"row","m-2"],[1,"col-3","text-center",3,"pokemonFormJson"],[1,"col-4","m-1"],[3,"pokemonType","isDisplayName","isDisplayTitle"],[3,"pokemonType","isDisplayName","isDisplayTitle","isType2",4,"ngIf"],["class","form-check","title","Pokemon has an Alola form.",4,"ngIf"],["class","form-check","title","Pokemon has an Galarian form.",4,"ngIf"],["class","form-check","title","Pokemon has a Mega evoluted form.",4,"ngIf"],["class","form-check","title","Pokemon has other form",4,"ngIf"],[3,"pokemonType","isDisplayName","isDisplayTitle","isType2"],["title","Pokemon has an Alola form.",1,"form-check"],[1,"form-check-label"],["type","checkbox",1,"form-check-input",3,"ngModel","ngModelChange"],["translate",""],["title","Pokemon has an Galarian form.",1,"form-check"],["title","Pokemon has a Mega evoluted form.",1,"form-check"],["title","Pokemon has other form",1,"form-check"]],template:function(h,P){1&h&&(e.TgZ(0,"div")(1,"div",0)(2,"div",1),e.ALo(3,"translate"),e.TgZ(4,"label",2),e._uU(5,"POKEMON.POKEMON_LABEL"),e.qZA(),e.TgZ(6,"ng-select2",3,4),e.NdJ("valueChanged",function(U){return P.onChangeBasename(U)})("focus",function(U){return P.onFocusPokemonName(U)}),e.ALo(8,"async"),e.ALo(9,"translate"),e.qZA()(),e.TgZ(10,"div",5)(11,"label",2),e._uU(12,"POKEMON.POKEMON_OTHER_FORMS"),e.qZA(),e.TgZ(13,"span",6)(14,"select",7),e.NdJ("ngModelChange",function(U){return P.onChangeForm(U)})("ngModelChange",function(U){return P.inputSelectedForm=U}),e.ALo(15,"async"),e.YNc(16,p,2,1,"option",8),e.ALo(17,"async"),e.qZA()()(),e.TgZ(18,"div",9),e._UZ(19,"app-pokemon-thumb",10),e.ALo(20,"async"),e.TgZ(21,"span",11),e._UZ(22,"app-pokemon-type",12),e.qZA(),e.TgZ(23,"span",11),e.YNc(24,a,1,4,"app-pokemon-type",13),e.qZA()(),e.YNc(25,E,5,1,"div",14)(26,x,5,1,"div",15)(27,$,5,1,"div",16)(28,F,3,0,"div",17),e.qZA()()),2&h&&(e.xp6(2),e.s9C("title",e.lcZ(3,18,"POKEMON.TOOLTIP_POKEMON_SELECT2")),e.xp6(4),e.s9C("placeholder",e.lcZ(9,22,"POKEMON.POKEMON_SELECT2_PLACEHOLDER")),e.Q6J("data",e.lcZ(8,20,P.basenameSource$))("width","100%")("options",e.DdM(30,W))("allowClear",!0),e.xp6(8),e.Q6J("ngModel",P.inputSelectedForm)("disabled",e.lcZ(15,24,P.pokemonFormComboDisabled$)),e.xp6(2),e.Q6J("ngForOf",e.lcZ(17,26,P.pokemonFormCombo$)),e.xp6(3),e.Q6J("pokemonFormJson",e.lcZ(20,28,P.pokemonFormNullable$)),e.xp6(3),e.Q6J("pokemonType",P.outputType1)("isDisplayName",!0)("isDisplayTitle",!0),e.xp6(2),e.Q6J("ngIf",null!=P.outputType2),e.xp6(),e.Q6J("ngIf",P.inputHasAlola),e.xp6(),e.Q6J("ngIf",P.inputHasGalarian),e.xp6(),e.Q6J("ngIf",P.inputHasMega),e.xp6(),e.Q6J("ngIf",P.inputHasOtherForm))},dependencies:[c.sg,c.O5,l.YN,l.Kr,l.Wl,l.EJ,l.JJ,l.On,r.Pi,m.c,_.a,n.A,c.Ov,r.X$],styles:["[_nghost-%COMP%]{display:block}",".toolInputGroup[_ngcontent-%COMP%]{border:solid #eeeeee;border-radius:5px}.toolSmallText[_ngcontent-%COMP%]{font-size:.8em}.toolExtraSmallText[_ngcontent-%COMP%]{font-size:.5em}.appPokemonThumb[_ngcontent-%COMP%]{max-width:40px;max-height:40px}"]})}return y})()},8377:(L,A,o)=>{o.d(A,{i:()=>d});var e=o(7328),v=o(8645),t=o(9212),M=o(4154),s=o(6814),O=o(5719),D=o(9515);function T(g,c){if(1&g&&(t.TgZ(0,"span",11),t._uU(1,", "),t._UZ(2,"app-pokemon-type",12),t.ALo(3,"async"),t.qZA()),2&g){const l=t.oxw(2);t.xp6(2),t.Q6J("pokemonType",t.lcZ(3,2,l.pokemonType2$))("isDisplayName",!0)}}function f(g,c){if(1&g&&(t.TgZ(0,"div",10),t._uU(1),t.TgZ(2,"span",11),t._uU(3," ( "),t._UZ(4,"app-pokemon-type",12),t.ALo(5,"async"),t.qZA(),t.YNc(6,T,4,4,"span",13),t.ALo(7,"async"),t._uU(8," )"),t.qZA()),2&g){const l=t.oxw();t.xp6(),t.Oqu(l.pokemonName),t.xp6(3),t.Q6J("pokemonType",t.lcZ(5,4,l.pokemonType$))("isDisplayName",!0),t.xp6(2),t.Q6J("ngIf",null!==t.lcZ(7,6,l.pokemonType2$))}}function I(g,c){if(1&g&&(t.TgZ(0,"span",4),t._uU(1),t.qZA()),2&g){const l=t.oxw();t.xp6(),t.hij("SCP: ",l.status.SCP,"")}}function C(g,c){if(1&g&&(t.TgZ(0,"div")(1,"span"),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.TgZ(4,"span",5),t._uU(5),t.ALo(6,"translate"),t.ALo(7,"translate"),t.qZA()()),2&g){const l=c.ngIf;t.xp6(2),t.hij("",t.lcZ(3,5,"POKEMON.LABEL_UNLOCK")," "),t.xp6(3),t.HOy("",t.lcZ(6,7,"POKEMON.LABEL_STARDUST"),": ",l.requireStardust,"",t.lcZ(7,9,"POKEMON.LABEL_CANDY"),": ",l.requireCandy,"")}}let d=(()=>{class g{master;status;pokemonName=null;pokemonType=null;pokemonType$=new e.t;pokemonType2=null;unlockCost=null;pokemonType2$=new e.t;destroy$=new v.x;constructor(l){this.master=l}ngOnInit(){}ngOnDestroy(){this.destroy$.next()}ngOnChanges(l){if("pokemonType"in l){const r=l.pokemonType.currentValue;"number"==typeof r&&this.pokemonType$.next(r)}if("pokemonType2"in l){const r=l.pokemonType2.currentValue;this.pokemonType2$.next("number"==typeof r?r:null)}}static \u0275fac=function(r){return new(r||g)(t.Y36(M.m))};static \u0275cmp=t.Xpm({type:g,selectors:[["app-pokemon-status"]],inputs:{status:"status",pokemonName:"pokemonName",pokemonType:"pokemonType",pokemonType2:"pokemonType2",unlockCost:"unlockCost"},features:[t.TTD],decls:20,vars:20,consts:[[1,"card","m-1"],[1,"card-body"],["class","card-title",4,"ngIf"],[1,"card-text"],[1,"p-1","text-secondary"],[1,"p-1","text-primary"],["class","p-1 text-secondary",4,"ngIf"],[1,"p-1","text-info",3,"title"],[1,"p-1","text-secondary",3,"title"],[4,"ngIf"],[1,"card-title"],[1,"toolSmallText"],[3,"pokemonType","isDisplayName"],["class","toolSmallText",4,"ngIf"]],template:function(r,m){1&r&&(t.TgZ(0,"span",0)(1,"div",1),t.YNc(2,f,9,8,"div",2),t.TgZ(3,"div",3)(4,"div")(5,"span",4),t._uU(6),t.qZA(),t.TgZ(7,"span",5),t._uU(8),t.qZA(),t.YNc(9,I,2,1,"span",6),t.qZA(),t.TgZ(10,"div")(11,"span",7),t._uU(12),t.ALo(13,"number"),t.qZA(),t.TgZ(14,"span",7),t._uU(15),t.ALo(16,"number"),t.qZA(),t.TgZ(17,"span",8),t._uU(18),t.qZA()(),t.YNc(19,C,8,11,"div",9),t.qZA()()()),2&r&&(t.xp6(2),t.Q6J("ngIf",m.pokemonName),t.xp6(4),t.hij("CP: ",m.status.CP,""),t.xp6(2),t.hij("PL: ",m.status.PL,""),t.xp6(),t.Q6J("ngIf",m.status.SCP),t.xp6(2),t.hYB("title","Raw: ",m.status.AP,"\nActual: ",m.status.ActualAP,""),t.xp6(),t.hij("AP: ",t.xi3(13,14,m.status.AP,".5"),""),t.xp6(2),t.hYB("title","Raw: ",m.status.DP,"\nActual: ",m.status.ActualDP,""),t.xp6(),t.hij("DP: ",t.xi3(16,17,m.status.DP,".5"),""),t.xp6(2),t.hYB("title","Raw: ",m.status.HP,"\nActual: ",m.status.ActualHP,""),t.xp6(),t.hij("HP: ",m.status.HP,""),t.xp6(),t.Q6J("ngIf",m.unlockCost))},dependencies:[s.O5,O.A,s.Ov,s.JJ,D.X$],styles:[".toolInputGroup[_ngcontent-%COMP%]{border:solid #eeeeee;border-radius:5px}.toolSmallText[_ngcontent-%COMP%]{font-size:.8em}.toolExtraSmallText[_ngcontent-%COMP%]{font-size:.5em}.appPokemonThumb[_ngcontent-%COMP%]{max-width:40px;max-height:40px}"]})}return g})()},1143:(L,A,o)=>{o.d(A,{a:()=>r});var e=o(7328),v=o(5619),t=o(8645),M=o(2572),s=o(3019),O=o(2181),D=o(4664),T=o(7398),f=o(3620),I=o(553),C=o(6570),d=o(9212),g=o(4154),c=o(6814);function l(m,_){if(1&m){const n=d.EpF();d.TgZ(0,"img",1),d.NdJ("error",function(){d.CHM(n);const p=d.oxw();return d.KtG(p.onErrorLoadImage())}),d.ALo(1,"async"),d.qZA()}if(2&m){const n=_.ngIf,u=d.oxw();d.Udp("height",u.size,"px")("width",u.size,"px"),d.s9C("src",n,d.LSH),d.MGl("alt","",d.lcZ(1,6,u.pokemonName$),"'s picture")}}let r=(()=>{class m{master;pokemonFormJson=null;pokemonFormJson$=new e.t;size=null;opts=null;opts$=new v.X(null);imageUrl$;pokemonName$;destroy$=new t.x;onErrorImage$=new t.x;constructor(n){this.master=n}onErrorLoadImage(){(0,I.wb)("PokemonThumbComponent.onErrorLoadImage()"),this.onErrorImage$.next()}ngOnInit(){const n=(0,M.a)([this.pokemonFormJson$,this.opts$]).pipe((0,O.h)(([a,E])=>!!a),(0,O.h)(a=>!0),(0,D.w)(([a,E])=>new C.g(a.built.pokedexNumber,this.master,E).dataURL$)),u=this.pokemonFormJson$.pipe((0,O.h)(a=>!a),(0,T.U)(()=>null),(0,f.b)(500)),p=this.onErrorImage$.pipe((0,T.U)(()=>this.master.getNoImageUrl()));this.imageUrl$=(0,s.T)(n,u,p),this.pokemonName$=this.pokemonFormJson$.pipe((0,O.h)(a=>!!a),(0,T.U)(a=>a.raw.pokemonId),(0,O.h)(a=>!!a),(0,D.w)(a=>this.master.readPokemonName(a)))}ngOnDestroy(){this.destroy$.next()}ngOnChanges(n){"opts"in n&&this.opts$.next(n.opts.currentValue),"pokemonFormJson"in n&&this.pokemonFormJson$.next(n.pokemonFormJson.currentValue)}static \u0275fac=function(u){return new(u||m)(d.Y36(g.m))};static \u0275cmp=d.Xpm({type:m,selectors:[["app-pokemon-thumb"]],inputs:{pokemonFormJson:"pokemonFormJson",size:"size",opts:"opts"},features:[d.TTD],decls:2,vars:3,consts:[["class","img-fluid","style","max-height: 100%;",3,"height","width","src","alt","error",4,"ngIf"],[1,"img-fluid",2,"max-height","100%",3,"src","alt","error"]],template:function(u,p){1&u&&(d.YNc(0,l,2,8,"img",0),d.ALo(1,"async")),2&u&&d.Q6J("ngIf",d.lcZ(1,1,p.imageUrl$))},dependencies:[c.O5,c.Ov],styles:[".toolInputGroup[_ngcontent-%COMP%]{border:solid #eeeeee;border-radius:5px}.toolSmallText[_ngcontent-%COMP%]{font-size:.8em}.toolExtraSmallText[_ngcontent-%COMP%]{font-size:.5em}.appPokemonThumb[_ngcontent-%COMP%]{max-width:40px;max-height:40px}"]})}return m})()},5719:(L,A,o)=>{o.d(A,{A:()=>l});var e=o(7328),v=o(2181),t=o(4664),M=o(7398),s=o(9212),O=o(4154),D=o(3766),T=o(6814),f=o(9515);function I(r,m){1&r&&(s.TgZ(0,"span",3),s._uU(1,"POKEMON.POKEMON_ATTRIBUTE_TYPE1"),s.qZA())}function C(r,m){1&r&&(s.TgZ(0,"span",3),s._uU(1,"POKEMON.POKEMON_ATTRIBUTE_TYPE2"),s.qZA())}function d(r,m){if(1&r&&(s.ynx(0),s.YNc(1,I,2,0,"span",2)(2,C,2,0,"span",2),s._uU(3,": "),s.BQk()),2&r){const _=s.oxw();s.xp6(),s.Q6J("ngIf",!_.isType2),s.xp6(),s.Q6J("ngIf",_.isType2)}}function g(r,m){if(1&r&&(s._UZ(0,"img",4),s.ALo(1,"async")),2&r){const _=m.ngIf,n=s.oxw();s.s9C("title",s.lcZ(1,2,n.typeName$)),s.s9C("src",_,s.LSH)}}function c(r,m){if(1&r&&(s.TgZ(0,"span"),s._uU(1),s.ALo(2,"async"),s.qZA()),2&r){const _=s.oxw();s.xp6(),s.Oqu(s.lcZ(2,1,_.typeName$))}}let l=(()=>{class r{master;translate;pokemonType;isDisplayName=!1;isDisplayTitle=!1;iconSize;isType2=!1;pokemonType$=new e.t;typeName$;iconUrl$;constructor(_,n){this.master=_,this.translate=n}ngOnInit(){const _=this.pokemonType$.pipe((0,v.h)(n=>null!==n));this.typeName$=_.pipe((0,t.w)(n=>this.master.readEnumTypeName$(n))),this.iconUrl$=_.pipe((0,M.U)(n=>this.master.getTypeIconUrl(n,this.iconSize)))}ngOnChanges(_){"pokemonType"in _&&this.pokemonType$.next(_.pokemonType.currentValue)}static \u0275fac=function(n){return new(n||r)(s.Y36(O.m),s.Y36(D.xq))};static \u0275cmp=s.Xpm({type:r,selectors:[["app-pokemon-type"]],inputs:{pokemonType:"pokemonType",isDisplayName:"isDisplayName",isDisplayTitle:"isDisplayTitle",iconSize:"iconSize",isType2:"isType2"},features:[s.TTD],decls:4,vars:5,consts:[[4,"ngIf"],[3,"title","src",4,"ngIf"],["translate","",4,"ngIf"],["translate",""],[3,"title","src"]],template:function(n,u){1&n&&(s.YNc(0,d,4,2,"ng-container",0)(1,g,2,4,"img",1),s.ALo(2,"async"),s.YNc(3,c,3,3,"span",0)),2&n&&(s.Q6J("ngIf",u.isDisplayTitle),s.xp6(),s.Q6J("ngIf",s.lcZ(2,3,u.iconUrl$)),s.xp6(2),s.Q6J("ngIf",u.isDisplayName))},dependencies:[T.O5,f.Pi,T.Ov]})}return r})()},8822:(L,A,o)=>{o.d(A,{k:()=>_});var e=o(9212),v=o(8645),t=o(2572),M=o(7398),s=o(9773),O=o(5619),D=o(6814),T=o(5739),f=o(9515),I=o(8377);function C(n,u){1&n&&(e.TgZ(0,"div",17),e._uU(1,"Looks good"),e.qZA())}function d(n,u){1&n&&(e.TgZ(0,"div",18),e._uU(1,"Looks bad"),e.qZA())}function g(n,u){1&n&&(e.TgZ(0,"div",17),e._uU(1,"Looks good"),e.qZA())}function c(n,u){1&n&&(e.TgZ(0,"div",18),e._uU(1,"Looks bad"),e.qZA())}function l(n,u){1&n&&(e.TgZ(0,"span",19),e._uU(1,"POKEMON.STATUS_NOT_YET_KNOWN_LABEL"),e.qZA())}function r(n,u){1&n&&e._UZ(0,"app-pokemon-status",20),2&n&&e.Q6J("status",u.ngIf)}function m(n,u){if(1&n){const p=e.EpF();e.TgZ(0,"div",1)(1,"div",2)(2,"label",3),e._uU(3,"CP"),e.qZA(),e.TgZ(4,"span",4)(5,"input",5,6),e.NdJ("ngModelChange",function(E){const $=e.CHM(p).ngIf;return e.KtG($.CP=E)})("ngModelChange",function(E){e.CHM(p);const x=e.MAs(6),$=e.oxw();return e.KtG($.onChangeCP(x,E))}),e.qZA(),e.YNc(7,C,2,0,"div",7)(8,d,2,0,"div",8),e.qZA(),e.TgZ(9,"label",9),e._uU(10,"HP"),e.qZA(),e.TgZ(11,"span",10)(12,"input",11,12),e.NdJ("ngModelChange",function(E){const $=e.CHM(p).ngIf;return e.KtG($.HP=E)})("ngModelChange",function(E){e.CHM(p);const x=e.MAs(13),$=e.oxw();return e.KtG($.onChangeHP(x,E))}),e.qZA(),e.YNc(14,g,2,0,"div",7)(15,c,2,0,"div",8),e.qZA()(),e.TgZ(16,"div",13)(17,"span",14),e.YNc(18,l,2,0,"span",15),e.ALo(19,"async"),e.YNc(20,r,1,1,"app-pokemon-status",16),e.ALo(21,"async"),e.qZA()()()}if(2&n){const p=u.ngIf,a=e.MAs(6),E=e.MAs(13),x=e.oxw();e.xp6(5),e.ekj("is-valid",a.dirty&&p.isCPValid)("is-invalid",a.dirty&&!p.isCPValid),e.Q6J("disabled",x.disabled)("ngModel",p.CP),e.xp6(2),e.Q6J("ngIf",(a.dirty||a.touched)&&p.isCPValid),e.xp6(),e.Q6J("ngIf",(a.dirty||a.touched)&&!p.isCPValid),e.xp6(4),e.ekj("is-valid",E.dirty&&p.isHPValid)("is-invalid",E.dirty&&!p.isHPValid),e.Q6J("disabled",x.disabled)("ngModel",p.HP),e.xp6(2),e.Q6J("ngIf",(E.dirty||E.touched)&&p.isHPValid),e.xp6(),e.Q6J("ngIf",(E.dirty||E.touched)&&!p.isHPValid),e.xp6(3),e.Q6J("ngIf",!e.lcZ(19,18,x.currentStatus$)),e.xp6(2),e.Q6J("ngIf",e.lcZ(21,20,x.currentStatus$))}}let _=(()=>{class n{validatorResult;disabled=!1;currentStatus$;initialize;valueChanged=new e.vpe;destroy$=new v.x;inputStatus={isCPValid:!1,isHPValid:!1};inputStatus$;constructor(){}ngOnDestroy(){this.destroy$.next()}ngOnInit(){this.inputStatus$=(0,t.a)([this.inputCP$,this.inputHP$]).pipe((0,M.U)(([a,E])=>({CP:a,HP:E})));let p=!1;this.inputStatus$.pipe((0,s.R)(this.destroy$)).subscribe(a=>{p||this.valueChanged.next(a)}),this.validatorResult.pipe((0,s.R)(this.destroy$)).subscribe(a=>{const E=this.inputStatus;E.isCPValid=a,E.isHPValid=a}),this.initialize.pipe((0,s.R)(this.destroy$)).subscribe(()=>{const a=this.inputStatus;delete a.CP,delete a.HP,a.isCPValid=!1,a.isHPValid=!1;try{p=!0,this.inputHP$.next(null),this.inputCP$.next(null)}finally{p=!1}a.controlCP&&a.controlCP.markAsPristine(),a.controlHP&&a.controlHP.markAsPristine()})}inputCP$=new v.x;inputHP$=new O.X(null);onChangeHP(p,a){this.inputStatus.controlHP=p.control,this.inputHP$.next(a)}onChangeCP(p,a){this.inputStatus.controlCP=p.control,this.inputCP$.next(a)}static \u0275fac=function(a){return new(a||n)};static \u0275cmp=e.Xpm({type:n,selectors:[["app-pokemon-visible-status"]],inputs:{validatorResult:"validatorResult",disabled:"disabled",currentStatus$:"currentStatus$",initialize:"initialize"},outputs:{valueChanged:"valueChanged"},decls:1,vars:1,consts:[["class","form-group",4,"ngIf"],[1,"form-group"],[1,"row","input-group","m-2"],["title","Pokemon's CP",1,"col-1","form-check-label","p-2","text-end"],[1,"col-6"],["type","number","min","10","max","10000","name","currentCP",1,"form-control",3,"disabled","ngModel","ngModelChange"],["currentCP","ngModel"],["class","valid-feedback",4,"ngIf"],["class","invalid-feedback",4,"ngIf"],["title","Pokemon's HP",1,"col-1","form-check-label","p-2","text-end"],[1,"col-4"],["type","number","min","1","max","1000","name","currentHP",1,"form-control",3,"disabled","ngModel","ngModelChange"],["currentHP","ngModel"],[1,"row"],[1,"col-12"],["class","text-warning","translate","",4,"ngIf"],[3,"status",4,"ngIf"],[1,"valid-feedback"],[1,"invalid-feedback"],["translate","",1,"text-warning"],[3,"status"]],template:function(a,E){1&a&&e.YNc(0,m,22,22,"div",0),2&a&&e.Q6J("ngIf",E.inputStatus)},dependencies:[D.O5,T.Fj,T.wV,T.JJ,T.qQ,T.Fd,T.On,f.Pi,I.i,D.Ov],styles:["[_nghost-%COMP%]{display:block}"]})}return n})()},6570:(L,A,o)=>{o.d(A,{g:()=>D});var e=o(8645),v=o(7328),t=o(2572),M=o(3019),s=o(7398),O=o(553);class D{master;resizeOpts;dataURL$;image1$=new e.x;image2$=new v.t;constructor(f,I,C,d){this.master=I,this.resizeOpts=d;const g=new e.x,c=document.createElement("img"),l=document.createElement("img");c.src=this.master.getPokemonThumbUrl(f),c.crossOrigin="anonymous",c.onload=()=>{this.image1$.next(c)},c.onerror=m=>{(0,O.wb)(`Failed to load ${c.src}. `,m),d?.suppressNoImage?g.next():((0,O.wb)("Fallback to no image source."),c.src=this.master.getNoImageUrl())},C?.isShadow?(l.src=this.master.getThumbUrl("Shadow"),l.crossOrigin="anonymous",l.onload=()=>{this.image2$.next(l)}):C?.megaBranch?(l.src=this.master.getThumbUrl("Mega"),l.crossOrigin="anonymous",l.onload=()=>{this.image2$.next(l)}):this.image2$.next(null);const r=(0,t.a)([this.image1$,this.image2$]).pipe((0,s.U)(([m,_])=>this.composeImageUrl(m,_)));this.dataURL$=(0,M.T)(g.pipe((0,s.U)(()=>null)),r)}composeImageUrl(f,I){const C=document.createElement("canvas"),d=C.getContext("2d");if(null===d)throw new Error("No valid canvas 2d context");let g;if(this.resizeOpts){const r=this.resizeOpts;C.width=r.size||f.width,C.height=r.size||f.height,g=this.resizeOpts.overlayRate}else C.width=f.width,C.height=f.height;"number"!=typeof g&&(g=.3);const c=C.width*g,l=C.height*g;return d.drawImage(f,0,0,C.width,C.height),null!==I&&d.drawImage(I,C.width-c,C.height-l,c,l),C.toDataURL()}}},1479:(L,A,o)=>{o.d(A,{w:()=>t});var e=o(5592),v=o(6232);function t(M,s,O){if(null==s&&(s=M,M=0),s<=0)return v.E;const D=s+M;return new e.y(O?T=>{let f=M;return O.schedule(function(){f<D?(T.next(f++),this.schedule()):T.complete()})}:T=>{let f=M;for(;f<D&&!T.closed;)T.next(f++);T.complete()})}},9336:(L,A,o)=>{o.d(A,{j:()=>t});var e=o(9360),v=o(564);function t(M,s=1/0,O){return s=(s||0)<1?1/0:s,(0,e.e)((D,T)=>(0,v.p)(D,T,M,s,void 0,!0,O))}}}]);