import{$ as oe,A as Ye,B as He,C as Xe,D as U,E as ie,F as et,G as h,H as tt,I as rt,J as it,K as nt,L as st,M as at,N as ot,O as dt,P as lt,Q as k,R as ct,S as ne,T as se,U as ut,V as ht,W as ft,X as gt,Y as pt,Z as mt,_ as ae,a as Te,aa as _t,b as qe,ba as yt,c as je,ca as de,d as y,da as wt,e as Pe,ea as vt,f as Be,fa as It,g as Re,ga as Et,h as $e,ha as St,i as Me,ia as bt,j as Oe,ja as At,k as Ue,ka as Ct,l as ke,la as Ft,m as x,n as te,o as We,p as O,q as re,r as Ge,s as Le,u as Qe,v as Ve,w as Ze,x as Je,y as Ke,z as ze}from"./chunk-LQZV7VGV.js";import{d as Ae,g as Ce,h as Fe,i as xe,k as De,p as Ne,q as xt,r as Dt,s as Nt,t as Tt,u as qt,v as jt,w as Pt,x as Bt}from"./chunk-MOEA3RLH.js";import{c as l}from"./chunk-Q55OBPNP.js";import{$ as C,H as ve,J as P,L as B,O as R,Z as Ie,a as ye,aa as a,ba as F,da as $,f as we,l as A,m as Y,ma as M,o as c,va as Ee,xc as Se,z as H}from"./chunk-55LM3UKD.js";import{E as X,F as be,S as ee}from"./chunk-LZXNU2FR.js";import{a as j,b as z}from"./chunk-VB56BUGO.js";var Ht="@firebase/firestore-compat",Xt="0.3.53";function ge(i,e){if(e===void 0)return{merge:!1};if(e.mergeFields!==void 0&&e.merge!==void 0)throw new y("invalid-argument",`Invalid options passed to function ${i}(): You cannot specify both "merge" and "mergeFields".`);return e}function Rt(){if(typeof Uint8Array>"u")throw new y("unimplemented","Uint8Arrays are not available in this environment.")}function $t(){if(!Oe())throw new y("unimplemented","Blobs are unavailable in Firestore in this environment.")}var W=class i{constructor(e){this._delegate=e}static fromBase64String(e){return $t(),new i(U.fromBase64String(e))}static fromUint8Array(e){return Rt(),new i(U.fromUint8Array(e))}toBase64(){return $t(),this._delegate.toBase64()}toUint8Array(){return Rt(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}};function le(i){return er(i,["next","error","complete"])}function er(i,e){if(typeof i!="object"||i===null)return!1;let t=i;for(let r of e)if(r in t&&typeof t[r]=="function")return!0;return!1}var ce=class{enableIndexedDbPersistence(e,t){return Ve(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return Ze(e._delegate)}clearIndexedDbPersistence(e){return Je(e._delegate)}},G=class{constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof Ue||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){let t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&qe("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&(e=Object.assign(Object.assign({},t),e),delete e.merge),this._delegate._setSettings(e)}useEmulator(e,t,r={}){ke(this._delegate,e,t,r)}enableNetwork(){return ze(this._delegate)}disableNetwork(){return Ye(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,Re("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return Ke(this._delegate)}onSnapshotsInSync(e){return wt(this._delegate,e)}get app(){if(!this._appCompat)throw new y("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new I(this,te(this._delegate,e))}catch(t){throw d(t,"collection()","Firestore.collection()")}}doc(e){try{return new u(this,O(this._delegate,e))}catch(t){throw d(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new _(this,We(this._delegate,e))}catch(t){throw d(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return Et(this._delegate,t=>e(new L(this,t)))}batch(){return Qe(this._delegate),new Q(new It(this._delegate,e=>vt(this._delegate,e)))}loadBundle(e){return He(this._delegate,e)}namedQuery(e){return Xe(this._delegate,e).then(t=>t?new _(this,t):null)}},w=class extends lt{constructor(e){super(),this.firestore=e}convertBytes(e){return new W(new U(e))}convertReference(e){let t=this.convertDocumentKey(e,this.firestore._databaseId);return u.forKey(t,this.firestore,null)}};function tr(i){Te(i)}var L=class{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new w(e)}get(e){let t=g(e);return this._delegate.get(t).then(r=>new p(this._firestore,new k(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){let n=g(e);return r?(ge("Transaction.set",r),this._delegate.set(n,t,r)):this._delegate.set(n,t),this}update(e,t,r,...n){let s=g(e);return arguments.length===2?this._delegate.update(s,t):this._delegate.update(s,t,r,...n),this}delete(e){let t=g(e);return this._delegate.delete(t),this}},Q=class{constructor(e){this._delegate=e}set(e,t,r){let n=g(e);return r?(ge("WriteBatch.set",r),this._delegate.set(n,t,r)):this._delegate.set(n,t),this}update(e,t,r,...n){let s=g(e);return arguments.length===2?this._delegate.update(s,t):this._delegate.update(s,t,r,...n),this}delete(e){let t=g(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}},v=class i{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){let r=new ct(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new m(this._firestore,r),t??{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){let r=i.INSTANCES,n=r.get(e);n||(n=new WeakMap,r.set(e,n));let s=n.get(t);return s||(s=new i(e,new w(e),t),n.set(t,s)),s}};v.INSTANCES=new WeakMap;var u=class i{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new w(e)}static forPath(e,t,r){if(e.length%2!==0)throw new y("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new i(t,new x(t._delegate,r,new Be(e)))}static forKey(e,t,r){return new i(t,new x(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new I(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new I(this.firestore,te(this._delegate,e))}catch(t){throw d(t,"collection()","DocumentReference.collection()")}}isEqual(e){return e=X(e),e instanceof x?re(this._delegate,e):!1}set(e,t){t=ge("DocumentReference.set",t);try{return t?ae(this._delegate,e,t):ae(this._delegate,e)}catch(r){throw d(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return arguments.length===1?oe(this._delegate,e):oe(this._delegate,e,t,...r)}catch(n){throw d(n,"updateDoc()","DocumentReference.update()")}}delete(){return _t(this._delegate)}onSnapshot(...e){let t=Mt(e),r=Ot(e,n=>new p(this.firestore,new k(this.firestore._delegate,this._userDataWriter,n._key,n._document,n.metadata,this._delegate.converter)));return de(this._delegate,t,r)}get(e){let t;return e?.source==="cache"?t=ht(this._delegate):e?.source==="server"?t=ft(this._delegate):t=ut(this._delegate),t.then(r=>new p(this.firestore,new k(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new i(this.firestore,e?this._delegate.withConverter(v.getInstance(this.firestore,e)):this._delegate.withConverter(null))}};function d(i,e,t){return i.message=i.message.replace(e,t),i}function Mt(i){for(let e of i)if(typeof e=="object"&&!le(e))return e;return{}}function Ot(i,e){var t,r;let n;return le(i[0])?n=i[0]:le(i[1])?n=i[1]:typeof i[0]=="function"?n={next:i[0],error:i[1],complete:i[2]}:n={next:i[1],error:i[2],complete:i[3]},{next:s=>{n.next&&n.next(e(s))},error:(t=n.error)===null||t===void 0?void 0:t.bind(n),complete:(r=n.complete)===null||r===void 0?void 0:r.bind(n)}}var p=class{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new u(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return se(this._delegate,e._delegate)}},m=class extends p{data(e){let t=this._delegate.data(e);return this._delegate._converter||je(t!==void 0,"Document in a QueryDocumentSnapshot should exist"),t}},_=class i{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new w(e)}where(e,t,r){try{return new i(this.firestore,h(this._delegate,tt(e,t,r)))}catch(n){throw d(n,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new i(this.firestore,h(this._delegate,rt(e,t)))}catch(r){throw d(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new i(this.firestore,h(this._delegate,it(e)))}catch(t){throw d(t,"limit()","Query.limit()")}}limitToLast(e){try{return new i(this.firestore,h(this._delegate,nt(e)))}catch(t){throw d(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new i(this.firestore,h(this._delegate,st(...e)))}catch(t){throw d(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new i(this.firestore,h(this._delegate,at(...e)))}catch(t){throw d(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new i(this.firestore,h(this._delegate,ot(...e)))}catch(t){throw d(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new i(this.firestore,h(this._delegate,dt(...e)))}catch(t){throw d(t,"endAt()","Query.endAt()")}}isEqual(e){return Ge(this._delegate,e._delegate)}get(e){let t;return e?.source==="cache"?t=pt(this._delegate):e?.source==="server"?t=mt(this._delegate):t=gt(this._delegate),t.then(r=>new D(this.firestore,new ne(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){let t=Mt(e),r=Ot(e,n=>new D(this.firestore,new ne(this.firestore._delegate,this._userDataWriter,this._delegate,n._snapshot)));return de(this._delegate,t,r)}withConverter(e){return new i(this.firestore,e?this._delegate.withConverter(v.getInstance(this.firestore,e)):this._delegate.withConverter(null))}},ue=class{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new m(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}},D=class{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new _(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new m(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new ue(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new m(this._firestore,r))})}isEqual(e){return se(this._delegate,e._delegate)}},I=class i extends _{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){let e=this._delegate.parent;return e?new u(this.firestore,e):null}doc(e){try{return e===void 0?new u(this.firestore,O(this._delegate)):new u(this.firestore,O(this._delegate,e))}catch(t){throw d(t,"doc()","CollectionReference.doc()")}}add(e){return yt(this._delegate,e).then(t=>new u(this.firestore,t))}isEqual(e){return re(this._delegate,e._delegate)}withConverter(e){return new i(this.firestore,e?this._delegate.withConverter(v.getInstance(this.firestore,e)):this._delegate.withConverter(null))}};function g(i){return $e(i,x)}var he=class i{constructor(...e){this._delegate=new ie(...e)}static documentId(){return new i(Pe.keyField().canonicalString())}isEqual(e){return e=X(e),e instanceof ie?this._delegate._internalPath.isEqual(e._internalPath):!1}};var fe=class i{static serverTimestamp(){let e=bt();return e._methodName="FieldValue.serverTimestamp",new i(e)}static delete(){let e=St();return e._methodName="FieldValue.delete",new i(e)}static arrayUnion(...e){let t=At(...e);return t._methodName="FieldValue.arrayUnion",new i(t)}static arrayRemove(...e){let t=Ct(...e);return t._methodName="FieldValue.arrayRemove",new i(t)}static increment(e){let t=Ft(e);return t._methodName="FieldValue.increment",new i(t)}constructor(e){this._delegate=e}isEqual(e){return this._delegate.isEqual(e._delegate)}};var rr={Firestore:G,GeoPoint:et,Timestamp:Me,Blob:W,Transaction:L,WriteBatch:Q,DocumentReference:u,DocumentSnapshot:p,Query:_,QueryDocumentSnapshot:m,QuerySnapshot:D,CollectionReference:I,FieldPath:he,FieldValue:fe,setLogLevel:tr,CACHE_SIZE_UNLIMITED:Le};function ir(i,e){i.INTERNAL.registerComponent(new be("firestore-compat",t=>{let r=t.getProvider("app-compat").getImmediate(),n=t.getProvider("firestore").getImmediate();return e(r,n)},"PUBLIC").setServiceProps(Object.assign({},rr)))}function nr(i){ir(i,(e,t)=>new G(e,t,new ce)),i.registerVersion(Ht,Xt)}nr(ee);function sr(i,e=we){return new ye(t=>{let r;return e!=null?e.schedule(()=>{r=i.onSnapshot({includeMetadataChanges:!0},t)}):r=i.onSnapshot({includeMetadataChanges:!0},t),()=>{r?.()}})}function Ut(i,e){return sr(i,e)}function ar(i,e){return Ut(i,e).pipe(R(void 0),P(),c(t=>{let[r,n]=t;return n.exists?r?.exists?{payload:n,type:"modified"}:{payload:n,type:"added"}:{payload:n,type:"removed"}}))}function _e(i,e){return Ut(i,e).pipe(c(t=>({payload:t,type:"query"})))}var V=class{ref;afs;injector=F($);constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){let r=this.ref.collection(e),{ref:n,query:s}=Gt(r,t);return new J(n,s,this.afs)}snapshotChanges(){return ar(this.ref,this.afs.schedulers.outsideAngular).pipe(l(this.injector))}valueChanges(e={}){return this.snapshotChanges().pipe(c(({payload:t})=>e.idField?z(j({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return A(this.ref.get(e)).pipe(l(this.injector))}};function Z(i,e){return _e(i,e).pipe(R(void 0),P(),c(t=>{let[r,n]=t,s=n.payload.docChanges(),f=s.map(o=>({type:o.type,payload:o}));return r&&JSON.stringify(r.payload.metadata)!==JSON.stringify(n.payload.metadata)&&n.payload.docs.forEach((o,N)=>{let E=s.find(S=>S.doc.ref.isEqual(o.ref)),T=r?.payload.docs.find(S=>S.ref.isEqual(o.ref));E&&JSON.stringify(E.doc.metadata)===JSON.stringify(o.metadata)||!E&&T&&JSON.stringify(T.metadata)===JSON.stringify(o.metadata)||f.push({type:"modified",payload:{oldIndex:N,newIndex:N,type:"modified",doc:o}})}),f}))}function kt(i,e,t){return Z(i,t).pipe(B((r,n)=>or(r,n.map(s=>s.payload),e),[]),ve(),c(r=>r.map(n=>({type:n.type,payload:n}))))}function or(i,e,t){return e.forEach(r=>{t.indexOf(r.type)>-1&&(i=dr(i,r))}),i}function pe(i,e,t,...r){let n=i.slice();return n.splice(e,t,...r),n}function dr(i,e){switch(e.type){case"added":if(!i[e.newIndex]?.doc.ref.isEqual(e.doc.ref))return pe(i,e.newIndex,0,e);break;case"modified":if(i[e.oldIndex]==null||i[e.oldIndex].doc.ref.isEqual(e.doc.ref))if(e.oldIndex!==e.newIndex){let t=i.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}else return pe(i,e.newIndex,1,e);break;case"removed":if(i[e.oldIndex]?.doc.ref.isEqual(e.doc.ref))return pe(i,e.oldIndex,1);break}return i}function Wt(i){return(!i||i.length===0)&&(i=["added","removed","modified"]),i}var J=class{ref;query;afs;injector=F($);constructor(e,t,r){this.ref=e,this.query=t,this.afs=r}stateChanges(e){let t=Z(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe(c(r=>r.filter(n=>e.indexOf(n.type)>-1)))),t.pipe(R(void 0),P(),H(([r,n])=>n.length>0||!r),c(([,r])=>r),l(this.injector))}auditTrail(e){return this.stateChanges(e).pipe(B((t,r)=>[...t,...r],[]))}snapshotChanges(e){let t=Wt(e);return kt(this.query,t,this.afs.schedulers.outsideAngular).pipe(l(this.injector))}valueChanges(e={}){return _e(this.query,this.afs.schedulers.outsideAngular).pipe(c(t=>t.payload.docs.map(r=>e.idField?z(j({},r.data()),{[e.idField]:r.id}):r.data())),l(this.injector))}get(e){return A(this.query.get(e)).pipe(l(this.injector))}add(e){return this.ref.add(e)}doc(e){return new V(this.ref.doc(e),this.afs)}},me=class{query;afs;injector=F($);constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return!e||e.length===0?Z(this.query,this.afs.schedulers.outsideAngular).pipe(l(this.injector)):Z(this.query,this.afs.schedulers.outsideAngular).pipe(c(t=>t.filter(r=>e.indexOf(r.type)>-1)),H(t=>t.length>0),l(this.injector))}auditTrail(e){return this.stateChanges(e).pipe(B((t,r)=>[...t,...r],[]))}snapshotChanges(e){let t=Wt(e);return kt(this.query,t,this.afs.schedulers.outsideAngular).pipe(l(this.injector))}valueChanges(e={}){return _e(this.query,this.afs.schedulers.outsideAngular).pipe(c(r=>r.payload.docs.map(n=>e.idField?j({[e.idField]:n.id},n.data()):n.data())),l(this.injector))}get(e){return A(this.query.get(e)).pipe(l(this.injector))}},lr=new C("angularfire2.enableFirestorePersistence"),cr=new C("angularfire2.firestore.persistenceSettings"),ur=new C("angularfire2.firestore.settings"),hr=new C("angularfire2.firestore.use-emulator");function Gt(i,e=t=>t){return{query:e(i),ref:i}}var Ur=(()=>{class i{schedulers;firestore;persistenceEnabled$;ngZone=F(M);constructor(t,r,n,s,f,o,N,E,T,S,Lt,Qt,Vt,Zt,Jt,Kt,fr){this.schedulers=N;let q=xe(t,o,r),K=T;S&&Pt(q,o,Lt,Vt,Zt,Jt,Qt,Kt),[this.firestore,this.persistenceEnabled$]=De(`${q.name}.firestore`,"AngularFirestore",q.name,()=>{let b=o.runOutsideAngular(()=>q.firestore());if(s&&b.settings(s),K&&b.useEmulator(...K),n&&!Se(f)){let zt=()=>{try{return A(b.enablePersistence(E||void 0).then(()=>!0,()=>!1))}catch(Yt){return typeof console<"u"&&console.warn(Yt),Y(!1)}};return[b,o.runOutsideAngular(zt)]}else return[b,Y(!1)]},[s,K,n])}collection(t,r){let n;typeof t=="string"?n=this.firestore.collection(t):n=t;let{ref:s,query:f}=Gt(n,r),o=this.ngZone.run(()=>s);return new J(o,f,this)}collectionGroup(t,r){let n=r||(f=>f),s=this.firestore.collectionGroup(t);return new me(n(s),this)}doc(t){let r;typeof t=="string"?r=this.firestore.doc(t):r=t;let n=this.ngZone.run(()=>r);return new V(n,this)}createId(){return this.firestore.collection("_").doc().id}static \u0275fac=function(r){return new(r||i)(a(Ce),a(Fe,8),a(lr,8),a(ur,8),a(Ee),a(M),a(Ae),a(cr,8),a(hr,8),a(Bt,8),a(xt,8),a(Dt,8),a(Nt,8),a(Tt,8),a(qt,8),a(jt,8),a(Ne,8))};static \u0275prov=Ie({token:i,factory:i.\u0275fac,providedIn:"any"})}return i})();export{Ur as a};
