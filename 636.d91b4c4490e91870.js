"use strict";(self.webpackChunkKaguraGithubPages=self.webpackChunkKaguraGithubPages||[]).push([[636],{5511:(Z,P,u)=>{u.d(P,{n:()=>E});var m=u(3953),x=u(5312);let E=(()=>{class e{after=new m.bkB;constructor(){(0,x.Oi)("AfterIfDirective")}ngAfterContentInit(){(0,x.Oi)("AfterIfDirective.ngAfterContentInit()"),setTimeout(()=>this.after.next())}static \u0275fac=function(T){return new(T||e)};static \u0275dir=m.FsC({type:e,selectors:[["","appAfterIf",""]],outputs:{after:"appAfterIf"}})}return e})()},3636:(Z,P,u)=>{u.r(P),u.d(P,{GitweeModule:()=>bt});var m=u(177),x=u(1188),E=u(467),e=u(3953),l=u(9969),$=u(1413),T=u(4412),k=u(4572),A=u(7786),N=u(7673),U=u(3726),q=u(605),B=u(6697),y=u(6354),w=u(9568),_=u(6977),G=u(3294),ee=u(2816);class V{entries;timelineUrl;navigationFrom="click"}class F extends V{urlLink;title;indexUrl;updated;updatedAt}class te extends F{}class X{key;urlKey;urlLink;monthPage;monthIndex;isSelected=!1;count;page$;isNationalHoliday$;nationalHoliday$}class ne extends F{urlPrefix;lastDays;firstWeekday;days;dayEntries={}}class ie{key;urlKey;urlLink;yearPage;yearIndex;count;page$}class ae extends F{urlPrefix;monthEntries=[]}class re{key;urlKey;urlLink;topPage;count;page$}class se extends F{urlPrefix;yearEntries=[]}class oe{ns;category;navigators;fragment}class le extends F{tagkey}var h=u(5312),D=u(4715),z=u(1637),C=u(5558);function S(a,o,t="0"){const n=`${a}`;return n.length>=o?n:n.padStart(o,t)}function O(a){const o=+a;return Number.isNaN(o)?null:o}var J=u(8001);let b=(()=>{class a{dom;http;holidays={};isInitialized=!1;constructor(t,n){this.dom=t,this.http=n,(0,h.Oi)("IndexService.constructor()")}initialized(){this.isInitialized=!0}getNavigationFrom(t){return t?t.isReload?"reload":"url":"click"}indexRepPrefix$(t){const i=this.dom.getBaseHref()+h.cA.GITWEE_DATA;return t.data?t.data.pipe((0,y.T)(r=>i+"/"+(r?.gitweeNamespace||""))):(0,N.of)(i)}buildConfigUrl$(t){return this.indexRepPrefix$(t).pipe((0,y.T)(n=>`${n}/config/main.json`))}buildTagIndex$(t,n){return this.indexRepPrefix$(t).pipe((0,y.T)(i=>i+"/tag/"+(n?`${n}/`:"")+"index.json"))}fetchConfig$(t){return this.buildConfigUrl$(t).pipe((0,C.n)(i=>this.http.fetchGhJson(i)))}readYearHoliday$(t){return this.http.fetchJson(`https://holidays-jp.github.io/api/v1/${t}/date.json`).pipe((0,y.T)(n=>{const i={};for(const r in n){const s=n[r],d={date:new Date(r),name:s};let c=i[d.date.getMonth()];if(c||(c={},i[d.date.getMonth()]=c),c[d.date.getDate()])throw new Error(`Not a valid date entry at ${d.date}`);c[d.date.getDate()]=d}return i}),(0,w.t)(1))}getNationalHoliday$(t){const n=t.getFullYear();let i=this.holidays[n];return i||(i=this.readYearHoliday$(n),this.holidays[n]=i),i.pipe((0,y.T)(r=>{if(!(t.getMonth()in r))return null;const s=r[t.getMonth()];return t.getDate()in s?s[t.getDate()].name:null}))}isNationalHoliday$(t){return this.getNationalHoliday$(t).pipe((0,y.T)(n=>null!==n))}buildIndex$(t,n,i,r){return this.indexRepPrefix$(t).pipe((0,y.T)(s=>s+"/date/"+(n?`${n}/`:"")+(i?`${i}/`:"")+(r?`${r}/`:"")+"index.json"))}fetchWeeklyIndex$(t){return this.http.fetchGhJson(t).pipe()}fetchTagIndexInternal$(t,n){return this.http.fetchGhJson(t).pipe((0,y.T)(i=>{const r=new le;return r.indexUrl=t,r.title=i.title,r.entries=i.defaultEntries,r.timelineUrl=i.fuzzyIndexUrl,r.tagkey=n.tagkey,r.urlLink=`tag/${n.tagkey}`,r.navigationFrom=this.getNavigationFrom(n),r.updated=i.updated,r}))}fetchTagIndex$(t,n){return this.buildTagIndex$(t,n.tagkey).pipe((0,C.n)(r=>this.fetchTagIndexInternal$(r,n)))}fetchTagListInternal$(t){return this.http.fetchGhJson(t).pipe()}fetchTagList$(t){return this.buildTagIndex$(t).pipe((0,C.n)(i=>this.fetchTagListInternal$(i)))}fetchIndexInternal$(t,n,i){return this.http.fetchGhJson(n).pipe((0,y.T)(r=>{const s=new se;s.indexUrl=n,s.urlPrefix="timeline/",s.urlLink="",s.entries=r.defaultEntries,s.title=r.title,s.timelineUrl=r.fuzzyIndexUrl,s.navigationFrom=this.getNavigationFrom(i),s.updated=r.updated;for(const d in r.values){const c=Number(d),p=r.values[d],g=new re;g.key=c,g.topPage=s,g.urlKey=S(c,4),g.urlLink=`${s.urlPrefix}${g.urlKey}`,g.count=p.count,g.page$=null,i?.year===c&&(g.page$=this.openYearPage$(t,g,i)),s.yearEntries.unshift(g)}return s}))}fetchIndex$(t,n){return this.buildIndex$(t).pipe((0,C.n)(r=>this.fetchIndexInternal$(t,r,n)))}openYearPageInternal$(t,n,i,r){return this.http.fetchGhJson(n).pipe((0,y.T)(s=>{const d=new ae;d.urlLink=i.urlLink,d.urlPrefix=`${d.urlLink}/`,d.entries=s.defaultEntries,d.title=s.title,d.timelineUrl=s.fuzzyIndexUrl,d.navigationFrom=this.getNavigationFrom(r),d.updated=s.updated;for(const c in s.values){const p=Number(c),g=s.values[c],f=new ie;f.key=p,f.urlKey=S(p,2),f.urlLink=`${d.urlPrefix}${f.urlKey}`,f.yearPage=d,f.yearIndex=i,f.count=g.count,f.page$=null,r?.year===i.key&&r?.month===p&&(f.page$=this.openMonthPage$(t,f,r)),d.monthEntries.unshift(f)}return d}))}openYearPage$(t,n,i){return this.buildIndex$(t,n.urlKey).pipe((0,C.n)(s=>this.openYearPageInternal$(t,s,n,i)))}openMonthPageInternal$(t,n,i,r){const s=i.yearIndex;return this.http.fetchGhJson(n).pipe((0,y.T)(d=>{const c=new ne;c.indexUrl=n,c.urlLink=i.urlLink,c.urlPrefix=`${c.urlLink}/`,c.lastDays=d.lastMonthDays,c.firstWeekday=d.firstWeekday,c.days=d.days,c.entries=d.defaultEntries,c.title=d.title,c.timelineUrl=d.fuzzyIndexUrl,c.navigationFrom=this.getNavigationFrom(r),c.updated=d.updated;for(const p in d.values){const g=Number(p),f=d.values[p],v=new X,I=new Date(Number(s.key),Number(i.key)-1,g);v.key=g,v.urlKey=S(g,2),v.urlLink=`${c.urlPrefix}${v.urlKey}`,v.monthPage=c,v.monthIndex=i,v.isSelected=!1,v.count=f.count,v.page$=null,v.isNationalHoliday$=this.isNationalHoliday$(I),v.nationalHoliday$=this.getNationalHoliday$(I),r?.year===s.key&&r?.month===i.key&&r?.day===g&&(v.isSelected=!0,v.page$=this.openDayIndexPage$(t,v.monthIndex,v,r)),c.dayEntries[g]=v}return c}))}openMonthPage$(t,n,i){return this.buildIndex$(t,n.yearIndex.urlKey,n.urlKey).pipe((0,C.n)(d=>this.openMonthPageInternal$(t,d,n,i)))}openDayIndexPageInternal$(t,n,i){return this.http.fetchGhJson(t).pipe((0,y.T)(r=>{const s=new te;return s.indexUrl=t,s.urlLink=n.urlLink,s.title=r.title,s.entries=r.entries,s.navigationFrom=this.getNavigationFrom(i),s.updated=r.updated,s}))}openDayIndexPage$(t,n,i,r){return this.buildIndex$(t,n.yearIndex.urlKey,n.urlKey,i.urlKey).pipe((0,C.n)(d=>this.openDayIndexPageInternal$(d,i,r)))}static \u0275fac=function(n){return new(n||a)(e.KVO(D.K),e.KVO(J.kl))};static \u0275prov=e.jDH({token:a,factory:a.\u0275fac})}return a})();var ce=u(4333),ue=u(9182),M=u(5511),R=u(152),he=u(4779),pe=u(2209),Y=u(6564),ge=u(3216);function fe(a,o){1&a&&(e.qex(0),e.EFF(1,","),e.bVm())}function me(a,o){if(1&a&&(e.qex(0),e.j41(1,"a",2),e.EFF(2),e.k0s(),e.DNE(3,fe,2,0,"ng-container",0),e.bVm()),2&a){const t=o.$implicit,n=o.last;e.R7$(),e.Mz_("routerLink","./tag/",t.tagkey,""),e.R7$(),e.JRh(t.title),e.R7$(),e.Y8G("ngIf",!n)}}function ve(a,o){if(1&a&&(e.qex(0),e.nrm(1,"hr"),e.j41(2,"p"),e.EFF(3,"Tag: "),e.DNE(4,me,4,4,"ng-container",1),e.k0s(),e.bVm()),2&a){const t=e.XpG();e.R7$(4),e.Y8G("ngForOf",t.tags)}}let ye=(()=>{class a{tags;constructor(){}ngOnInit(){(0,h.Oi)("TagFooterComponent.OnInit()")}static \u0275fac=function(n){return new(n||a)};static \u0275cmp=e.VBU({type:a,selectors:[["gitwee-tag-footer"]],inputs:{tags:"tags"},decls:1,vars:1,consts:[[4,"ngIf"],[4,"ngFor","ngForOf"],[1,"p-1",3,"routerLink"]],template:function(n,i){1&n&&e.DNE(0,ve,5,1,"ng-container",0),2&n&&e.Y8G("ngIf",i.tags&&i.tags.length>0)},dependencies:[m.Sq,m.bT,x.Wk]})}return a})();function _e(a,o){if(1&a&&e.EFF(0),2&a){const t=e.XpG().$implicit;e.JRh(t.title)}}function xe(a,o){if(1&a&&(e.j41(0,"a",17),e.EFF(1),e.k0s()),2&a){const t=e.XpG().$implicit;e.Y8G("routerLink",t.anchorLink)("fragment",t.anchorId),e.R7$(),e.JRh(t.title)}}function Ce(a,o){if(1&a){const t=e.RV6();e.j41(0,"button",18),e.bIt("click",function(){e.eBV(t);const i=e.XpG().$implicit,r=e.XpG();return e.Njj(r.toggleCensored(i))}),e.nrm(1,"img",19),e.k0s()}if(2&a){const t=e.XpG().$implicit;e.x72("data-bs-target","#gitweeTimelineItem-",t.anchorId,""),e.x72("aria-controls","#gitweeTimelineItem-",t.anchorId,""),e.R7$(),e.xc7("transform",t.isOpened?"rotate(-90deg)":"none"),e.Y8G("@censorButtonTrigger",t.isOpened)}}function $e(a,o){if(1&a){const t=e.RV6();e.j41(0,"div",20,3),e.bIt("appAfterIf",function(){e.eBV(t);const i=e.sdS(1);e.XpG();const r=e.sdS(1),s=e.XpG();return e.Njj(s.computeBottomFade(r,i))}),e.j41(2,"span",21)(3,"a",22),e.EFF(4,"\u7d9a\u304d\u3092\u8aad\u3080"),e.k0s()()()}if(2&a){const t=e.XpG().$implicit;e.xc7("bottom",t.tags.length>0?140:80,"px"),e.R7$(3),e.FS9("routerLink",t.anchorLink)}}function we(a,o){if(1&a&&e.nrm(0,"gitwee-tag-footer",23),2&a){const t=e.XpG().$implicit;e.Y8G("tags",t.tags)}}function be(a,o){if(1&a){const t=e.RV6();e.j41(0,"div",6,0)(2,"div",7)(3,"div",8),e.DNE(4,_e,1,1,"ng-template",null,1,e.C5r)(6,xe,2,3,"a",9),e.k0s(),e.DNE(7,Ce,2,7,"button",10),e.k0s(),e.j41(8,"div",11)(9,"app-page-path",12,2),e.bIt("loadPageBody",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.onPageBodyRetrieved())})("fatalError",function(i){const r=e.eBV(t).$implicit,s=e.XpG();return e.Njj(s.onFatalError(r,i))})("loadPageJson",function(i){const r=e.eBV(t),s=r.$implicit,d=r.last,c=e.XpG();return e.Njj(c.onLoaded(s,i,d))})("loadError",function(i){const r=e.eBV(t).$implicit,s=e.XpG();return e.Njj(s.onErrorDraw(r,i))}),e.k0s(),e.DNE(11,$e,5,3,"div",13)(12,we,1,1,"gitwee-tag-footer",14),e.k0s(),e.j41(13,"div",15)(14,"small",16),e.EFF(15),e.nI1(16,"date"),e.k0s()()()}if(2&a){const t=o.$implicit,n=e.sdS(5);e.Y8G("@timelineEntryTrigger",void 0),e.R7$(3),e.Mz_("id","gitweeTimelinePage-",t.anchorId,""),e.R7$(3),e.Y8G("ngIf",t.anchorLink)("ngIfElse",n),e.R7$(),e.Y8G("ngIf",t.isCensored),e.R7$(),e.Mz_("id","gitweeTimelineItem-",t.anchorId,""),e.Y8G("ngClass",t.isCensored?"collapse":"show"),e.R7$(),e.Y8G("pagePath$",t.path$),e.R7$(2),e.Y8G("ngIf",t.hasMain),e.R7$(),e.Y8G("ngIf",t.tags),e.R7$(3),e.SpI("Updated: ",e.i5U(16,13,t.updated,"yyyy-MM-dd"),"")}}function Ie(a,o){1&a&&(e.j41(0,"div",28)(1,"div")(2,"strong"),e.EFF(3,"\u8aad\u307f\u8fbc\u307f\u5931\u6557"),e.k0s()(),e.j41(4,"div"),e.EFF(5,"\u6642\u9593\u3092\u958b\u3051\u3066\u304b\u3089\u518d\u5ea6\u304a\u8a66\u3057\u304f\u3060\u3055\u3044\u3002"),e.k0s(),e.j41(6,"button",29)(7,"span",30),e.EFF(8,"\xd7"),e.k0s()()())}function Te(a,o){1&a&&(e.j41(0,"div"),e.nrm(1,"span",31),e.j41(2,"span"),e.EFF(3,"Loading..."),e.k0s()())}function ke(a,o){1&a&&(e.j41(0,"div"),e.EFF(1,"\u3055\u3089\u306b\u8aad\u307f\u8fbc\u3080"),e.k0s())}function Ne(a,o){if(1&a){const t=e.RV6();e.j41(0,"div",24),e.DNE(1,Ie,9,0,"div",25),e.j41(2,"button",26),e.bIt("click",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.onClickTrackback(i.streamPrevUrl))}),e.DNE(3,Te,4,0,"div",27)(4,ke,2,0,"div",27),e.k0s()()}if(2&a){const t=e.XpG();e.R7$(),e.Y8G("ngIf",t.isLoadingError),e.R7$(),e.Y8G("disabled",t.isLoadingPrevious),e.R7$(),e.Y8G("ngIf",t.isLoadingPrevious),e.R7$(),e.Y8G("ngIf",!t.isLoadingPrevious)}}class Fe{path$;keyPath;pageRelPath;constructor(o,t,n){this.path$=o,this.keyPath=t,this.pageRelPath=n}title;anchorLink;anchorId;updated;isCensored;isOpened;hasMain;tags}class H{url;entries;constructor(o,t=[]){this.url=o,this.entries=t}reloadId;refreshEvent}class Pe{obj;key;lastAccessAt;createdAt;constructor(o,t){this.obj=o,this.key=t,this.lastAccessAt=Date.now(),this.createdAt=Date.now()}}let Ee=(()=>{class a{router;index;dom;reloader;naviEntries$;trackbackEntries$=new $.B;timeline=[];timelineEntryCache={};MaxCacheItem=200;CacheExpireMS=36e5;timelineIndices={};timelineIndicesOrdered=[];streamPrevUrl;isLoadingPrevious=!1;isLoadingError=!1;pendingAnchorNavi;backgroundFadeGradient$;destroy$=new $.B;updateTimeline(){const t=[],n=this.dom.getBaseHref();for(const i of this.timelineIndicesOrdered){const r=this.timelineIndices[i];for(const s of r.entries){const d=`${n}${h.cA.PAGE_DATA}/${s}`;let c=this.getTimelineCache(d);if(c){t.includes(c)||t.push(c);continue}const p=new pe.d;p.jsonPath=d,c=new Fe((0,N.of)(p),p.jsonPath,s),t.push(c),this.putTimelineCache(c)}}this.timeline=t}constructor(t,n,i,r){this.router=t,this.index=n,this.dom=i,this.reloader=r}ngOnDestroy(){(0,h.Oi)("TimelineComponent.OnDestroy()"),this.cleanupTimelineIndices(),this.destroy$.next()}ngOnInit(){(0,h.Oi)("TimelineComponent.OnInit()"),this.naviEntries$.pipe((0,R.B)(500),(0,_.Q)(this.destroy$)).subscribe(t=>{switch(t.navigationFrom){case"click":case"url":{this.cleanupTimelineIndices();const n=new H(null,t.entries);this.timelineIndices.default=n,this.timelineIndicesOrdered.push("default")}break;case"reload":this.timelineIndices.default.entries=t.entries;break;default:throw new Error(`Not supported navigationFrom ${t.navigationFrom}`)}this.updateTimeline(),this.timelineIndices[t.timelineUrl]||(this.streamPrevUrl=t.timelineUrl),this.isLoadingPrevious=!1}),this.trackbackEntries$.pipe((0,_.Q)(this.destroy$)).subscribe(t=>{if("click"!==t.navigationFrom)throw new Error("Not a supported navigationFrom ${page.navigationFrom}");this.updateTimeline(),this.isLoadingPrevious=!1}),this.router.currentFragment$.pipe((0,_.Q)(this.destroy$)).subscribe(t=>{this.pendingAnchorNavi=t})}rgb2hex(t){const n=t.match(/^rgb\((\d+),\s*(\d+),\s*(\d+)\)$/);return n?`#${n.slice(1).map(r=>parseInt(r,10).toString(16).padStart(2,"0")).join("")}`:null}computeBaseColor(t){const n=window.getComputedStyle(t);return"background-color"in n?this.rgb2hex(n["background-color"])||((0,h.sJ)("Failed to parse background color for fade."),"#ffffff"):((0,h.sJ)("Failed to compute background color for fade."),"#ffffff")}computeBottomFade(t,n){(0,h.Oi)("Computing fade color");const i=this.computeBaseColor(t);n.style.background=`linear-gradient(to top, ${i}ff, 90%, ${i}00)`}onFatalError(t,n){(0,h.Oi)("TimelineComponent.onFatalError()",n)}onErrorDraw(t,n){(0,h.Oi)("TimelineComponent.onErrorDraw()")}onLoaded(t,n,i){(0,h.Oi)("TimelineComponent.onLoaded()",t,n,i),t.title=n.title,t.anchorLink=n.anchorLink,t.anchorId=n.anchorId,t.updated=new Date(n.updatedAt||n.updated),t.isCensored=!!n.isDefaultClosed,t.isOpened=!t.isCensored,t.hasMain=n.hasMain||!1,t.tags=n.tags}toggleCensored(t){t.isOpened=!t.isOpened}onPageBodyRetrieved(){this.pendingAnchorNavi&&this.dom.scrollIntoView(`gitweeTimelinePage-${this.pendingAnchorNavi}`)&&(this.pendingAnchorNavi=null)}cleanupIndexItem(t){t.reloadId&&(this.reloader.unregister(t.reloadId),delete t.reloadId),t.refreshEvent&&(t.refreshEvent.unsubscribe(),delete t.refreshEvent)}expireTimelineCache(){const t=Object.keys(this.timelineEntryCache),n=t.length;if(n<=this.MaxCacheItem)return;(0,h.rD)(`Cleaning up timeline cache size: ${n}`);const i=Date.now()-this.CacheExpireMS;let r=[];for(const p of t){const g=this.timelineEntryCache[p];g.lastAccessAt>i||r.push(g)}r=r.sort((p,g)=>p.lastAccessAt===g.lastAccessAt?0:p.lastAccessAt<g.lastAccessAt?-1:1),(0,h.Oi)("Target to expire.",r);const s=n-this.MaxCacheItem;for(let p=0;p<s&&p<r.length;p++)delete this.timelineEntryCache[r[p].key];const c=Object.keys(this.timelineEntryCache).length;(0,h.rD)(`Cache was cleaned up size: ${n} -> ${c}`)}getTimelineCache(t){const n=this.timelineEntryCache[t];return n?(n.lastAccessAt=Date.now(),n.obj):null}putTimelineCache(t){let n=this.timelineEntryCache[t.keyPath];n?n.lastAccessAt=Date.now():(n=new Pe(t,t.keyPath),this.timelineEntryCache[t.keyPath]=n)}cleanupTimelineIndices(){if(this.timelineIndices)for(const t in this.timelineIndices)this.cleanupIndexItem(this.timelineIndices[t]);this.expireTimelineCache(),this.timelineIndices={},this.timelineIndicesOrdered=[]}refreshIndex(t,n){let i=this.timelineIndices[t];i||(i=new H(t),this.timelineIndices[t]=i),i.entries=n.entries,this.cleanupIndexItem(i);const r=this.reloader.registerWatcher(t,new Date(n.updatedAt));i.reloadId=r,i.refreshEvent=this.reloader.refreshEvent(r).pipe((0,C.n)(()=>this.index.fetchWeeklyIndex$(t)),(0,_.Q)(this.destroy$)).subscribe(s=>{this.refreshIndex(t,s)}),this.timelineIndicesOrdered.includes(t)||this.timelineIndicesOrdered.push(t)}onClickTrackback(t){(0,h.Oi)("TimelineComponent.onClickTrackback()",t),this.isLoadingPrevious=!0,this.isLoadingError=!1;const n=new T.t(t);n.pipe((0,C.n)(r=>(0,he.y)((0,N.of)(r),this.index.fetchWeeklyIndex$(r))),(0,w.t)(1)).pipe((0,_.Q)(this.destroy$)).subscribe({next:([r,s])=>{if(this.refreshIndex(r,s),this.streamPrevUrl=s.previousIndexUrl,s.entries.length>0){const d=new V;return d.entries=s.entries,d.timelineUrl=s.previousIndexUrl,d.navigationFrom="click",void this.trackbackEntries$.next(d)}s.previousIndexUrl&&((0,h.Oi)(`Continue retrieving ${s.previousIndexUrl} since empty.`),n.next(s.previousIndexUrl))},complete:()=>{(0,h.Oi)("Successfully completed auto trackback loader"),this.isLoadingPrevious=!1},error:r=>{this.isLoadingError=!0,this.isLoadingPrevious=!1}})}static \u0275fac=function(n){return new(n||a)(e.rXU(z.O),e.rXU(b),e.rXU(D.K),e.rXU(Y.P))};static \u0275cmp=e.VBU({type:a,selectors:[["gitwee-timeline"]],inputs:{naviEntries$:"naviEntries$"},decls:2,vars:2,consts:[["timelineItemDiv",""],["justTitle",""],["pagePathComponent",""],["bottomFaderDiv",""],["class","card shadow-lg rounded m-2 gitwee-timeline-item",4,"ngFor","ngForOf"],["class","p-5",4,"ngIf"],[1,"card","shadow-lg","rounded","m-2","gitwee-timeline-item"],[1,"card-header"],[1,"float-start",3,"id"],[3,"routerLink","fragment",4,"ngIf","ngIfElse"],["class","btn float-end collapsed","data-bs-toggle","collapse","aria-expanded","false",3,"click",4,"ngIf"],[1,"card-body",3,"id","ngClass"],[1,"m-3","p-3",3,"loadPageBody","fatalError","loadPageJson","loadError","pagePath$"],["class","timeline-fadeout-entry",3,"bottom","appAfterIf",4,"ngIf"],[3,"tags",4,"ngIf"],[1,"card-footer"],[1,"float-end","text-muted"],[3,"routerLink","fragment"],["data-bs-toggle","collapse","aria-expanded","false",1,"btn","float-end","collapsed",3,"click"],["src","/assets/octicons/chevron-left.svg"],[1,"timeline-fadeout-entry",3,"appAfterIf"],[2,"position","absolute","bottom","0px"],[3,"routerLink"],[3,"tags"],[1,"p-5"],["class","alert alert-warning alert-dismissible fade show","role","alert",4,"ngIf"],["type","button",1,"btn","btn-outline-primary","btn-block",2,"width","100%",3,"click","disabled"],[4,"ngIf"],["role","alert",1,"alert","alert-warning","alert-dismissible","fade","show"],["type","button","data-bs-dismiss","alert","aria-label","Close",1,"btn-close"],["aria-hidden","true"],["role","status","aria-hidden","true",1,"spinner-border","text-primary"]],template:function(n,i){1&n&&e.DNE(0,be,17,16,"div",4)(1,Ne,5,4,"div",5),2&n&&(e.Y8G("ngForOf",i.timeline),e.R7$(),e.Y8G("ngIf",i.streamPrevUrl))},dependencies:[m.YU,m.Sq,m.bT,x.Wk,M.n,ge.C,ye,m.vh],styles:[".timeline-fadeout-entry[_ngcontent-%COMP%]{position:absolute;width:100%;height:30%;left:0%;padding:2%}"],data:{animation:[(0,l.hZ)("timelineEntryTrigger",[(0,l.kY)(":enter",[(0,l.iF)({opacity:0,transform:"translateY(10px)"}),(0,l.i0)("300ms 300ms ease-in-out",(0,l.iF)({transform:"none",opacity:1})),(0,l.MA)()]),(0,l.kY)(":leave",[(0,l.MA)(),(0,l.iF)({opacity:1,transform:"none"}),(0,l.i0)("300ms ease-in-out",(0,l.iF)({opacity:0,transform:"translateY(-10px)"}))])]),(0,l.hZ)("censorButtonTrigger",[(0,l.kY)("false => true",[(0,l.iF)({transform:"none"}),(0,l.i0)("500ms ease-in-out",(0,l.iF)({transform:"rotate(-90deg)"}))]),(0,l.kY)("true => false",[(0,l.iF)({transform:"rotate(-90deg)"}),(0,l.i0)("500ms ease-in-out",(0,l.iF)({transform:"none"}))])])]}})}return a})();const Ge=()=>["border-primary"],K=()=>[],De=()=>["border-bottom","border-danger"];function Me(a,o){if(1&a&&(e.j41(0,"th")(1,"div"),e.EFF(2),e.k0s()()),2&a){const t=o.$implicit;e.R7$(),e.ZvI("",t.clz," text-center"),e.R7$(),e.JRh(t.name)}}function je(a,o){if(1&a&&(e.j41(0,"div"),e.EFF(1),e.k0s()),2&a){const t=e.XpG(2).$implicit;e.R7$(),e.JRh(t.key)}}function Se(a,o){if(1&a){const t=e.RV6();e.qex(0,12),e.bIt("appAfterIf",function(){const i=e.eBV(t).ngIf,r=e.XpG(3).$implicit,s=e.XpG(2);return e.Njj(s.onPageRetrieved(r,i))}),e.bVm()}}function Oe(a,o){if(1&a){const t=e.RV6();e.j41(0,"div")(1,"a",9),e.bIt("click",function(i){e.eBV(t);const r=e.XpG(2).$implicit,s=e.XpG(2);return e.Njj(s.onClickDay(i,r))}),e.j41(2,"span",10),e.EFF(3),e.k0s()(),e.DNE(4,Se,1,0,"ng-container",11),e.nI1(5,"async"),e.k0s()}if(2&a){const t=e.XpG(2).$implicit,n=e.XpG(2);e.R7$(),e.Mz_("title","",t.count," \u4ef6"),e.FCK("href","",n.urlPrefix,"/",t.urlLink,"",e.B4B),e.R7$(2),e.JRh(t.key),e.R7$(),e.Y8G("ngIf",e.bMT(5,7,t.page$))}}function Re(a,o){if(1&a&&(e.j41(0,"div",7),e.nI1(1,"async"),e.DNE(2,je,2,1,"ng-template",null,0,e.C5r)(4,Oe,6,9,"div",8),e.k0s()),2&a){const t=e.sdS(3),n=e.XpG().$implicit,i=e.XpG(2);e.Y8G("ngClass",e.bMT(1,3,n.isNationalHoliday$)?e.lJ4(5,De):e.lJ4(6,K)),e.R7$(4),e.Y8G("ngIf",i.isIndexedDay(n))("ngIfElse",t)}}function Ye(a,o){if(1&a&&(e.j41(0,"td",4)(1,"div",5),e.DNE(2,Re,5,7,"div",6),e.k0s()()),2&a){const t=o.$implicit;e.R7$(),e.xc7("border-color",null!=t&&t.isSelected?void 0:"transparent!important"),e.Y8G("ngClass",null!=t&&t.isSelected?e.lJ4(4,Ge):e.lJ4(5,K)),e.R7$(),e.Y8G("ngIf",null!==t)}}function Le(a,o){if(1&a&&(e.j41(0,"tr"),e.DNE(1,Ye,3,6,"td",3),e.k0s()),2&a){const t=o.$implicit;e.R7$(),e.Y8G("ngForOf",t)}}class W{date;index;key;count=0;isSelected=!1;isNationalHoliday$;constructor(o,t){this.date=o,this.index=t,this.key=o.getDate(),this.isNationalHoliday$=this.index.isNationalHoliday$(o)}}let Ae=(()=>{class a{route;index;month;monthIndex;urlPrefix;selected=new e.bkB;weekdays=[{name:"\u65e5",value:0,clz:"calendar-sunday"},{name:"\u6708",value:1},{name:"\u706b",value:2},{name:"\u6c34",value:3},{name:"\u6728",value:4},{name:"\u91d1",value:5},{name:"\u571f",value:6,clz:"calendar-saturday"}];monthWeeks;selectedDay;constructor(t,n){this.route=t,this.index=n}ngOnInit(){(0,h.Oi)("CalendarPageComponent.OnInit()");const t=(this.month.firstWeekday+(this.month.days-1))%7,n=(0===this.month.firstWeekday?0:7-this.month.firstWeekday)+this.month.days+(6===t?0:7-t),i=[];for(let c=0;c<n/7;c++){const p=new Array(7);p.fill(null),i.push(p)}const r=this.month.firstWeekday,s=Number(this.monthIndex.yearIndex.key),d=Number(this.monthIndex.key)-1;for(let c=0,p=r;c<this.month.days;c++,p++){const g=c+1,f=new Date(s,d,g);let v=this.month.dayEntries[g];v||(v=new W(f,this.index)),i[Math.floor(p/7)][p%7]=v}this.monthWeeks=i}ngOnDestroy(){(0,h.Oi)("CalendarPageComponent.OnDestroy()")}unselect(){this.selectedDay=null}onClickNothing(t){(0,h.Oi)("onClickNothing()",t),t.preventDefault(),t.stopPropagation()}onClickDay(t,n){(0,h.Oi)("onClickDay()",t,n),t.preventDefault(),t.stopPropagation(),n.page$=this.index.openDayIndexPage$(this.route,this.monthIndex,n)}onPageRetrieved(t,n){this.selectedDay&&(this.selectedDay.page$=null,this.selectedDay.isSelected=!1),t.isSelected=!0,this.selectedDay=t,this.selected.emit({index:t,page:n})}isIndexedDay(t){return t instanceof X}isEmptyDay(t){return t instanceof W}static \u0275fac=function(n){return new(n||a)(e.rXU(x.nX),e.rXU(b))};static \u0275cmp=e.VBU({type:a,selectors:[["gitwee-calendar-page"]],inputs:{month:"month",monthIndex:"monthIndex",urlPrefix:"urlPrefix"},outputs:{selected:"selected"},decls:3,vars:2,consts:[["justDay",""],[1,"shadow","border","border-info","my-2",3,"click"],[4,"ngFor","ngForOf"],["class","text-center",4,"ngFor","ngForOf"],[1,"text-center"],[1,"border",3,"ngClass"],[3,"ngClass",4,"ngIf"],[3,"ngClass"],[4,"ngIf","ngIfElse"],[3,"click","title","href"],[1,"gitwee-calendar-day"],[3,"appAfterIf",4,"ngIf"],[3,"appAfterIf"]],template:function(n,i){1&n&&(e.j41(0,"table",1),e.bIt("click",function(s){return i.onClickNothing(s)}),e.DNE(1,Me,3,4,"th",2)(2,Le,2,1,"tr",2),e.k0s()),2&n&&(e.R7$(),e.Y8G("ngForOf",i.weekdays),e.R7$(),e.Y8G("ngForOf",i.monthWeeks))},dependencies:[m.YU,m.Sq,m.bT,M.n,m.Jj],styles:[".calendar-saturday[_ngcontent-%COMP%]{color:#00f}.calendar-sunday[_ngcontent-%COMP%]{color:red}",".gitwee-sidebar-node[_ngcontent-%COMP%]{transition:transform .5s}.gitwee-sidebar-node[_ngcontent-%COMP%]:hover{transform:scale(1.03);z-index:10000}.gitwee-navi-item[_ngcontent-%COMP%]{display:inline-block;text-overflow:ellipsis;overflow:hidden;white-space:nowrap;vertical-align:text-bottom}.gitwee-calendar-day[_ngcontent-%COMP%]{display:inline-block;white-space:nowrap}"],data:{animation:[]}})}return a})();function Ue(a,o){if(1&a){const t=e.RV6();e.j41(0,"div",2),e.bIt("appAfterIf",function(){const i=e.eBV(t).ngIf,r=e.XpG().$implicit,s=e.XpG(4);return e.Njj(s.onMonthNodeExpanded(r,i))}),e.j41(1,"gitwee-calendar-page",11),e.bIt("selected",function(i){e.eBV(t);const r=e.XpG(5);return e.Njj(r.onDaySelected(i))}),e.k0s()()}if(2&a){const t=o.ngIf,n=e.XpG().$implicit,i=e.XpG(4);e.Y8G("@slidedownTrigger",void 0),e.R7$(),e.Y8G("urlPrefix",i.urlPrefix)("monthIndex",n)("month",t)}}function Be(a,o){if(1&a){const t=e.RV6();e.j41(0,"li",6),e.bIt("click",function(i){const r=e.eBV(t).$implicit,s=e.XpG(4);return e.Njj(s.onClickMonth(i,r))}),e.j41(1,"a",7)(2,"span",8),e.EFF(3),e.k0s()(),e.j41(4,"span",9),e.EFF(5),e.k0s(),e.DNE(6,Ue,2,4,"div",1),e.nI1(7,"async"),e.k0s()}if(2&a){const t=o.$implicit,n=e.XpG(4);e.AVh("gitwee-sidebar-node",!n.selectedMonth||t!==n.selectedMonth),e.R7$(),e.FCK("href","",n.urlPrefix,"/",t.urlLink,"",e.B4B),e.R7$(2),e.SpI("",t.key," \u6708"),e.R7$(),e.AVh("bg-primary",t===n.selectedMonth)("bg-secondary",t!==n.selectedMonth),e.R7$(),e.JRh(t.count),e.R7$(),e.Y8G("ngIf",e.bMT(7,12,t.page$))}}function Ve(a,o){if(1&a){const t=e.RV6();e.j41(0,"div",2),e.bIt("appAfterIf",function(){const i=e.eBV(t).ngIf,r=e.XpG().$implicit,s=e.XpG(2);return e.Njj(s.onYearNodeExpanded(r,i))}),e.j41(1,"ul",10),e.DNE(2,Be,8,14,"li",4),e.k0s()()}if(2&a){const t=o.ngIf;e.Y8G("@slidedownTrigger",void 0),e.R7$(2),e.Y8G("ngForOf",t.monthEntries)}}function Xe(a,o){if(1&a){const t=e.RV6();e.j41(0,"li",6),e.bIt("click",function(i){const r=e.eBV(t).$implicit,s=e.XpG(2);return e.Njj(s.onClickYear(i,r))}),e.j41(1,"a",7)(2,"span",8),e.EFF(3),e.k0s()(),e.j41(4,"span",9),e.EFF(5),e.k0s(),e.DNE(6,Ve,3,2,"div",1),e.nI1(7,"async"),e.k0s()}if(2&a){const t=o.$implicit,n=e.XpG(2);e.AVh("gitwee-sidebar-node",!n.selectedYear||t!==n.selectedYear),e.Y8G("@calendarNodeTrigger",void 0),e.R7$(),e.FCK("href","",n.urlPrefix,"/",t.urlLink,"",e.B4B),e.R7$(2),e.SpI("",t.key," \u5e74"),e.R7$(),e.AVh("bg-primary",t===n.selectedYear)("bg-secondary",t!==n.selectedYear),e.R7$(),e.JRh(t.count),e.R7$(),e.Y8G("ngIf",e.bMT(7,13,t.page$))}}function ze(a,o){if(1&a){const t=e.RV6();e.j41(0,"li",12),e.bIt("click",function(i){e.eBV(t);const r=e.XpG(2);return e.Njj(r.onClickYearToggler(i))}),e.j41(1,"span"),e.EFF(2),e.k0s()()}if(2&a){const t=e.XpG(2);e.Y8G("@calendarNodeTrigger",void 0),e.R7$(2),e.JRh(t.yearShowAll?"\u6298\u308a\u305f\u305f\u3080":"\u8868\u793a\u3092\u5897\u3084\u3059")}}function Je(a,o){if(1&a){const t=e.RV6();e.j41(0,"div",2),e.bIt("appAfterIf",function(){const i=e.eBV(t).ngIf,r=e.XpG();return e.Njj(r.onTopNodeExpanded(i))}),e.j41(1,"ul",3),e.DNE(2,Xe,8,15,"li",4)(3,ze,3,2,"li",5),e.k0s()()}if(2&a){const t=o.ngIf,n=e.XpG();e.Y8G("@calendarListTrigger",void 0),e.R7$(2),e.Y8G("ngForOf",t.yearEntries.slice(0,n.yearCount)),e.R7$(),e.Y8G("ngIf",!n.showYearToggler)}}let He=(()=>{class a{route;index;reloader;index$;nodeExpanded=new e.bkB;notFound=new e.bkB;route$;urlPrefix;reload$=new $.B;reloadId;refreshSubscription;defaultYearCount=3;yearShowAll=!1;isNavigateDerived=!1;pendingFragment=null;destroy$=new $.B;selectedYear;selectedMonth;selectedDay;naviMatcher;allowYearToggler;constructor(t,n,i){this.route=t,this.index=n,this.reloader=i,(0,h.Oi)("CalendarNaviComponent.constructor()");const r="^([0-9]{4})(?:/([0-9]{2})(?:/([0-9]{2})/?)?)?$";this.naviMatcher=new RegExp(r),(0,h.Oi)("CalendarNaviComponent URL Matcher",r)}unselect(t){t||(this.isNavigateDerived=!1),this.index$||(this.index$=this.index.fetchIndex$(this.route)),this.selectedYear&&(this.selectedYear.page$=null),this.selectedYear=null,this.selectedMonth&&(this.selectedMonth.page$=null),this.yearShowAll=!1,this.selectedMonth=null,this.selectedDay=null}get showYearToggler(){return this.allowYearToggler&&!!this.selectedYear}get yearCount(){if(!this.yearShowAll)return this.defaultYearCount}onNodeExpanded(t){(0,h.Oi)("CalendarNaviComponent.onNodeExpanded()",t),this.pendingFragment&&(t.urlLink=`${t.urlLink}#${this.pendingFragment}`,delete this.pendingFragment),this.nodeExpanded.emit(t)}onTopNodeExpanded(t){(0,h.Oi)("CalendarNaviComponent.onTopNodeExpanded()",t,this.isNavigateDerived),this.startWatching(t),this.allowYearToggler=this.defaultYearCount<t.yearEntries.length;for(const n of t.yearEntries)if(n.page$)return;this.isNavigateDerived&&this.onNodeExpanded(t)}onYearNodeExpanded(t,n){(0,h.Oi)("CalendarNaviComponent.onYearNodeExpanded()",t),this.selectedYear&&(this.selectedYear.page$=null),this.selectedYear=t;for(const i of n.monthEntries)if(i.page$)return;this.onNodeExpanded(n)}onMonthNodeExpanded(t,n){(0,h.Oi)("CalendarNaviComponent.onMonthNodeExpanded()",t),this.selectedMonth&&(this.selectedMonth.page$=null),this.selectedMonth=t;for(const i in n.dayEntries)if(n.dayEntries[i].page$)return;this.onNodeExpanded(n)}ensureUnregisterWathing(){this.reloadId&&(this.reloader.unregister(this.reloadId),this.reloadId=null),this.refreshSubscription&&this.refreshSubscription.unsubscribe()}startWatching(t){this.ensureUnregisterWathing();const n=this.reloader.registerWatcher(t.indexUrl,t.updated);this.reloadId=n,this.refreshSubscription=this.reloader.refreshEvent(n).pipe((0,_.Q)(this.destroy$)).subscribe(()=>{this.reload$.next()})}ngOnInit(){(0,h.Oi)("CalendarNaviComponent.OnInit()"),this.route$.pipe((0,_.Q)(this.destroy$)).subscribe(t=>{if(this.isNavigateDerived="Calendar"===t.category,!this.isNavigateDerived)return void this.unselect();if(!t.navigators)return this.index$=null,void this.unselect(!0);const n=t.navigators.match(this.naviMatcher);if(!n)return(0,h.sJ)("No route to",t),void this.unselect(!0);const i=O(n[1]),r=O(n[2]),s=O(n[3]);if(function de(a,o,t){if(a){if(a<1900||9999<a)return!1}else if(o||t)return!1;if(o){if(o<1||12<o)return!1}else if(t)return!1;const n=new Date(a,o,t);return!(n.getFullYear()!==a||n.getMonth()!==o-1||n.getDate()!==t)}(i,r,s))return(0,h.sJ)(`Invalidate Routing date ${i}-${r}-${s}`,t),void this.unselect(!0);(0,h.Oi)(`CalendarNaviComponent detect routing ${i} ${r} ${s} ${t.fragment}`),this.pendingFragment=t.fragment;const d={year:i,month:r,day:s};this.yearShowAll=!!i,this.index$=this.index.fetchIndex$(this.route,d)}),this.reload$.pipe((0,_.Q)(this.destroy$)).subscribe(()=>{const t={year:this.selectedYear?.key,month:this.selectedMonth?.key,day:this.selectedDay?.key,isReload:!0};(0,h.Oi)("Reload is clicked on CalendarNaviComponent.",t),this.selectedDay=null,this.selectedMonth=null,this.selectedYear=null,this.index$=this.index.fetchIndex$(this.route,t)})}ngAfterViewInit(){(0,h.Oi)("CalendarNaviComponent.AfterViewInit()")}ngOnDestroy(){(0,h.Oi)("CalendarNaviComponent.OnDestroy()"),this.ensureUnregisterWathing(),this.destroy$.next()}onClickYearToggler(t){(0,h.Oi)("CalendarNaviComponent.onClickYearToggler()",t),this.yearShowAll=!this.yearShowAll}onClickYear(t,n){if((0,h.Oi)("CalendarNaviComponent.onClickYear()",t,n),t.preventDefault(),t.stopPropagation(),this.selectedMonth=null,this.selectedDay=null,this.selectedYear===n)return this.onNodeExpanded(n.topPage),n.page$=null,void(this.selectedYear=null);n.page$=this.index.openYearPage$(this.route,n)}onClickMonth(t,n){if((0,h.Oi)("CalendarNaviComponent.onClickMonth()",t,n),t.preventDefault(),t.stopPropagation(),this.selectedDay=null,this.selectedMonth===n)return this.onNodeExpanded(n.yearPage),n.page$=null,void(this.selectedMonth=null);n.page$=this.index.openMonthPage$(this.route,n)}onDaySelected(t){(0,h.Oi)("CalendarNaviComponent.onDaySelected()",t),this.selectedDay=t.index,this.onNodeExpanded(t.page)}static \u0275fac=function(n){return new(n||a)(e.rXU(x.nX),e.rXU(b),e.rXU(Y.P))};static \u0275cmp=e.VBU({type:a,selectors:[["gitwee-calendar-navi"]],inputs:{route$:"route$",urlPrefix:"urlPrefix"},outputs:{nodeExpanded:"nodeExpanded",notFound:"notFound"},decls:3,vars:3,consts:[["id","gitweeCalendarYearIndex"],[3,"appAfterIf",4,"ngIf"],[3,"appAfterIf"],[1,"list-group"],["class","list-group-item align-items-center row text-end shadow gitwee-listing-calendar",3,"gitwee-sidebar-node","click",4,"ngFor","ngForOf"],["id","gitweeCalendarNaviToggler","class","align-items-center row btn btn-secondary","role","button","tabindex","0",3,"click",4,"ngIf"],[1,"list-group-item","align-items-center","row","text-end","shadow","gitwee-listing-calendar",3,"click"],[1,"col-8",3,"href"],[1,"gitwee-navi-item"],[1,"badge","rounded-pill","col-4"],[1,"list-group","list-group-flush","my-2"],[3,"selected","urlPrefix","monthIndex","month"],["id","gitweeCalendarNaviToggler","role","button","tabindex","0",1,"align-items-center","row","btn","btn-secondary",3,"click"]],template:function(n,i){1&n&&(e.j41(0,"div",0),e.DNE(1,Je,4,3,"div",1),e.nI1(2,"async"),e.k0s()),2&n&&(e.R7$(),e.Y8G("ngIf",e.bMT(2,1,i.index$)))},dependencies:[m.Sq,m.bT,M.n,Ae,m.Jj],styles:[".gitwee-listing-calendar[_ngcontent-%COMP%]{cursor:pointer}",".gitwee-sidebar-node[_ngcontent-%COMP%]{transition:transform .5s}.gitwee-sidebar-node[_ngcontent-%COMP%]:hover{transform:scale(1.03);z-index:10000}.gitwee-navi-item[_ngcontent-%COMP%]{display:inline-block;text-overflow:ellipsis;overflow:hidden;white-space:nowrap;vertical-align:text-bottom}.gitwee-calendar-day[_ngcontent-%COMP%]{display:inline-block;white-space:nowrap}"],data:{animation:[(0,l.hZ)("calendarNodeTrigger",[(0,l.kY)(":enter",[(0,l.iF)({opacity:0,transform:"translateX(5px)"}),(0,l.i0)("500ms ease-in-out",(0,l.iF)({opacity:1,transform:"none"}))]),(0,l.kY)(":leave",[(0,l.i0)("500ms ease-in-out",(0,l.iF)({opacity:0,transform:"translateX(5px)"}))])]),(0,l.hZ)("calendarListTrigger",[(0,l.kY)(":enter",[(0,l.iF)({opacity:0,transform:"translateX(5px)"}),(0,l.i0)("500ms 200ms ease-in-out",(0,l.iF)({opacity:1,transform:"none"}))]),(0,l.kY)(":leave",[(0,l.iF)({position:"absolute",width:"100%"}),(0,l.i0)("200ms ease-in-out",(0,l.iF)({opacity:0,transform:"translateX(5px)"}))])]),(0,l.hZ)("slidedownTrigger",[(0,l.kY)(":enter",[(0,l.iF)({opacity:0,transform:"translateY(-5px)"}),(0,l.i0)("500ms ease-in-out",(0,l.iF)({opacity:1,transform:"none"}))]),(0,l.kY)(":leave",[(0,l.i0)("500ms ease-in-out",(0,l.iF)({opacity:0,transform:"translateY(-5px)"}))])])]}})}return a})();var Ke=u(6469),We=u(9417);const Qe=["selector"],Ze=[[["option"],["optgroup"]]],qe=["option, optgroup"];let et=(()=>{class a{constructor(t,n,i){this.renderer=t,this.zone=n,this._element=i,this.placeholder="",this.dropdownParent="",this.allowClear=!1,this.disabled=!1,this.id=null,this.class=null,this.required=null,this.valueChanged=new e.bkB,this.element=void 0,this.check=!1,this.propagateChange=r=>{}}ngDoCheck(){}ngOnInit(){}ngOnChanges(t){if(this.element){if(t.data&&JSON.stringify(t.data.previousValue)!==JSON.stringify(t.data.currentValue)){this.initPlugin();const n=this.value;this.setElementValue(n),this.valueChanged.emit(n),this.propagateChange(n)}if(t.value&&t.value.previousValue!==t.value.currentValue){const n=t.value.currentValue;this.setElementValue(n),this.valueChanged.emit(n),this.propagateChange(n)}t.disabled&&t.disabled.previousValue!==t.disabled.currentValue&&this.renderer.setProperty(this.selector.nativeElement,"disabled",this.disabled),t.placeholder&&t.placeholder.previousValue!==t.placeholder.currentValue&&this.element.data("select2").$container.find(".select2-selection__placeholder").text(this.placeholder),t.dropdownParent&&t.dropdownParent.previousValue!==t.dropdownParent.currentValue&&this.renderer.setAttribute(this.selector.nativeElement,"data-dropdownParent","#"+this.dropdownParent),t.allowClear&&t.allowClear.previousValue!==t.allowClear.currentValue&&this.renderer.setAttribute(this.selector.nativeElement,"data-allow-clear",this.allowClear.toString())}}ngAfterViewInit(){this.element=jQuery(this.selector.nativeElement),this.renderer.setAttribute(this.selector.nativeElement,"data-dropdownParent","#"+this.dropdownParent),this.renderer.setAttribute(this.selector.nativeElement,"data-allow-clear",this.allowClear.toString()),this.initPlugin(),null!=this.value&&this.setElementValue(this.value),this.element.on("select2:select select2:unselect change",t=>{const n=this.element.val();this.valueChanged.emit(n),"change"!==t.type&&this.propagateChange(n)})}ngOnDestroy(){this.element&&this.element.off("select2:select")}initPlugin(){if(!this.element.select2)return void(this.check||(this.check=!0,console.log("Please add Select2 library (js file) to the project.You can download it from https://github.com/select2/select2/tree/master/dist/js.")));!0===this.element.hasClass("select2-hidden-accessible")&&(this.element.select2("destroy"),this.renderer.setProperty(this.selector.nativeElement,"innerHTML",""));const t={data:this.data,width:this.width?this.width:"resolve",placeholder:this.placeholder};this.dropdownParent&&(t.dropdownParent=jQuery("#"+this.dropdownParent)),Object.assign(t,this.options),t.matcher?jQuery.fn.select2.amd.require(["select2/compat/matcher"],n=>{t.matcher=n(t.matcher),this.element.select2(t),typeof this.value<"u"&&this.setElementValue(this.value)}):this.element.select2(t),this.renderer.setProperty(this.selector.nativeElement,"disabled",this.disabled)}setElementValue(t){if(Array.isArray(t))for(const n of this.selector.nativeElement.options)this.renderer.setProperty(n,"selected",t.indexOf(n.value)>-1);else this.renderer.setProperty(this.selector.nativeElement,"value",t);this.element&&this.element.trigger("change.select2")}writeValue(t){void 0!==t&&(this.value=t,this.setElementValue(t))}registerOnChange(t){this.propagateChange=t}registerOnTouched(){}setDisabledState(t){this.disabled=t,this.renderer.setProperty(this.selector.nativeElement,"disabled",this.disabled)}}return a.\u0275fac=function(t){return new(t||a)(e.rXU(e.sFG),e.rXU(e.SKi),e.rXU(e.aKT))},a.\u0275cmp=e.VBU({type:a,selectors:[["ng-select2"]],viewQuery:function(t,n){if(1&t&&e.GBs(Qe,7),2&t){let i;e.mGM(i=e.lsd())&&(n.selector=i.first)}},inputs:{data:"data",placeholder:"placeholder",dropdownParent:"dropdownParent",allowClear:"allowClear",value:"value",width:"width",disabled:"disabled",id:"id",class:"class",required:"required",options:"options"},outputs:{valueChanged:"valueChanged"},features:[e.Jv_([{provide:We.kq,useExisting:(0,e.Rfq)(()=>a),multi:!0}]),e.OA$],ngContentSelectors:qe,decls:3,vars:3,consts:[["selector",""]],template:function(t,n){1&t&&(e.NAR(Ze),e.j41(0,"select",null,0),e.SdG(2),e.k0s()),2&t&&e.BMQ("id",n.id)("class",n.class)("required",n.required)},encapsulation:2,changeDetection:0}),a})(),tt=(()=>{class a{}return a.\u0275fac=function(t){return new(t||a)},a.\u0275mod=e.$C({type:a}),a.\u0275inj=e.G2t({imports:[[m.MD]]}),a})();const nt=()=>({theme:"bootstrap-5"});function it(a,o){if(1&a){const t=e.RV6();e.j41(0,"li",7),e.bIt("click",function(i){const r=e.eBV(t).$implicit,s=e.XpG(2);return e.Njj(s.onClickTag(i,r))}),e.j41(1,"a",8)(2,"span",9),e.EFF(3),e.k0s()(),e.j41(4,"span",10),e.EFF(5),e.k0s()()}if(2&a){const t=o.$implicit,n=e.XpG(2);e.FCK("title","",t.title,"",t.noteTooltip?": "+t.noteTooltip:"",""),e.R7$(),e.FCK("href","",n.urlPrefix,"/",t.urlLink,"",e.B4B),e.R7$(2),e.JRh(t.title),e.R7$(),e.AVh("bg-primary",(null==n.selectedPage?null:n.selectedPage.tagkey)===t.tagkey)("bg-secondary",(null==n.selectedPage?null:n.selectedPage.tagkey)!==t.tagkey),e.R7$(),e.JRh(t.count)}}function at(a,o){if(1&a){const t=e.RV6();e.j41(0,"span",15),e.bIt("click",function(i){const r=e.eBV(t).$implicit,s=e.XpG(3);return e.Njj(s.onClickTag(i,r))}),e.EFF(1),e.k0s()}if(2&a){const t=o.$implicit;e.FCK("title","",t.title,"",t.noteTooltip?": "+t.noteTooltip:"",""),e.R7$(),e.Lme("",t.title," ( ",t.count," )")}}function rt(a,o){if(1&a&&(e.j41(0,"li",5)(1,"div",11)(2,"button",12),e.EFF(3,"\u305d\u306e\u4ed6"),e.k0s(),e.j41(4,"div",13),e.DNE(5,at,2,5,"span",14),e.k0s()()()),2&a){const t=e.XpG().ngIf,n=e.XpG();e.R7$(5),e.Y8G("ngForOf",t.entries.slice(n.TagDefaultCount,n.TagMaxCount))}}function st(a,o){if(1&a){const t=e.RV6();e.j41(0,"div",1)(1,"div")(2,"ul",2),e.DNE(3,it,6,12,"li",3)(4,rt,6,1,"li",4),e.j41(5,"li",5)(6,"ng-select2",6),e.nI1(7,"async"),e.bIt("valueChanged",function(i){e.eBV(t);const r=e.XpG();return e.Njj(r.onValueChanged(i))}),e.k0s()()()()()}if(2&a){const t=o.ngIf,n=e.XpG();e.Y8G("@tagListTrigger",void 0),e.R7$(3),e.Y8G("ngForOf",t.entries.slice(0,n.TagDefaultCount)),e.R7$(),e.Y8G("ngIf",t.entries.length>n.TagDefaultCount),e.R7$(2),e.Y8G("allowClear",!0)("value",n.selectedTag)("options",e.lJ4(9,nt))("data",e.bMT(7,7,n.tagAllSelect2$))}}let ot=(()=>{class a{route;index;reloader;index$;tagAllSelect2$;destroy$=new $.B;tagSelect2Changed$=new $.B;route$;urlPrefix;tagSelected=new e.bkB;tagUnselected=new e.bkB;TagDefaultCount=10;TagMaxCount=27;isNavigateDerived=!1;indexSub=null;selectedPage=null;tagMatcher;reloadListId;refreshListSubscription=null;reloadId=null;refreshSubscription=null;constructor(t,n,i){this.route=t,this.index=n,this.reloader=i,(0,h.Oi)("TagNaviComponent.constructor()");const r="^([-_a-zA-Z0-9]+)/?$";(0,h.Oi)("TagNaviComponent URL Matcher",r),this.tagMatcher=new RegExp(r)}ngOnInit(){(0,h.Oi)("TagNaviComponent.OnInit()"),this.route$.pipe((0,_.Q)(this.destroy$)).subscribe(t=>{if(this.isNavigateDerived="Tag"===t.category,!this.isNavigateDerived||!t.navigators)return void this.unselect(!0);const n=t.navigators.match(this.tagMatcher);if(!n)return void this.unselect(!0);const i=n[1];(0,h.Oi)(`TagNaviComponent detect routing ${i}`),this.selectTag(i,!1)}),this.reloadListId=this.reloader.registerLoader(),this.index$=(0,A.h)((0,N.of)(void 0),this.reloader.refreshEvent(this.reloadListId)).pipe((0,C.n)(()=>this.index.fetchTagList$(this.route)),(0,w.t)(1)),this.tagAllSelect2$=this.index$.pipe((0,y.T)(t=>{const n=[];for(const i of t.entries)n.push({id:i.tagkey,text:`${i.title} ( ${i.count} )`,additional:i});return n})),this.tagSelect2Changed$.pipe((0,R.B)(500),(0,G.F)(),(0,_.Q)(this.destroy$)).subscribe(t=>{this.onTagChanged(t)})}ngOnDestroy(){this.refreshListSubscription&&(this.refreshListSubscription.unsubscribe(),this.refreshListSubscription=null),this.reloadListId&&this.reloader.unregister(this.reloadListId),this.ensureUnregisterTagWathing(),this.destroy$.next()}unselect(t){this.ensureUnregisterTagWathing(),t||(this.isNavigateDerived=!1),this.selectedPage=null,this.hideOtherDropdown()}selectTag(t,n,i){if(this.indexSub&&(this.indexSub.unsubscribe(),this.indexSub=null),null===t)return this.selectedPage=null,void this.tagUnselected.emit();this.indexSub=this.index.fetchTagIndex$(this.route,{tagkey:t,isReload:n,isClicked:i}).pipe((0,_.Q)(this.destroy$)).subscribe(s=>{(0,h.Oi)("TagNaviComponent Selected",s),this.startTagWatching(s),this.isNavigateDerived&&(this.selectedPage=s,this.tagSelected.emit(s))})}hideOtherDropdown(){const t=document.getElementById("gitweeTagNaviDropdownButton");t&&new Ke.ms(t).hide()}onClickTag(t,n){(0,h.Oi)("TagNaviComponent.onClickTag()",n),t.preventDefault(),t.stopPropagation(),this.hideOtherDropdown(),this.isNavigateDerived=!0,this.selectTag(n.tagkey,!1,!0)}onValueChanged(t){(0,h.Oi)("TagNaviComponent.onValueChanged()",t),this.tagSelect2Changed$.next(t||null)}onTagChanged(t){this.isNavigateDerived=!!t,this.selectTag(t,!1,!0)}ensureUnregisterTagWathing(){this.reloadId&&(this.reloader.unregister(this.reloadId),this.reloadId=null),this.refreshSubscription&&(this.refreshSubscription.unsubscribe(),this.refreshSubscription=null)}startTagWatching(t){this.ensureUnregisterTagWathing();const n=this.reloader.registerWatcher(t.indexUrl,t.updated);this.reloadId=n,this.refreshSubscription=this.reloader.refreshEvent(n).pipe((0,_.Q)(this.destroy$)).subscribe(()=>{this.selectTag(t.tagkey,!0)})}get selectedTag(){return this.isNavigateDerived&&this.selectedPage?.tagkey||""}static \u0275fac=function(n){return new(n||a)(e.rXU(x.nX),e.rXU(b),e.rXU(Y.P))};static \u0275cmp=e.VBU({type:a,selectors:[["gitwee-tag-navi"]],inputs:{route$:"route$",urlPrefix:"urlPrefix"},outputs:{tagSelected:"tagSelected",tagUnselected:"tagUnselected"},decls:2,vars:3,consts:[["id","gitweeTagNaviIndex",4,"ngIf"],["id","gitweeTagNaviIndex"],[1,"list-group"],["class","list-group-item align-items-center row text-end shadow row gitwee-listing-tag gitwee-sidebar-node",3,"title","click",4,"ngFor","ngForOf"],["class","list-group-item align-items-center row text-end shadow gitwee-listing-tag",4,"ngIf"],[1,"list-group-item","align-items-center","row","text-end","shadow","gitwee-listing-tag"],["width","100%","placeholder","\u30bf\u30b0\u3067\u691c\u7d22",1,"col-auto","dropdown",3,"valueChanged","allowClear","value","options","data"],[1,"list-group-item","align-items-center","row","text-end","shadow","row","gitwee-listing-tag","gitwee-sidebar-node",3,"click","title"],[1,"col-8",3,"href"],[1,"gitwee-navi-item"],[1,"badge","rounded-pill","col-4"],[1,"btn-group","col-auto","dropdown"],["id","gitweeTagNaviDropdownButton","type","button","data-bs-toggle","dropdown","aria-haspopup","true","aria-expanded","false",1,"btn","btn-secondary","dropdown-toggle"],["id","gitweeTagNaviDropdownOthers",1,"dropdown-menu"],["class","dropdown-item","style","font-size: 0.7em;",3,"title","click",4,"ngFor","ngForOf"],[1,"dropdown-item",2,"font-size","0.7em",3,"click","title"]],template:function(n,i){1&n&&(e.DNE(0,st,8,10,"div",0),e.nI1(1,"async")),2&n&&e.Y8G("ngIf",e.bMT(1,1,i.index$))},dependencies:[m.Sq,m.bT,et,m.Jj],styles:[".gitwee-listing-tag[_ngcontent-%COMP%]{cursor:pointer}",".gitwee-sidebar-node[_ngcontent-%COMP%]{transition:transform .5s}.gitwee-sidebar-node[_ngcontent-%COMP%]:hover{transform:scale(1.03);z-index:10000}.gitwee-navi-item[_ngcontent-%COMP%]{display:inline-block;text-overflow:ellipsis;overflow:hidden;white-space:nowrap;vertical-align:text-bottom}.gitwee-calendar-day[_ngcontent-%COMP%]{display:inline-block;white-space:nowrap}"],data:{animation:[(0,l.hZ)("tagListTrigger",[(0,l.kY)(":enter",[(0,l.iF)({opacity:0,transform:"translateX(5px)"}),(0,l.i0)("500ms 200ms ease-in-out",(0,l.iF)({opacity:1,transform:"none"}))]),(0,l.kY)(":leave",[(0,l.iF)({position:"absolute",width:"100%"}),(0,l.i0)("200ms ease-in-out",(0,l.iF)({opacity:0,transform:"translateX(5px)"}))])])]}})}return a})();var lt=u(1584),dt=u(345);function ct(a,o){1&a&&e.nrm(0,"div",5),2&a&&e.Y8G("innerHTML",o.$implicit,e.npT)}function ut(a,o){if(1&a){const t=e.RV6();e.j41(0,"div")(1,"button",2),e.bIt("click",function(i){e.eBV(t);const r=e.sdS(4),s=e.XpG();return e.Njj(s.onClickToggle(i,r))}),e.EFF(2,"\u5916\u90e8\u30b5\u30a4\u30c8 (Banner)"),e.k0s(),e.j41(3,"div",3,0),e.DNE(5,ct,1,1,"div",4),e.k0s()()}if(2&a){const t=e.XpG();e.R7$(3),e.xc7("display","none"==t.shownState?"none":"block"),e.Y8G("@displayTrigger",t.shownState),e.R7$(2),e.Y8G("ngForOf",t.bannerList)}}let ht=(()=>{class a{http;sanitizer;dom;shownState="none";destroy$=new $.B;trustedScript$;refreshEvent$=new T.t(void 0);banners$;bannerList=[];isShown=!1;scriptIdList=[];constructor(t,n,i){this.http=t,this.sanitizer=n,this.dom=i}ngOnDestroy(){this.purgeDynamicScripts(),this.destroy$.next()}ngOnInit(){this.trustedScript$=this.http.fetchGhJson("/UserData/trusted-script.json").pipe((0,y.T)(n=>{const i={};for(const r of n.scripts)i[r.href]=r;return i}),(0,w.t)(1));const t=this.refreshEvent$.pipe((0,R.B)(500));this.banners$=t.pipe((0,C.n)(()=>this.http.fetchGhJson("/UserData/banner.json").pipe((0,w.t)(1)))),(0,k.z)([this.banners$,this.trustedScript$]).pipe((0,_.Q)(this.destroy$)).subscribe(([n,i])=>{const r=[];this.purgeDynamicScripts();for(const s of n.banners)if(r.push(this.sanitizer.bypassSecurityTrustHtml(s.bodyHtml)),s.scripts)for(const d of s.scripts){if(!(d in i)){(0,h.sJ)(`Unable load insecure script from ${d}`);continue}const c=this.dom.ensureDynamicScript(d);this.scriptIdList.includes(c)||this.scriptIdList.push(c)}this.bannerList=r})}purgeDynamicScripts(){for(;this.scriptIdList.length>0;)this.dom.removeDynamicScript(this.scriptIdList[0]),this.scriptIdList.splice(0,1)}hackIFrame(t){const n=t.querySelectorAll("iframe");for(let i=0;i<n.length;i++)n[i].width="100%",i++}lazyCall(t,n){(0,lt.O)(t).pipe((0,B.s)(1)).subscribe(i=>{n()})}onClickToggle(t,n){this.isShown=!this.isShown,this.shownState="animating",this.lazyCall(400,this.isShown?()=>this.shownState="visible":()=>this.shownState="none"),this.isShown?this.hackIFrame(n):this.refreshEvent$.next()}static \u0275fac=function(n){return new(n||a)(e.rXU(J.kl),e.rXU(dt.up),e.rXU(D.K))};static \u0275cmp=e.VBU({type:a,selectors:[["app-external-banner"]],decls:1,vars:1,consts:[["bodyNode",""],[4,"ngIf"],[1,"btn","btn-secondary",2,"width","100%",3,"click"],[1,"app-external-banner-body","m-2"],["class","m-1",3,"innerHTML",4,"ngFor","ngForOf"],[1,"m-1",3,"innerHTML"]],template:function(n,i){1&n&&e.DNE(0,ut,6,4,"div",1),2&n&&e.Y8G("ngIf",i.bannerList&&i.bannerList.length>0)},dependencies:[m.Sq,m.bT],styles:[".gitwee-sidebar-node[_ngcontent-%COMP%]{transition:transform .5s}.gitwee-sidebar-node[_ngcontent-%COMP%]:hover{transform:scale(1.03);z-index:10000}.gitwee-navi-item[_ngcontent-%COMP%]{display:inline-block;text-overflow:ellipsis;overflow:hidden;white-space:nowrap;vertical-align:text-bottom}.gitwee-calendar-day[_ngcontent-%COMP%]{display:inline-block;white-space:nowrap}"],data:{animation:[(0,l.hZ)("displayTrigger",[(0,l.kY)("none => animating",[(0,l.iF)({opacity:0,transform:"translateY(-5px)"}),(0,l.i0)("500ms ease-in-out",(0,l.iF)({opacity:1,transform:"none"}))]),(0,l.kY)("visible => animating",[(0,l.iF)({opacity:1,transform:"none"}),(0,l.i0)("500ms ease-in-out",(0,l.iF)({opacity:0,transform:"translateY(-5px)"}))])])]}})}return a})();const pt=["tagNavi"],gt=["sideNavigator"],ft=["gitweeFireGitweeContainer"];function mt(a,o){if(1&a){const t=e.RV6();e.j41(0,"div",17,3),e.bIt("appAfterIf",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.activatedFireGitwee())}),e.k0s()}}function vt(a,o){if(1&a){const t=e.RV6();e.j41(0,"div",18),e.bIt("click",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.doUnmask())}),e.j41(1,"div",19),e.qSk(),e.j41(2,"svg",20)(3,"defs")(4,"linearGradient",21),e.nrm(5,"stop",22)(6,"stop",23)(7,"stop",24),e.k0s()(),e.j41(8,"circle",25),e.nrm(9,"animateTransform",26),e.k0s(),e.j41(10,"text",27)(11,"tspan",28),e.EFF(12,"G"),e.nrm(13,"animate",29),e.k0s(),e.j41(14,"tspan",30),e.EFF(15,"i"),e.nrm(16,"animate",31),e.k0s(),e.j41(17,"tspan",32),e.EFF(18,"t"),e.nrm(19,"animate",33),e.k0s(),e.j41(20,"tspan",34),e.EFF(21,"w"),e.nrm(22,"animate",35),e.k0s(),e.j41(23,"tspan",36),e.EFF(24,"e"),e.nrm(25,"animate",37),e.k0s(),e.j41(26,"tspan",38),e.EFF(27,"e"),e.nrm(28,"animate",39),e.k0s()()()()()}2&a&&e.Y8G("@loadingTrigger",void 0)}let yt=(()=>{class a{dom;route;router;index;loader;localSession;targetTimeline$=new $.B;destroy$=new $.B;isLoading;gitweeRoute$;defaultTopPage$;gitweeUrlPrefix;eventShowFireGitwee$;overrideStyleClass;selectedNavigator;tagNavi;sideNavigator;sidebarStickyTop$=new T.t(null);constructor(t,n,i,r,s,d){this.dom=t,this.route=n,this.router=i,this.index=r,this.loader=s,this.localSession=d,this.isLoading=!this.index.isInitialized}extractGitweePath(t){const n=this.gitweeUrlPrefix;if(t!==n&&!t.startsWith(`${n}/`))throw new Error(`Unable parse a GitweePath URL: ${t}`);let i=t.substring(n.length);if(i.startsWith("/")&&(i=i.substring(1)),""===i)return["Calendar",null];const r=i.match(/^timeline(?:\/(.*))?$/);if(r)return["Calendar",r[1]];const s=i.match(/^tag(?:\/(.*))?$/);if(s)return["Tag",s[1]];throw new Error(`Unsupported Path of the Gitwee ${i}`)}ngOnInit(){(0,h.Oi)("Gitwee.MainComponent.OnInit()",this.route,this.route.pathFromRoot),this.gitweeUrlPrefix="/"+this.route.pathFromRoot.reduce((p,g)=>g.routeConfig?.path?[g.routeConfig?.path,...p]:p,[]).join("/");const t=this.route.data.pipe((0,B.s)(1));this.gitweeRoute$=(0,k.z)([t,this.router.urlNavigation$]).pipe((0,y.T)(([p,g])=>{(0,h.Oi)("MainComponent detect urlNavigation$",p,g);const f=new oe;return f.ns=p.gitweeNamespace,[f.category,f.navigators]=this.extractGitweePath(g.path),f.fragment=g.fragment,f}),(0,w.t)(1)),this.index.fetchConfig$(this.route).pipe((0,_.Q)(this.destroy$)).subscribe(p=>{p.styles&&(this.overrideStyleClass=this.dom.overrideBasicStyle(p.styles))});const n=(0,A.h)((0,N.of)(window.innerHeight),(0,U.R)(window,"resize").pipe((0,y.T)(p=>window.innerHeight),(0,G.F)())),i=(0,U.R)(window,"scroll").pipe((0,y.T)(p=>window.scrollY),(0,ee.S)((p,g)=>[g,p[0],p[1]],[0,null,null])),r=(0,q.Y)(300).pipe((0,y.T)(p=>this.sidebarElemenet?.clientHeight),(0,G.F)());(0,k.z)([n,r]);let d=0,c=0;(0,k.z)([i,n,r]).pipe((0,_.Q)(this.destroy$)).subscribe(([[p,g,f],v,I])=>{const It=d-p,Q=v-I,Tt=Q>=60?60:Math.min(Q,0),j=Math.max(Math.min(It+c,60),Tt);g<p?(f>g&&(d=p,c=j),this.sidebarStickyTop$.next(j)):g===p||(f<g&&(d=p,c=j),this.sidebarStickyTop$.next(j))}),this.eventShowFireGitwee$=(0,k.z)([this.localSession.loginStateChanged$,t,this.router.currentUrl$]).pipe((0,y.T)(([p,g,f])=>{if(!p)return!1;const[v,I]=this.extractGitweePath(f);return!(I||"diary"!==g.gitweeNamespace||"Calendar"!==v)}),(0,G.F)(),(0,_.Q)(this.destroy$))}ngOnDestroy(){(0,h.Oi)("MainComponent.OnDestroy()"),this.dom.cleanupOverrideStyle(this.overrideStyleClass),this.destroy$.next()}ngAfterViewInit(){(0,h.Oi)("MainComponent.AfterViewInit()")}activatedFireGitwee(){var t=this;return(0,E.A)(function*(){yield t.doLazyLoadFireGitwee()})()}gitweeFireGitweeContainer;get sidebarElemenet(){return this.sideNavigator?.element.nativeElement}doLazyLoadFireGitwee(){var t=this;return(0,E.A)(function*(){t.gitweeFireGitweeContainer.element.nativeElement.innerHTML="",t.gitweeFireGitweeContainer.clear();const{FireGitweeModule:n}=yield Promise.all([u.e(152),u.e(79),u.e(642)]).then(u.bind(u,4642)),{FireGitweeComponent:i}=yield Promise.all([u.e(152),u.e(79),u.e(979)]).then(u.bind(u,4979));t.loader.appendComponent(t.gitweeFireGitweeContainer,n,i)})()}entriesSelected(t,n){(0,h.Oi)("MainComponent.entriesSelected()",t,n),this.dom.setTitle(`Gitwee Blog: ${n.title}`),this.targetTimeline$.next(n),this.selectedNavigator&&this.selectedNavigator!==t&&(this.selectedNavigator.unselect(),this.selectedNavigator=null),this.selectedNavigator=t,this.router.replaceJustUrl(`${this.gitweeUrlPrefix}/${n.urlLink}`),this.isLoading&&setTimeout(()=>this.doUnmask(),3e3)}entriesNotFound(t){(0,h.Oi)("MainComponent.entriesNotFound()",t),this.router.navigateByUrl(this.gitweeUrlPrefix)}doUnmask(){this.index.initialized(),this.isLoading=!1}static \u0275fac=function(n){return new(n||a)(e.rXU(D.K),e.rXU(x.nX),e.rXU(z.O),e.rXU(b),e.rXU(ce.Z),e.rXU(ue.Q))};static \u0275cmp=e.VBU({type:a,selectors:[["ng-component"]],viewQuery:function(n,i){if(1&n&&(e.GBs(pt,5),e.GBs(gt,5,e.c1b),e.GBs(ft,5,e.c1b)),2&n){let r;e.mGM(r=e.lsd())&&(i.tagNavi=r.first),e.mGM(r=e.lsd())&&(i.sideNavigator=r.first),e.mGM(r=e.lsd())&&(i.gitweeFireGitweeContainer=r.first)}},decls:18,vars:14,consts:[["sideNavigator",""],["tagNavi",""],["calendarNavi",""],["gitweeFireGitweeContainer",""],[1,"container-fluid"],["id","gitweeMainContainer",1,"row","flex-xl-nowrap"],["id","gitweeSidebarNavContainer",1,"col-12","col-md-4","col-xl-3","navbar-dark","rounded"],["type","button","data-bs-toggle","collapse","data-bs-target","#gitweeSidebarNavBody","aria-expanded","true","aria-label","Toggle docs navigation",1,"navbar-toggler","d-md-none","collapsed"],[1,"navbar-toggler-icon"],["id","gitweeSidebarNavBody",1,"collapse",2,"position","sticky"],[1,"m-1",3,"tagSelected","tagUnselected","route$","urlPrefix"],[1,"m-1",3,"nodeExpanded","notFound","route$","urlPrefix"],[1,"m-1"],["id","gitweeTimelineContainer",1,"col-12","col-md-8","col-xl-9"],["id","gitweeFireGitweeContainer",3,"appAfterIf",4,"ngIf"],[3,"naviEntries$"],["id","gitweeLoadingLogoMask",3,"click",4,"ngIf"],["id","gitweeFireGitweeContainer",3,"appAfterIf"],["id","gitweeLoadingLogoMask",3,"click"],["id","gitweeLogoMask"],["xmlns","http://www.w3.org/2000/svg","width","45vw","height","45vw"],["id","gitweeSvgGradient1"],["offset","0%","stop-color","#31b271",1,"stop1"],["offset","50%","stop-color","#eb6ba4","stop-opacity","0.8",1,"stop2"],["offset","100%","stop-color","#1db8ee",1,"stop3"],["id","gitweeLoadingCircle","fill","none","transform-origin","center","stroke","url(#gitweeSvgGradient1)","stroke-width","1.5%","cx","50%","cy","50%","r","30%"],["attributeName","transform","attributeType","XML","keyTimes","0;1","calcMode","spline","keySplines","0.42 0.0 0.58 1.0","type","rotate","from","0","to","-2160","dur","3s","additive","replace","fill","freeze","repeatCount","indefinite"],["id","gitweeLogoText","x","28% 38% 43% 54% 65% 75% 86%","stroke","none","font-size","8vw","lengthAdjust","spacing","textLength","100%","text-anchor","middle","font-family","Verdana","y","55% 55% 55% 55% 55% 55%"],["id","gitwee-char1","fill","#eb6ba4",1,"gitwee-char"],["attributeType","XML","attributeName","dy","dur","3s","values","-15%; 0    ; -8% ; 0    ; -4% ; 0   ; -1.5% ; 0   ; 0","keyTimes","0 ; 0.03 ; 0.05 ; 0.07 ; 0.09; 0.12; 0.14; 0.16; 1","begin","1.0s;","repeatCount","indefinite"],["id","gitwee-char2","fill","#31b271",1,"gitwee-char"],["attributeType","XML","attributeName","dy","dur","3s","values","-15%; 0    ; -8% ; 0    ; -4% ; 0   ; -1.5% ; 0   ; 0","keyTimes","0 ; 0.03 ; 0.05 ; 0.07 ; 0.09; 0.12; 0.14; 0.16; 1","begin","1.8s;","repeatCount","indefinite"],["id","gitwee-char3","fill","#1db8ee",1,"gitwee-char"],["attributeType","XML","attributeName","dy","dur","3s","values","-15%; 0    ; -8% ; 0    ; -4% ; 0   ; -1.5% ; 0   ; 0","keyTimes","0 ; 0.03 ; 0.05 ; 0.07 ; 0.09; 0.12; 0.14; 0.16; 1","begin","2.6s;","repeatCount","indefinite"],["id","gitwee-char4","fill","#fff562",1,"gitwee-char"],["attributeType","XML","attributeName","dy","dur","3s","values","-15%; 0    ; -8% ; 0    ; -4% ; 0   ; -1.5% ; 0   ; 0","keyTimes","0 ; 0.03 ; 0.05 ; 0.07 ; 0.09; 0.12; 0.14; 0.16; 1","begin","1.4s;","repeatCount","indefinite"],["id","gitwee-char5","fill","#24b6b3",1,"gitwee-char"],["attributeType","XML","attributeName","dy","dur","3s","values","-15%; 0    ; -8% ; 0    ; -4% ; 0   ; -1.5% ; 0   ; 0","keyTimes","0 ; 0.03 ; 0.05 ; 0.07 ; 0.09; 0.12; 0.14; 0.16; 1","begin","2.2s;","repeatCount","indefinite"],["id","gitwee-char6","fill","#6357a3",1,"gitwee-char"],["attributeType","XML","attributeName","dy","dur","3s","values","-15%; 0    ; -8% ; 0    ; -4% ; 0   ; -1.5% ; 0   ; 0","keyTimes","0 ; 0.03 ; 0.05 ; 0.07 ; 0.09; 0.12; 0.14; 0.16; 1","begin","3.0s;","repeatCount","indefinite"]],template:function(n,i){if(1&n){const r=e.RV6();e.j41(0,"div",4)(1,"div",5)(2,"div",6)(3,"button",7),e.nrm(4,"span",8),e.k0s(),e.j41(5,"div",9,0),e.nI1(7,"async"),e.j41(8,"gitwee-tag-navi",10,1),e.bIt("tagSelected",function(d){e.eBV(r);const c=e.sdS(9);return e.Njj(i.entriesSelected(c,d))})("tagUnselected",function(){e.eBV(r);const d=e.sdS(9);return e.Njj(i.entriesNotFound(d))}),e.k0s(),e.j41(10,"gitwee-calendar-navi",11,2),e.bIt("nodeExpanded",function(d){e.eBV(r);const c=e.sdS(11);return e.Njj(i.entriesSelected(c,d))})("notFound",function(){e.eBV(r);const d=e.sdS(11);return e.Njj(i.entriesNotFound(d))}),e.k0s(),e.nrm(12,"app-external-banner",12),e.k0s()(),e.j41(13,"div",13),e.DNE(14,mt,2,0,"div",14),e.nI1(15,"async"),e.nrm(16,"gitwee-timeline",15),e.k0s()()(),e.DNE(17,vt,29,1,"div",16)}2&n&&(e.Y8G("@animationTrigger",void 0),e.R7$(5),e.xc7("top",e.bMT(7,10,i.sidebarStickyTop$),"px"),e.R7$(3),e.Y8G("route$",i.gitweeRoute$)("urlPrefix",i.gitweeUrlPrefix),e.R7$(2),e.Y8G("route$",i.gitweeRoute$)("urlPrefix",i.gitweeUrlPrefix),e.R7$(4),e.Y8G("ngIf",e.bMT(15,12,i.eventShowFireGitwee$)),e.R7$(2),e.Y8G("naviEntries$",i.targetTimeline$),e.R7$(),e.Y8G("ngIf",i.isLoading))},dependencies:[m.bT,M.n,Ee,He,ot,ht,m.Jj],styles:["#gitweeMainContainer[_ngcontent-%COMP%]{flex-direction:row-reverse}@media (min-width: 768px){#gitweeSidebarNavBody[_ngcontent-%COMP%]{display:block}}@media not screen and (min-width: 768px){#gitweeSidebarNavContainer[_ngcontent-%COMP%]{background-color:#cfdee7}}#gitweeSidebarNavContainer[_ngcontent-%COMP%]{text-align:left;z-index:10}#gitweeLoadingLogoMask[_ngcontent-%COMP%]{left:0%;top:0%;position:fixed;background:#8b7355;opacity:.75;width:100%;height:100%;text-align:center;z-index:99999999}#gitweeLogoMask[_ngcontent-%COMP%]{top:20%;position:relative}"],data:{animation:[(0,l.hZ)("animationTrigger",[(0,l.kY)(":enter",[(0,l.iF)({opacity:0}),(0,l.i0)("800ms ease-in-out",(0,l.iF)({opacity:1}))])]),(0,l.hZ)("loadingTrigger",[(0,l.kY)(":enter",[(0,l.iF)({transform:"translateY(-100%)",opacity:0}),(0,l.i0)("800ms ease-in-out",(0,l.iF)({transform:"none",opacity:"*"}))]),(0,l.kY)(":leave",[(0,l.i0)("800ms ease-in-out",(0,l.iF)({transform:"translateY(-100%)",opacity:0}))])])]}})}return a})();const xt=[{path:"index.htm",redirectTo:""},{path:"jump/**",component:u(9108).s},{path:"",component:yt,children:[{path:"timeline",children:[{path:"index.htm",redirectTo:""}]},{path:"timeline/:year",children:[{path:"index.htm",redirectTo:""}]},{path:"timeline/:year/:month",children:[{path:"index.htm",redirectTo:""}]},{path:"timeline/:year/:month/:day",children:[{path:"index.htm",redirectTo:""}]},{path:"tag/:tagkey",children:[{path:"index.htm",redirectTo:""}]},{path:"**",redirectTo:""}]}];let Ct=(()=>{class a{static \u0275fac=function(n){return new(n||a)};static \u0275mod=e.$C({type:a});static \u0275inj=e.G2t({imports:[x.iI.forChild(xt),x.iI]})}return a})();var $t=u(5427),wt=u(9263);let bt=(()=>{class a{constructor(){(0,h.rD)("Dynamically loaded GitweeModule")}static \u0275fac=function(n){return new(n||a)};static \u0275mod=e.$C({type:a});static \u0275inj=e.G2t({providers:[b],imports:[m.MD,tt,Ct,$t.j,wt.w]})}return a})()}}]);