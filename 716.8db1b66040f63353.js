"use strict";(self.webpackChunkKaguraGithubPages=self.webpackChunkKaguraGithubPages||[]).push([[716],{1716:(Ae,G,r)=>{r.r(G),r.d(G,{GrowUpSimulatorModule:()=>Ge});var g=r(1368),x=r(3660),A=r(4192),S=r(8072),L=r(2668),F=r(6716),u=r(2332),k=r(5657),b=r(2540),y=r(6700),p=r(4704),h=r(6040),E=r(3412),V=r(6684),v=r(3616),N=r(1496),I=r(2700),Y=r(8960),B=r(9900),D=r(2392),X=r(632),f=r(4680),w=r(7368),$=r(8476),Q=r(8800),z=r(6020),R=r(8152),K=r(860),e=r(4496),M=r(9568),_=r(7976),C=r(6504),W=r(7964),H=r(9072),j=r(2984),P=r(2064),U=r(4548),J=r(208),Z=r(5568);function q(a,m){if(1&a&&e.wR5(0,"div",7),2&a){const t=m.ngIf;e.uQe("transition","width ",100,"ms ease-out"),e.m4B("opacity",t[0]/50+.5)("right",0,"%")("height",100,"%")("width",t[0],"%")}}function ee(a,m){1&a&&(e.I0R(0,"span",8),e.wVc(1,"translate"),e.OEk(2,"\xa0"),e.C$Y()),2&a&&e._6D("title",e.kDX(1,1,"POKEMON.MOVES.TOOLTIP_ELITE_MOVE"))}let te=(()=>{class a{master;translate;model;onMoveMs;name$;tooltip$;typeColor$;typeName$;powerWidth$;speedMove$;deltaGauge$;deltaGaugeHeight$;pokemonForm$;details$;constructor(t,n){this.master=t,this.translate=n}ngOnInit(){this.name$=this.master.readMovesName(this.model.movementId),this.typeColor$=this.master.typeDatabase$.pipe((0,p.k)(o=>`#${o.types[this.model.data.movesType].themeColor}`)),this.typeName$=(0,h.E)([this.master.readEnumTypeName$(this.model.data.movesType)]).pipe((0,p.k)(([o])=>o)),this.powerWidth$=(0,I.of)(this.computePowerWidth(this.model.details.actualPower)),this.onMoveMs=500*this.model.data.combatOverrides.rigidTurn;const n=(0,E.U)((0,U.k)(0,this.onMoveMs).pipe((0,p.k)(o=>o)));this.speedMove$=(0,h.E)([this.powerWidth$,n]).pipe((0,p.k)(([o,i])=>i%2==0?0:100-o)),this.deltaGaugeHeight$=this.speedMove$.pipe((0,p.k)(o=>this.model.data.combatOverrides.energyDelta),(0,J.K)((o,i)=>(o+=i)%101,0),(0,Z.W)(0)),this.deltaGauge$=this.deltaGaugeHeight$.pipe((0,p.k)(o=>[o,(100-Math.max(Math.min(o,100),0))/2])),this.pokemonForm$=this.master.level$.pipe((0,p.k)(o=>new u.PokemonForm(o,this.model.pokemonSetting)),(0,$.C)(1)),this.details$=this.buildMoveDetails(),this.tooltip$=this.buildTooltip()}gaugeShadowDepth$;computePowerWidth(t){return t/32*50}buildMoveDetails(){const t=this.model.details;return(0,h.E)([this.typeName$]).pipe((0,p.k)(([n])=>{const o={};return Object.assign(o,t),o.typeName=n,o}))}buildTooltip(){return this.details$.pipe((0,w.G)(t=>{const n={energyDelta:t.energyDelta,power:t.power,actualPower:t.actualPower.toFixed(2),typeName:t.typeName,rigidTurn:t.rigidTurn,EPT:t.EPT.toFixed(2),PPT:t.PPT.toFixed(2),actualPPT:t.actualPPT.toFixed(2),EPTperAPPT:t.EPTperAPPT.toFixed(2),QMTP:t.QMTP.toFixed(2)};return this.translate.get("POKEMON.MOVES.TOOLTIP_QUICK_DETAILS",n)}))}static \u0275fac=function(n){return new(n||a)(e.GI1(M.G),e.GI1(_.GI))};static \u0275cmp=e.In1({type:a,selectors:[["app-pokemon-quick-move"]],inputs:{model:"model"},decls:24,vars:36,consts:[[1,"p-1",2,"cursor","pointer",3,"title"],[2,"position","relative"],[2,"position","absolute","background-color","#eeeeee","z-index","-3","width","100%","height","100%","border-radius","20px"],["style","position: absolute; background-color: #aaaaaa; z-index: -2; border-radius: 20px;",3,"transition","opacity","right","height","width",4,"ngIf"],[2,"position","absolute","z-index","-1","height","100%","border-radius","20px"],["class","toolPokemonMovesLegacyMarker",3,"title",4,"ngIf"],[2,"border-radius","10%"],[2,"position","absolute","background-color","#aaaaaa","z-index","-2","border-radius","20px"],[1,"toolPokemonMovesLegacyMarker",3,"title"]],template:function(n,o){1&n&&(e.I0R(0,"div",0),e.wVc(1,"async"),e.I0R(2,"div",1),e.wR5(3,"div",2),e.yuY(4,q,1,11,"div",3),e.wVc(5,"async"),e.I0R(6,"div",4),e.wVc(7,"async"),e.wVc(8,"async"),e.wVc(9,"async"),e.C$Y(),e.I0R(10,"div"),e.yuY(11,ee,3,3,"span",5),e.I0R(12,"span"),e.OEk(13),e.wVc(14,"async"),e.C$Y(),e.I0R(15,"span"),e.OEk(16,"( "),e.I0R(17,"span"),e.OEk(18),e.wVc(19,"number"),e.C$Y(),e.I0R(20,"span",6),e.OEk(21),e.wVc(22,"async"),e.C$Y(),e.OEk(23," )"),e.C$Y()()()()),2&n&&(e._6D("title",e.kDX(1,19,o.tooltip$)),e.yG2(4),e.E7m("ngIf",e.kDX(5,21,o.deltaGauge$)),e.yG2(2),e.m4B("width",e.kDX(7,23,o.powerWidth$),"%"),e.uQe("transition","left ",o.onMoveMs,"ms ease-in-out"),e.m4B("left",e.kDX(8,25,o.speedMove$),"%")("background-color",e.kDX(9,27,o.typeColor$)),e.uQe("box-shadow","1px 1px 10px rgba(0, 0, 0, ",.5,")"),e.yG2(5),e.E7m("ngIf",o.model.isLegacy),e.yG2(2),e.oRS("",e.kDX(14,29,o.name$)," "),e.yG2(5),e.CAO("",e.g7$(19,31,o.model.details.PPT,".2"),"",o.model.details.isTypeBonus?"*":"",""),e.yG2(3),e.cNF(e.kDX(22,34,o.typeName$)))},dependencies:[g.u_,g.a,g.hl,P.sD],styles:["@keyframes _ngcontent-%COMP%_bg-color{0%{opacity:.1}25%{background-color:red;opacity:.5}50%{opacity:.1}75%{background-color:#000;opacity:.5}}.toolPokemonMovesLegacyMarker[_ngcontent-%COMP%]{border-radius:50%;top:.25em;width:1em;height:1em;position:absolute;animation:_ngcontent-%COMP%_bg-color 2s infinite;opacity:.5}"]})}return a})();function oe(a,m){1&a&&(e.I0R(0,"span",7),e.wVc(1,"translate"),e.OEk(2,"\xa0"),e.C$Y()),2&a&&e._6D("title",e.kDX(1,1,"POKEMON.MOVES.TOOLTIP_ELITE_MOVE"))}let ne=(()=>{class a{master;translate;model;name$;tooltip$;typeColor$;typeName$;gaugePower;gaugeDelta$;details$;gaugeShadowDepth$;gaugeDeltaSwitch$;constructor(t,n){this.master=t,this.translate=n}ngOnInit(){this.gaugePower=Math.floor(this.model.details.actualPower/250*100),this.name$=this.master.readMovesName(this.model.movementId),this.typeColor$=this.master.typeDatabase$.pipe((0,p.k)(n=>`#${n.types[this.model.data.movesType].themeColor}`)),this.typeName$=(0,h.E)([this.master.readEnumTypeName$(this.model.data.movesType)]).pipe((0,p.k)(([n])=>n));const t=(0,U.k)(0,1e3).pipe((0,p.k)(n=>n%2==0));this.gaugeDeltaSwitch$=t.pipe((0,p.k)(n=>n?0:1)),this.gaugeDelta$=t.pipe((0,p.k)(n=>n?0:-this.model.data.energyDelta)),this.gaugeShadowDepth$=(0,I.of)("0.5"),this.details$=this.buildDetails(),this.tooltip$=this.buildTooltip()}buildDetails(){const t=this.model.details;return(0,h.E)([this.typeName$]).pipe((0,p.k)(([n])=>{const o={};return Object.assign(o,t),o.typeName=n,o}))}buildTooltip(){return this.details$.pipe((0,w.G)(t=>{const n={energyDelta:t.energyDelta,power:t.power,actualPower:t.actualPower,typeName:t.typeName,gaugeEfficiency:t.gaugeEfficiency.toFixed(2),actualGaugeEfficiency:t.actualGaugeEfficiency.toFixed(2)};return this.translate.get("POKEMON.MOVES.TOOLTIP_CINEMATIC_DETAILS",n)}))}static \u0275fac=function(n){return new(n||a)(e.GI1(M.G),e.GI1(_.GI))};static \u0275cmp=e.In1({type:a,selectors:[["app-pokemon-cinematic-move"]],inputs:{model:"model"},decls:22,vars:43,consts:[[1,"p-1",2,"cursor","pointer",3,"title"],[2,"position","relative"],[2,"position","absolute","background-color","#eeeeee","z-index","-3","width","100%","height","100%","border-radius","20px"],[2,"position","absolute","z-index","-2","border-radius","20px"],[2,"position","absolute","z-index","-1","border-radius","20px","background-color","#aaaaaa"],["class","toolPokemonMovesLegacyMarker",3,"title",4,"ngIf"],[2,"border-radius","10%"],[1,"toolPokemonMovesLegacyMarker",3,"title"]],template:function(n,o){1&n&&(e.I0R(0,"div",0),e.wVc(1,"async"),e.I0R(2,"div",1),e.wR5(3,"div",2),e.I0R(4,"div",3),e.wVc(5,"async"),e.wVc(6,"async"),e.C$Y(),e.I0R(7,"div",4),e.wVc(8,"async"),e.wVc(9,"async"),e.C$Y(),e.I0R(10,"div"),e.yuY(11,oe,3,3,"span",5),e.I0R(12,"span"),e.OEk(13),e.wVc(14,"async"),e.I0R(15,"span"),e.OEk(16),e.wVc(17,"number"),e.C$Y(),e.I0R(18,"span",6),e.OEk(19),e.wVc(20,"async"),e.C$Y(),e.OEk(21,") "),e.C$Y()()()()),2&n&&(e._6D("title",e.kDX(1,26,o.tooltip$)),e.yG2(4),e.m4B("background-color",e.kDX(5,28,o.typeColor$))("width",o.gaugePower,"%")("height",100,"%"),e.uQe("box-shadow","1px 1px 10px rgba(0, 0, 0, ",e.kDX(6,30,o.gaugeShadowDepth$),")"),e.yG2(3),e.m4B("height",100,"%"),e.uQe("transition","opacity ",1e3,"ms ease-in-out, width 1000ms ease-in-out"),e.m4B("opacity",e.kDX(8,32,o.gaugeDeltaSwitch$))("width",e.kDX(9,34,o.gaugeDelta$),"%")("right",0,"%"),e.yG2(4),e.E7m("ngIf",o.model.isLegacy),e.yG2(2),e.oRS("",e.kDX(14,36,o.name$)," ("),e.yG2(3),e.CAO(" ",e.g7$(17,38,o.model.details.actualGaugeEfficiency,".2"),"",o.model.details.isTypeBonus?"*":"",""),e.yG2(3),e.cNF(e.kDX(20,41,o.typeName$)))},dependencies:[g.u_,g.a,g.hl,P.sD],styles:["@keyframes _ngcontent-%COMP%_bg-color{0%{opacity:.1}25%{background-color:red;opacity:.5}50%{opacity:.1}75%{background-color:#000;opacity:.5}}.toolPokemonMovesLegacyMarker[_ngcontent-%COMP%]{border-radius:50%;top:.25em;width:1em;height:1em;position:absolute;animation:_ngcontent-%COMP%_bg-color 2s infinite;opacity:.5}"]})}return a})();function ie(a,m){1&a&&e.wR5(0,"app-pokemon-quick-move",5),2&a&&e.E7m("model",m.$implicit)}function ae(a,m){1&a&&e.wR5(0,"app-pokemon-cinematic-move",5),2&a&&e.E7m("model",m.$implicit)}let se=(()=>{class a{master;pokemonFormJson;pokemonFormJson$=new b.o;pokemonForm;pokemonForm$=new b.o;opts;opts$=new y.g(null);specialMoves$;quickMoves$;moveSource$;quickMovesSorter$=new y.g(this.quickMovesSortByDefault);destroy$=new k.E;constructor(t){this.master=t}ngAfterViewInit(){}quickMovesSortByPower(t,n){return t.combatAttributes.power-n.combatAttributes.power}quickMovesSortByDefault(t,n){const o=t.combatAttributes.EPT-n.combatAttributes.EPT;return 0!==o?o:t.combatAttributes.power-n.combatAttributes.power}ngOnInit(){this.moveSource$=(0,h.E)([this.pokemonForm$,this.master.movesDatabase$,this.opts$]).pipe((0,p.k)(([n,o,i])=>new u.PokemonMovesExtra(n,o,i)),(0,$.C)(1));const t=this.moveSource$.pipe((0,p.k)(n=>{const o=[];for(const i of n.moves)i.isQuick&&o.push(i);return o}),(0,$.C)(1));this.quickMoves$=(0,h.E)([t,this.quickMovesSorter$]).pipe((0,p.k)(([n,o])=>n.sort(o))),this.specialMoves$=this.moveSource$.pipe((0,p.k)(n=>{const o=[];for(const i of n.moves)i.isSpecial&&o.push(i);return o}),(0,p.k)(n=>n.sort((o,i)=>{const s=i.data.energyDelta-o.data.energyDelta;return 0!==s?s:o.data.power-i.data.power})))}ngOnDestroy(){this.destroy$.next()}ngOnChanges(t){"pokemonFormJson"in t&&this.pokemonFormJson$.next(t.pokemonFormJson.currentValue),"pokemonForm"in t&&this.pokemonForm$.next(t.pokemonForm.currentValue),"opts"in t&&this.opts$.next(t.opts.currentValue)}trackByQuickMove(t,n){return n?n.movementId:null}static \u0275fac=function(n){return new(n||a)(e.GI1(M.G))};static \u0275cmp=e.In1({type:a,selectors:[["app-pokemon-moves"]],inputs:{pokemonFormJson:"pokemonFormJson",pokemonForm:"pokemonForm",opts:"opts"},features:[e.SYr],decls:15,vars:12,consts:[[1,"row"],[1,"col-6"],["translate",""],["src","/assets/octicons/question.svg",1,"m-1",3,"title"],[3,"model",4,"ngFor","ngForOf"],[3,"model"]],template:function(n,o){1&n&&(e.I0R(0,"div",0)(1,"div",1)(2,"span",2),e.OEk(3,"POKEMON.LABEL_QUICK_MOVES"),e.C$Y(),e.wR5(4,"img",3),e.wVc(5,"translate"),e.yuY(6,ie,1,1,"app-pokemon-quick-move",4),e.wVc(7,"async"),e.C$Y(),e.I0R(8,"div",1)(9,"span",2),e.OEk(10,"POKEMON.LABEL_SPECIAL_MOVES"),e.C$Y(),e.wR5(11,"img",3),e.wVc(12,"translate"),e.yuY(13,ae,1,1,"app-pokemon-cinematic-move",4),e.wVc(14,"async"),e.C$Y()()),2&n&&(e.yG2(4),e._6D("title",e.kDX(5,4,"LABEL_PREPARING_NOW")),e.yG2(2),e.E7m("ngForOf",e.kDX(7,6,o.quickMoves$)),e.yG2(5),e._6D("title",e.kDX(12,8,"LABEL_PREPARING_NOW")),e.yG2(2),e.E7m("ngForOf",e.kDX(14,10,o.specialMoves$)))},dependencies:[g.ay,P.eM,te,ne,g.a,P.sD],styles:["[_nghost-%COMP%]{display:block}",".toolInputGroup[_ngcontent-%COMP%]{border:solid #eeeeee;border-radius:5px}.toolSmallText[_ngcontent-%COMP%]{font-size:.8em}.toolExtraSmallText[_ngcontent-%COMP%]{font-size:.5em}.appPokemonThumb[_ngcontent-%COMP%]{max-width:40px;max-height:40px}"]})}return a})();var re=r(5948),pe=r(5928),me=r(4516),le=r(8280);const ce=["evolutionChart"];function ue(a,m){if(1&a&&(e.wR5(0,"app-pokemon-status",28),e.wVc(1,"async"),e.wVc(2,"async"),e.wVc(3,"async"),e.wVc(4,"async")),2&a){const t=m.ngIf,n=e.GaO();e.E7m("status",t)("pokemonName",e.kDX(1,5,n.growupPokemonName$))("pokemonType",e.kDX(2,7,n.growUpPokemonType$))("pokemonType2",e.kDX(3,9,n.growUpPokemonType2$))("unlockCost",e.kDX(4,11,n.growUpPokemonUnlockCost$))}}function de(a,m){if(1&a&&(e.wR5(0,"app-pokemon-moves",29),e.wVc(1,"async")),2&a){const t=m.ngIf,n=e.GaO();e.E7m("pokemonForm",t)("opts",e.kDX(1,2,n.growUpPokemonOpts$))}}function he(a,m){1&a&&e.wR5(0,"app-pokemon-type",35),2&a&&e.E7m("pokemonType",m.$implicit)}function ge(a,m){if(1&a&&(e.I0R(0,"div",31)(1,"div",32),e.OEk(2,"x2.56"),e.C$Y(),e.I0R(3,"div",33),e.yuY(4,he,1,1,"app-pokemon-type",34),e.C$Y()()),2&a){const t=e.GaO().ngIf;e.yG2(4),e.E7m("ngForOf",t)}}function ke(a,m){if(1&a&&(e.SAx(0),e.yuY(1,ge,5,1,"div",30),e.k70()),2&a){const t=m.ngIf;e.yG2(),e.E7m("ngIf",t.length>0)}}function ye(a,m){1&a&&e.wR5(0,"app-pokemon-type",35),2&a&&e.E7m("pokemonType",m.$implicit)}function fe(a,m){if(1&a&&(e.I0R(0,"div",37)(1,"div",38),e.OEk(2,"x1.6"),e.C$Y(),e.I0R(3,"div",39),e.yuY(4,ye,1,1,"app-pokemon-type",34),e.C$Y()()),2&a){const t=e.GaO().ngIf;e.yG2(4),e.E7m("ngForOf",t)}}function ve(a,m){if(1&a&&(e.SAx(0),e.yuY(1,fe,5,1,"div",36),e.k70()),2&a){const t=m.ngIf;e.yG2(),e.E7m("ngIf",t.length>0)}}function $e(a,m){1&a&&e.wR5(0,"app-pokemon-type",35),2&a&&e.E7m("pokemonType",m.$implicit)}function Ce(a,m){if(1&a&&(e.I0R(0,"div",41)(1,"div",42),e.OEk(2,"x0.625"),e.C$Y(),e.I0R(3,"div",43),e.yuY(4,$e,1,1,"app-pokemon-type",34),e.C$Y()()),2&a){const t=e.GaO().ngIf;e.yG2(4),e.E7m("ngForOf",t)}}function Pe(a,m){if(1&a&&(e.SAx(0),e.yuY(1,Ce,5,1,"div",40),e.k70()),2&a){const t=m.ngIf;e.yG2(),e.E7m("ngIf",t.length>0)}}function we(a,m){1&a&&e.wR5(0,"app-pokemon-type",35),2&a&&e.E7m("pokemonType",m.$implicit)}function Ee(a,m){if(1&a&&(e.I0R(0,"div",45)(1,"div",46),e.OEk(2,"x0.39"),e.C$Y(),e.I0R(3,"div",47),e.yuY(4,we,1,1,"app-pokemon-type",34),e.C$Y()()),2&a){const t=e.GaO().ngIf;e.yG2(4),e.E7m("ngForOf",t)}}function Ie(a,m){if(1&a&&(e.SAx(0),e.yuY(1,Ee,5,1,"div",44),e.k70()),2&a){const t=m.ngIf;e.yG2(),e.E7m("ngIf",t.length>0)}}function Me(a,m){1&a&&e.wR5(0,"app-pokemon-type",35),2&a&&e.E7m("pokemonType",m.$implicit)}function _e(a,m){if(1&a&&(e.I0R(0,"div",49)(1,"div",50),e.OEk(2,"x0.244"),e.C$Y(),e.I0R(3,"div",51),e.yuY(4,Me,1,1,"app-pokemon-type",34),e.C$Y()()),2&a){const t=e.GaO().ngIf;e.yG2(4),e.E7m("ngForOf",t)}}function Oe(a,m){if(1&a&&(e.SAx(0),e.yuY(1,_e,5,1,"div",48),e.k70()),2&a){const t=m.ngIf;e.yG2(),e.E7m("ngIf",t.length>0)}}function Te(a,m){if(1&a&&(e.I0R(0,"div")(1,"h4",5),e.OEk(2,"POKEMON.GROW_UP_SIMULATOR.LABEL_TYPE_AFFINITY_RATE"),e.C$Y(),e.yuY(3,ke,2,1,"ng-container",27),e.wVc(4,"async"),e.yuY(5,ve,2,1,"ng-container",27),e.wVc(6,"async"),e.yuY(7,Pe,2,1,"ng-container",27),e.wVc(8,"async"),e.yuY(9,Ie,2,1,"ng-container",27),e.wVc(10,"async"),e.yuY(11,Oe,2,1,"ng-container",27),e.wVc(12,"async"),e.C$Y()),2&a){const t=e.GaO();e.yG2(3),e.E7m("ngIf",e.kDX(4,5,t.affinityVeryEffective$)),e.yG2(2),e.E7m("ngIf",e.kDX(6,7,t.affinityEffective$)),e.yG2(2),e.E7m("ngIf",e.kDX(8,9,t.affinityUneffective$)),e.yG2(2),e.E7m("ngIf",e.kDX(10,11,t.affinityVeryUneffective$)),e.yG2(2),e.E7m("ngIf",e.kDX(12,13,t.affinitySuperUneffective$))}}function Fe(a,m){if(1&a&&(e.SAx(0),e.I0R(1,"div",52)(2,"div",16)(3,"label"),e.OEk(4,"Guessed Current Level: "),e.I0R(5,"span"),e.OEk(6),e.C$Y()()(),e.I0R(7,"div",16)(8,"label"),e.OEk(9,"Consume Stardust: "),e.I0R(10,"span"),e.OEk(11),e.C$Y()()(),e.I0R(12,"div",16)(13,"label"),e.OEk(14,"Consume Candy: "),e.I0R(15,"span"),e.OEk(16),e.C$Y()()(),e.I0R(17,"div",16)(18,"label"),e.OEk(19,"Consume XL Candy: "),e.I0R(20,"span"),e.OEk(21),e.C$Y()()()(),e.k70()),2&a){const t=m.ngIf;e.yG2(6),e.cNF(t.toPL),e.yG2(5),e.cNF(t.requireStardust),e.yG2(5),e.cNF(t.requireCandy),e.yG2(5),e.cNF(t.requireXlCandy)}}const be=[{path:"index.htm",redirectTo:""},{path:"",component:(()=>{class a{master;translate;HUE_COLORS=["#FF0000AA","#FFFF00AA","#00FF00AA","#00FFFFAA","#0000FFAA","#FF00FFAA","#FF4000AA","#BFFF00AA","#00FF40AA","#00BFFFAA","#4000FFAA","#FF00BFAA","#FF8000AA","#80FF00AA","#00FF80AA","#0080FFAA","#8000FFAA","#FF0080AA","#FFBF00AA","#40FF00AA","#00FFBFAA","#0040FFAA","#BF00FFAA","#FF0040AA"];basicPokemonId$=new k.E;isValidPokemonTree$;inputPL=20;inputIV={AP:15,DP:15,HP:15};growupStatus$;growupPokemonId$;growupPokemonName$;growUpPokemonType$;growUpPokemonType2$;growUpPokemonForm$;growUpPokemonFormNullable$;growUpPokemonOpts$;growUpPokemonCalcultor$;growUpPokemonUnlockCost$;affinityVeryEffective$;affinityEffective$;affinityUneffective$;affinityVeryUneffective$;affinitySuperUneffective$;evolutionNodeSelected$=new b.o;evolutionRootCleared$=new y.g(void 0);currentStatus$=new y.g(null);growupCost;inputPL$=new y.g(this.inputPL);inputStatus$=new k.E;inputFormChanged$=new y.g(void 0);pokemonForm$=new k.E;pokemonIV$=new y.g(this.inputIV);destroy$=new k.E;evolutionRoot$;evolutionRootTree$;evolutionChart;constructor(t,n){this.master=t,this.translate=n}ngAfterViewInit(){}ngOnInit(){this.growUpPokemonOpts$=this.evolutionNodeSelected$.pipe((0,p.k)(i=>({megaBranch:i.megaBranch})));const t=(0,h.E)([this.pokemonIV$,this.inputPL$,this.evolutionNodeSelected$,this.growUpPokemonOpts$]).pipe((0,f.o)(50),(0,p.k)(([i,s,l,c])=>l.settings.computeStatus(i,s,c)));this.growupStatus$=(0,E.U)(t,this.evolutionRootCleared$.pipe((0,f.o)(50),(0,p.k)(()=>null))).pipe(),this.growUpPokemonForm$=this.evolutionNodeSelected$.pipe((0,p.k)(i=>i.settings.pokemonSetting)),this.growUpPokemonFormNullable$=(0,E.U)(this.growUpPokemonForm$,this.evolutionRootCleared$.pipe((0,p.k)(()=>null))).pipe(),this.growupPokemonId$=this.evolutionNodeSelected$.pipe((0,p.k)(i=>i.settings.getPokemonId({megaBranch:i.megaBranch}))),this.growupPokemonName$=this.growupPokemonId$.pipe((0,w.G)(i=>this.master.readPokemonName(i)));const n=(0,h.E)([this.evolutionNodeSelected$,this.growUpPokemonOpts$]).pipe((0,f.o)(50),(0,p.k)(([i,s])=>i.settings.getPokemonTypes(s)),(0,V.I)(i=>!!i),(0,$.C)(1));this.growUpPokemonType$=n.pipe((0,p.k)(i=>i.pokemonType)),this.growUpPokemonType2$=n.pipe((0,p.k)(i=>i.pokemonType2)),this.growUpPokemonCalcultor$=this.evolutionNodeSelected$.pipe((0,p.k)(i=>i.settings)),this.growUpPokemonUnlockCost$=this.growUpPokemonCalcultor$.pipe((0,p.k)(i=>i.getUnlockCost()),(0,$.C)(1)),(0,h.E)([this.master.level$,this.pokemonForm$,this.pokemonIV$,this.inputStatus$]).pipe((0,f.o)(50),(0,v.a)(this.destroy$)).subscribe(([i,s,l,c])=>{this.maybeComputePL(i,s,l,c)});const o=new L.s(this.master);this.evolutionRoot$=this.pokemonForm$.pipe((0,f.o)(500),(0,w.G)(i=>o.fetchEvolutionRoot$(i))),this.evolutionRootTree$=this.evolutionRoot$.pipe((0,p.k)(i=>o.buildEvolutionTree(i))),this.prepareChartStream(),(0,h.E)([this.evolutionNodeSelected$,this.growUpPokemonOpts$,this.pokemonIV$]).pipe((0,f.o)(50),(0,w.G)(([i,s,l])=>this.computeGrowingMaxCP$.pipe((0,p.k)(c=>i.settings.computeGrowingPL(c,l,s)))),(0,V.I)(i=>null!==i),(0,v.a)(this.destroy$)).subscribe(i=>{this.inputPL=i.PL,this.inputPL$.next(i.PL)}),this.isValidPokemonTree$=(0,E.U)(this.basicPokemonId$.pipe((0,p.k)(()=>!0)),this.evolutionRootCleared$.pipe((0,p.k)(()=>!1))).pipe(),this.prepareAffinityStream()}filterByTypeAffinity(t,n){const o=[];for(let i=0;i<Object.keys(u.PokemonTypeEnum).length/2;i++)n===t[i]&&o.push(u.PokemonTypeEnum[u.PokemonTypeEnum[i]]);return o}prepareAffinityStream(){const t=(0,h.E)([this.master.typeDatabase$,this.growUpPokemonForm$]).pipe((0,p.k)(([n,o])=>{const i=new u.PokemonType(n),s=Object.keys(u.PokemonTypeEnum).length/2,l=new Array(s);for(let c=0;c<s;c++)l[c]=i.attackEffective(u.PokemonTypeEnum[u.PokemonTypeEnum[c]],o.built.pokemonType,o.built.pokemonType2);return l}),(0,$.C)(1));this.affinityVeryEffective$=t.pipe((0,p.k)(n=>this.filterByTypeAffinity(n,u.AttackEffectivenessEnum.VeryEffective))),this.affinityEffective$=t.pipe((0,p.k)(n=>this.filterByTypeAffinity(n,u.AttackEffectivenessEnum.Effective))),this.affinityUneffective$=t.pipe((0,p.k)(n=>this.filterByTypeAffinity(n,u.AttackEffectivenessEnum.Uneffective))),this.affinityVeryUneffective$=t.pipe((0,p.k)(n=>this.filterByTypeAffinity(n,u.AttackEffectivenessEnum.VeryUneffective))),this.affinitySuperUneffective$=t.pipe((0,p.k)(n=>this.filterByTypeAffinity(n,u.AttackEffectivenessEnum.SuperUneffective)))}prepareChartStream(){(0,N.I)(500).pipe((0,v.a)(this.destroy$)).subscribe(i=>{});const t=(0,h.E)([(0,I.of)(0),this.evolutionRootTree$]).pipe((0,Q.w)(([i,s])=>s.children$?s.children$.pipe((0,z.m)(l=>(0,B.Q)(l)),(0,p.k)(l=>[i+1,l])):Y.k),(0,R.O)(([i,s])=>this.master.level$.pipe((0,p.k)(l=>{const c=new u.PokemonForm(l,s.formJson),d={};s.form.megaBranch&&(d.megaBranch=s.form.megaBranch);const O=c.getPokemonId(d),T={depth:i,settings:c,nodeId:O,label:O};return s.form.megaBranch&&(T.megaBranch=s.form.megaBranch),T}))),(0,R.O)(i=>this.master.readPokemonName(i.label).pipe((0,p.k)(s=>(i.label=s,i))))),n=(0,D.E)([t,(0,X.i)(1,99999)]).pipe((0,p.k)(([i,s])=>{const l=i;return l.pseudoId=s,l.colorHex=this.HUE_COLORS[s%this.HUE_COLORS.length],l}));this.inputFormChanged$.pipe((0,v.a)(this.destroy$)).subscribe(i=>{this.initializeVisibleStatus$.next(),this.currentStatus$.next(null),this.evolutionChartDataset=[],this.chartMap={},this.chartUpdated$.next()});const o=new k.E;n.pipe((0,v.a)(this.destroy$)).subscribe(i=>{this.chartMap[i.nodeId]||o.next(i),this.chartUpdated$.next()}),o.pipe((0,R.O)(i=>{const d=new K.k(i.settings.pokemonSetting.built.pokedexNumber,this.master,{megaBranch:i.megaBranch},{size:40,suppressNoImage:!0});return(0,D.E)([(0,I.of)(i),d.dataURL$])})).subscribe(([i,s])=>{const l=new Image;l.onload=()=>{c.pointStyle=l,this.chartUpdated$.next()},s&&(l.src=s);const c={backgroundColor:i.colorHex,data:[],label:i.label};this.evolutionChartDataset.push(c),this.chartMap[i.nodeId]={evolutionView:c,model:i},this.chartUpdated$.next()}),(0,h.E)([this.pokemonIV$,this.inputPL$,this.chartUpdated$]).pipe((0,f.o)(50),(0,v.a)(this.destroy$)).subscribe(([i,s,l])=>{for(const c in this.chartMap){const d=this.chartMap[c],T=d.model.settings.computeStatus(i,s,{megaBranch:d.model.megaBranch});d.evolutionView.data=[{x:T.CP,y:1}]}this.evolutionChart.update()})}chartMap={};evolutionChartOptions={responsive:!0,scales:{x:{min:0,suggestedMax:2e3},y:{display:!1,suggestedMax:1}},plugins:{legend:{position:"top"},title:{},tooltip:{callbacks:{title:this.tooltipEvolutionItem}}},elements:{point:{radius:8,hoverRadius:15}}};evolutionChartDataset=[];chartUpdated$=new k.E;findPokemonModel(t){for(const n in this.chartMap){const o=this.chartMap[n];if(o.model.label===t)return o.model}return null}tooltipEvolutionItem(t){let n="";for(const o of t)n+=`Name: ${o.dataset.label}\n`,n+=`CP: ${o.parsed.x}\n`;return n}evolutionChartClick({event:t,active:n}){(0,F.qe)("MainComponent.evolutionChartClick()",t,n),this.clickChartItem(t,n)}evolutionChartHover(t){}clickChartItem(t,n){if(!n||0===n.length)return;const l=t.chart.data.datasets[n[0].datasetIndex];for(const c in this.chartMap){const d=this.chartMap[c];if(d.evolutionView===l)return void this.evolutionNodeSelected$.next(d.model)}}onChangePL(t){this.inputPL$.next(t)}onChangeIV(t){this.inputIV=t,this.pokemonIV$.next(this.inputIV)}evolveForms$;ngOnDestroy(){this.destroy$.next()}maybeComputePL(t,n,o,i){if(!i.CP)return;const s=i.HP,l=i.CP;try{const d=new u.PokemonForm(t,n).computeMatchingLevel(l,s,o);this.currentStatus$.next(d),this.computePLValidator$.next(!0)}catch(c){(0,F.sJ)("Seems compution failed. This message should be hidden.",c),this.computePLValidator$.next(!1)}}onValidatedPokemonName(t){this.basicPokemonId$.next(t)}onSelectedPokemonForm(t){this.evolutionNodeSelected$.next({settings:t})}onFormValueChanged(){this.inputFormChanged$.next()}onSelectedRawForm(t){this.pokemonForm$.next(t)}onClearedPokemonId(){this.evolutionRootCleared$.next()}onClickShowGrowUpStatus(){}computeGrowingMaxCP$=new k.E;onClickAutoPl(t,n){t.preventDefault(),this.computeGrowingMaxCP$.next(n)}computePLValidator$=new k.E;initializeVisibleStatus$=new k.E;onChangeVisibleStatus(t){this.inputStatus$.next(t)}static \u0275fac=function(n){return new(n||a)(e.GI1(M.G),e.GI1(_.GI))};static \u0275cmp=e.In1({type:a,selectors:[["app-training-simulator"]],viewQuery:function(n,o){if(1&n&&e.CC$(ce,5,S.YR),2&n){let i;e.wto(i=e.Gqi())&&(o.evolutionChart=i.first)}},decls:48,vars:40,consts:[[1,"toolInputGroup"],[3,"validatedName","selectedForm","selectedRawForm","valueChanged","valueCleared"],[1,"m-2","toolInputGroup",3,"valueChanged"],[1,"m-2","toolInputGroup",3,"validatorResult","initialize","disabled","currentStatus$","valueChanged"],[1,"m-2"],["translate",""],["fill","#7878dd","src","/assets/octicons/question.svg",1,"mx-1",3,"width","height","title"],[2,"display","block"],["baseChart","","height","50","type","scatter",3,"datasets","options","chartHover","chartClick"],["evolutionChart",""],["fill","#7878dd","src","/assets/octicons/question.svg",1,"mx-1",3,"title"],[1,"form-group","m-2","toolInputGroup"],[1,"input-group","row","m-2"],["title","Pokemon's Level which Grow Up to",1,"col-1","form-check-label","p-2","text-end"],[1,"col-4"],["type","number","min","1","max","52","step","0.5",1,"form-control",3,"disabled","ngModel","ngModelChange"],[1,"col-3"],[1,"btn-group"],["type","button","data-bs-toggle","dropdown","aria-expanded","false","translate","",1,"btn","btn-primary","dropdown-toggle"],[1,"dropdown-menu"],["href","#",1,"dropdown-item",3,"click"],[1,"row","m-2"],[1,"col-3","text-center"],[3,"pokemonFormJson","opts"],[1,"col-9"],[3,"status","pokemonName","pokemonType","pokemonType2","unlockCost",4,"ngIf"],["class","m-2",3,"pokemonForm","opts",4,"ngIf"],[4,"ngIf"],[3,"status","pokemonName","pokemonType","pokemonType2","unlockCost"],[1,"m-2",3,"pokemonForm","opts"],["class","row m-2 rounded border border-danger",4,"ngIf"],[1,"row","m-2","rounded","border","border-danger"],[1,"p-1","col-2","bg-danger","text-white"],["title","x2.56",1,"p-1","col"],[3,"pokemonType",4,"ngFor","ngForOf"],[3,"pokemonType"],["class","row m-2 rounded border border-warning",4,"ngIf"],[1,"row","m-2","rounded","border","border-warning"],[1,"p-1","col-2","bg-warning","text-white"],["title","x1.6",1,"p-1","col"],["class","row m-2 rounded border border-light",4,"ngIf"],[1,"row","m-2","rounded","border","border-light"],[1,"p-1","col-2","bg-light","text-dark"],["title","x0.625",1,"p-1","col"],["class","row m-2 rounded border border-success",4,"ngIf"],[1,"row","m-2","rounded","border","border-success"],[1,"p-1","col-2","bg-success","text-dark"],["title","x0.39",1,"p-1","col"],["class","row m-2 rounded border border-primary",4,"ngIf"],[1,"row","m-2","rounded","border","border-primary"],[1,"p-1","col-2","bg-primary","text-dark"],["title","x0.244",1,"p-1","col"],[1,"row"]],template:function(n,o){1&n&&(e.I0R(0,"div",0)(1,"app-pokemon-form",1),e.qCj("validatedName",function(s){return o.onValidatedPokemonName(s)})("selectedForm",function(s){return o.onSelectedPokemonForm(s)})("selectedRawForm",function(s){return o.onSelectedRawForm(s)})("valueChanged",function(){return o.onFormValueChanged()})("valueCleared",function(){return o.onClearedPokemonId()}),e.C$Y(),e.I0R(2,"app-pokemon-iv",2),e.qCj("valueChanged",function(s){return o.onChangeIV(s)}),e.C$Y(),e.I0R(3,"app-pokemon-visible-status",3),e.qCj("valueChanged",function(s){return o.onChangeVisibleStatus(s)}),e.wVc(4,"async"),e.C$Y()(),e.I0R(5,"h3",4)(6,"span",5),e.OEk(7,"POKEMON.GROW_UP_SIMULATOR.LABEL_EVOLUTION_TREE"),e.C$Y(),e.wR5(8,"app-inline-svg",6),e.wVc(9,"translate"),e.C$Y(),e.I0R(10,"div",7)(11,"canvas",8,9),e.qCj("chartHover",function(s){return o.evolutionChartHover(s)})("chartClick",function(s){return o.evolutionChartClick(s)}),e.C$Y()(),e.I0R(13,"h3",4)(14,"span",5),e.OEk(15,"POKEMON.GROW_UP_SIMULATOR.AFTER_GROW_UP_LABEL"),e.C$Y(),e.wR5(16,"app-inline-svg",10),e.wVc(17,"translate"),e.C$Y(),e.I0R(18,"div",11)(19,"div",12)(20,"label",13),e.OEk(21,"PL"),e.C$Y(),e.I0R(22,"span",14)(23,"input",15),e.iHE("ngModelChange",function(s){return e.kNx(o.inputPL,s)||(o.inputPL=s),s}),e.qCj("ngModelChange",function(s){return o.onChangePL(s)}),e.wVc(24,"async"),e.C$Y()(),e.I0R(25,"div",16)(26,"div",17)(27,"button",18),e.wVc(28,"async"),e.OEk(29,"POKEMON.GROW_UP_SIMULATOR.AUTO_LABEL"),e.C$Y(),e.I0R(30,"div",19)(31,"a",20),e.qCj("click",function(s){return o.onClickAutoPl(s,1500)}),e.OEk(32,"Super League (CP 1500)"),e.C$Y(),e.I0R(33,"a",20),e.qCj("click",function(s){return o.onClickAutoPl(s,2500)}),e.OEk(34,"Hyper League (CP 2500)"),e.C$Y()()()()(),e.I0R(35,"div",21)(36,"div",22),e.wR5(37,"app-pokemon-thumb",23),e.wVc(38,"async"),e.wVc(39,"async"),e.C$Y(),e.I0R(40,"div",24),e.yuY(41,ue,5,13,"app-pokemon-status",25),e.wVc(42,"async"),e.C$Y()(),e.yuY(43,de,2,4,"app-pokemon-moves",26),e.wVc(44,"async"),e.yuY(45,Te,13,15,"div",27),e.wVc(46,"async"),e.yuY(47,Fe,22,4,"ng-container",27),e.C$Y()),2&n&&(e.yG2(3),e.E7m("validatorResult",o.computePLValidator$)("initialize",o.initializeVisibleStatus$)("disabled",!e.kDX(4,20,o.isValidPokemonTree$))("currentStatus$",o.currentStatus$),e.yG2(5),e._6D("title",e.kDX(9,22,"LABEL_PREPARING_NOW")),e.E7m("width",20)("height",20),e.yG2(3),e.E7m("datasets",o.evolutionChartDataset)("options",o.evolutionChartOptions),e.yG2(5),e._6D("title",e.kDX(17,24,"LABEL_PREPARING_NOW")),e.yG2(7),e.E7m("disabled",!e.kDX(24,26,o.isValidPokemonTree$)),e.OKB("ngModel",o.inputPL),e.yG2(4),e.eAK("disabled",!e.kDX(28,28,o.isValidPokemonTree$)),e.yG2(10),e.E7m("pokemonFormJson",e.kDX(38,30,o.growUpPokemonFormNullable$))("opts",e.kDX(39,32,o.growUpPokemonOpts$)),e.yG2(4),e.E7m("ngIf",e.kDX(42,34,o.growupStatus$)),e.yG2(2),e.E7m("ngIf",e.kDX(44,36,o.growUpPokemonCalcultor$)),e.yG2(2),e.E7m("ngIf",e.kDX(46,38,o.growUpPokemonFormNullable$)),e.yG2(2),e.E7m("ngIf",o.growupCost))},dependencies:[g.ay,g.u_,C.ot,C.O4,C.ue,C.Gu,C._t,C._G,S.YR,W.e,H.u,j.Y,se,re.y,pe.Q,me.g,le.E,P.eM,g.a,P.sD],styles:[".toolInputGroup[_ngcontent-%COMP%]{border:solid #eeeeee;border-radius:5px}.toolSmallText[_ngcontent-%COMP%]{font-size:.8em}.toolExtraSmallText[_ngcontent-%COMP%]{font-size:.5em}.appPokemonThumb[_ngcontent-%COMP%]{max-width:40px;max-height:40px}"]})}return a})(),data:{gitweeTitle:"TITLE_POKEMON_GROWUP_SIMULATOR"}}];let Re=(()=>{class a{static \u0275fac=function(n){return new(n||a)};static \u0275mod=e.a4G({type:a});static \u0275inj=e.s3X({imports:[A.qQ.forChild(be),A.qQ]})}return a})(),Ge=(()=>{class a{constructor(){(0,F.qe)("GrowUpSimulatorModule.constructor()")}static \u0275fac=function(n){return new(n||a)};static \u0275mod=e.a4G({type:a});static \u0275inj=e.s3X({providers:[{provide:_.k1,useValue:"app/tools/pokemongo/training-simulator/training-simulator/"}],imports:[g.MD,Re,x._]})}return a})()}}]);