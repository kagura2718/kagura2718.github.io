import{a as lt}from"./chunk-OVGWOFM3.js";import{$ as D,D as Q,E as X,H as L,J as tt,Ka as V,L as P,La as at,Ma as st,O as C,Q as et,Qc as T,R as nt,Rc as H,Tc as z,Y as g,Z as x,_ as O,_b as it,aa as c,b as m,kc as B,n as p,o as d,p as w,q as Y,qc as ot,s as U,sa as N,t as $,ta as rt,u as Z}from"./chunk-57KELPP2.js";import{a as j}from"./chunk-VB56BUGO.js";var A=class{},pt=(()=>{class e{handle(t){return t.key}static \u0275fac=function(n){return new(n||e)};static \u0275prov=g({token:e,factory:e.\u0275fac})}return e})(),v=class{},Lt=(()=>{class e extends v{compile(t,n){return t}compileTranslations(t,n){return t}static \u0275fac=(()=>{let t;return function(r){return(t||(t=N(e)))(r||e)}})();static \u0275prov=g({token:e,factory:e.\u0275fac})}return e})(),y=class{},bt=(()=>{class e extends y{getTranslation(t){return p({})}static \u0275fac=(()=>{let t;return function(r){return(t||(t=N(e)))(r||e)}})();static \u0275prov=g({token:e,factory:e.\u0275fac})}return e})();function R(e,a){if(e===a)return!0;if(e===null||a===null)return!1;if(e!==e&&a!==a)return!0;let t=typeof e,n=typeof a,r;if(t==n&&t=="object")if(Array.isArray(e)){if(!Array.isArray(a))return!1;if((r=e.length)==a.length){for(let i=0;i<r;i++)if(!R(e[i],a[i]))return!1;return!0}}else{if(Array.isArray(a))return!1;if(f(e)&&f(a)){let i=Object.create(null);for(let s in e){if(!R(e[s],a[s]))return!1;i[s]=!0}for(let s in a)if(!(s in i)&&typeof a[s]<"u")return!1;return!0}}return!1}function u(e){return typeof e<"u"&&e!==null}function ut(e){return e!==void 0}function f(e){return k(e)&&!b(e)&&e!==null}function k(e){return typeof e=="object"&&e!==null}function b(e){return Array.isArray(e)}function I(e){return typeof e=="string"}function mt(e){return typeof e=="function"}function K(e){if(b(e))return e.map(a=>K(a));if(f(e)){let a={};return Object.keys(e).forEach(t=>{a[t]=K(e[t])}),a}else return e}function G(e,a){if(!k(e))return K(a);let t=K(e);return k(t)&&k(a)&&Object.keys(a).forEach(n=>{f(a[n])?n in e?t[n]=G(e[n],a[n]):Object.assign(t,{[n]:a[n]}):Object.assign(t,{[n]:a[n]})}),t}function gt(e,a){let t=a.split(".");a="";do{a+=t.shift();let n=!t.length;if(u(e)){if(f(e)&&ut(e[a])&&(f(e[a])||b(e[a])||n)){e=e[a],a="";continue}if(b(e)){let r=parseInt(a,10);if(ut(e[r])&&(f(e[r])||b(e[r])||n)){e=e[r],a="";continue}}}if(n){e=void 0;continue}a+="."}while(t.length);return e}function Ct(e,a,t){return G(e,Tt(a,t))}function Tt(e,a){return e.split(".").reduceRight((t,n)=>({[n]:t}),a)}var S=class{},vt=(()=>{class e extends S{templateMatcher=/{{\s?([^{}\s]*)\s?}}/g;interpolate(t,n){if(I(t))return this.interpolateString(t,n);if(mt(t))return this.interpolateFunction(t,n)}interpolateFunction(t,n){return t(n)}interpolateString(t,n){return n?t.replace(this.templateMatcher,(r,i)=>{let s=this.getInterpolationReplacement(n,i);return s!==void 0?s:r}):t}getInterpolationReplacement(t,n){return this.formatValue(gt(t,n))}formatValue(t){if(I(t))return t;if(typeof t=="number"||typeof t=="boolean")return t.toString();if(t===null)return"null";if(b(t))return t.join(", ");if(k(t))return typeof t.toString=="function"&&t.toString!==Object.prototype.toString?t.toString():JSON.stringify(t)}static \u0275fac=(()=>{let t;return function(r){return(t||(t=N(e)))(r||e)}})();static \u0275prov=g({token:e,factory:e.\u0275fac})}return e})(),J=(()=>{class e{_onTranslationChange=new m;_onLangChange=new m;_onFallbackLangChange=new m;fallbackLang=null;currentLang;translations={};languages=[];getTranslations(t){return this.translations[t]}setTranslations(t,n,r){this.translations[t]=r&&this.hasTranslationFor(t)?G(this.translations[t],n):n,this.addLanguages([t]),this._onTranslationChange.next({lang:t,translations:this.getTranslations(t)})}getLanguages(){return this.languages}getCurrentLang(){return this.currentLang}getFallbackLang(){return this.fallbackLang}setFallbackLang(t,n=!0){this.fallbackLang=t,n&&this._onFallbackLangChange.next({lang:t,translations:this.translations[t]})}setCurrentLang(t,n=!0){this.currentLang=t,n&&this._onLangChange.next({lang:t,translations:this.translations[t]})}get onTranslationChange(){return this._onTranslationChange.asObservable()}get onLangChange(){return this._onLangChange.asObservable()}get onFallbackLangChange(){return this._onFallbackLangChange.asObservable()}addLanguages(t){this.languages=Array.from(new Set([...this.languages,...t]))}hasTranslationFor(t){return typeof this.translations[t]<"u"}deleteTranslations(t){delete this.translations[t]}getTranslation(t){let n=this.getValue(this.currentLang,t);return n===void 0&&this.fallbackLang!=null&&this.fallbackLang!==this.currentLang&&(n=this.getValue(this.fallbackLang,t)),n}getValue(t,n){return gt(this.getTranslations(t),n)}static \u0275fac=function(n){return new(n||e)};static \u0275prov=g({token:e,factory:e.\u0275fac})}return e})(),q=new O("TRANSLATE_CONFIG"),E=e=>d(e)?e:p(e);var F=(()=>{class e{loadingTranslations;pending=!1;_translationRequests={};lastUseLanguage=null;currentLoader=c(y);compiler=c(v);parser=c(S);missingTranslationHandler=c(A);store=c(J);extend=!1;get onTranslationChange(){return this.store.onTranslationChange}get onLangChange(){return this.store.onLangChange}get onFallbackLangChange(){return this.store.onFallbackLangChange}get onDefaultLangChange(){return this.store.onFallbackLangChange}constructor(){let t=j({extend:!1,fallbackLang:null},c(q,{optional:!0}));t.lang&&this.use(t.lang),t.fallbackLang&&this.setFallbackLang(t.fallbackLang),t.extend&&(this.extend=!0)}setFallbackLang(t){this.getFallbackLang()||this.store.setFallbackLang(t,!1);let n=this.loadOrExtendLanguage(t);return d(n)?(n.pipe(L(1)).subscribe({next:()=>{this.store.setFallbackLang(t)},error:()=>{}}),n):(this.store.setFallbackLang(t),p(this.store.getTranslations(t)))}use(t){this.lastUseLanguage=t,this.getCurrentLang()||this.store.setCurrentLang(t,!1);let n=this.loadOrExtendLanguage(t);return d(n)?(n.pipe(L(1)).subscribe({next:()=>{this.changeLang(t)},error:()=>{}}),n):(this.changeLang(t),p(this.store.getTranslations(t)))}loadOrExtendLanguage(t){if(!this.store.hasTranslationFor(t)||this.extend)return this._translationRequests[t]=this._translationRequests[t]||this.loadAndCompileTranslations(t),this._translationRequests[t]}changeLang(t){t===this.lastUseLanguage&&this.store.setCurrentLang(t)}getCurrentLang(){return this.store.getCurrentLang()}loadAndCompileTranslations(t){this.pending=!0;let n=this.currentLoader.getTranslation(t).pipe(P(1),L(1));return this.loadingTranslations=n.pipe(w(r=>this.compiler.compileTranslations(r,t)),P(1),L(1)),this.loadingTranslations.subscribe({next:r=>{this.store.setTranslations(t,r,this.extend),this.pending=!1},error:r=>{this.pending=!1}}),n}setTranslation(t,n,r=!1){let i=this.compiler.compileTranslations(n,t);this.store.setTranslations(t,i,r||this.extend)}getLangs(){return this.store.getLanguages()}addLangs(t){this.store.addLanguages(t)}getParsedResultForKey(t,n){let r=this.getTextToInterpolate(t);if(u(r))return this.runInterpolation(r,n);let i=this.missingTranslationHandler.handle(j({key:t,translateService:this},n!==void 0&&{interpolateParams:n}));return i!==void 0?i:t}getFallbackLang(){return this.store.getFallbackLang()}getTextToInterpolate(t){return this.store.getTranslation(t)}runInterpolation(t,n){if(u(t))return b(t)?this.runInterpolationOnArray(t,n):f(t)?this.runInterpolationOnDict(t,n):this.parser.interpolate(t,n)}runInterpolationOnArray(t,n){return t.map(r=>this.runInterpolation(r,n))}runInterpolationOnDict(t,n){let r={};for(let i in t){let s=this.runInterpolation(t[i],n);s!==void 0&&(r[i]=s)}return r}getParsedResult(t,n){return t instanceof Array?this.getParsedResultForArray(t,n):this.getParsedResultForKey(t,n)}getParsedResultForArray(t,n){let r={},i=!1;for(let l of t)r[l]=this.getParsedResultForKey(l,n),i=i||d(r[l]);if(!i)return r;let s=t.map(l=>E(r[l]));return Z(s).pipe(w(l=>{let o={};return l.forEach((h,M)=>{o[t[M]]=h}),o}))}get(t,n){if(!u(t)||!t.length)throw new Error('Parameter "key" is required and cannot be empty');return this.pending?this.loadingTranslations.pipe(X(()=>E(this.getParsedResult(t,n)))):E(this.getParsedResult(t,n))}getStreamOnTranslationChange(t,n){if(!u(t)||!t.length)throw new Error('Parameter "key" is required and cannot be empty');return U($(()=>this.get(t,n)),this.onTranslationChange.pipe(C(()=>{let r=this.getParsedResult(t,n);return E(r)})))}stream(t,n){if(!u(t)||!t.length)throw new Error('Parameter "key" required');return U($(()=>this.get(t,n)),this.onLangChange.pipe(C(()=>{let r=this.getParsedResult(t,n);return E(r)})))}instant(t,n){if(!u(t)||t.length===0)throw new Error('Parameter "key" is required and cannot be empty');let r=this.getParsedResult(t,n);return d(r)?Array.isArray(t)?t.reduce((i,s)=>(i[s]=s,i),{}):t:r}set(t,n,r=this.getCurrentLang()){this.store.setTranslations(r,Ct(this.store.getTranslations(r),t,I(n)?this.compiler.compile(n,r):this.compiler.compileTranslations(n,r)),!1)}reloadLang(t){return this.resetLang(t),this.loadAndCompileTranslations(t)}resetLang(t){delete this._translationRequests[t],this.store.deleteTranslations(t)}static getBrowserLang(){if(typeof window>"u"||!window.navigator)return;let t=this.getBrowserCultureLang();return t?t.split(/[-_]/)[0]:void 0}static getBrowserCultureLang(){if(!(typeof window>"u"||typeof window.navigator>"u"))return window.navigator.languages?window.navigator.languages[0]:window.navigator.language||window.navigator.browserLanguage||window.navigator.userLanguage}getBrowserLang(){return e.getBrowserLang()}getBrowserCultureLang(){return e.getBrowserCultureLang()}get defaultLang(){return this.getFallbackLang()}get currentLang(){return this.store.getCurrentLang()}get langs(){return this.store.getLanguages()}setDefaultLang(t){return this.setFallbackLang(t)}getDefaultLang(){return this.getFallbackLang()}static \u0275fac=function(n){return new(n||e)};static \u0275prov=g({token:e,factory:e.\u0275fac})}return e})(),xt=(()=>{class e{translateService=c(F);element=c(rt);_ref=c(B);key;lastParams;currentParams;onLangChangeSub;onFallbackLangChangeSub;onTranslationChangeSub;set translate(t){t&&(this.key=t,this.checkNodes())}set translateParams(t){R(this.currentParams,t)||(this.currentParams=t,this.checkNodes(!0))}constructor(){this.onTranslationChangeSub||(this.onTranslationChangeSub=this.translateService.onTranslationChange.subscribe(t=>{t.lang===this.translateService.currentLang&&this.checkNodes(!0,t.translations)})),this.onLangChangeSub||(this.onLangChangeSub=this.translateService.onLangChange.subscribe(t=>{this.checkNodes(!0,t.translations)})),this.onFallbackLangChangeSub||(this.onFallbackLangChangeSub=this.translateService.onFallbackLangChange.subscribe(t=>{this.checkNodes(!0)}))}ngAfterViewChecked(){this.checkNodes()}checkNodes(t=!1,n){let r=this.element.nativeElement.childNodes;r.length||(this.setContent(this.element.nativeElement,this.key),r=this.element.nativeElement.childNodes),r.forEach(i=>{let s=i;if(s.nodeType===3){let l;if(t&&(s.lastKey=null),u(s.lookupKey))l=s.lookupKey;else if(this.key)l=this.key;else{let o=this.getContent(s),h=o.trim();h.length&&(s.lookupKey=h,o!==s.currentValue?(l=h,s.originalContent=o||s.originalContent):s.originalContent&&(l=s.originalContent.trim()))}this.updateValue(l,s,n)}})}updateValue(t,n,r){if(t){if(n.lastKey===t&&this.lastParams===this.currentParams)return;this.lastParams=this.currentParams;let i=s=>{(s!==t||!n.lastKey)&&(n.lastKey=t),n.originalContent||(n.originalContent=this.getContent(n)),I(s)?n.currentValue=s:u(s)?n.currentValue=JSON.stringify(s):n.currentValue=n.originalContent||t,this.setContent(n,this.key?n.currentValue:n.originalContent.replace(t,n.currentValue)),this._ref.markForCheck()};if(u(r)){let s=this.translateService.getParsedResult(t,this.currentParams);d(s)?s.subscribe({next:i}):i(s)}else this.translateService.get(t,this.currentParams).subscribe(i)}}getContent(t){return u(t.textContent)?t.textContent:t.data}setContent(t,n){u(t.textContent)?t.textContent=n:t.data=n}ngOnDestroy(){this.onLangChangeSub&&this.onLangChangeSub.unsubscribe(),this.onFallbackLangChangeSub&&this.onFallbackLangChangeSub.unsubscribe(),this.onTranslationChangeSub&&this.onTranslationChangeSub.unsubscribe()}static \u0275fac=function(n){return new(n||e)};static \u0275dir=at({type:e,selectors:[["","translate",""],["","ngx-translate",""]],inputs:{translate:"translate",translateParams:"translateParams"}})}return e})(),Nt=(()=>{class e{translate=c(F);_ref=c(B);value="";lastKey=null;lastParams=[];onTranslationChange;onLangChange;onFallbackLangChange;updateValue(t,n,r){let i=s=>{this.value=s!==void 0?s:t,this.lastKey=t,this._ref.markForCheck()};if(r){let s=this.translate.getParsedResult(t,n);d(s)?s.subscribe(i):i(s)}this.translate.get(t,n).subscribe(i)}transform(t,...n){if(!t||!t.length)return t;if(R(t,this.lastKey)&&R(n,this.lastParams))return this.value;let r;if(u(n[0])&&n.length)if(I(n[0])&&n[0].length){let i=n[0].replace(/(')?([a-zA-Z0-9_]+)(')?(\s)?:/g,'"$2":').replace(/:(\s)?(')(.*?)(')/g,':"$3"');try{r=JSON.parse(i)}catch(s){throw new SyntaxError(`Wrong parameter in TranslatePipe. Expected a valid Object, received: ${n[0]}`)}}else f(n[0])&&(r=n[0]);return this.lastKey=t,this.lastParams=n,this.updateValue(t,r),this._dispose(),this.onTranslationChange||(this.onTranslationChange=this.translate.onTranslationChange.subscribe(i=>{(this.lastKey&&i.lang===this.translate.getCurrentLang()||i.lang===this.translate.getFallbackLang())&&(this.lastKey=null,this.updateValue(t,r,i.translations))})),this.onLangChange||(this.onLangChange=this.translate.onLangChange.subscribe(i=>{this.lastKey&&(this.lastKey=null,this.updateValue(t,r,i.translations))})),this.onFallbackLangChange||(this.onFallbackLangChange=this.translate.onFallbackLangChange.subscribe(()=>{this.lastKey&&(this.lastKey=null,this.updateValue(t,r))})),this.value}_dispose(){typeof this.onTranslationChange<"u"&&(this.onTranslationChange.unsubscribe(),this.onTranslationChange=void 0),typeof this.onLangChange<"u"&&(this.onLangChange.unsubscribe(),this.onLangChange=void 0),typeof this.onFallbackLangChange<"u"&&(this.onFallbackLangChange.unsubscribe(),this.onFallbackLangChange=void 0)}ngOnDestroy(){this._dispose()}static \u0275fac=function(n){return new(n||e)};static \u0275pipe=st({name:"translate",type:e,pure:!1});static \u0275prov=g({token:e,factory:e.\u0275fac})}return e})();function yt(e){return{provide:y,useClass:e}}function St(e){return{provide:v,useClass:e}}function Ft(e){return{provide:S,useClass:e}}function wt(e){return{provide:A,useClass:e}}function ct(e={},a){let t=[];e.loader&&t.push(e.loader),e.compiler&&t.push(e.compiler),e.parser&&t.push(e.parser),e.missingTranslationHandler&&t.push(e.missingTranslationHandler),a&&t.push(J),(e.useDefaultLang||e.defaultLanguage)&&(console.warn("The `useDefaultLang` and `defaultLanguage` options are deprecated. Please use `fallbackLang` instead."),e.useDefaultLang===!0&&e.defaultLanguage&&(e.fallbackLang=e.defaultLanguage));let n={fallbackLang:e.fallbackLang??null,lang:e.lang,extend:e.extend??!1};return t.push({provide:q,useValue:n}),t.push({provide:F,useClass:F,deps:[J,y,v,S,A,q]}),t}var ft=(()=>{class e{static forRoot(t={}){return{ngModule:e,providers:[...ct(j({compiler:St(Lt),parser:Ft(vt),loader:yt(bt),missingTranslationHandler:wt(pt)},t),!0)]}}static forChild(t={}){return{ngModule:e,providers:[...ct(t,t.isolate??!1)]}}static \u0275fac=function(n){return new(n||e)};static \u0275mod=V({type:e});static \u0275inj=x({})}return e})();var Ot=new O("USE_ASSET"),Wt=new O("USE_ASSET_FULLPATH"),_=class e{constructor(a,t="app/",n,r){this.locale=a;this.assetPrefix=t;this.http=n;this.translate=r;T("LocalTranslationService.constructor",t,r);let i=null;this.SUPPORTED_LOCALES=this.getSupportedLocales(),H(`Supported locales are ${this.SUPPORTED_LOCALES}.`),this.PRIMARY_LOCALE=this.SUPPORTED_LOCALES[0];let s=i||`/assets/i18n/${t}`,l=this.SUPPORTED_LOCALES.map(o=>this.safeFetchJson(`${s}${o}.json`));this.initializeTranslations$=Y(l).pipe(nt(o=>{for(let h=0;h<o.length;h++){let M=this.SUPPORTED_LOCALES[h],W=o[h];this.translate.setTranslation(M,W,!0),T("New translation data",M,W)}}),C(o=>this.translate.use(this.PRIMARY_LOCALE)),w(o=>{}),P(1)),this.initializeTranslations$.pipe(L(1),et(this.destroy$)).subscribe({next:o=>{},complete:()=>H(`Initialize path:${s} translation finished.`),error:o=>z("Failed to initialize path:${requestPath} translation.",o)})}destroy$=new m;SUPPORTED_LOCALES;PRIMARY_LOCALE;initializeTranslations$;ngOnDestroy(){T("LocalTranslationService.OnDestroy"),this.destroy$.next()}safeFetchJson(a){return this.http.fetchJson(a).pipe(tt(2),Q(t=>(z(`Error while fetching ${a}`,t),p({}))))}get(a,t){return this.initializeTranslations$.pipe(C(()=>this.translate.get(a,t)))}maybePush(a,t){a.includes(t)||a.push(t)}washLang(a){if(a.length===2)return a;let t=/^([a-zA-Z0-9]{2})/.exec(a);return t?t[1]:null}getSupportedLocales(){let a=[];for(let n of[navigator.language,...navigator.languages]){if(!n)continue;let r=this.washLang(n);r&&this.maybePush(a,r)}let t=ot(this.locale);return t&&this.maybePush(a,t.toLowerCase()),this.maybePush(a,"en"),a}static \u0275fac=function(t){return new(t||e)(D(it),D(Ot),D(lt),D(F))};static \u0275prov=g({token:e,factory:e.\u0275fac,providedIn:"root"})};var dt=class e{constructor(){T("ToolsSharedModule.constructor()")}static forRoot(){return{ngModule:e,providers:[]}}static forChild(){return{ngModule:e,providers:[]}}static \u0275fac=function(t){return new(t||e)};static \u0275mod=V({type:e});static \u0275inj=x({providers:[_],imports:[ft]})};export{xt as a,Nt as b,ft as c,Ot as d,_ as e,dt as f};
