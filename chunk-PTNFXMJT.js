import{c as be}from"./chunk-U3KK23CY.js";import{$ as h,I as ge,La as Z,M as U,P as w,Q as V,U as me,V as Ae,Z as N,_ as q,a as S,aa as f,b as le,ba as M,da as G,f as de,g as fe,j as I,jc as _,k as D,l as K,m as b,ma as v,o as O,ra as Ee,va as x,x as pe,xc as ke,z as he}from"./chunk-PNXDVUHT.js";import{E as Y,G as ye,J,N as Ie,O as R,P as g,a as Te,e as X,s as we,w as ve}from"./chunk-GJFX5N3M.js";var ze="firebase",We="11.10.0";R(ze,We,"app");var F=new me("ANGULARFIRE2_VERSION");var Re=(e,r)=>{let t=r?[r]:Ie(),n=[];return t.forEach(i=>{i.container.getProvider(e).instances.forEach(s=>{n.includes(s)||n.push(s)})}),n},Q=(function(e){return e[e.SILENT=0]="SILENT",e[e.WARN=1]="WARN",e[e.VERBOSE=2]="VERBOSE",e})(Q||{}),Wt=_()&&typeof Zone<"u"?Q.WARN:Q.SILENT;var j=class{zone;delegate;constructor(r,t=fe){this.zone=r,this.delegate=t}now(){return this.delegate.now()}schedule(r,t,n){let i=this.zone,o=function(s){i?i.runGuarded(()=>{r.apply(this,[s])}):r.apply(this,[s])};return this.delegate.schedule(o,t,n)}},ee=(()=>{class e{outsideAngular;insideAngular;constructor(){let t=M(v);this.outsideAngular=t.runOutsideAngular(()=>new j(typeof Zone>"u"?void 0:Zone.current)),this.insideAngular=t.run(()=>new j(typeof Zone>"u"?void 0:Zone.current,de))}static \u0275fac=function(n){return new(n||e)};static \u0275prov=N({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();var Ue="firebase",Ve="11.10.0";g.registerVersion(Ue,Ve,"app-compat");var qe=["ngOnDestroy"],Pe=(e,r,t,n={})=>new Proxy(e,{get:(i,o)=>t.runOutsideAngular(()=>{if(e[o])return n?.spy?.get&&n.spy.get(o,e[o]),e[o];if(qe.indexOf(o)>-1)return()=>{};let s=r.toPromise().then(a=>{let u=a?.[o];return typeof u=="function"?u.bind(a):u?.then?u.then(c=>t.run(()=>c)):t.run(()=>u)});return new Proxy(()=>{},{get:(a,u)=>s[u],apply:(a,u,c)=>s.then(A=>{let d=A?.(...c);return n?.spy?.apply&&n.spy.apply(o,c,d),d})})})});var $=class{constructor(r){return r}},H=new h("angularfire2.app.options"),L=new h("angularfire2.app.name");function te(e,r,t){let n=typeof t=="string"&&t||"[DEFAULT]",i=typeof t=="object"&&t||{};i.name=i.name||n;let s=g.apps.filter(a=>a&&a.name===i.name)[0]||r.runOutsideAngular(()=>g.initializeApp(e,i));try{if(JSON.stringify(e)!==JSON.stringify(s.options)){let a=!!module.hot;Ge("error",`${s.name} Firebase App already initialized with different options${a?", you may need to reload as Firebase is not HMR aware.":"."}`)}}catch{}return new $(s)}var Ge=(e,...r)=>{_()&&typeof console<"u"&&console[e](...r)},Ze={provide:$,useFactory:te,deps:[H,v,[new Ee,L]]},Jt=(()=>{class e{static initializeApp(t,n){return{ngModule:e,providers:[{provide:H,useValue:t},{provide:L,useValue:n}]}}constructor(t){g.registerVersion("angularfire",F.full,"core"),g.registerVersion("angularfire",F.full,"app-compat"),g.registerVersion("angular",Ae.full,t.toString())}static \u0275fac=function(n){return new(n||e)(f(x))};static \u0275mod=Z({type:e});static \u0275inj=q({providers:[Ze]})}return e})();function Se(e,r,t,n,i){let[,o,s]=globalThis.\u0275AngularfireInstanceCache.find(a=>a[0]===e)||[];if(o)return Xe(i,s)||(Ce("error",`${r} was already initialized on the ${t} Firebase App with different settings.${Ye?" You may need to reload as Firebase is not HMR aware.":""}`),Ce("warn",{is:i,was:s})),o;{let a=n();return globalThis.\u0275AngularfireInstanceCache.push([e,a,i]),a}}function Xe(e,r){try{return e.toString()===r.toString()}catch{return e===r}}var Ye=typeof module<"u"&&!!module.hot,Ce=(e,...r)=>{_()&&typeof console<"u"&&console[e](...r)};globalThis.\u0275AngularfireInstanceCache||=[];var Je=new Map,Qe={activated:!1,tokenObservers:[]},et={initialized:!1,enabled:!1};function p(e){return Je.get(e)||Object.assign({},Qe)}function Me(){return et}var tt="https://content-firebaseappcheck.googleapis.com/v1";var nt="exchangeDebugToken",De={OFFSET_DURATION:300*1e3,RETRIAL_MIN_WAIT:30*1e3,RETRIAL_MAX_WAIT:960*1e3},dn=1440*60*1e3;var ie=class{constructor(r,t,n,i,o){if(this.operation=r,this.retryPolicy=t,this.getWaitDuration=n,this.lowerBound=i,this.upperBound=o,this.pending=null,this.nextErrorWaitInterval=i,i>o)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}async process(r){this.stop();try{this.pending=new X,this.pending.promise.catch(t=>{}),await rt(this.getNextRun(r)),this.pending.resolve(),await this.pending.promise,this.pending=new X,this.pending.promise.catch(t=>{}),await this.operation(),this.pending.resolve(),await this.pending.promise,this.process(!0).catch(()=>{})}catch(t){this.retryPolicy(t)?this.process(!1).catch(()=>{}):this.stop()}}getNextRun(r){if(r)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{let t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}};function rt(e){return new Promise(r=>{setTimeout(r,e)})}var it={"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.","initial-throttle":"{$httpStatus} error. Attempts allowed again after {$time}",throttled:"Requests throttled due to previous {$httpStatus} error. Attempts allowed again after {$time}"},k=new ve("appCheck","AppCheck",it);function xe(e){if(!p(e).activated)throw k.create("use-before-activation",{appName:e.name})}async function je({url:e,body:r},t){let n={"Content-Type":"application/json"},i=t.getImmediate({optional:!0});if(i){let d=await i.getHeartbeatsHeader();d&&(n["X-Firebase-Client"]=d)}let o={method:"POST",body:JSON.stringify(r),headers:n},s;try{s=await fetch(e,o)}catch(d){throw k.create("fetch-network-error",{originalErrorMessage:d?.message})}if(s.status!==200)throw k.create("fetch-status-error",{httpStatus:s.status});let a;try{a=await s.json()}catch(d){throw k.create("fetch-parse-error",{originalErrorMessage:d?.message})}let u=a.ttl.match(/^([\d.]+)(s)$/);if(!u||!u[2]||isNaN(Number(u[1])))throw k.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${a.ttl}`});let c=Number(u[1])*1e3,A=Date.now();return{token:a.token,expireTimeMillis:A+c,issuedAtTimeMillis:A}}function Fe(e,r){let{projectId:t,appId:n,apiKey:i}=e.options;return{url:`${tt}/projects/${t}/apps/${n}:${nt}?key=${i}`,body:{debug_token:r}}}var ot="firebase-app-check-database",st=1,oe="firebase-app-check-store";var B=null;function at(){return B||(B=new Promise((e,r)=>{try{let t=indexedDB.open(ot,st);t.onsuccess=n=>{e(n.target.result)},t.onerror=n=>{var i;r(k.create("storage-open",{originalErrorMessage:(i=n.target.error)===null||i===void 0?void 0:i.message}))},t.onupgradeneeded=n=>{let i=n.target.result;n.oldVersion===0&&i.createObjectStore(oe,{keyPath:"compositeKey"})}}catch(t){r(k.create("storage-open",{originalErrorMessage:t?.message}))}}),B)}function ct(e,r){return ut(lt(e),r)}async function ut(e,r){let n=(await at()).transaction(oe,"readwrite"),o=n.objectStore(oe).put({compositeKey:e,value:r});return new Promise((s,a)=>{o.onsuccess=u=>{s()},n.onerror=u=>{var c;a(k.create("storage-set",{originalErrorMessage:(c=u.target.error)===null||c===void 0?void 0:c.message}))}})}function lt(e){return`${e.options.appId}-${e.name}`}var C=new ye("@firebase/app-check");function ne(e,r){return we()?ct(e,r).catch(t=>{C.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function $e(){return Me().enabled}async function He(){let e=Me();if(e.enabled&&e.token)return e.token.promise;throw Error(`
            Can't get debug token in production mode.
        `)}var dt={error:"UNKNOWN_ERROR"};function ft(e){return Te.encodeString(JSON.stringify(e),!1)}async function se(e,r=!1,t=!1){let n=e.app;xe(n);let i=p(n),o=i.token,s;if(o&&!P(o)&&(i.token=void 0,o=void 0),!o){let c=await i.cachedTokenPromise;c&&(P(c)?o=c:await ne(n,void 0))}if(!r&&o&&P(o))return{token:o.token};let a=!1;if($e())try{i.exchangeTokenPromise||(i.exchangeTokenPromise=je(Fe(n,await He()),e.heartbeatServiceProvider).finally(()=>{i.exchangeTokenPromise=void 0}),a=!0);let c=await i.exchangeTokenPromise;return await ne(n,c),i.token=c,{token:c.token}}catch(c){return c.code==="appCheck/throttled"||c.code==="appCheck/initial-throttle"?C.warn(c.message):t&&C.error(c),re(c)}try{i.exchangeTokenPromise||(i.exchangeTokenPromise=i.provider.getToken().finally(()=>{i.exchangeTokenPromise=void 0}),a=!0),o=await p(n).exchangeTokenPromise}catch(c){c.code==="appCheck/throttled"||c.code==="appCheck/initial-throttle"?C.warn(c.message):t&&C.error(c),s=c}let u;return o?s?P(o)?u={token:o.token,internalError:s}:u=re(s):(u={token:o.token},i.token=o,await ne(n,o)):u=re(s),a&&mt(n,u),u}async function pt(e){let r=e.app;xe(r);let{provider:t}=p(r);if($e()){let n=await He(),{token:i}=await je(Fe(r,n),e.heartbeatServiceProvider);return{token:i}}else{let{token:n}=await t.getToken();return{token:n}}}function ht(e,r,t,n){let{app:i}=e,o=p(i),s={next:t,error:n,type:r};if(o.tokenObservers=[...o.tokenObservers,s],o.token&&P(o.token)){let a=o.token;Promise.resolve().then(()=>{t({token:a.token}),Oe(e)}).catch(()=>{})}o.cachedTokenPromise.then(()=>Oe(e))}function Le(e,r){let t=p(e),n=t.tokenObservers.filter(i=>i.next!==r);n.length===0&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),t.tokenObservers=n}function Oe(e){let{app:r}=e,t=p(r),n=t.tokenRefresher;n||(n=gt(e),t.tokenRefresher=n),!n.isRunning()&&t.isTokenAutoRefreshEnabled&&n.start()}function gt(e){let{app:r}=e;return new ie(async()=>{let t=p(r),n;if(t.token?n=await se(e,!0):n=await se(e),n.error)throw n.error;if(n.internalError)throw n.internalError},()=>!0,()=>{let t=p(r);if(t.token){let n=t.token.issuedAtTimeMillis+(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)*.5+3e5,i=t.token.expireTimeMillis-300*1e3;return n=Math.min(n,i),Math.max(0,n-Date.now())}else return 0},De.RETRIAL_MIN_WAIT,De.RETRIAL_MAX_WAIT)}function mt(e,r){let t=p(e).tokenObservers;for(let n of t)try{n.type==="EXTERNAL"&&r.error!=null?n.error(r.error):n.next(r)}catch{}}function P(e){return e.expireTimeMillis-Date.now()>0}function re(e){return{token:ft(dt),error:e}}var ae=class{constructor(r,t){this.app=r,this.heartbeatServiceProvider=t}_delete(){let{tokenObservers:r}=p(this.app);for(let t of r)Le(this.app,t.next);return Promise.resolve()}};function At(e,r){return new ae(e,r)}function Et(e){return{getToken:r=>se(e,r),getLimitedUseToken:()=>pt(e),addTokenListener:r=>ht(e,"INTERNAL",r),removeTokenListener:r=>Le(e.app,r)}}var kt="@firebase/app-check",Tt="0.10.1";var wt="app-check",Ne="app-check-internal";function vt(){J(new Y(wt,e=>{let r=e.getProvider("app").getImmediate(),t=e.getProvider("heartbeat");return At(r,t)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,r,t)=>{e.getProvider(Ne).initialize()})),J(new Y(Ne,e=>{let r=e.getProvider("app-check").getImmediate();return Et(r)},"PUBLIC").setInstantiationMode("EXPLICIT")),R(kt,Tt)}vt();var yt="app-check";var z=class{constructor(){return Re(yt)}};var It=["localhost","0.0.0.0","127.0.0.1"],bn=typeof window<"u"&&It.includes(window.location.hostname);var _t=new h("angularfire2.auth.use-emulator"),Rt=new h("angularfire2.auth.settings"),Ct=new h("angularfire2.auth.tenant-id"),Pt=new h("angularfire2.auth.langugage-code"),St=new h("angularfire2.auth.use-device-language"),Dt=new h("angularfire.auth.persistence"),Ot=(e,r,t,n,i,o,s,a)=>Se(`${e.name}.auth`,"AngularFireAuth",e.name,()=>{let u=r.runOutsideAngular(()=>e.auth());if(t&&u.useEmulator(...t),n&&(u.tenantId=n),u.languageCode=i,o&&u.useDeviceLanguage(),s)for(let[c,A]of Object.entries(s))u.settings[c]=A;return a&&u.setPersistence(a),u},[t,n,i,o,s,a]),Ln=(()=>{class e{injector=M(G);authState;idToken;user;idTokenResult;credential;constructor(t,n,i,o,s,a,u,c,A,d,Be,Nt){let ce=new le,y=b(void 0).pipe(I(s.outsideAngular),w(()=>o.runOutsideAngular(()=>import("./chunk-BNR3LMS4.js"))),O(()=>te(t,o,n)),O(E=>Ot(E,o,a,c,A,d,u,Be)),U({bufferSize:1,refCount:!1}));if(ke(i))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=b(null);else{y.pipe(ge()).subscribe();let E=y.pipe(w(l=>l.getRedirectResult().then(m=>m,()=>null)),be(this.injector),U({bufferSize:1,refCount:!1})),ue=y.pipe(w(l=>new S(m=>({unsubscribe:o.runOutsideAngular(()=>l.onAuthStateChanged(T=>m.next(T),T=>m.error(T),()=>m.complete()))})))),W=y.pipe(w(l=>new S(m=>({unsubscribe:o.runOutsideAngular(()=>l.onIdTokenChanged(T=>m.next(T),T=>m.error(T),()=>m.complete()))}))));this.authState=E.pipe(V(ue),D(s.outsideAngular),I(s.insideAngular)),this.user=E.pipe(V(W),D(s.outsideAngular),I(s.insideAngular)),this.idToken=this.user.pipe(w(l=>l?K(l.getIdToken()):b(null))),this.idTokenResult=this.user.pipe(w(l=>l?K(l.getIdTokenResult()):b(null))),this.credential=pe(E,ce,this.authState.pipe(he(l=>!l))).pipe(O(l=>l?.user?l:null),D(s.outsideAngular),I(s.insideAngular))}return Pe(this,y,o,{spy:{apply:(E,ue,W)=>{(E.startsWith("signIn")||E.startsWith("createUser"))&&W.then(l=>ce.next(l))}}})}static \u0275fac=function(n){return new(n||e)(f(H),f(L,8),f(x),f(v),f(ee),f(_t,8),f(Rt,8),f(Ct,8),f(Pt,8),f(St,8),f(Dt,8),f(z,8))};static \u0275prov=N({token:e,factory:e.\u0275fac,providedIn:"any"})}return e})();export{ee as a,z as b,Pe as c,H as d,L as e,te as f,Jt as g,Se as h,_t as i,Rt as j,Ct as k,Pt as l,St as m,Dt as n,Ot as o,Ln as p};
