import{a as Ce}from"./chunk-OTUHCZJJ.js";import{a as $i,b as Gi}from"./chunk-KAFY57CD.js";import{a as Pe,b as ji}from"./chunk-UJ3C7DYN.js";import{a as zi}from"./chunk-MVZRQ2XC.js";import"./chunk-S75FTYN4.js";import{a as at}from"./chunk-3ZYMNDAV.js";import{a as st}from"./chunk-ONXV3GWR.js";import{c as Bi}from"./chunk-JHWEAN6L.js";import{c as Z,d as M,g as T,i as P,j as jt}from"./chunk-T2NEJTFN.js";import{a as be}from"./chunk-EJOY4MMD.js";import"./chunk-M5PFS4RI.js";import{a as Yi}from"./chunk-RYEPP2DX.js";import{c as ve}from"./chunk-TX3OF3X2.js";import{a as Ue}from"./chunk-UUDJPQGG.js";import{$ as ci,$a as z,A as ai,Ab as $,B as si,Ba as s,Bb as le,Cb as B,Da as fi,Db as it,Dc as Li,E as ce,Ea as y,Eb as b,Fb as A,Fc as fe,G as We,Ga as _i,Gb as me,H as ke,Ha as F,Ia as Lt,Ib as wi,Jb as Ei,Jc as ot,Ka as U,Kb as Ii,L as li,La as Be,Lb as Si,M as ee,Ma as W,Nc as Ee,Ob as nt,Oc as rt,P as J,Pa as ne,Pb as oe,Qb as he,Qc as f,R as L,Rc as Re,S as di,Sa as pe,Sb as Di,Tb as Ae,Tc as _e,Ua as $t,Ub as Fi,Uc as Vi,Va as C,Vb as ki,Wb as Ni,Xa as x,Xb as K,Y as Nt,Ya as vi,Yb as X,Yc as Ri,Z as Ne,Za as Ke,Zb as Ai,_ as $e,_a as H,_b as de,aa as At,ab as g,ac as ie,b as Y,ba as S,bb as c,bd as Ui,c as Fe,cb as u,cc as zt,db as N,dc as G,e as ti,eb as Bt,ec as m,fa as _,fb as Vt,fc as we,ga as v,gb as bi,gc as q,h as ii,ha as ui,hb as qe,hc as Mi,ia as pi,ib as Ze,ic as Me,ja as mi,jb as Qe,ka as Mt,kc as Pi,la as ue,lc as V,m as se,ma as hi,mb as D,mc as Ve,na as j,nb as Ci,o as k,p as xe,pa as Pt,pb as E,qb as xi,rb as d,rc as Yt,rd as Hi,sa as Ot,sb as Rt,sc as ge,tb as Ut,tc as Oi,u as ye,ua as te,ub as yi,v as ni,vb as Xe,w as oi,wb as et,x as Je,xb as Ti,ya as gi,yb as Ht,z as ri,za as Te,zb as tt}from"./chunk-Y4TIFGVV.js";import"./chunk-EU2KAMEK.js";import{a as ei}from"./chunk-VB56BUGO.js";var He=class{entries;timelineUrl;navigationFrom="click"},Ie=class extends He{urlLink;title;indexUrl;updated;updatedAt},lt=class extends Ie{};var Oe=class{key;urlKey;urlLink;monthPage;monthIndex;isSelected=!1;count;page$;isNationalHoliday$;nationalHoliday$},dt=class extends Ie{urlPrefix;lastDays;firstWeekday;days;dayEntries={}},ct=class{key;urlKey;urlLink;yearPage;yearIndex;count;page$},ut=class extends Ie{urlPrefix;monthEntries=[]},pt=class{key;urlKey;urlLink;topPage;count;page$},mt=class extends Ie{urlPrefix;yearEntries=[]},ht=class{ns;category;navigators;fragment};var gt=class extends Ie{tagkey};function ft(o,t,e="0"){let i=`${o}`;return i.length>=t?i:i.padStart(t,e)}function _t(o){let t=+o;return Number.isNaN(t)?null:t}function Ji(o,t,e){if(o){if(o<1900||9999<o)return!1}else if(t||e)return!1;if(t){if(t<1||12<t)return!1}else if(e)return!1;let i=new Date(o,t,e);return!(i.getFullYear()!==o||t&&i.getMonth()!==t-1||i.getDate()!==e)}var Q=class o{constructor(t,e){this.dom=t;this.http=e;f("IndexService.constructor()")}holidays={};isInitialized=!1;initialized(){this.isInitialized=!0}getNavigationFrom(t){return t?t.isReload?"reload":"url":"click"}indexRepPrefix$(t){let i=this.dom.getBaseHref()+rt.GITWEE_DATA;return t.data?t.data.pipe(k(n=>i+"/"+(n?.gitweeNamespace||""))):se(i)}buildConfigUrl$(t){return this.indexRepPrefix$(t).pipe(k(e=>`${e}/config/main.json`))}buildTagIndex$(t,e){return this.indexRepPrefix$(t).pipe(k(i=>i+"/tag/"+(e?`${e}/`:"")+"index.json"))}fetchConfig$(t){return this.buildConfigUrl$(t).pipe(J(i=>this.http.fetchGhJson(i)))}readYearHoliday$(t){return this.http.fetchJson(`https://holidays-jp.github.io/api/v1/${t}/date.json`).pipe(k(e=>{let i={};for(let n in e){let r=e[n],a={date:new Date(n),name:r},l=i[a.date.getMonth()];if(l||(l={},i[a.date.getMonth()]=l),l[a.date.getDate()])throw new Error(`Not a valid date entry at ${a.date}`);l[a.date.getDate()]=a}return i}),ee(1))}getNationalHoliday$(t){let e=t.getFullYear(),i=this.holidays[e];return i||(i=this.readYearHoliday$(e),this.holidays[e]=i),i.pipe(k(n=>{if(!(t.getMonth()in n))return null;let r=n[t.getMonth()];return t.getDate()in r?r[t.getDate()].name:null}))}isNationalHoliday$(t){return this.getNationalHoliday$(t).pipe(k(e=>e!==null))}buildIndex$(t,e,i,n){return this.indexRepPrefix$(t).pipe(k(r=>r+"/date/"+(e?`${e}/`:"")+(i?`${i}/`:"")+(n?`${n}/`:"")+"index.json"))}fetchWeeklyIndex$(t){return this.http.fetchGhJson(t).pipe()}fetchTagIndexInternal$(t,e){return this.http.fetchGhJson(t).pipe(k(i=>{let n=new gt;return n.indexUrl=t,n.title=i.title,n.entries=i.defaultEntries,n.timelineUrl=i.fuzzyIndexUrl,n.tagkey=e.tagkey,n.urlLink=`tag/${e.tagkey}`,n.navigationFrom=this.getNavigationFrom(e),n.updated=i.updated,n}))}fetchTagIndex$(t,e){return this.buildTagIndex$(t,e.tagkey).pipe(J(n=>this.fetchTagIndexInternal$(n,e)))}fetchTagListInternal$(t){return this.http.fetchGhJson(t).pipe()}fetchTagList$(t){return this.buildTagIndex$(t).pipe(J(i=>this.fetchTagListInternal$(i)))}fetchIndexInternal$(t,e,i){return this.http.fetchGhJson(e).pipe(k(n=>{let r=new mt;r.indexUrl=e,r.urlPrefix="timeline/",r.urlLink="",r.entries=n.defaultEntries,r.title=n.title,r.timelineUrl=n.fuzzyIndexUrl,r.navigationFrom=this.getNavigationFrom(i),r.updated=n.updated;for(let a in n.values){let l=Number(a),p=n.values[a],h=new pt;h.key=l,h.topPage=r,h.urlKey=ft(l,4),h.urlLink=`${r.urlPrefix}${h.urlKey}`,h.count=p.count,h.page$=null,i?.year===l&&(h.page$=this.openYearPage$(t,h,i)),r.yearEntries.unshift(h)}return r}))}fetchIndex$(t,e){return this.buildIndex$(t).pipe(J(n=>this.fetchIndexInternal$(t,n,e)))}openYearPageInternal$(t,e,i,n){return this.http.fetchGhJson(e).pipe(k(r=>{let a=new ut;a.urlLink=i.urlLink,a.urlPrefix=`${a.urlLink}/`,a.entries=r.defaultEntries,a.title=r.title,a.timelineUrl=r.fuzzyIndexUrl,a.navigationFrom=this.getNavigationFrom(n),a.updated=r.updated;for(let l in r.values){let p=Number(l),h=r.values[l],I=new ct;I.key=p,I.urlKey=ft(p,2),I.urlLink=`${a.urlPrefix}${I.urlKey}`,I.yearPage=a,I.yearIndex=i,I.count=h.count,I.page$=null,n?.year===i.key&&n?.month===p&&(I.page$=this.openMonthPage$(t,I,n)),a.monthEntries.unshift(I)}return a}))}openYearPage$(t,e,i){return this.buildIndex$(t,e.urlKey).pipe(J(r=>this.openYearPageInternal$(t,r,e,i)))}openMonthPageInternal$(t,e,i,n){let r=i.yearIndex;return this.http.fetchGhJson(e).pipe(k(a=>{let l=new dt;l.indexUrl=e,l.urlLink=i.urlLink,l.urlPrefix=`${l.urlLink}/`,l.lastDays=a.lastMonthDays,l.firstWeekday=a.firstWeekday,l.days=a.days,l.entries=a.defaultEntries,l.title=a.title,l.timelineUrl=a.fuzzyIndexUrl,l.navigationFrom=this.getNavigationFrom(n),l.updated=a.updated;for(let p in a.values){let h=Number(p),I=a.values[p],w=new Oe,R=new Date(Number(r.key),Number(i.key)-1,h);w.key=h,w.urlKey=ft(h,2),w.urlLink=`${l.urlPrefix}${w.urlKey}`,w.monthPage=l,w.monthIndex=i,w.isSelected=!1,w.count=I.count,w.page$=null,w.isNationalHoliday$=this.isNationalHoliday$(R),w.nationalHoliday$=this.getNationalHoliday$(R),n?.year===r.key&&n?.month===i.key&&n?.day===h&&(w.isSelected=!0,w.page$=this.openDayIndexPage$(t,w.monthIndex,w,n)),l.dayEntries[h]=w}return l}))}openMonthPage$(t,e,i){let n=e.yearIndex;return this.buildIndex$(t,n.urlKey,e.urlKey).pipe(J(a=>this.openMonthPageInternal$(t,a,e,i)))}openDayIndexPageInternal$(t,e,i){return this.http.fetchGhJson(t).pipe(k(n=>{let r=new lt;return r.indexUrl=t,r.urlLink=e.urlLink,r.title=n.title,r.entries=n.entries,r.navigationFrom=this.getNavigationFrom(i),r.updated=n.updated,r}))}openDayIndexPage$(t,e,i,n){return this.buildIndex$(t,e.yearIndex.urlKey,e.urlKey,i.urlKey).pipe(J(a=>this.openDayIndexPageInternal$(a,i,n)))}static \u0275fac=function(e){return new(e||o)(At(be),At(st))};static \u0275prov=Ne({token:o,factory:o.\u0275fac})};var Cn=(o,t)=>t.value;function xn(o,t){if(o&1&&(c(0,"th")(1,"div"),b(2),u()()),o&2){let e=t.$implicit;s(),it(oe("",e.clz," text-center")),s(),A(e.name)}}function yn(o,t){if(o&1){let e=D();qe(0,6),E("appAfterIf",function(){let n=_(e),r=d(3).$implicit,a=d(2);return v(a.onPageRetrieved(r,n))}),Ze()}}function Tn(o,t){if(o&1){let e=D();c(0,"div")(1,"a",4),E("click",function(n){_(e);let r=d(2).$implicit,a=d(2);return v(a.onClickDay(n,r))}),c(2,"span",5),b(3),u()(),C(4,yn,1,0,"ng-container"),K(5,"async"),u()}if(o&2){let e,i=d(2).$implicit,n=d(2);s(),g("title",oe("",i.count," \u4EF6"))("href",he("",n.urlPrefix,"/",i.urlLink),Te),s(2),A(i.key),s(),x((e=X(5,7,i.page$))?4:-1,e)}}function wn(o,t){if(o&1&&(c(0,"div"),b(1),u()),o&2){let e=d(2).$implicit;s(),A(e.key)}}function En(o,t){if(o&1&&(Si(0),K(1,"async"),c(2,"div"),C(3,Tn,6,9,"div")(4,wn,2,1,"div"),u()),o&2){let e=d().$implicit,i=d(2),n=X(1,5,e.isNationalHoliday$);s(2),B("border-bottom",n)("border-danger",n),s(),x(i.isIndexedDay(e)?3:4)}}function In(o,t){if(o&1&&(c(0,"td",1)(1,"div",2),C(2,En,5,7,"div",3),u()()),o&2){let e=t.$implicit;s(),le("border-color",e!=null&&e.isSelected?void 0:"transparent!important"),B("border-primary",e==null?null:e.isSelected),s(),x(e!==null?2:-1)}}function Sn(o,t){if(o&1&&(c(0,"tr"),H(1,In,3,5,"td",1,vi),u()),o&2){let e=t.$implicit;s(),z(e)}}var vt=class{constructor(t,e){this.date=t;this.index=e;this.key=t.getDate(),this.isNationalHoliday$=this.index.isNationalHoliday$(t)}key;count=0;isSelected=!1;isNationalHoliday$},bt=class o{constructor(t,e){this.route=t;this.index=e}month;monthIndex;urlPrefix;selected=new ue;weekdays=[{name:"\u65E5",value:0,clz:"calendar-sunday"},{name:"\u6708",value:1},{name:"\u706B",value:2},{name:"\u6C34",value:3},{name:"\u6728",value:4},{name:"\u91D1",value:5},{name:"\u571F",value:6,clz:"calendar-saturday"}];monthWeeks;selectedDay;ngOnInit(){f("CalendarPageComponent.OnInit()");let t=(this.month.firstWeekday+(this.month.days-1))%7,e=(this.month.firstWeekday===0?0:7-this.month.firstWeekday)+this.month.days+(t===6?0:7-t),i=[];for(let l=0;l<e/7;l++){let p=new Array(7);p.fill(null),i.push(p)}let n=this.month.firstWeekday,r=Number(this.monthIndex.yearIndex.key),a=Number(this.monthIndex.key)-1;for(let l=0,p=n;l<this.month.days;l++,p++){let h=l+1,I=new Date(r,a,h),w=this.month.dayEntries[h];w||(w=new vt(I,this.index)),i[Math.floor(p/7)][p%7]=w}this.monthWeeks=i}ngOnDestroy(){f("CalendarPageComponent.OnDestroy()")}unselect(){this.selectedDay=null}onClickNothing(t){f("onClickNothing()",t),t.preventDefault(),t.stopPropagation()}onClickDay(t,e){f("onClickDay()",t,e),t.preventDefault(),t.stopPropagation(),e.page$=this.index.openDayIndexPage$(this.route,this.monthIndex,e)}onPageRetrieved(t,e){this.selectedDay&&(this.selectedDay.page$=null,this.selectedDay.isSelected=!1),t.isSelected=!0,this.selectedDay=t;let i={index:t,page:e};this.selected.emit(i)}isIndexedDay(t){return t instanceof Oe}isEmptyDay(t){return t instanceof vt}static \u0275fac=function(e){return new(e||o)(F(fe),F(Q))};static \u0275cmp=U({type:o,selectors:[["gitwee-calendar-page"]],inputs:{month:"month",monthIndex:"monthIndex",urlPrefix:"urlPrefix"},outputs:{selected:"selected"},decls:5,vars:0,consts:[[1,"shadow","border","border-info","my-2",3,"click"],[1,"text-center"],[1,"border"],[3,"border-bottom","border-danger"],[3,"click","title","href"],[1,"gitwee-calendar-day"],[3,"appAfterIf"]],template:function(e,i){e&1&&(c(0,"table",0),E("click",function(r){return i.onClickNothing(r)}),H(1,xn,3,4,"th",null,Cn),H(3,Sn,3,0,"tr",null,Ke),u()),e&2&&(s(),z(i.weekdays),s(2),z(i.monthWeeks))},dependencies:[ve,Ce,ge],styles:[".calendar-saturday[_ngcontent-%COMP%]{color:#00f}.calendar-sunday[_ngcontent-%COMP%]{color:red}",".gitwee-sidebar-node[_ngcontent-%COMP%]{transition:transform .5s}.gitwee-sidebar-node[_ngcontent-%COMP%]:hover{transform:scale(1.03);z-index:10000}.gitwee-navi-item[_ngcontent-%COMP%]{display:inline-block;text-overflow:ellipsis;overflow:hidden;white-space:nowrap;vertical-align:text-bottom}.gitwee-calendar-day[_ngcontent-%COMP%]{display:inline-block;white-space:nowrap}"],data:{animation:[]}})};var Ki=(o,t)=>t.key;function Dn(o,t){if(o&1){let e=D();c(0,"div",1),E("appAfterIf",function(){let n=_(e),r=d().$implicit,a=d(4);return v(a.onMonthNodeExpanded(r,n))}),c(1,"gitwee-calendar-page",10),E("selected",function(n){_(e);let r=d(5);return v(r.onDaySelected(n))}),u()()}if(o&2){let e=d().$implicit,i=d(4);g("@slidedownTrigger",void 0),s(),g("urlPrefix",i.urlPrefix)("monthIndex",e)("month",t)}}function Fn(o,t){if(o&1){let e=D();c(0,"li",5),E("click",function(n){let r=_(e).$implicit,a=d(4);return v(a.onClickMonth(n,r))}),c(1,"a",6)(2,"span",7),b(3),u()(),c(4,"span",8),b(5),u(),C(6,Dn,2,4,"div"),K(7,"async"),u()}if(o&2){let e,i=t.$implicit,n=d(4);B("gitwee-sidebar-node",!n.selectedMonth||i!==n.selectedMonth),s(),g("href",he("",n.urlPrefix,"/",i.urlLink),Te),s(2),me("",i.key," \u6708"),s(),B("bg-primary",i===n.selectedMonth)("bg-secondary",i!==n.selectedMonth),s(),A(i.count),s(),x((e=X(7,12,i.page$))?6:-1,e)}}function kn(o,t){if(o&1){let e=D();c(0,"div",1),E("appAfterIf",function(){let n=_(e),r=d().$implicit,a=d(2);return v(a.onYearNodeExpanded(r,n))}),c(1,"ul",9),H(2,Fn,8,14,"li",3,Ki),u()()}o&2&&(g("@slidedownTrigger",void 0),s(2),z(t.monthEntries))}function Nn(o,t){if(o&1){let e=D();c(0,"li",5),E("click",function(n){let r=_(e).$implicit,a=d(2);return v(a.onClickYear(n,r))}),c(1,"a",6)(2,"span",7),b(3),u()(),c(4,"span",8),b(5),u(),C(6,kn,4,1,"div"),K(7,"async"),u()}if(o&2){let e,i=t.$implicit,n=d(2);B("gitwee-sidebar-node",!n.selectedYear||i!==n.selectedYear),g("@calendarNodeTrigger",void 0),s(),g("href",he("",n.urlPrefix,"/",i.urlLink),Te),s(2),me("",i.key," \u5E74"),s(),B("bg-primary",i===n.selectedYear)("bg-secondary",i!==n.selectedYear),s(),A(i.count),s(),x((e=X(7,13,i.page$))?6:-1,e)}}function An(o,t){if(o&1){let e=D();c(0,"li",11),E("click",function(n){_(e);let r=d(2);return v(r.onClickYearToggler(n))}),c(1,"span"),b(2),u()()}if(o&2){let e=d(2);g("@calendarNodeTrigger",void 0),s(2),A(e.yearShowAll?"\u6298\u308A\u305F\u305F\u3080":"\u8868\u793A\u3092\u5897\u3084\u3059")}}function Mn(o,t){if(o&1){let e=D();c(0,"div",1),E("appAfterIf",function(){let n=_(e),r=d();return v(r.onTopNodeExpanded(n))}),c(1,"ul",2),H(2,Nn,8,15,"li",3,Ki),C(4,An,3,2,"li",4),u()()}if(o&2){let e=d();g("@calendarListTrigger",void 0),s(2),z(t.yearEntries.slice(0,e.yearCount)),s(2),x(e.showYearToggler()?-1:4)}}var Ct=class o{constructor(t,e,i){this.route=t;this.index=e;this.reloader=i;f("CalendarNaviComponent.constructor()");let n="^([0-9]{4})(?:/([0-9]{2})(?:/([0-9]{2})/?)?)?$";this.naviMatcher=new RegExp(n),f("CalendarNaviComponent URL Matcher",n)}index$;nodeExpanded=new ue;notFound=new ue;route$;urlPrefix;reload$=new Y;reloadId;refreshSubscription;defaultYearCount=3;yearShowAll=!1;isNavigateDerived=!1;pendingFragment=null;destroy$=new Y;selectedYear;selectedMonth;selectedDay;naviMatcher;allowYearToggler=j(!1);showYearToggler=ie(()=>this.allowYearToggler()&&!!this.selectedYear);unselect(t){t||(this.isNavigateDerived=!1),this.index$||(this.index$=this.index.fetchIndex$(this.route)),this.selectedYear&&(this.selectedYear.page$=null),this.selectedYear=null,this.selectedMonth&&(this.selectedMonth.page$=null),this.yearShowAll=!1,this.selectedMonth=null,this.selectedDay=null}get yearCount(){if(!this.yearShowAll)return this.defaultYearCount}onNodeExpanded(t){f("CalendarNaviComponent.onNodeExpanded()",t),this.pendingFragment&&(t.urlLink=`${t.urlLink}#${this.pendingFragment}`,delete this.pendingFragment),this.nodeExpanded.emit(t)}onTopNodeExpanded(t){f("CalendarNaviComponent.onTopNodeExpanded()",t,this.isNavigateDerived),this.startWatching(t),this.allowYearToggler.set(this.defaultYearCount<t.yearEntries.length);for(let e of t.yearEntries)if(e.page$)return;this.isNavigateDerived&&this.onNodeExpanded(t)}onYearNodeExpanded(t,e){f("CalendarNaviComponent.onYearNodeExpanded()",t),this.selectedYear&&(this.selectedYear.page$=null),this.selectedYear=t;for(let i of e.monthEntries)if(i.page$)return;this.onNodeExpanded(e)}onMonthNodeExpanded(t,e){f("CalendarNaviComponent.onMonthNodeExpanded()",t),this.selectedMonth&&(this.selectedMonth.page$=null),this.selectedMonth=t;for(let i in e.dayEntries)if(e.dayEntries[i].page$)return;this.onNodeExpanded(e)}ensureUnregisterWathing(){this.reloadId&&(this.reloader.unregister(this.reloadId),this.reloadId=null),this.refreshSubscription&&this.refreshSubscription.unsubscribe()}startWatching(t){this.ensureUnregisterWathing();let e=this.reloader.registerWatcher(t.indexUrl,t.updated);this.reloadId=e,this.refreshSubscription=this.reloader.refreshEvent(e).pipe(L(this.destroy$)).subscribe(()=>{this.reload$.next()})}ngOnInit(){f("CalendarNaviComponent.OnInit()"),this.route$.pipe(L(this.destroy$)).subscribe(t=>{if(this.isNavigateDerived=t.category==="Calendar",!this.isNavigateDerived){this.unselect();return}if(!t.navigators){this.index$=null,this.unselect(!0);return}let e=t.navigators.match(this.naviMatcher);if(!e){_e("No route to",t),this.unselect(!0);return}let i=_t(e[1]),n=_t(e[2]),r=_t(e[3]);if(Ji(i,n,r)){_e(`Invalidate Routing date ${i}-${n}-${r}`,t),this.unselect(!0);return}f(`CalendarNaviComponent detect routing ${i} ${n} ${r} ${t.fragment}`),this.pendingFragment=t.fragment;let a={year:i,month:n,day:r};this.yearShowAll=!!i,this.index$=this.index.fetchIndex$(this.route,a)}),this.reload$.pipe(L(this.destroy$)).subscribe(()=>{let t={year:this.selectedYear?.key,month:this.selectedMonth?.key,day:this.selectedDay?.key,isReload:!0};f("Reload is clicked on CalendarNaviComponent.",t),this.selectedDay=null,this.selectedMonth=null,this.selectedYear=null,this.index$=this.index.fetchIndex$(this.route,t)})}ngAfterViewInit(){f("CalendarNaviComponent.AfterViewInit()")}ngOnDestroy(){f("CalendarNaviComponent.OnDestroy()"),this.ensureUnregisterWathing(),this.destroy$.next()}onClickYearToggler(t){f("CalendarNaviComponent.onClickYearToggler()",t),this.yearShowAll=!this.yearShowAll}onClickYear(t,e){if(f("CalendarNaviComponent.onClickYear()",t,e),t.preventDefault(),t.stopPropagation(),this.selectedMonth=null,this.selectedDay=null,this.selectedYear===e){this.onNodeExpanded(e.topPage),e.page$=null,this.selectedYear=null;return}e.page$=this.index.openYearPage$(this.route,e)}onClickMonth(t,e){if(f("CalendarNaviComponent.onClickMonth()",t,e),t.preventDefault(),t.stopPropagation(),this.selectedDay=null,this.selectedMonth===e){this.onNodeExpanded(e.yearPage),e.page$=null,this.selectedMonth=null;return}e.page$=this.index.openMonthPage$(this.route,e)}onDaySelected(t){f("CalendarNaviComponent.onDaySelected()",t),this.selectedDay=t.index;let e=t.page;this.onNodeExpanded(e)}static \u0275fac=function(e){return new(e||o)(F(fe),F(Q),F(Pe))};static \u0275cmp=U({type:o,selectors:[["gitwee-calendar-navi"]],inputs:{route$:"route$",urlPrefix:"urlPrefix"},outputs:{nodeExpanded:"nodeExpanded",notFound:"notFound"},decls:3,vars:3,consts:[["id","gitweeCalendarYearIndex"],[3,"appAfterIf"],[1,"list-group"],[1,"list-group-item","align-items-center","row","text-end","shadow","gitwee-listing-calendar",3,"gitwee-sidebar-node"],["id","gitweeCalendarNaviToggler","role","button","tabindex","0",1,"align-items-center","row","btn","btn-secondary"],[1,"list-group-item","align-items-center","row","text-end","shadow","gitwee-listing-calendar",3,"click"],[1,"col-8",3,"href"],[1,"gitwee-navi-item"],[1,"badge","rounded-pill","col-4"],[1,"list-group","list-group-flush","my-2"],[3,"selected","urlPrefix","monthIndex","month"],["id","gitweeCalendarNaviToggler","role","button","tabindex","0",1,"align-items-center","row","btn","btn-secondary",3,"click"]],template:function(e,i){if(e&1&&(c(0,"div",0),C(1,Mn,5,2,"div"),K(2,"async"),u()),e&2){let n;s(),x((n=X(2,1,i.index$))?1:-1,n)}},dependencies:[ve,Ce,bt,ge],styles:[".gitwee-listing-calendar[_ngcontent-%COMP%]{cursor:pointer}",".gitwee-sidebar-node[_ngcontent-%COMP%]{transition:transform .5s}.gitwee-sidebar-node[_ngcontent-%COMP%]:hover{transform:scale(1.03);z-index:10000}.gitwee-navi-item[_ngcontent-%COMP%]{display:inline-block;text-overflow:ellipsis;overflow:hidden;white-space:nowrap;vertical-align:text-bottom}.gitwee-calendar-day[_ngcontent-%COMP%]{display:inline-block;white-space:nowrap}"],data:{animation:[Z("calendarNodeTrigger",[P(":enter",[T({opacity:0,transform:"translateX(5px)"}),M("500ms ease-in-out",T({opacity:1,transform:"none"}))]),P(":leave",[M("500ms ease-in-out",T({opacity:0,transform:"translateX(5px)"}))])]),Z("calendarListTrigger",[P(":enter",[T({opacity:0,transform:"translateX(5px)"}),M("500ms 200ms ease-in-out",T({opacity:1,transform:"none"}))]),P(":leave",[T({position:"absolute",width:"100%"}),M("200ms ease-in-out",T({opacity:0,transform:"translateX(5px)"}))])]),Z("slidedownTrigger",[P(":enter",[T({opacity:0,transform:"translateY(-5px)"}),M("500ms ease-in-out",T({opacity:1,transform:"none"}))]),P(":leave",[M("500ms ease-in-out",T({opacity:0,transform:"translateY(-5px)"}))])])]}})};var Pn=["content"],On=["scroll"],Ln=["padding"],pn=["*"],je=o=>({searchTerm:o});function $n(o,t){if(o&1&&(c(0,"div",3),Qe(1,6),u()),o&2){let e=d();s(),g("ngTemplateOutlet",e.headerTemplate())("ngTemplateOutletContext",Ae(2,je,e.filterValue()))}}function Bn(o,t){if(o&1&&(c(0,"div",5),Qe(1,6),u()),o&2){let e=d();s(),g("ngTemplateOutlet",e.footerTemplate())("ngTemplateOutletContext",Ae(2,je,e.filterValue()))}}var Vn=["searchInput"],Rn=["clearButton"],Un=(o,t,e)=>({item:o,clear:t,label:e}),Hn=(o,t)=>({items:o,clear:t}),zn=(o,t,e,i)=>({item:o,item$:t,index:e,searchTerm:i});function Yn(o,t){if(o&1&&(c(0,"div",21),b(1),u()),o&2){let e=d(2);s(),A(e.placeholder()??e.config.placeholder)}}function jn(o,t){}function Gn(o,t){if(o&1&&ne(0,Yn,2,1,"ng-template",null,1,de)(2,jn,0,0,"ng-template",20),o&2){let e=$(1),i=d();s(2),g("ngTemplateOutlet",i.placeholderTemplate()||e)}}function Jn(o,t){if(o&1){let e=D();c(0,"span",24),E("click",function(){_(e);let n=d().$implicit,r=d(2);return v(r.unselect(n))}),b(1,"\xD7"),u(),N(2,"span",25)}if(o&2){let e=d().$implicit,i=d(2);s(2),g("ngItemLabel",e.label)("escape",i.escapeHTML)}}function Wn(o,t){}function Kn(o,t){if(o&1&&(c(0,"div",23),ne(1,Jn,3,2,"ng-template",null,2,de)(3,Wn,0,0,"ng-template",12),u()),o&2){let e=t.$implicit,i=$(2),n=d(2);B("ng-value-disabled",e.disabled),s(3),g("ngTemplateOutlet",n.labelTemplate()||i)("ngTemplateOutletContext",ki(4,Un,e.value,n.clearItem,e.label))}}function qn(o,t){if(o&1&&H(0,Kn,4,8,"div",22,$t().trackByOption,!0),o&2){let e=d();z(e.selectedItems)}}function Zn(o,t){}function Qn(o,t){if(o&1&&ne(0,Zn,0,0,"ng-template",12),o&2){let e=d();g("ngTemplateOutlet",e.multiLabelTemplate())("ngTemplateOutletContext",Fi(2,Hn,e.selectedValues,e.clearItem))}}function Xn(o,t){o&1&&N(0,"div",26)}function eo(o,t){}function to(o,t){if(o&1&&ne(0,Xn,1,0,"ng-template",null,3,de)(2,eo,0,0,"ng-template",20),o&2){let e=$(1),i=d();s(2),g("ngTemplateOutlet",i.loadingSpinnerTemplate()||e)}}function io(o,t){if(o&1&&Qe(0,20),o&2){let e=d(2);g("ngTemplateOutlet",e.clearButtonTemplate())}}function no(o,t){o&1&&(c(0,"span",28),b(1,"\xD7"),u())}function oo(o,t){if(o&1){let e=D();c(0,"span",27,4),E("click",function(n){_(e);let r=d();return v(r.handleClearClick(n))}),C(2,io,1,1,"ng-container",20)(3,no,2,0,"span",28),u()}if(o&2){let e=d();g("title",nt(e.clearAllText()||e.config.clearAllText)),pe("tabindex",e.tabFocusOnClear()?0:-1),s(2),x(e.clearButtonTemplate()?2:3)}}function ro(o,t){if(o&1&&N(0,"span",33),o&2){let e=d().$implicit,i=d(2);g("ngItemLabel",e.label)("escape",i.escapeHTML)}}function ao(o,t){}function so(o,t){if(o&1){let e=D();c(0,"div",32),E("click",function(){let n=_(e).$implicit,r=d(2);return v(r.toggleItem(n))})("mouseover",function(){let n=_(e).$implicit,r=d(2);return v(r.onItemHover(n))}),ne(1,ro,1,2,"ng-template",null,5,de)(3,ao,0,0,"ng-template",12),u()}if(o&2){let e=t.$implicit,i=$(2),n=d(2);B("ng-option-disabled",e.disabled)("ng-option-selected",e.selected)("ng-optgroup",e.children)("ng-option",!e.children)("ng-option-child",!!e.parent)("ng-option-marked",e===n.itemsList.markedItem),pe("role",e.children?"group":"option")("aria-selected",e.selected)("id",e==null?null:e.htmlId)("aria-setsize",n.itemsList.filteredItems.length)("aria-posinset",e.index+1),s(3),g("ngTemplateOutlet",e.children?n.optgroupTemplate()||i:n.optionTemplate()||i)("ngTemplateOutletContext",Ni(19,zn,e.value,e,e.index,n.searchTerm))}}function lo(o,t){if(o&1&&(c(0,"span")(1,"span",35),b(2),u(),b(3),u()),o&2){let e=d(3);s(2),A(e.addTagText()||e.config.addTagText),s(),me('"',e.searchTerm,'"')}}function co(o,t){}function uo(o,t){if(o&1){let e=D();c(0,"div",34),E("mouseover",function(){_(e);let n=d(2);return v(n.itemsList.unmarkItem())})("click",function(){_(e);let n=d(2);return v(n.selectTag())}),ne(1,lo,4,2,"ng-template",null,6,de)(3,co,0,0,"ng-template",12),u()}if(o&2){let e=$(2),i=d(2);B("ng-option-marked",!i.itemsList.markedItem),pe("aria-selected",!1),s(3),g("ngTemplateOutlet",i.tagTemplate()||e)("ngTemplateOutletContext",Ae(5,je,i.searchTerm))}}function po(o,t){if(o&1&&(c(0,"div",36),b(1),u()),o&2){let e=d(3);s(),A(e.notFoundText()??e.config.notFoundText)}}function mo(o,t){}function ho(o,t){if(o&1&&ne(0,po,2,1,"ng-template",null,7,de)(2,mo,0,0,"ng-template",12),o&2){let e=$(1),i=d(2);s(2),g("ngTemplateOutlet",i.notFoundTemplate()||e)("ngTemplateOutletContext",Ae(2,je,i.searchTerm))}}function go(o,t){if(o&1&&(c(0,"div",36),b(1),u()),o&2){let e=d(3);s(),A(e.typeToSearchText()||e.config.typeToSearchText)}}function fo(o,t){}function _o(o,t){if(o&1&&ne(0,go,2,1,"ng-template",null,8,de)(2,fo,0,0,"ng-template",20),o&2){let e=$(1),i=d(2);s(2),g("ngTemplateOutlet",i.typeToSearchTemplate()||e)}}function vo(o,t){if(o&1&&(c(0,"div",36),b(1),u()),o&2){let e=d(3);s(),A(e.loadingText()||e.config.loadingText)}}function bo(o,t){}function Co(o,t){if(o&1&&ne(0,vo,2,1,"ng-template",null,9,de)(2,bo,0,0,"ng-template",12),o&2){let e=$(1),i=d(2);s(2),g("ngTemplateOutlet",i.loadingTextTemplate()||e)("ngTemplateOutletContext",Ae(2,je,i.searchTerm))}}function xo(o,t){if(o&1){let e=D();c(0,"ng-dropdown-panel",29),E("update",function(n){_(e);let r=d();return v(r.viewPortItems=n)})("scroll",function(n){_(e);let r=d();return v(r.scroll.emit(n))})("scrollToEnd",function(n){_(e);let r=d();return v(r.scrollToEnd.emit(n))})("outsideClick",function(){_(e);let n=d();return v(n.close())}),qe(1),H(2,so,4,24,"div",30,$t().trackByOption,!0),C(4,uo,4,7,"div",31),Ze(),C(5,ho,3,4),C(6,_o,3,1),C(7,Co,3,4),u()}if(o&2){let e=d(),i=e.appendTo()||e.config.appendTo;it(i?e.ngClass()?e.ngClass():e.classes:null),B("ng-select-multiple",e.multiple()),g("virtualScroll",e.virtualScroll()??!e.config.disableVirtualScroll??!1)("bufferAmount",e.bufferAmount())("appendTo",i)("position",e.dropdownPosition())("outsideClickEvent",e.outsideClickEvent())("headerTemplate",e.headerTemplate())("footerTemplate",e.footerTemplate())("filterValue",e.searchTerm)("items",e.itemsList.filteredItems)("showAddTag",e.showAddTag)("markedItem",e.itemsList.markedItem)("id",e.dropdownId)("ariaLabelDropdown",e.ariaLabelDropdown()??e.config.ariaLabelDropdown),s(2),z(e.viewPortItems),s(2),x(e.showAddTag?4:-1),s(),x(e.showNoItemsFound()?5:-1),s(),x(e.showTypeToSearch()?6:-1),s(),x(e.loading()&&e.itemsList.filteredItems.length===0?7:-1)}}function yo(o,t){if(o&1&&b(0),o&2){let e=d();me(" ",e.notFoundText()??e.config.notFoundText," ")}}var mn=/[&<>"']/g,To=RegExp(mn.source),wo={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"};function Eo(o){return o&&To.test(o)?o.replace(mn,t=>wo[t]):o}function O(o){return o!=null}function Se(o){return typeof o=="object"&&O(o)}function Io(o){return o instanceof Promise}function yt(o){return o instanceof Function}var So=(()=>{class o{constructor(){this.element=S(te),this.ngItemLabel=m(),this.escape=m(!0),Pt(()=>{this.element.nativeElement.innerHTML=this.escape()?Eo(this.ngItemLabel()):this.ngItemLabel()})}static{this.\u0275fac=function(i){return new(i||o)}}static{this.\u0275dir=W({type:o,selectors:[["","ngItemLabel",""]],inputs:{ngItemLabel:[1,"ngItemLabel"],escape:[1,"escape"]}})}}return o})(),qi=(()=>{class o{constructor(){this.template=S(y)}static{this.\u0275fac=function(i){return new(i||o)}}static{this.\u0275dir=W({type:o,selectors:[["","ng-option-tmp",""]]})}}return o})(),Zi=(()=>{class o{constructor(){this.template=S(y)}static{this.\u0275fac=function(i){return new(i||o)}}static{this.\u0275dir=W({type:o,selectors:[["","ng-optgroup-tmp",""]]})}}return o})(),Qi=(()=>{class o{constructor(){this.template=S(y)}static{this.\u0275fac=function(i){return new(i||o)}}static{this.\u0275dir=W({type:o,selectors:[["","ng-label-tmp",""]]})}}return o})(),Xi=(()=>{class o{constructor(){this.template=S(y)}static{this.\u0275fac=function(i){return new(i||o)}}static{this.\u0275dir=W({type:o,selectors:[["","ng-multi-label-tmp",""]]})}}return o})(),en=(()=>{class o{constructor(){this.template=S(y)}static{this.\u0275fac=function(i){return new(i||o)}}static{this.\u0275dir=W({type:o,selectors:[["","ng-header-tmp",""]]})}}return o})(),tn=(()=>{class o{constructor(){this.template=S(y)}static{this.\u0275fac=function(i){return new(i||o)}}static{this.\u0275dir=W({type:o,selectors:[["","ng-footer-tmp",""]]})}}return o})(),nn=(()=>{class o{constructor(){this.template=S(y)}static{this.\u0275fac=function(i){return new(i||o)}}static{this.\u0275dir=W({type:o,selectors:[["","ng-notfound-tmp",""]]})}}return o})(),on=(()=>{class o{constructor(){this.template=S(y)}static{this.\u0275fac=function(i){return new(i||o)}}static{this.\u0275dir=W({type:o,selectors:[["","ng-placeholder-tmp",""]]})}}return o})(),rn=(()=>{class o{constructor(){this.template=S(y)}static{this.\u0275fac=function(i){return new(i||o)}}static{this.\u0275dir=W({type:o,selectors:[["","ng-typetosearch-tmp",""]]})}}return o})(),an=(()=>{class o{constructor(){this.template=S(y)}static{this.\u0275fac=function(i){return new(i||o)}}static{this.\u0275dir=W({type:o,selectors:[["","ng-loadingtext-tmp",""]]})}}return o})(),sn=(()=>{class o{constructor(){this.template=S(y)}static{this.\u0275fac=function(i){return new(i||o)}}static{this.\u0275dir=W({type:o,selectors:[["","ng-tag-tmp",""]]})}}return o})(),ln=(()=>{class o{constructor(){this.template=S(y)}static{this.\u0275fac=function(i){return new(i||o)}}static{this.\u0275dir=W({type:o,selectors:[["","ng-loadingspinner-tmp",""]]})}}return o})(),dn=(()=>{class o{constructor(){this.template=S(y)}static{this.\u0275fac=function(i){return new(i||o)}}static{this.\u0275dir=W({type:o,selectors:[["","ng-clearbutton-tmp",""]]})}}return o})(),Do=(()=>{class o{constructor(){this.fixedPlaceholder=!0,this.notFoundText="No items found",this.typeToSearchText="Type to search",this.addTagText="Add item",this.loadingText="Loading...",this.clearAllText="Clear all",this.ariaLabelDropdown="Options List",this.disableVirtualScroll=!0,this.openOnEnter=!0,this.appearance="underline",this.tabFocusOnClear=!0,this.outsideClickEvent="click"}static{this.\u0275fac=function(i){return new(i||o)}}static{this.\u0275prov=Ne({token:o,factory:o.\u0275fac,providedIn:"root"})}}return o})(),Fo=(()=>{class o{warn(e){console.warn(e)}static{this.\u0275fac=function(i){return new(i||o)}}static{this.\u0275prov=Ne({token:o,factory:o.\u0275fac,providedIn:"root"})}}return o})();function hn(){return"axxxxxxxxxxx".replace(/[x]/g,()=>(Math.random()*16|0).toString(16))}var ko={"\u24B6":"A",\uFF21:"A",\u00C0:"A",\u00C1:"A",\u00C2:"A",\u1EA6:"A",\u1EA4:"A",\u1EAA:"A",\u1EA8:"A",\u00C3:"A",\u0100:"A",\u0102:"A",\u1EB0:"A",\u1EAE:"A",\u1EB4:"A",\u1EB2:"A",\u0226:"A",\u01E0:"A",\u00C4:"A",\u01DE:"A",\u1EA2:"A",\u00C5:"A",\u01FA:"A",\u01CD:"A",\u0200:"A",\u0202:"A",\u1EA0:"A",\u1EAC:"A",\u1EB6:"A",\u1E00:"A",\u0104:"A","\u023A":"A","\u2C6F":"A","\uA732":"AA",\u00C6:"AE",\u01FC:"AE",\u01E2:"AE","\uA734":"AO","\uA736":"AU","\uA738":"AV","\uA73A":"AV","\uA73C":"AY","\u24B7":"B",\uFF22:"B",\u1E02:"B",\u1E04:"B",\u1E06:"B","\u0243":"B",\u0182:"B",\u0181:"B","\u24B8":"C",\uFF23:"C",\u0106:"C",\u0108:"C",\u010A:"C",\u010C:"C",\u00C7:"C",\u1E08:"C",\u0187:"C","\u023B":"C","\uA73E":"C","\u24B9":"D",\uFF24:"D",\u1E0A:"D",\u010E:"D",\u1E0C:"D",\u1E10:"D",\u1E12:"D",\u1E0E:"D",\u0110:"D",\u018B:"D",\u018A:"D",\u0189:"D","\uA779":"D",\u01F1:"DZ",\u01C4:"DZ",\u01F2:"Dz",\u01C5:"Dz","\u24BA":"E",\uFF25:"E",\u00C8:"E",\u00C9:"E",\u00CA:"E",\u1EC0:"E",\u1EBE:"E",\u1EC4:"E",\u1EC2:"E",\u1EBC:"E",\u0112:"E",\u1E14:"E",\u1E16:"E",\u0114:"E",\u0116:"E",\u00CB:"E",\u1EBA:"E",\u011A:"E",\u0204:"E",\u0206:"E",\u1EB8:"E",\u1EC6:"E",\u0228:"E",\u1E1C:"E",\u0118:"E",\u1E18:"E",\u1E1A:"E",\u0190:"E",\u018E:"E","\u24BB":"F",\uFF26:"F",\u1E1E:"F",\u0191:"F","\uA77B":"F","\u24BC":"G",\uFF27:"G",\u01F4:"G",\u011C:"G",\u1E20:"G",\u011E:"G",\u0120:"G",\u01E6:"G",\u0122:"G",\u01E4:"G",\u0193:"G","\uA7A0":"G","\uA77D":"G","\uA77E":"G","\u24BD":"H",\uFF28:"H",\u0124:"H",\u1E22:"H",\u1E26:"H",\u021E:"H",\u1E24:"H",\u1E28:"H",\u1E2A:"H",\u0126:"H","\u2C67":"H","\u2C75":"H","\uA78D":"H","\u24BE":"I",\uFF29:"I",\u00CC:"I",\u00CD:"I",\u00CE:"I",\u0128:"I",\u012A:"I",\u012C:"I",\u0130:"I",\u00CF:"I",\u1E2E:"I",\u1EC8:"I",\u01CF:"I",\u0208:"I",\u020A:"I",\u1ECA:"I",\u012E:"I",\u1E2C:"I",\u0197:"I","\u24BF":"J",\uFF2A:"J",\u0134:"J","\u0248":"J","\u24C0":"K",\uFF2B:"K",\u1E30:"K",\u01E8:"K",\u1E32:"K",\u0136:"K",\u1E34:"K",\u0198:"K","\u2C69":"K","\uA740":"K","\uA742":"K","\uA744":"K","\uA7A2":"K","\u24C1":"L",\uFF2C:"L",\u013F:"L",\u0139:"L",\u013D:"L",\u1E36:"L",\u1E38:"L",\u013B:"L",\u1E3C:"L",\u1E3A:"L",\u0141:"L","\u023D":"L","\u2C62":"L","\u2C60":"L","\uA748":"L","\uA746":"L","\uA780":"L",\u01C7:"LJ",\u01C8:"Lj","\u24C2":"M",\uFF2D:"M",\u1E3E:"M",\u1E40:"M",\u1E42:"M","\u2C6E":"M",\u019C:"M","\u24C3":"N",\uFF2E:"N",\u01F8:"N",\u0143:"N",\u00D1:"N",\u1E44:"N",\u0147:"N",\u1E46:"N",\u0145:"N",\u1E4A:"N",\u1E48:"N","\u0220":"N",\u019D:"N","\uA790":"N","\uA7A4":"N",\u01CA:"NJ",\u01CB:"Nj","\u24C4":"O",\uFF2F:"O",\u00D2:"O",\u00D3:"O",\u00D4:"O",\u1ED2:"O",\u1ED0:"O",\u1ED6:"O",\u1ED4:"O",\u00D5:"O",\u1E4C:"O",\u022C:"O",\u1E4E:"O",\u014C:"O",\u1E50:"O",\u1E52:"O",\u014E:"O",\u022E:"O",\u0230:"O",\u00D6:"O",\u022A:"O",\u1ECE:"O",\u0150:"O",\u01D1:"O",\u020C:"O",\u020E:"O",\u01A0:"O",\u1EDC:"O",\u1EDA:"O",\u1EE0:"O",\u1EDE:"O",\u1EE2:"O",\u1ECC:"O",\u1ED8:"O",\u01EA:"O",\u01EC:"O",\u00D8:"O",\u01FE:"O",\u0186:"O",\u019F:"O","\uA74A":"O","\uA74C":"O",\u01A2:"OI","\uA74E":"OO",\u0222:"OU","\u24C5":"P",\uFF30:"P",\u1E54:"P",\u1E56:"P",\u01A4:"P","\u2C63":"P","\uA750":"P","\uA752":"P","\uA754":"P","\u24C6":"Q",\uFF31:"Q","\uA756":"Q","\uA758":"Q","\u024A":"Q","\u24C7":"R",\uFF32:"R",\u0154:"R",\u1E58:"R",\u0158:"R",\u0210:"R",\u0212:"R",\u1E5A:"R",\u1E5C:"R",\u0156:"R",\u1E5E:"R","\u024C":"R","\u2C64":"R","\uA75A":"R","\uA7A6":"R","\uA782":"R","\u24C8":"S",\uFF33:"S","\u1E9E":"S",\u015A:"S",\u1E64:"S",\u015C:"S",\u1E60:"S",\u0160:"S",\u1E66:"S",\u1E62:"S",\u1E68:"S",\u0218:"S",\u015E:"S","\u2C7E":"S","\uA7A8":"S","\uA784":"S","\u24C9":"T",\uFF34:"T",\u1E6A:"T",\u0164:"T",\u1E6C:"T",\u021A:"T",\u0162:"T",\u1E70:"T",\u1E6E:"T",\u0166:"T",\u01AC:"T",\u01AE:"T","\u023E":"T","\uA786":"T","\uA728":"TZ","\u24CA":"U",\uFF35:"U",\u00D9:"U",\u00DA:"U",\u00DB:"U",\u0168:"U",\u1E78:"U",\u016A:"U",\u1E7A:"U",\u016C:"U",\u00DC:"U",\u01DB:"U",\u01D7:"U",\u01D5:"U",\u01D9:"U",\u1EE6:"U",\u016E:"U",\u0170:"U",\u01D3:"U",\u0214:"U",\u0216:"U",\u01AF:"U",\u1EEA:"U",\u1EE8:"U",\u1EEE:"U",\u1EEC:"U",\u1EF0:"U",\u1EE4:"U",\u1E72:"U",\u0172:"U",\u1E76:"U",\u1E74:"U","\u0244":"U","\u24CB":"V",\uFF36:"V",\u1E7C:"V",\u1E7E:"V",\u01B2:"V","\uA75E":"V","\u0245":"V","\uA760":"VY","\u24CC":"W",\uFF37:"W",\u1E80:"W",\u1E82:"W",\u0174:"W",\u1E86:"W",\u1E84:"W",\u1E88:"W","\u2C72":"W","\u24CD":"X",\uFF38:"X",\u1E8A:"X",\u1E8C:"X","\u24CE":"Y",\uFF39:"Y",\u1EF2:"Y",\u00DD:"Y",\u0176:"Y",\u1EF8:"Y",\u0232:"Y",\u1E8E:"Y",\u0178:"Y",\u1EF6:"Y",\u1EF4:"Y",\u01B3:"Y","\u024E":"Y","\u1EFE":"Y","\u24CF":"Z",\uFF3A:"Z",\u0179:"Z",\u1E90:"Z",\u017B:"Z",\u017D:"Z",\u1E92:"Z",\u1E94:"Z",\u01B5:"Z",\u0224:"Z","\u2C7F":"Z","\u2C6B":"Z","\uA762":"Z","\u24D0":"a",\uFF41:"a",\u1E9A:"a",\u00E0:"a",\u00E1:"a",\u00E2:"a",\u1EA7:"a",\u1EA5:"a",\u1EAB:"a",\u1EA9:"a",\u00E3:"a",\u0101:"a",\u0103:"a",\u1EB1:"a",\u1EAF:"a",\u1EB5:"a",\u1EB3:"a",\u0227:"a",\u01E1:"a",\u00E4:"a",\u01DF:"a",\u1EA3:"a",\u00E5:"a",\u01FB:"a",\u01CE:"a",\u0201:"a",\u0203:"a",\u1EA1:"a",\u1EAD:"a",\u1EB7:"a",\u1E01:"a",\u0105:"a","\u2C65":"a",\u0250:"a","\uA733":"aa",\u00E6:"ae",\u01FD:"ae",\u01E3:"ae","\uA735":"ao","\uA737":"au","\uA739":"av","\uA73B":"av","\uA73D":"ay","\u24D1":"b",\uFF42:"b",\u1E03:"b",\u1E05:"b",\u1E07:"b",\u0180:"b",\u0183:"b",\u0253:"b","\u24D2":"c",\uFF43:"c",\u0107:"c",\u0109:"c",\u010B:"c",\u010D:"c",\u00E7:"c",\u1E09:"c",\u0188:"c","\u023C":"c","\uA73F":"c","\u2184":"c","\u24D3":"d",\uFF44:"d",\u1E0B:"d",\u010F:"d",\u1E0D:"d",\u1E11:"d",\u1E13:"d",\u1E0F:"d",\u0111:"d",\u018C:"d",\u0256:"d",\u0257:"d","\uA77A":"d",\u01F3:"dz",\u01C6:"dz","\u24D4":"e",\uFF45:"e",\u00E8:"e",\u00E9:"e",\u00EA:"e",\u1EC1:"e",\u1EBF:"e",\u1EC5:"e",\u1EC3:"e",\u1EBD:"e",\u0113:"e",\u1E15:"e",\u1E17:"e",\u0115:"e",\u0117:"e",\u00EB:"e",\u1EBB:"e",\u011B:"e",\u0205:"e",\u0207:"e",\u1EB9:"e",\u1EC7:"e",\u0229:"e",\u1E1D:"e",\u0119:"e",\u1E19:"e",\u1E1B:"e","\u0247":"e",\u025B:"e",\u01DD:"e","\u24D5":"f",\uFF46:"f",\u1E1F:"f",\u0192:"f","\uA77C":"f","\u24D6":"g",\uFF47:"g",\u01F5:"g",\u011D:"g",\u1E21:"g",\u011F:"g",\u0121:"g",\u01E7:"g",\u0123:"g",\u01E5:"g",\u0260:"g","\uA7A1":"g","\u1D79":"g","\uA77F":"g","\u24D7":"h",\uFF48:"h",\u0125:"h",\u1E23:"h",\u1E27:"h",\u021F:"h",\u1E25:"h",\u1E29:"h",\u1E2B:"h",\u1E96:"h",\u0127:"h","\u2C68":"h","\u2C76":"h",\u0265:"h",\u0195:"hv","\u24D8":"i",\uFF49:"i",\u00EC:"i",\u00ED:"i",\u00EE:"i",\u0129:"i",\u012B:"i",\u012D:"i",\u00EF:"i",\u1E2F:"i",\u1EC9:"i",\u01D0:"i",\u0209:"i",\u020B:"i",\u1ECB:"i",\u012F:"i",\u1E2D:"i",\u0268:"i",\u0131:"i","\u24D9":"j",\uFF4A:"j",\u0135:"j",\u01F0:"j","\u0249":"j","\u24DA":"k",\uFF4B:"k",\u1E31:"k",\u01E9:"k",\u1E33:"k",\u0137:"k",\u1E35:"k",\u0199:"k","\u2C6A":"k","\uA741":"k","\uA743":"k","\uA745":"k","\uA7A3":"k","\u24DB":"l",\uFF4C:"l",\u0140:"l",\u013A:"l",\u013E:"l",\u1E37:"l",\u1E39:"l",\u013C:"l",\u1E3D:"l",\u1E3B:"l",\u017F:"l",\u0142:"l",\u019A:"l",\u026B:"l","\u2C61":"l","\uA749":"l","\uA781":"l","\uA747":"l",\u01C9:"lj","\u24DC":"m",\uFF4D:"m",\u1E3F:"m",\u1E41:"m",\u1E43:"m",\u0271:"m",\u026F:"m","\u24DD":"n",\uFF4E:"n",\u01F9:"n",\u0144:"n",\u00F1:"n",\u1E45:"n",\u0148:"n",\u1E47:"n",\u0146:"n",\u1E4B:"n",\u1E49:"n",\u019E:"n",\u0272:"n",\u0149:"n","\uA791":"n","\uA7A5":"n",\u01CC:"nj","\u24DE":"o",\uFF4F:"o",\u00F2:"o",\u00F3:"o",\u00F4:"o",\u1ED3:"o",\u1ED1:"o",\u1ED7:"o",\u1ED5:"o",\u00F5:"o",\u1E4D:"o",\u022D:"o",\u1E4F:"o",\u014D:"o",\u1E51:"o",\u1E53:"o",\u014F:"o",\u022F:"o",\u0231:"o",\u00F6:"o",\u022B:"o",\u1ECF:"o",\u0151:"o",\u01D2:"o",\u020D:"o",\u020F:"o",\u01A1:"o",\u1EDD:"o",\u1EDB:"o",\u1EE1:"o",\u1EDF:"o",\u1EE3:"o",\u1ECD:"o",\u1ED9:"o",\u01EB:"o",\u01ED:"o",\u00F8:"o",\u01FF:"o",\u0254:"o","\uA74B":"o","\uA74D":"o",\u0275:"o",\u01A3:"oi",\u0223:"ou","\uA74F":"oo","\u24DF":"p",\uFF50:"p",\u1E55:"p",\u1E57:"p",\u01A5:"p","\u1D7D":"p","\uA751":"p","\uA753":"p","\uA755":"p","\u24E0":"q",\uFF51:"q","\u024B":"q","\uA757":"q","\uA759":"q","\u24E1":"r",\uFF52:"r",\u0155:"r",\u1E59:"r",\u0159:"r",\u0211:"r",\u0213:"r",\u1E5B:"r",\u1E5D:"r",\u0157:"r",\u1E5F:"r","\u024D":"r",\u027D:"r","\uA75B":"r","\uA7A7":"r","\uA783":"r","\u24E2":"s",\uFF53:"s",\u00DF:"s",\u015B:"s",\u1E65:"s",\u015D:"s",\u1E61:"s",\u0161:"s",\u1E67:"s",\u1E63:"s",\u1E69:"s",\u0219:"s",\u015F:"s","\u023F":"s","\uA7A9":"s","\uA785":"s",\u1E9B:"s","\u24E3":"t",\uFF54:"t",\u1E6B:"t",\u1E97:"t",\u0165:"t",\u1E6D:"t",\u021B:"t",\u0163:"t",\u1E71:"t",\u1E6F:"t",\u0167:"t",\u01AD:"t",\u0288:"t","\u2C66":"t","\uA787":"t","\uA729":"tz","\u24E4":"u",\uFF55:"u",\u00F9:"u",\u00FA:"u",\u00FB:"u",\u0169:"u",\u1E79:"u",\u016B:"u",\u1E7B:"u",\u016D:"u",\u00FC:"u",\u01DC:"u",\u01D8:"u",\u01D6:"u",\u01DA:"u",\u1EE7:"u",\u016F:"u",\u0171:"u",\u01D4:"u",\u0215:"u",\u0217:"u",\u01B0:"u",\u1EEB:"u",\u1EE9:"u",\u1EEF:"u",\u1EED:"u",\u1EF1:"u",\u1EE5:"u",\u1E73:"u",\u0173:"u",\u1E77:"u",\u1E75:"u",\u0289:"u","\u24E5":"v",\uFF56:"v",\u1E7D:"v",\u1E7F:"v",\u028B:"v","\uA75F":"v",\u028C:"v","\uA761":"vy","\u24E6":"w",\uFF57:"w",\u1E81:"w",\u1E83:"w",\u0175:"w",\u1E87:"w",\u1E85:"w",\u1E98:"w",\u1E89:"w","\u2C73":"w","\u24E7":"x",\uFF58:"x",\u1E8B:"x",\u1E8D:"x","\u24E8":"y",\uFF59:"y",\u1EF3:"y",\u00FD:"y",\u0177:"y",\u1EF9:"y",\u0233:"y",\u1E8F:"y",\u00FF:"y",\u1EF7:"y",\u1E99:"y",\u1EF5:"y",\u01B4:"y","\u024F":"y","\u1EFF":"y","\u24E9":"z",\uFF5A:"z",\u017A:"z",\u1E91:"z",\u017C:"z",\u017E:"z",\u1E93:"z",\u1E95:"z",\u01B6:"z",\u0225:"z","\u0240":"z","\u2C6C":"z","\uA763":"z",\u0386:"\u0391",\u0388:"\u0395",\u0389:"\u0397",\u038A:"\u0399",\u03AA:"\u0399",\u038C:"\u039F",\u038E:"\u03A5",\u03AB:"\u03A5",\u038F:"\u03A9",\u03AC:"\u03B1",\u03AD:"\u03B5",\u03AE:"\u03B7",\u03AF:"\u03B9",\u03CA:"\u03B9",\u0390:"\u03B9",\u03CC:"\u03BF",\u03CD:"\u03C5",\u03CB:"\u03C5",\u03B0:"\u03C5",\u03C9:"\u03C9",\u03C2:"\u03C3"};function xt(o){let t=e=>ko[e]||e;return o.replace(/[^\u0000-\u007E]/g,t)}var Kt=class{constructor(t,e){this._ngSelect=t,this._selectionModel=e,this._items=[],this._filteredItems=[],this._markedIndex=-1}get items(){return this._items}get filteredItems(){return this._filteredItems}get markedIndex(){return this._markedIndex}get selectedItems(){return this._selectionModel.value}get markedItem(){return this._filteredItems[this._markedIndex]}get noItemsToSelect(){return this._ngSelect.hideSelected()&&this._items.length===this.selectedItems.length}get maxItemsSelected(){return this._ngSelect.multiple()&&this._ngSelect.maxSelectedItems()<=this.selectedItems.length}get lastSelectedItem(){let t=this.selectedItems.length-1;for(;t>=0;t--){let e=this.selectedItems[t];if(!e.disabled)return e}return null}setItems(t){this._items=t.map((i,n)=>this.mapItem(i,n));let e=this._ngSelect.groupBy();e?(this._groups=this._groupBy(this._items,e),this._items=this._flatten(this._groups)):(this._groups=new Map,this._groups.set(void 0,this._items)),this._filteredItems=[...this._items]}select(t){if(t.selected||this.maxItemsSelected)return;let e=this._ngSelect.multiple();e||this.clearSelected(),this._selectionModel.select(t,e,this._ngSelect.selectableGroupAsModel()),this._ngSelect.hideSelected()&&this._hideSelected(t)}unselect(t){if(!t.selected)return;let e=this._ngSelect.multiple();this._selectionModel.unselect(t,e),this._ngSelect.hideSelected()&&O(t.index)&&e&&this._showSelected(t)}findItem(t){let e;return this._ngSelect.compareWith()?e=i=>this._ngSelect.compareWith()(i.value,t):this._ngSelect.bindValue()?e=i=>!i.children&&this.resolveNested(i.value,this._ngSelect.bindValue())===t:e=i=>i.value===t||!i.children&&i.label&&i.label===this.resolveNested(t,this._ngSelect.bindLabel()),this._items.find(i=>e(i))}addItem(t){let e=this.mapItem(t,this._items.length);return this._items.push(e),this._filteredItems.push(e),e}clearSelected(t=!1){this._selectionModel.clear(t),this._items.forEach(e=>{e.selected=t&&e.selected&&e.disabled,e.marked=!1}),this._ngSelect.hideSelected()&&this.resetFilteredItems()}findByLabel(t){return t=xt(t).toLocaleLowerCase(),this.filteredItems.find(e=>xt(e.label).toLocaleLowerCase().substr(0,t.length)===t)}filter(t){if(!t){this.resetFilteredItems();return}this._filteredItems=[],t=this._ngSelect.searchFn()?t:xt(t).toLocaleLowerCase();let e=this._ngSelect.searchFn()||this._defaultSearchFn,i=this._ngSelect.hideSelected();for(let n of Array.from(this._groups.keys())){let r=[];for(let a of this._groups.get(n)){if(i&&(a.parent&&a.parent.selected||a.selected))continue;let l=this._ngSelect.searchFn()?a.value:a;e(t,l)&&r.push(a)}if(r.length>0){let[a]=r.slice(-1);if(a.parent){let l=this._items.find(p=>p===a.parent);this._filteredItems.push(l)}this._filteredItems.push(...r)}}}resetFilteredItems(){this._filteredItems.length!==this._items.length&&(this._ngSelect.hideSelected()&&this.selectedItems.length>0?this._filteredItems=this._items.filter(t=>!t.selected):this._filteredItems=this._items)}unmarkItem(){this._markedIndex=-1}markNextItem(){this._stepToItem(1)}markPreviousItem(){this._stepToItem(-1)}markItem(t){this._markedIndex=this._filteredItems.indexOf(t)}markSelectedOrDefault(t){if(this._filteredItems.length===0)return;let e=this._getLastMarkedIndex();e>-1?this._markedIndex=e:this._markedIndex=t?this.filteredItems.findIndex(i=>!i.disabled):-1}resolveNested(t,e){if(!Se(t))return t;if(e.indexOf(".")===-1)return t[e];{let i=e.split("."),n=t;for(let r=0,a=i.length;r<a;++r){if(n==null)return null;n=n[i[r]]}return n}}mapItem(t,e){let i=Se(t)&&"$ngOptionLabel"in t,n=Se(t)&&"$ngOptionValue"in t,r=i?t.$ngOptionLabel:this.resolveNested(t,this._ngSelect.bindLabel()),a=n?t.$ngOptionValue:t;return{index:e,label:O(r)?r.toString():"",value:a,disabled:t&&t.disabled?t.disabled:!1,htmlId:`${this._ngSelect.dropdownId}-${e}`}}mapSelectedItems(){let t=this._ngSelect.multiple();for(let e of this.selectedItems){let i=this._ngSelect.bindValue(),n=null;if(this._ngSelect.compareWith())n=this._items.find(r=>this._ngSelect.compareWith()(r.value,e.value));else{let r=i?this.resolveNested(e.value,i):e.value;n=O(r)?this.findItem(r):null}this._selectionModel.unselect(e,t),this._selectionModel.select(n||e,t,this._ngSelect.selectableGroupAsModel())}this._ngSelect.hideSelected()&&(this._filteredItems=this.filteredItems.filter(e=>this.selectedItems.indexOf(e)===-1))}_showSelected(t){if(this._filteredItems.push(t),t.parent){let e=t.parent;this._filteredItems.find(n=>n===e)||this._filteredItems.push(e)}else if(t.children)for(let e of t.children)e.selected=!1,this._filteredItems.push(e);this._filteredItems=[...this._filteredItems.sort((e,i)=>e.index-i.index)]}_hideSelected(t){this._filteredItems=this._filteredItems.filter(e=>e!==t),t.parent?t.parent.children.every(i=>i.selected)&&(this._filteredItems=this._filteredItems.filter(i=>i!==t.parent)):t.children&&(this._filteredItems=this.filteredItems.filter(e=>e.parent!==t))}_defaultSearchFn(t,e){return xt(e.label).toLocaleLowerCase().indexOf(t)>-1}_getNextItemIndex(t){return t>0?this._markedIndex>=this._filteredItems.length-1?0:this._markedIndex+1:this._markedIndex<=0?this._filteredItems.length-1:this._markedIndex-1}_stepToItem(t){this._filteredItems.length===0||this._filteredItems.every(e=>e.disabled)||(this._markedIndex=this._getNextItemIndex(t),this.markedItem.disabled&&this._stepToItem(t))}_getLastMarkedIndex(){if(this._ngSelect.hideSelected()||this._markedIndex>-1&&this.markedItem===void 0)return-1;let t=this._filteredItems.indexOf(this.lastSelectedItem);return this.lastSelectedItem&&t<0?-1:Math.max(this.markedIndex,t)}_groupBy(t,e){let i=new Map;if(t.length===0)return i;if(Array.isArray(t[0].value[e])){for(let a of t){let l=(a.value[e]||[]).map((p,h)=>this.mapItem(p,h));i.set(a,l)}return i}let n=yt(this._ngSelect.groupBy()),r=a=>{let l=n?e(a.value):a.value[e];return O(l)?l:void 0};for(let a of t){let l=r(a),p=i.get(l);p?p.push(a):i.set(l,[a])}return i}_flatten(t){let e=yt(this._ngSelect.groupBy()),i=[];for(let n of Array.from(t.keys())){let r=i.length;if(n===void 0){let w=t.get(void 0)||[];i.push(...w.map(R=>(R.index=r++,R)));continue}let a=Se(n),l={label:a?"":String(n),children:void 0,parent:null,index:r++,disabled:!this._ngSelect.selectableGroup(),htmlId:hn()},p=e?this._ngSelect.bindLabel():this._ngSelect.groupBy(),h=this._ngSelect.groupValue()||(()=>a?n.value:{[p]:n}),I=t.get(n).map(w=>(w.parent=l,w.children=void 0,w.index=r++,w));l.children=I,l.value=h(n,I.map(w=>w.value)),i.push(l),i.push(...I)}return i}},gn=(()=>{class o{constructor(){this._dimensions={itemHeight:0,panelHeight:0,itemsPerViewport:0}}get dimensions(){return this._dimensions}calculateItems(e,i,n){let r=this._dimensions,a=r.itemHeight*i,p=Math.max(0,e)/a*i,h=Math.min(i,Math.ceil(p)+(r.itemsPerViewport+1)),w=Math.max(0,h-r.itemsPerViewport),R=Math.min(w,Math.floor(p)),De=r.itemHeight*Math.ceil(R)-r.itemHeight*Math.min(R,n);return De=isNaN(De)?0:De,R=isNaN(R)?-1:R,h=isNaN(h)?-1:h,R-=n,R=Math.max(0,R),h+=n,h=Math.min(i,h),{topPadding:De,scrollHeight:a,start:R,end:h}}setDimensions(e,i){let n=Math.max(1,Math.floor(i/e));this._dimensions={itemHeight:e,panelHeight:i,itemsPerViewport:n}}getScrollTo(e,i,n){let{panelHeight:r}=this.dimensions,a=e+i,l=n,p=l+r;return r>=a&&n===e?null:a>p?l+a-p:e<=l?e:null}static{this.\u0275fac=function(i){return new(i||o)}}static{this.\u0275prov=Ne({token:o,factory:o.\u0275fac})}}return o})(),cn=["top","right","bottom","left"],No=typeof requestAnimationFrame<"u"?ii:ti,Wt=(()=>{class o{constructor(){this.items=m([]),this.showAddTag=m(!1,{transform:V}),this.markedItem=m(void 0),this.position=m("auto"),this.appendTo=m(void 0),this.bufferAmount=m(void 0),this.virtualScroll=m(!1,{transform:V}),this.headerTemplate=m(void 0),this.footerTemplate=m(void 0),this.filterValue=m(null),this.ariaLabelDropdown=m(null),this.outsideClickEvent=m("click"),this.update=G(),this.scroll=G(),this.scrollToEnd=G(),this.outsideClick=G(),this._renderer=S(_i),this._zone=S(hi),this._panelService=S(gn),this._document=S(mi,{optional:!0}),this._destroyRef=S(Mt),this._dropdown=S(te).nativeElement,this.contentElementRef=we("content",{read:te}),this.scrollElementRef=we("scroll",{read:te}),this.paddingElementRef=we("padding",{read:te}),this._virtualPadding=ie(()=>this.paddingElementRef()?.nativeElement),this._scrollablePanel=ie(()=>this.scrollElementRef()?.nativeElement),this._contentPanel=ie(()=>this.contentElementRef()?.nativeElement),this._scrollToEndFired=!1,this._updateScrollHeight=!1,this._lastScrollPosition=0,this._destroyRef.onDestroy(()=>{this.appendTo()&&this._renderer.removeChild(this._dropdown.parentNode,this._dropdown)})}get currentPosition(){return this._currentPosition}get itemsLength(){return this._itemsLength}set itemsLength(e){e!==this._itemsLength&&(this._itemsLength=e,this._onItemsLengthChanged())}get _startOffset(){if(this.markedItem()){let{itemHeight:e,panelHeight:i}=this._panelService.dimensions,n=this.markedItem().index*e;return i>n?0:n}return 0}ngOnInit(){this._select=this._dropdown.parentElement,this._handleScroll(),this._handleOutsideClick(),this._appendDropdown(),this._setupMousedownListener()}ngOnChanges(e){if(e.items){let i=e.items;this._onItemsOrShowAddTagChange(i.currentValue,this.showAddTag(),i.firstChange)}if(e.showAddTag){let i=e.showAddTag;this._onItemsOrShowAddTagChange(this.items(),i.currentValue,i.firstChange)}}scrollTo(e,i=!1){if(!e)return;let n=this.items().indexOf(e);if(n<0||n>=this.itemsLength)return;let r;if(this.virtualScroll()){let a=this._panelService.dimensions.itemHeight;r=this._panelService.getScrollTo(n*a,a,this._lastScrollPosition)}else{let a=this._dropdown.querySelector(`#${e.htmlId}`),l=i?a.offsetTop:this._lastScrollPosition;r=this._panelService.getScrollTo(a.offsetTop,a.clientHeight,l)}O(r)&&(this._scrollablePanel().scrollTop=r)}scrollToTag(){let e=this._scrollablePanel();e.scrollTop=e.scrollHeight-e.clientHeight}adjustPosition(){this._updateYPosition()}_handleDropdownPosition(){this._currentPosition=this._calculateCurrentPosition(this._dropdown),cn.includes(this._currentPosition)?this._updateDropdownClass(this._currentPosition):this._updateDropdownClass("bottom"),this.appendTo()&&this._updateYPosition(),this._dropdown.style.opacity="1"}_updateDropdownClass(e){cn.forEach(n=>{let r=`ng-select-${n}`;this._renderer.removeClass(this._dropdown,r),this._renderer.removeClass(this._select,r)});let i=`ng-select-${e}`;this._renderer.addClass(this._dropdown,i),this._renderer.addClass(this._select,i)}_handleScroll(){this._zone.runOutsideAngular(()=>{let e=this._scrollablePanel();e&&ye(e,"scroll").pipe(Ue(this._destroyRef),si(0,No)).subscribe(()=>{e&&"scrollTop"in e&&this._onContentScrolled(e.scrollTop)})})}_handleOutsideClick(){this._document&&this._zone.runOutsideAngular(()=>{ye(this._document,this.outsideClickEvent(),{capture:!0}).pipe(Ue(this._destroyRef)).subscribe(e=>this._checkToClose(e))})}_checkToClose(e){if(this._select.contains(e.target)||this._dropdown.contains(e.target))return;let i=e.path||e.composedPath&&e.composedPath();e.target&&e.target.shadowRoot&&i&&i[0]&&this._select.contains(i[0])||this._zone.run(()=>this.outsideClick.emit())}_onItemsOrShowAddTagChange(e=[],i,n){this._scrollToEndFired=!1,this.itemsLength=e.length,i&&e.length&&this.itemsLength++,this.virtualScroll()?this._updateItemsRange(n):(this._setVirtualHeight(),this._updateItems(n))}_updateItems(e){this.update.emit(this.items()),e!==!1&&this._zone.runOutsideAngular(()=>{Promise.resolve().then(()=>{let i=this._scrollablePanel().clientHeight;this._panelService.setDimensions(0,i),this._handleDropdownPosition(),this.scrollTo(this.markedItem(),e)})})}_updateItemsRange(e){this._zone.runOutsideAngular(()=>{this._measureDimensions().then(()=>{e?(this._renderItemsRange(this._startOffset),this._handleDropdownPosition()):this._renderItemsRange()})})}_onContentScrolled(e){this.virtualScroll()&&this._renderItemsRange(e),this._lastScrollPosition=e,this._fireScrollToEnd(e)}_updateVirtualHeight(e){this._updateScrollHeight&&(this._virtualPadding().style.height=`${e}px`,this._updateScrollHeight=!1)}_setVirtualHeight(){this._virtualPadding()&&(this._virtualPadding().style.height="0px")}_onItemsLengthChanged(){this._updateScrollHeight=!0}_renderItemsRange(e=null){if(e&&this._lastScrollPosition===e)return;e=e||this._scrollablePanel().scrollTop;let i=this._panelService.calculateItems(e,this.itemsLength,this.bufferAmount());this._updateVirtualHeight(i.scrollHeight),this._contentPanel().style.transform=`translateY(${i.topPadding}px)`,this._zone.run(()=>{this.update.emit(this.items().slice(i.start,i.end)),this.scroll.emit({start:i.start,end:i.end})}),O(e)&&this._lastScrollPosition===0&&(this._scrollablePanel().scrollTop=e,this._lastScrollPosition=e)}_measureDimensions(){if(this._panelService.dimensions.itemHeight>0||this.itemsLength===0)return Promise.resolve(this._panelService.dimensions);let[e]=this.items();return this.update.emit([e]),Promise.resolve().then(()=>{let n=this._dropdown.querySelector(`#${e.htmlId}`).clientHeight;this._virtualPadding().style.height=`${n*this.itemsLength}px`;let r=this._scrollablePanel().clientHeight;return this._panelService.setDimensions(n,r),this._panelService.dimensions})}_fireScrollToEnd(e){if(this._scrollToEndFired||e===0)return;let i=this.virtualScroll()?this._virtualPadding():this._contentPanel();e+this._dropdown.clientHeight>=i.clientHeight-1&&(this._zone.run(()=>this.scrollToEnd.emit()),this._scrollToEndFired=!0)}_calculateCurrentPosition(e){let i=this.position();if(i!=="auto")return i;let n=this._select.getBoundingClientRect(),r=document.documentElement.scrollTop||document.body.scrollTop,a=n.top+window.pageYOffset,l=n.height,p=e.getBoundingClientRect().height;return a+l+p>r+document.documentElement.clientHeight?"top":"bottom"}_appendDropdown(){if(this.appendTo()){if(this._parent=this._dropdown.shadowRoot?this._dropdown.shadowRoot.querySelector(this.appendTo()):document.querySelector(this.appendTo()),!this._parent)throw new Error(`appendTo selector ${this.appendTo()} did not found any parent element`);this._updateXPosition(),this._parent.appendChild(this._dropdown)}}_updateXPosition(){let e=this._select.getBoundingClientRect(),i=this._parent.getBoundingClientRect(),n=document.documentElement.dir==="rtl",r=e.left-i.left;if(n){let a=i.right-e.right;this._dropdown.style.right=a+"px",this._dropdown.style.left="auto"}else this._dropdown.style.left=r+"px",this._dropdown.style.right="auto";this._dropdown.style.width=e.width+"px",this._dropdown.style.minWidth=e.width+"px"}_updateYPosition(){let e=this._select.getBoundingClientRect(),i=this._parent.getBoundingClientRect(),n=e.height;if(this._currentPosition==="top"){let r=i.bottom-e.bottom;this._dropdown.style.bottom=r+n+"px",this._dropdown.style.top="auto"}else if(this._currentPosition==="bottom"){let r=e.top-i.top;this._dropdown.style.top=r+n+"px",this._dropdown.style.bottom="auto"}}_setupMousedownListener(){this._zone.runOutsideAngular(()=>{ye(this._dropdown,"mousedown").pipe(Ue(this._destroyRef)).subscribe(e=>{e.target.tagName!=="INPUT"&&e.preventDefault()})})}static{this.\u0275fac=function(i){return new(i||o)}}static{this.\u0275cmp=U({type:o,selectors:[["ng-dropdown-panel"]],viewQuery:function(i,n){i&1&&Ht(n.contentElementRef,Pn,5,te)(n.scrollElementRef,On,5,te)(n.paddingElementRef,Ln,5,te),i&2&&tt(3)},inputs:{items:[1,"items"],showAddTag:[1,"showAddTag"],markedItem:[1,"markedItem"],position:[1,"position"],appendTo:[1,"appendTo"],bufferAmount:[1,"bufferAmount"],virtualScroll:[1,"virtualScroll"],headerTemplate:[1,"headerTemplate"],footerTemplate:[1,"footerTemplate"],filterValue:[1,"filterValue"],ariaLabelDropdown:[1,"ariaLabelDropdown"],outsideClickEvent:[1,"outsideClickEvent"]},outputs:{update:"update",scroll:"scroll",scrollToEnd:"scrollToEnd",outsideClick:"outsideClick"},features:[Ot],ngContentSelectors:pn,decls:9,vars:7,consts:[["scroll",""],["padding",""],["content",""],[1,"ng-dropdown-header"],["role","listbox",1,"ng-dropdown-panel-items","scroll-host"],[1,"ng-dropdown-footer"],[3,"ngTemplateOutlet","ngTemplateOutletContext"]],template:function(i,n){i&1&&(Rt(),C(0,$n,2,4,"div",3),c(1,"div",4,0),N(3,"div",null,1),c(5,"div",null,2),Ut(7),u()(),C(8,Bn,2,4,"div",5)),i&2&&(x(n.headerTemplate()?0:-1),s(),pe("aria-label",n.ariaLabelDropdown()),s(2),B("total-padding",n.virtualScroll()),s(2),B("scrollable-content",n.virtualScroll()&&n.items().length),s(3),x(n.footerTemplate()?8:-1))},dependencies:[Yt],encapsulation:2,changeDetection:0})}}return o})(),un=(()=>{class o{constructor(){this.value=m(),this.disabled=m(!1,{transform:V}),this.elementRef=S(te),this.label=j(""),fi(()=>{let e=(this.elementRef.nativeElement.innerHTML||"").trim();e!==this.label()&&this.label.set(e)})}static{this.\u0275fac=function(i){return new(i||o)}}static{this.\u0275cmp=U({type:o,selectors:[["ng-option"]],inputs:{value:[1,"value"],disabled:[1,"disabled"]},ngContentSelectors:pn,decls:1,vars:0,template:function(i,n){i&1&&(Rt(),Ut(0))},encapsulation:2,changeDetection:0})}}return o})(),ae=(function(o){return o.Tab="Tab",o.Enter="Enter",o.Esc="Escape",o.Space=" ",o.ArrowUp="ArrowUp",o.ArrowDown="ArrowDown",o.Backspace="Backspace",o})(ae||{});function Ao(){return new qt}var qt=class{constructor(){this._selected=[]}get value(){return this._selected}select(t,e,i){if(t.selected=!0,(!t.children||!e&&i)&&this._selected.push(t),e)if(t.parent){let n=t.parent.children.length,r=t.parent.children.filter(a=>a.selected).length;t.parent.selected=n===r}else t.children&&(this._setChildrenSelectedState(t.children,!0),this._removeChildren(t),i&&this._activeChildren(t)?this._selected=[...this._selected.filter(n=>n.parent!==t),t]:this._selected=[...this._selected,...t.children.filter(n=>!n.disabled)])}unselect(t,e){if(this._selected=this._selected.filter(i=>i!==t),t.selected=!1,e)if(t.parent&&t.parent.selected){let i=t.parent.children;this._removeParent(t.parent),this._removeChildren(t.parent),this._selected.push(...i.filter(n=>n!==t&&!n.disabled)),t.parent.selected=!1}else t.children&&(this._setChildrenSelectedState(t.children,!1),this._removeChildren(t))}clear(t){this._selected=t?this._selected.filter(e=>e.disabled):[]}_setChildrenSelectedState(t,e){for(let i of t)i.disabled||(i.selected=e)}_removeChildren(t){this._selected=[...this._selected.filter(e=>e.parent!==t),...t.children.filter(e=>e.parent===t&&e.disabled&&e.selected)]}_removeParent(t){this._selected=this._selected.filter(e=>e!==t)}_activeChildren(t){return t.children.every(e=>!e.disabled||e.selected)}},Mo=new ci("ng-select-selection-model"),fn=(()=>{class o{constructor(){this.classes=S(new zt("class"),{optional:!0}),this.config=S(Do),this._cd=S(Pi),this._console=S(Fo),this._destroyRef=S(Mt),this._disabled=j(!1),this.ariaLabelDropdown=m(void 0),this.ariaLabel=m(void 0),this.markFirst=m(!0,{transform:V}),this.placeholder=m(this.config.placeholder),this.fixedPlaceholder=m(!0),this.notFoundText=m(void 0),this.typeToSearchText=m(void 0),this.preventToggleOnRightClick=m(!1),this.addTagText=m(void 0),this.loadingText=m(void 0),this.clearAllText=m(void 0),this.dropdownPosition=m("auto"),this.appendTo=m(void 0),this.outsideClickEvent=m(this.config.outsideClickEvent),this.loading=m(!1,{transform:V}),this.closeOnSelect=m(!0,{transform:V}),this.hideSelected=m(!1,{transform:V}),this.selectOnTab=m(!1,{transform:V}),this.openOnEnter=m(void 0,{transform:V}),this.maxSelectedItems=m(void 0,{transform:Ve}),this.groupBy=m(void 0),this.groupValue=m(void 0),this.bufferAmount=m(4,{transform:Ve}),this.virtualScroll=m(void 0,{transform:V}),this.selectableGroup=m(!1,{transform:V}),this.tabFocusOnClearButton=m(),this.selectableGroupAsModel=m(!0,{transform:V}),this.searchFn=m(null),this.trackByFn=m(null),this.clearOnBackspace=m(!0,{transform:V}),this.labelForId=m(null),this.inputAttrs=m({}),this.tabIndex=m(void 0,{transform:Ve}),this.readonly=m(!1,{transform:V}),this.searchWhileComposing=m(!0,{transform:V}),this.minTermLength=m(0,{transform:Ve}),this.editableSearchTerm=m(!1,{transform:V}),this.ngClass=m(null),this.typeahead=m(void 0),this.multiple=m(!1,{transform:V}),this.addTag=m(!1),this.searchable=m(!0,{transform:V}),this.clearable=m(!0,{transform:V}),this.deselectOnClick=m(),this.clearSearchOnAdd=m(void 0),this.compareWith=m(void 0,{transform:r=>{if(r!=null&&!yt(r))throw Error("`compareWith` must be a function.");return r}}),this.keyDownFn=m(r=>!0),this.bindLabel=Me(void 0),this.bindValue=Me(void 0),this.appearance=Me(void 0),this.isOpen=Me(!1),this.items=Me([]),this.blurEvent=G({alias:"blur"}),this.focusEvent=G({alias:"focus"}),this.changeEvent=G({alias:"change"}),this.openEvent=G({alias:"open"}),this.closeEvent=G({alias:"close"}),this.searchEvent=G({alias:"search"}),this.clearEvent=G({alias:"clear"}),this.addEvent=G({alias:"add"}),this.removeEvent=G({alias:"remove"}),this.scroll=G({alias:"scroll"}),this.scrollToEnd=G({alias:"scrollToEnd"}),this.disabled=ie(()=>this.readonly()||this._disabled()),this.clearSearchOnAddValue=ie(()=>O(this.clearSearchOnAdd())?this.clearSearchOnAdd():O(this.config.clearSearchOnAdd)?this.config.clearSearchOnAdd:this.closeOnSelect()),this.deselectOnClickValue=ie(()=>O(this.deselectOnClick())?this.deselectOnClick():O(this.config.deselectOnClick)?this.config.deselectOnClick:this.multiple()),this.optionTemplate=q(qi,{read:y}),this.optgroupTemplate=q(Zi,{read:y}),this.labelTemplate=q(Qi,{read:y}),this.multiLabelTemplate=q(Xi,{read:y}),this.headerTemplate=q(en,{read:y}),this.footerTemplate=q(tn,{read:y}),this.notFoundTemplate=q(nn,{read:y}),this.placeholderTemplate=q(on,{read:y}),this.typeToSearchTemplate=q(rn,{read:y}),this.loadingTextTemplate=q(an,{read:y}),this.tagTemplate=q(sn,{read:y}),this.loadingSpinnerTemplate=q(ln,{read:y}),this.clearButtonTemplate=q(dn,{read:y}),this.ngOptions=Mi(un,{descendants:!0}),this.dropdownPanel=we(Nt(()=>Wt)),this.searchInput=we("searchInput"),this.clearButton=we("clearButton"),this.dropdownId=hn(),this.escapeHTML=!0,this.viewPortItems=[],this.tabFocusOnClear=j(!0),this.autoFocus=S(new zt("autofocus"),{optional:!0}),this._defaultLabel="label",this._editableSearchTerm=ie(()=>this.editableSearchTerm()&&!this.multiple()),this._injector=S(pi),this._isComposing=!1,this._keyPress$=new Y,this._pressedKeys=[],this._searchTerm=j(null),this._validTerm=ie(()=>{let r=this._searchTerm()?.trim();return r&&r.length>=this.minTermLength()}),this.clearItem=r=>{let a=this.selectedItems.find(l=>l.value===r);this.unselect(a)},this.trackByOption=(r,a)=>this.trackByFn()?this.trackByFn()(a.value):a,this._onChange=r=>{},this._onTouched=()=>{};let e=this.config,i=S(Mo,{optional:!0}),n=S(te);this._mergeGlobalConfig(e),this.itemsList=new Kt(this,i?i():Ao()),this.element=n.nativeElement}get filtered(){return!!this.searchTerm&&this.searchable()||this._isComposing}get focused(){return this._focused}get searchTerm(){return this._searchTerm()}get selectedItems(){return this.itemsList.selectedItems}get selectedValues(){return this.selectedItems.map(e=>e.value)}get hasValue(){return this.selectedItems.length>0}get currentPanelPosition(){if(this.dropdownPanel())return this.dropdownPanel().currentPosition}get showAddTag(){if(!this._validTerm())return!1;let e=this.searchTerm.toLowerCase().trim();return this.addTag()&&!this.itemsList.filteredItems.some(i=>i.label.toLowerCase()===e)&&(!this.hideSelected()&&this.isOpen()||!this.selectedItems.some(i=>i.label.toLowerCase()===e))&&!this.loading()}ngOnInit(){this._handleKeyPresses(),this._setInputAttributes()}ngOnChanges(e){e.multiple&&this.itemsList.clearSelected(),e.items&&(this._itemsAreUsed=!0,this._setItems(e.items.currentValue||[])),e.isOpen&&(this._manualOpen=O(e.isOpen.currentValue)),e.groupBy&&(e.items||this._setItems([...this.items()])),e.inputAttrs&&this._setInputAttributes(),this._setTabFocusOnClear()}ngAfterViewInit(){this._itemsAreUsed||(this.escapeHTML=!1,this._setItemsFromNgOptions()),O(this.autoFocus)&&this.focus()}handleKeyDown(e){let i=e.key;if(Object.values(ae).includes(i)){if(this.keyDownFn()(e)===!1)return;this.handleKeyCode(e)}else i&&i.length===1&&this._keyPress$.next(i.toLocaleLowerCase())}handleKeyCode(e){let i=e.target;this.clearButton()&&this.clearButton().nativeElement===i?this.handleKeyCodeClear(e):this.handleKeyCodeInput(e)}handleKeyCodeInput(e){switch(e.key){case ae.ArrowDown:this._handleArrowDown(e);break;case ae.ArrowUp:this._handleArrowUp(e);break;case ae.Space:this._handleSpace(e);break;case ae.Enter:this._handleEnter(e);break;case ae.Tab:this._handleTab(e);break;case ae.Esc:this.close(),e.preventDefault();break;case ae.Backspace:this._handleBackspace();break}}handleKeyCodeClear(e){e.key===ae.Enter&&(this.handleClearClick(),e.preventDefault())}handleMousedown(e){if(this.disabled())return;if(this.preventToggleOnRightClick()&&e.button===2)return!1;let i=e.target;if(i.tagName!=="INPUT"&&e.preventDefault(),!i.classList.contains("ng-clear-wrapper")){if(i.classList.contains("ng-arrow-wrapper")){this.handleArrowClick();return}i.classList.contains("ng-value-icon")||(this._focused||this.focus(),this.searchable()?this.open():this.toggle())}}handleArrowClick(){this.isOpen()?this.close():this.open()}handleClearClick(e){this.hasValue&&(this.itemsList.clearSelected(!0),this._updateNgModel()),this._clearSearch(),this.focus(),this.clearEvent.emit(),this._onSelectionChanged()}clearModel(){this.clearable()&&(this.itemsList.clearSelected(),this._updateNgModel())}writeValue(e){this.itemsList.clearSelected(),this._handleWriteValue(e),this._editableSearchTerm()&&this._setSearchTermFromItems(),this._cd.markForCheck()}registerOnChange(e){this._onChange=e}registerOnTouched(e){this._onTouched=e}setDisabledState(e){this._disabled.set(e),this._cd.markForCheck()}toggle(){this.isOpen()?this.close():this.open()}open(){this.disabled()||this.isOpen()||this._manualOpen||!this.typeahead()?.observed&&!this.addTag()&&this.itemsList.noItemsToSelect||(this.isOpen.set(!0),this.itemsList.markSelectedOrDefault(this.markFirst()),this.openEvent.emit(),this.searchTerm||this.focus(),this.detectChanges())}close(){!this.isOpen()||this._manualOpen||(this.isOpen.set(!1),this._isComposing=!1,this._editableSearchTerm()?this.itemsList.resetFilteredItems():this._clearSearch(),this.itemsList.unmarkItem(),this._onTouched(),this.closeEvent.emit(),this._cd.markForCheck())}toggleItem(e){!e||e.disabled||this.disabled()||(this.deselectOnClickValue()&&e.selected?this.unselect(e):this.select(e),this._editableSearchTerm()&&this._setSearchTermFromItems())}select(e){e.selected||(this.itemsList.select(e),this.clearSearchOnAddValue()&&!this._editableSearchTerm()&&this._clearSearch(),this._updateNgModel(),this.multiple()&&this.addEvent.emit(e.value)),(this.closeOnSelect()||this.itemsList.noItemsToSelect)&&this.close(),this._onSelectionChanged()}focus(){this.searchInput().nativeElement.focus()}blur(){this.searchInput().nativeElement.blur()}unselect(e){e&&(this.itemsList.unselect(e),this.focus(),this._updateNgModel(),this.removeEvent.emit(e.value),this._onSelectionChanged())}selectTag(){let e;yt(this.addTag())?e=this.addTag()(this.searchTerm):e=this._primitive?this.searchTerm:{[this.bindLabel()]:this.searchTerm};let i=n=>this.typeahead()?.observed||!this.isOpen()?this.itemsList.mapItem(n,null):this.itemsList.addItem(n);Io(e)?e.then(n=>this.select(i(n))).catch(()=>{}):e&&this.select(i(e))}showClear(){return this.clearable()&&(this.hasValue||this.searchTerm)&&!this.disabled()}focusOnClear(){this.blur(),this.clearButton()&&this.clearButton().nativeElement.focus()}showNoItemsFound(){let e=this.itemsList.filteredItems.length===0;return(e&&!this.typeahead()?.observed&&!this.loading()||e&&this.typeahead()?.observed&&this._validTerm()&&!this.loading())&&!this.showAddTag}showTypeToSearch(){return this.itemsList.filteredItems.length===0&&this.typeahead()?.observed&&!this._validTerm()&&!this.loading()}onCompositionStart(){this._isComposing=!0}onCompositionEnd(e){this._isComposing=!1,!this.searchWhileComposing()&&this.filter(e)}filter(e){this._isComposing&&!this.searchWhileComposing()||(this._searchTerm.set(e),this.typeahead()?.observed&&(this._validTerm()||this.minTermLength()===0)&&this.typeahead().next(e),this.typeahead()?.observed||(this.itemsList.filter(e),this.isOpen()&&this.itemsList.markSelectedOrDefault(this.markFirst())),this.searchEvent.emit({term:e,items:this.itemsList.filteredItems.map(i=>i.value)}),this.open())}onInputFocus(e){this._focused||(this._editableSearchTerm()&&this._setSearchTermFromItems(),this.element.classList.add("ng-select-focused"),this.focusEvent.emit(e),this._focused=!0)}onInputBlur(e){this.element.classList.remove("ng-select-focused"),this.blurEvent.emit(e),!this.isOpen()&&!this.disabled()&&this._onTouched(),this._editableSearchTerm()&&this._setSearchTermFromItems(),this._focused=!1}onItemHover(e){e.disabled||this.itemsList.markItem(e)}detectChanges(){this._cd.destroyed||this._cd.detectChanges()}_setSearchTermFromItems(){let e=this.selectedItems?.[0];this._searchTerm.set(e?.label??null)}_setItems(e){let i=e[0];this.bindLabel.set(this.bindLabel()||this._defaultLabel),this._primitive=O(i)?!Se(i):this._primitive||this.bindLabel()===this._defaultLabel,this.itemsList.setItems(e),e.length>0&&this.hasValue&&this.itemsList.mapSelectedItems(),this.isOpen()&&O(this.searchTerm)&&!this.typeahead()?.observed&&this.itemsList.filter(this.searchTerm),(this.typeahead()?.observed||this.isOpen())&&this.itemsList.markSelectedOrDefault(this.markFirst())}_setItemsFromNgOptions(){Pt(()=>{let e=this.ngOptions();this.bindLabel.set(this._defaultLabel);let i=e.map(n=>({$ngOptionValue:n.value(),$ngOptionLabel:n.elementRef.nativeElement.innerHTML,disabled:n.disabled()}))??[];this.items.set(i),this.itemsList.setItems(i),this.hasValue&&this.itemsList.mapSelectedItems(),this._cd.detectChanges(),e.map(n=>({option:n,item:this.itemsList.findItem(n.value())})).filter(({item:n})=>O(n)).forEach(({option:n,item:r})=>{r.disabled=n.disabled(),r.label=n.label()||r.label})},{injector:this._injector})}_isValidWriteValue(e){if(!O(e)||this.multiple()&&e===""||Array.isArray(e)&&e.length===0)return!1;let i=n=>!O(this.compareWith())&&Se(n)&&this.bindValue()?(this._console.warn(`Setting object(${JSON.stringify(n)}) as your model with bindValue is not allowed unless [compareWith] is used.`),!1):!0;return this.multiple()?Array.isArray(e)?e.every(n=>i(n)):(this._console.warn("Multiple select ngModel should be array."),!1):i(e)}_handleWriteValue(e){if(!this._isValidWriteValue(e))return;let i=n=>{let r=this.itemsList.findItem(n);if(r)this.itemsList.select(r);else{let a=Se(n),l=!a&&!this.bindValue();a||l?this.itemsList.select(this.itemsList.mapItem(n,null)):this.bindValue()&&(r={[this.bindLabel()]:null,[this.bindValue()]:n},this.itemsList.select(this.itemsList.mapItem(r,null)))}};this.multiple()?e.forEach(n=>i(n)):i(e)}_handleKeyPresses(){this.searchable()||this._keyPress$.pipe(Ue(this._destroyRef),di(e=>this._pressedKeys.push(e)),ce(200),ri(()=>this._pressedKeys.length>0),k(()=>this._pressedKeys.join(""))).subscribe(e=>{let i=this.itemsList.findByLabel(e);i&&(this.isOpen()?(this.itemsList.markItem(i),this._scrollToMarked(),this._cd.markForCheck()):this.select(i)),this._pressedKeys=[]})}_setInputAttributes(){let e=this.searchInput().nativeElement,i=ei({type:"text",autocorrect:"off",autocapitalize:"off",autocomplete:"off","aria-controls":this.dropdownId},this.inputAttrs());for(let n of Object.keys(i))e.setAttribute(n,i[n])}_setTabFocusOnClear(){this.tabFocusOnClear.set(O(this.tabFocusOnClearButton())?!!this.tabFocusOnClearButton():this.config.tabFocusOnClear)}_updateNgModel(){let e=[];for(let n of this.selectedItems)if(this.bindValue()){let r=null;if(n.children){let a=this.groupValue()?this.bindValue():this.groupBy();r=n.value[a||this.groupBy()]}else r=this.itemsList.resolveNested(n.value,this.bindValue());e.push(r)}else e.push(n.value);let i=this.selectedItems.map(n=>n.value);this.multiple()?(this._onChange(e),this.changeEvent.emit(i)):(this._onChange(O(e[0])?e[0]:null),this.changeEvent.emit(i[0])),this._cd.markForCheck()}_clearSearch(){this.searchTerm&&(this._changeSearch(null),this.itemsList.resetFilteredItems())}_changeSearch(e){this._searchTerm.set(e),this.typeahead()?.observed&&this.typeahead().next(e)}_scrollToMarked(){!this.isOpen()||!this.dropdownPanel()||this.dropdownPanel().scrollTo(this.itemsList.markedItem)}_scrollToTag(){!this.isOpen()||!this.dropdownPanel()||this.dropdownPanel().scrollToTag()}_onSelectionChanged(){let e=this.appendTo()??this.config.appendTo;this.isOpen()&&this.deselectOnClickValue()&&e&&(this._cd.detectChanges(),this.dropdownPanel().adjustPosition())}_handleTab(e){if(this.isOpen()===!1){if(this.showClear()&&!e.shiftKey&&this.tabFocusOnClear())this.focusOnClear(),e.preventDefault();else if(!this.addTag())return}this.selectOnTab()?this.itemsList.markedItem?(this.toggleItem(this.itemsList.markedItem),e.preventDefault()):this.showAddTag?(this.selectTag(),e.preventDefault()):this.close():this.close()}_handleEnter(e){let i=this.openOnEnter()??this.config.openOnEnter;if(this.isOpen()||this._manualOpen)this.itemsList.markedItem?this.toggleItem(this.itemsList.markedItem):this.showAddTag&&this.selectTag();else if(i)this.open();else return;e.preventDefault()}_handleSpace(e){this.isOpen()||this._manualOpen||(this.open(),e.preventDefault())}_handleArrowDown(e){this._nextItemIsTag(1)?(this.itemsList.unmarkItem(),this._scrollToTag()):(this.itemsList.markNextItem(),this._scrollToMarked()),this.open(),e.preventDefault()}_handleArrowUp(e){this.isOpen()&&(this._nextItemIsTag(-1)?(this.itemsList.unmarkItem(),this._scrollToTag()):(this.itemsList.markPreviousItem(),this._scrollToMarked()),e.preventDefault())}_nextItemIsTag(e){let i=this.itemsList.markedIndex+e;return this.addTag()&&this.searchTerm&&this.itemsList.markedItem&&(i<0||i===this.itemsList.filteredItems.length)}_handleBackspace(){this.searchTerm||!this.clearable()||!this.clearOnBackspace()||!this.hasValue||(this.multiple()?this.unselect(this.itemsList.lastSelectedItem):this.clearModel())}_mergeGlobalConfig(e){this.bindValue.set(this.bindValue()||e.bindValue),this.bindLabel.set(this.bindLabel()||e.bindLabel),this.appearance.set(this.appearance()||e.appearance),this._setTabFocusOnClear()}getVirtualScroll(e){return O(this.virtualScroll)?this.virtualScroll():this.isVirtualScrollDisabled(e)}isVirtualScrollDisabled(e){return O(e.disableVirtualScroll)?!e.disableVirtualScroll:!1}static{this.\u0275fac=function(i){return new(i||o)}}static{this.\u0275cmp=U({type:o,selectors:[["ng-select"]],contentQueries:function(i,n,r){i&1&&Ti(r,n.optionTemplate,qi,5,y)(r,n.optgroupTemplate,Zi,5,y)(r,n.labelTemplate,Qi,5,y)(r,n.multiLabelTemplate,Xi,5,y)(r,n.headerTemplate,en,5,y)(r,n.footerTemplate,tn,5,y)(r,n.notFoundTemplate,nn,5,y)(r,n.placeholderTemplate,on,5,y)(r,n.typeToSearchTemplate,rn,5,y)(r,n.loadingTextTemplate,an,5,y)(r,n.tagTemplate,sn,5,y)(r,n.loadingSpinnerTemplate,ln,5,y)(r,n.clearButtonTemplate,dn,5,y)(r,n.ngOptions,un,5),i&2&&tt(14)},viewQuery:function(i,n){i&1&&Ht(n.dropdownPanel,Wt,5)(n.searchInput,Vn,5)(n.clearButton,Rn,5),i&2&&tt(3)},hostVars:20,hostBindings:function(i,n){i&1&&E("keydown",function(a){return n.handleKeyDown(a)}),i&2&&B("ng-select",!0)("ng-select-single",!n.multiple())("ng-select-typeahead",n.typeahead())("ng-select-multiple",n.multiple())("ng-select-taggable",n.addTag())("ng-select-searchable",n.searchable())("ng-select-clearable",n.clearable())("ng-select-opened",n.isOpen())("ng-select-filtered",n.filtered)("ng-select-disabled",n.disabled())},inputs:{ariaLabelDropdown:[1,"ariaLabelDropdown"],ariaLabel:[1,"ariaLabel"],markFirst:[1,"markFirst"],placeholder:[1,"placeholder"],fixedPlaceholder:[1,"fixedPlaceholder"],notFoundText:[1,"notFoundText"],typeToSearchText:[1,"typeToSearchText"],preventToggleOnRightClick:[1,"preventToggleOnRightClick"],addTagText:[1,"addTagText"],loadingText:[1,"loadingText"],clearAllText:[1,"clearAllText"],dropdownPosition:[1,"dropdownPosition"],appendTo:[1,"appendTo"],outsideClickEvent:[1,"outsideClickEvent"],loading:[1,"loading"],closeOnSelect:[1,"closeOnSelect"],hideSelected:[1,"hideSelected"],selectOnTab:[1,"selectOnTab"],openOnEnter:[1,"openOnEnter"],maxSelectedItems:[1,"maxSelectedItems"],groupBy:[1,"groupBy"],groupValue:[1,"groupValue"],bufferAmount:[1,"bufferAmount"],virtualScroll:[1,"virtualScroll"],selectableGroup:[1,"selectableGroup"],tabFocusOnClearButton:[1,"tabFocusOnClearButton"],selectableGroupAsModel:[1,"selectableGroupAsModel"],searchFn:[1,"searchFn"],trackByFn:[1,"trackByFn"],clearOnBackspace:[1,"clearOnBackspace"],labelForId:[1,"labelForId"],inputAttrs:[1,"inputAttrs"],tabIndex:[1,"tabIndex"],readonly:[1,"readonly"],searchWhileComposing:[1,"searchWhileComposing"],minTermLength:[1,"minTermLength"],editableSearchTerm:[1,"editableSearchTerm"],ngClass:[1,"ngClass"],typeahead:[1,"typeahead"],multiple:[1,"multiple"],addTag:[1,"addTag"],searchable:[1,"searchable"],clearable:[1,"clearable"],deselectOnClick:[1,"deselectOnClick"],clearSearchOnAdd:[1,"clearSearchOnAdd"],compareWith:[1,"compareWith"],keyDownFn:[1,"keyDownFn"],bindLabel:[1,"bindLabel"],bindValue:[1,"bindValue"],appearance:[1,"appearance"],isOpen:[1,"isOpen"],items:[1,"items"]},outputs:{bindLabel:"bindLabelChange",bindValue:"bindValueChange",appearance:"appearanceChange",isOpen:"isOpenChange",items:"itemsChange",blurEvent:"blur",focusEvent:"focus",changeEvent:"change",openEvent:"open",closeEvent:"close",searchEvent:"search",clearEvent:"clear",addEvent:"add",removeEvent:"remove",scroll:"scroll",scrollToEnd:"scrollToEnd"},exportAs:["ngSelect"],features:[Di([{provide:Vi,useExisting:Nt(()=>o),multi:!0},gn]),Ot],decls:15,vars:20,consts:[["searchInput",""],["defaultPlaceholderTemplate",""],["defaultLabelTemplate",""],["defaultLoadingSpinnerTemplate",""],["clearButton",""],["defaultOptionTemplate",""],["defaultTagTemplate",""],["defaultNotFoundTemplate",""],["defaultTypeToSearchTemplate",""],["defaultLoadingTextTemplate",""],[1,"ng-select-container",3,"mousedown"],[1,"ng-value-container"],[3,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"ng-input"],["aria-autocomplete","list","role","combobox",3,"blur","change","compositionend","compositionstart","focus","input","disabled","readOnly","value"],["role","button","tabindex","0",1,"ng-clear-wrapper",3,"title"],[1,"ng-arrow-wrapper"],[1,"ng-arrow"],[1,"ng-dropdown-panel",3,"virtualScroll","bufferAmount","appendTo","position","outsideClickEvent","headerTemplate","footerTemplate","filterValue","items","showAddTag","markedItem","ng-select-multiple","class","id","ariaLabelDropdown"],["aria-atomic","true","aria-live","polite","role","status",1,"ng-visually-hidden"],[3,"ngTemplateOutlet"],[1,"ng-placeholder"],[1,"ng-value",3,"ng-value-disabled"],[1,"ng-value"],["aria-hidden","true",1,"ng-value-icon","left",3,"click"],[1,"ng-value-label",3,"ngItemLabel","escape"],[1,"ng-spinner-loader"],["role","button","tabindex","0",1,"ng-clear-wrapper",3,"click","title"],["aria-hidden","true",1,"ng-clear"],[1,"ng-dropdown-panel",3,"update","scroll","scrollToEnd","outsideClick","virtualScroll","bufferAmount","appendTo","position","outsideClickEvent","headerTemplate","footerTemplate","filterValue","items","showAddTag","markedItem","id","ariaLabelDropdown"],[1,"ng-option",3,"ng-option-disabled","ng-option-selected","ng-optgroup","ng-option","ng-option-child","ng-option-marked"],["role","option",1,"ng-option",3,"ng-option-marked"],[1,"ng-option",3,"click","mouseover"],[1,"ng-option-label",3,"ngItemLabel","escape"],["role","option",1,"ng-option",3,"mouseover","click"],[1,"ng-tag-label"],[1,"ng-option","ng-option-disabled"]],template:function(i,n){if(i&1){let r=D();c(0,"div",10),E("mousedown",function(l){return _(r),v(n.handleMousedown(l))}),c(1,"div",11),C(2,Gn,3,1),C(3,qn,2,0),C(4,Qn,1,5,null,12),c(5,"div",13)(6,"input",14,0),E("blur",function(l){return _(r),v(n.onInputBlur(l))})("change",function(l){return _(r),v(l.stopPropagation())})("compositionend",function(){_(r);let l=$(7);return v(n.onCompositionEnd(l.value))})("compositionstart",function(){return _(r),v(n.onCompositionStart())})("focus",function(l){return _(r),v(n.onInputFocus(l))})("input",function(){_(r);let l=$(7);return v(n.filter(l.value))}),u()()(),C(8,to,3,1),C(9,oo,4,4,"span",15),c(10,"span",16),N(11,"span",17),u()(),C(12,xo,8,21,"ng-dropdown-panel",18),c(13,"div",19),C(14,yo,1,1),u()}i&2&&(B("ng-appearance-outline",n.appearance()==="outline")("ng-has-value",n.hasValue),s(2),x(n.selectedItems.length===0&&!n.searchTerm||(n.fixedPlaceholder()??n.config.fixedPlaceholder)?2:-1),s(),x((!n.multiLabelTemplate()||!n.multiple())&&n.selectedItems.length>0?3:-1),s(),x(n.multiple()&&n.multiLabelTemplate()&&n.selectedValues.length>0?4:-1),s(2),g("disabled",n.disabled())("readOnly",!n.searchable()||n.itemsList.maxItemsSelected)("value",n.searchTerm??""),pe("aria-activedescendant",n.isOpen()?n.itemsList==null||n.itemsList.markedItem==null?null:n.itemsList.markedItem.htmlId:null)("aria-controls",n.isOpen()?n.dropdownId:null)("aria-expanded",n.isOpen())("aria-label",n.ariaLabel())("id",n.labelForId())("tabindex",n.tabIndex()),s(2),x(n.loading()?8:-1),s(),x(n.showClear()?9:-1),s(3),x(n.isOpen()?12:-1),s(2),x(n.isOpen()&&n.showNoItemsFound()?14:-1))},dependencies:[Yt,So,Wt],styles:[`@charset "UTF-8";.ng-select{position:relative;display:block;-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box}.ng-select div,.ng-select input,.ng-select span{-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box}.ng-select [hidden]{display:none}.ng-select.ng-select-searchable .ng-select-container .ng-value-container .ng-input{opacity:1}.ng-select.ng-select-opened .ng-select-container{z-index:1001}.ng-select.ng-select-disabled .ng-select-container .ng-value-container .ng-placeholder,.ng-select.ng-select-disabled .ng-select-container .ng-value-container .ng-value{-webkit-user-select:none;user-select:none;cursor:default}.ng-select.ng-select-disabled .ng-arrow-wrapper{cursor:default}.ng-select.ng-select-filtered .ng-placeholder{display:none}.ng-select .ng-select-container{cursor:default;display:flex;outline:none;overflow:hidden;position:relative;width:100%}.ng-select .ng-select-container .ng-value-container{display:flex;flex:1}.ng-select .ng-select-container .ng-value-container .ng-input{opacity:0}.ng-select .ng-select-container .ng-value-container .ng-input>input{box-sizing:content-box;background:none transparent;border:0 none;box-shadow:none;outline:none;padding:0;cursor:default;width:100%}.ng-select .ng-select-container .ng-value-container .ng-input>input::-ms-clear{display:none}.ng-select .ng-select-container .ng-value-container .ng-input>input[readonly]{-webkit-user-select:unset;user-select:unset;width:0;padding:0}.ng-select.ng-select-single.ng-select-filtered .ng-select-container .ng-value-container .ng-value{visibility:hidden}.ng-select.ng-select-single .ng-select-container .ng-value-container,.ng-select.ng-select-single .ng-select-container .ng-value-container .ng-value{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.ng-select.ng-select-single .ng-select-container .ng-value-container .ng-value .ng-value-icon{display:none}.ng-select.ng-select-single .ng-select-container .ng-value-container .ng-input{position:absolute;left:0;width:100%}.ng-select.ng-select-multiple.ng-select-disabled>.ng-select-container .ng-value-container .ng-value .ng-value-icon{display:none}.ng-select.ng-select-multiple .ng-select-container .ng-value-container{flex-wrap:wrap}.ng-select.ng-select-multiple .ng-select-container .ng-value-container .ng-placeholder{position:absolute}.ng-select.ng-select-multiple .ng-select-container .ng-value-container .ng-value{white-space:nowrap}.ng-select.ng-select-multiple .ng-select-container .ng-value-container .ng-value.ng-value-disabled .ng-value-icon{display:none}.ng-select.ng-select-multiple .ng-select-container .ng-value-container .ng-value .ng-value-icon{cursor:pointer}.ng-select.ng-select-multiple .ng-select-container .ng-value-container .ng-input{flex:1;z-index:2}.ng-select.ng-select-multiple .ng-select-container .ng-value-container .ng-placeholder{z-index:1}.ng-select .ng-clear-wrapper{cursor:pointer;position:relative;width:17px;-webkit-user-select:none;user-select:none}.ng-select .ng-clear-wrapper .ng-clear{display:inline-block;font-size:18px;line-height:1;pointer-events:none}.ng-select .ng-spinner-loader{border-radius:50%;width:17px;height:17px;margin-right:5px;font-size:10px;position:relative;text-indent:-9999em;border-top:2px solid rgba(66,66,66,.2);border-right:2px solid rgba(66,66,66,.2);border-bottom:2px solid rgba(66,66,66,.2);border-left:2px solid #424242;transform:translateZ(0);animation:load8 .8s infinite linear}.ng-select .ng-spinner-loader:after{border-radius:50%;width:17px;height:17px}@-webkit-keyframes load8{0%{-webkit-transform:rotate(0deg);transform:rotate(0)}to{-webkit-transform:rotate(360deg);transform:rotate(360deg)}}@keyframes load8{0%{-webkit-transform:rotate(0deg);transform:rotate(0)}to{-webkit-transform:rotate(360deg);transform:rotate(360deg)}}.ng-select .ng-arrow-wrapper{cursor:pointer;position:relative;text-align:center;-webkit-user-select:none;user-select:none}.ng-select .ng-arrow-wrapper .ng-arrow{pointer-events:none;display:inline-block;height:0;width:0;position:relative}.ng-dropdown-panel{box-sizing:border-box;position:absolute;opacity:0;width:100%;z-index:1050;-webkit-overflow-scrolling:touch}.ng-dropdown-panel .ng-dropdown-panel-items{display:block;height:auto;-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;max-height:240px;overflow-y:auto}.ng-dropdown-panel .ng-dropdown-panel-items .ng-optgroup{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.ng-dropdown-panel .ng-dropdown-panel-items .ng-option{box-sizing:border-box;cursor:pointer;display:block;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.ng-dropdown-panel .ng-dropdown-panel-items .ng-option .ng-option-label:empty:before{content:"\\200b"}.ng-dropdown-panel .ng-dropdown-panel-items .ng-option .highlighted{font-weight:700;text-decoration:underline}.ng-dropdown-panel .ng-dropdown-panel-items .ng-option.disabled{cursor:default}.ng-dropdown-panel .scroll-host{overflow:hidden;overflow-y:auto;position:relative;display:block;-webkit-overflow-scrolling:touch}.ng-dropdown-panel .scrollable-content{top:0;left:0;width:100%;height:100%;position:absolute}.ng-dropdown-panel .total-padding{width:1px;opacity:0}.ng-visually-hidden{position:absolute!important;width:1px;height:1px;margin:-1px;padding:0;overflow:hidden;clip:rect(0 0 0 0);border:0;white-space:nowrap}
`],encapsulation:2,changeDetection:0})}}return o})();var Po=(o,t)=>t.tagkey;function Oo(o,t){if(o&1){let e=D();c(0,"li",5),E("click",function(n){let r=_(e).$implicit,a=d(2);return v(a.onClickTag(n,r))}),c(1,"a",6)(2,"span",7),b(3),u()(),c(4,"span",8),b(5),u()()}if(o&2){let e=t.$implicit,i=d(2);g("title",he("",e.title,"",e.noteTooltip?": "+e.noteTooltip:"")),s(),g("href",he("",i.urlPrefix,"/",e.urlLink),Te),s(2),A(e.title),s(),B("bg-primary",(i.selectedPage==null?null:i.selectedPage.tagkey)===e.tagkey)("bg-secondary",(i.selectedPage==null?null:i.selectedPage.tagkey)!==e.tagkey),s(),A(e.count)}}function Lo(o,t){if(o&1){let e=D();c(0,"div",0)(1,"div")(2,"ul",1),H(3,Oo,6,12,"li",2,Po),c(5,"li",3)(6,"ng-select",4),K(7,"async"),Ii("ngModelChange",function(n){_(e);let r=d();return Ei(r.selectedTag,n)||(r.selectedTag=n),v(n)}),u()()()()()}if(o&2){let e=d();g("@tagListTrigger",void 0),s(3),z(t.entries.slice(0,e.TagDefaultCount)),s(3),wi("ngModel",e.selectedTag),g("items",X(7,3,e.tagAllSelect2$))}}var Tt=class o{constructor(t,e,i){this.route=t;this.index=e;this.reloader=i;f("TagNaviComponent.constructor()");let n="^([-_a-zA-Z0-9]+)/?$";f("TagNaviComponent URL Matcher",n),this.tagMatcher=new RegExp(n)}index$;tagAllSelect2$;destroy$=new Y;tagSelect2Changed$=new Y;route$;urlPrefix;tagSelected=new ue;tagUnselected=new ue;TagDefaultCount=10;isNavigateDerived=!1;indexSub=null;selectedPage=null;tagMatcher;reloadListId;refreshListSubscription=null;reloadId=null;refreshSubscription=null;ngOnInit(){f("TagNaviComponent.OnInit()"),this.route$.pipe(L(this.destroy$)).subscribe(e=>{if(this.isNavigateDerived=e.category==="Tag",!this.isNavigateDerived||!e.navigators){this.unselect(!0);return}let i=e.navigators.match(this.tagMatcher);if(!i){this.unselect(!0);return}let n=i[1];f(`TagNaviComponent detect routing ${n}`),this.selectTag(n,!1)}),this.reloadListId=this.reloader.registerLoader();let t=Je(se(void 0),this.reloader.refreshEvent(this.reloadListId));this.index$=t.pipe(J(()=>this.index.fetchTagList$(this.route)),ee(1)),this.tagAllSelect2$=this.index$.pipe(k(e=>{let i=[];for(let n of e.entries){let r={id:n.tagkey,name:`${n.title} ( ${n.count} )`};i.push(r)}return i})),this.tagSelect2Changed$.pipe(ce(500),ke(),L(this.destroy$)).subscribe(e=>{this.onTagChanged(e)})}ngOnDestroy(){this.refreshListSubscription&&(this.refreshListSubscription.unsubscribe(),this.refreshListSubscription=null),this.reloadListId&&this.reloader.unregister(this.reloadListId),this.ensureUnregisterTagWathing(),this.destroy$.next()}unselectTag(){this._selectedTag="",this.selectedPage=null}unselect(t){this.ensureUnregisterTagWathing(),t||(this.isNavigateDerived=!1),this.unselectTag(),this.hideOtherDropdown()}selectTag(t,e,i){if(this.indexSub&&(this.indexSub.unsubscribe(),this.indexSub=null),t===null){this.unselectTag(),this.tagUnselected.emit();return}let n={tagkey:t,isReload:e,isClicked:i};this.indexSub=this.index.fetchTagIndex$(this.route,n).pipe(L(this.destroy$)).subscribe(r=>{f("TagNaviComponent Selected",r),this.startTagWatching(r),this.isNavigateDerived&&(this.selectedPage=r,this._selectedTag=r.tagkey,this.tagSelected.emit(r))})}hideOtherDropdown(){let t=document.getElementById("gitweeTagNaviDropdownButton");if(!t)return;new Bi(t).hide()}onClickTag(t,e){f("TagNaviComponent.onClickTag()",e),t.preventDefault(),t.stopPropagation(),this.hideOtherDropdown(),this.isNavigateDerived=!0,this.selectTag(e.tagkey,!1,!0)}onTagChanged(t){this.isNavigateDerived=!!t,this.selectTag(t,!1,!0)}ensureUnregisterTagWathing(){this.reloadId&&(this.reloader.unregister(this.reloadId),this.reloadId=null),this.refreshSubscription&&(this.refreshSubscription.unsubscribe(),this.refreshSubscription=null)}startTagWatching(t){this.ensureUnregisterTagWathing();let e=this.reloader.registerWatcher(t.indexUrl,t.updated);this.reloadId=e,this.refreshSubscription=this.reloader.refreshEvent(e).pipe(L(this.destroy$)).subscribe(()=>{this.selectTag(t.tagkey,!0)})}_selectedTag="";get selectedTag(){return this._selectedTag}set selectedTag(t){if(this._selectedTag=t,!t){this.tagSelect2Changed$.next(null);return}this.tagSelect2Changed$.next(t)}static \u0275fac=function(e){return new(e||o)(F(fe),F(Q),F(Pe))};static \u0275cmp=U({type:o,selectors:[["gitwee-tag-navi"]],inputs:{route$:"route$",urlPrefix:"urlPrefix"},outputs:{tagSelected:"tagSelected",tagUnselected:"tagUnselected"},decls:2,vars:3,consts:[["id","gitweeTagNaviIndex"],[1,"list-group"],[1,"list-group-item","align-items-center","row","text-end","shadow","row","gitwee-listing-tag","gitwee-sidebar-node",3,"title"],[1,"list-group-item","align-items-center","row","text-end","shadow","gitwee-listing-tag"],["placeholder","\u30BF\u30B0\u3067\u691C\u7D22","bindLabel","name","bindValue","id",1,"col-auto",3,"ngModelChange","ngModel","items"],[1,"list-group-item","align-items-center","row","text-end","shadow","row","gitwee-listing-tag","gitwee-sidebar-node",3,"click","title"],[1,"col-8",3,"href"],[1,"gitwee-navi-item"],[1,"badge","rounded-pill","col-4"]],template:function(e,i){if(e&1&&(C(0,Lo,8,5,"div",0),K(1,"async")),e&2){let n;x((n=X(1,1,i.index$))?0:-1,n)}},dependencies:[Hi,Ri,Ui,fn,ge],styles:[".gitwee-listing-tag[_ngcontent-%COMP%]{cursor:pointer}",".gitwee-sidebar-node[_ngcontent-%COMP%]{transition:transform .5s}.gitwee-sidebar-node[_ngcontent-%COMP%]:hover{transform:scale(1.03);z-index:10000}.gitwee-navi-item[_ngcontent-%COMP%]{display:inline-block;text-overflow:ellipsis;overflow:hidden;white-space:nowrap;vertical-align:text-bottom}.gitwee-calendar-day[_ngcontent-%COMP%]{display:inline-block;white-space:nowrap}"],data:{animation:[Z("tagListTrigger",[P(":enter",[T({opacity:0,transform:"translateX(5px)"}),M("500ms 200ms ease-in-out",T({opacity:1,transform:"none"}))]),P(":leave",[T({position:"absolute",width:"100%"}),M("200ms ease-in-out",T({opacity:0,transform:"translateX(5px)"}))])])]}})};function $o(o,t){if(o&1&&bi(0,"div",3),o&2){let e=t.$implicit;Ci("innerHTML",e,gi)}}function Bo(o,t){if(o&1){let e=D();Bt(0,"div")(1,"button",1),xi("click",function(n){_(e);let r=$(4),a=d(2);return v(a.onClickToggle(n,r))}),b(2,"\u5916\u90E8\u30B5\u30A4\u30C8 (Banner)"),Vt(),Bt(3,"div",2,0),H(5,$o,1,1,"div",3,Ke),Vt()()}if(o&2){let e=d(),i=d();s(3),le("display",i.shownState=="none"?"none":"block"),g("@displayTrigger",i.shownState),s(2),z(e)}}function Vo(o,t){o&1&&C(0,Bo,7,3,"div"),o&2&&x(t.length>0?0:-1)}var wt=class o{constructor(t,e,i){this.http=t;this.sanitizer=e;this.dom=i}shownState="none";destroy$=new Y;trustedScript$;refreshEvent$=new Fe(void 0);banners$;bannerList=j([]);isShown=!1;scriptIdList=[];ngOnDestroy(){this.purgeDynamicScripts(),this.destroy$.next()}ngOnInit(){this.trustedScript$=this.http.fetchGhJson("/UserData/trusted-script.json").pipe(k(e=>{let i={};for(let n of e.scripts)i[n.href]=n;return i}),ee(1));let t=this.refreshEvent$.pipe(ce(500));this.banners$=t.pipe(J(()=>this.http.fetchGhJson("/UserData/banner.json").pipe(ee(1)))),xe([this.banners$,this.trustedScript$]).pipe(L(this.destroy$)).subscribe(([e,i])=>{let n=[];this.purgeDynamicScripts();for(let r of e.banners)if(n.push(this.sanitizer.bypassSecurityTrustHtml(r.bodyHtml)),r.scripts)for(let a of r.scripts){if(!(a in i)){_e(`Unable load insecure script from ${a}`);continue}let l=this.dom.ensureDynamicScript(a);this.scriptIdList.includes(l)||this.scriptIdList.push(l)}this.bannerList.set(n)})}purgeDynamicScripts(){for(;this.scriptIdList.length>0;){let t=this.scriptIdList[0];this.dom.removeDynamicScript(t),this.scriptIdList.splice(0,1)}}hackIFrame(t){let e=t.querySelectorAll("iframe");for(let i=0;i<e.length;i++)e[i].width="100%",i++}lazyCall(t,e){ni(t).pipe(We(1)).subscribe(i=>{e()})}onClickToggle(t,e){this.isShown=!this.isShown,this.shownState="animating",this.isShown?this.lazyCall(400,()=>this.shownState="visible"):this.lazyCall(400,()=>this.shownState="none"),this.isShown?this.hackIFrame(e):this.refreshEvent$.next()}static \u0275fac=function(e){return new(e||o)(F(st),F(Li),F(be))};static \u0275cmp=U({type:o,selectors:[["app-external-banner"]],decls:1,vars:1,consts:[["bodyNode",""],[1,"btn","btn-secondary",2,"width","100%",3,"click"],[1,"app-external-banner-body","m-2"],[1,"m-1",3,"innerHTML"]],template:function(e,i){if(e&1&&C(0,Vo,1,1),e&2){let n;x((n=i.bannerList())?0:-1,n)}},styles:[".gitwee-sidebar-node[_ngcontent-%COMP%]{transition:transform .5s}.gitwee-sidebar-node[_ngcontent-%COMP%]:hover{transform:scale(1.03);z-index:10000}.gitwee-navi-item[_ngcontent-%COMP%]{display:inline-block;text-overflow:ellipsis;overflow:hidden;white-space:nowrap;vertical-align:text-bottom}.gitwee-calendar-day[_ngcontent-%COMP%]{display:inline-block;white-space:nowrap}"],data:{animation:[Z("displayTrigger",[P("none => animating",[T({opacity:0,transform:"translateY(-5px)"}),M("500ms ease-in-out",T({opacity:1,transform:"none"}))]),P("visible => animating",[T({opacity:1,transform:"none"}),M("500ms ease-in-out",T({opacity:0,transform:"translateY(-5px)"}))])])]}})};var Ro=(o,t)=>t.tagkey;function Uo(o,t){o&1&&b(0,",")}function Ho(o,t){if(o&1&&(c(0,"a",0),b(1),u(),C(2,Uo,1,0)),o&2){let e=t.$implicit,i=t.$index,n=t.$count;g("routerLink",oe("./tag/",e.tagkey)),s(),A(e.title),s(),x(i!==n-1?2:-1)}}function zo(o,t){if(o&1&&(N(0,"hr"),c(1,"p"),b(2,"Tag: "),H(3,Ho,3,4,null,null,Ro),u()),o&2){let e=d();s(3),z(e.tags)}}var Et=class o{tags;constructor(){}ngOnInit(){f("TagFooterComponent.OnInit()")}static \u0275fac=function(e){return new(e||o)};static \u0275cmp=U({type:o,selectors:[["gitwee-tag-footer"]],inputs:{tags:"tags"},decls:1,vars:1,consts:[[1,"p-1",3,"routerLink"]],template:function(e,i){e&1&&C(0,zo,5,0),e&2&&x(i.tags&&i.tags.length>0?0:-1)},dependencies:[Ee,ot],encapsulation:2})};var jo=(o,t)=>t.pageRelPath;function Go(o,t){if(o&1&&(c(0,"a",7),b(1),u()),o&2){let e=d().$implicit;g("routerLink",e.anchorLink)("fragment",e.anchorId),s(),A(e.title)}}function Jo(o,t){if(o&1&&b(0),o&2){let e=d().$implicit;A(e.title)}}function Wo(o,t){if(o&1){let e=D();c(0,"button",15),E("click",function(){_(e);let n=d().$implicit,r=d();return v(r.toggleCensored(n))}),N(1,"img",16),u()}if(o&2){let e=d().$implicit;pe("data-bs-target",oe("#gitweeTimelineItem-",e.anchorId))("aria-controls",oe("#gitweeTimelineItem-",e.anchorId)),s(),le("transform",e.isOpened?"rotate(-90deg)":"none"),g("@censorButtonTrigger",e.isOpened)}}function Ko(o,t){if(o&1){let e=D();c(0,"div",17,2),E("appAfterIf",function(){_(e);let n=$(1);d();let r=$(1),a=d();return v(a.computeBottomFade(r,n))}),c(2,"span",18)(3,"a",19),b(4,"\u7D9A\u304D\u3092\u8AAD\u3080"),u()()()}if(o&2){let e=d().$implicit;le("bottom",e.tags.length>0?140:80,"px"),s(3),g("routerLink",nt(e.anchorLink))}}function qo(o,t){if(o&1&&N(0,"gitwee-tag-footer",12),o&2){let e=d().$implicit;g("tags",e.tags)}}function Zo(o,t){if(o&1){let e=D();c(0,"div",3,0)(2,"div",5)(3,"div",6),C(4,Go,2,3,"a",7)(5,Jo,1,1),C(6,Wo,2,7,"button",8),u()(),c(7,"div",9)(8,"app-page-path",10,1),E("loadPageBody",function(){_(e);let n=d();return v(n.onPageBodyRetrieved())})("fatalError",function(n){let r=_(e).$implicit,a=d();return v(a.onFatalError(r,n))})("loadPageJson",function(n){let r=_(e),a=r.$implicit,l=r.$index,p=r.$count,h=d();return v(h.onLoaded(a,n,l===p-1))})("loadError",function(n){let r=_(e).$implicit,a=d();return v(a.onErrorDraw(r,n))}),u(),C(10,Ko,5,4,"div",11),C(11,qo,1,1,"gitwee-tag-footer",12),u(),c(12,"div",13)(13,"small",14),b(14),K(15,"date"),u()()()}if(o&2){let e=t.$implicit;g("@timelineEntryTrigger",void 0),s(3),g("id",oe("gitweeTimelinePage-",e.anchorId)),s(),x(e.anchorLink?4:5),s(2),x(e.isCensored?6:-1),s(),B("collapse",e.isCensored)("show",!e.isCensored),g("id",oe("gitweeTimelineItem-",e.anchorId)),s(),g("pagePath$",e.path$),s(2),x(e.hasMain?10:-1),s(),x(e.tags?11:-1),s(3),me("Updated: ",Ai(15,15,e.updated,"yyyy-MM-dd"))}}function Qo(o,t){o&1&&(c(0,"div",20)(1,"div")(2,"strong"),b(3,"\u8AAD\u307F\u8FBC\u307F\u5931\u6557"),u()(),c(4,"div"),b(5,"\u6642\u9593\u3092\u958B\u3051\u3066\u304B\u3089\u518D\u5EA6\u304A\u8A66\u3057\u304F\u3060\u3055\u3044\u3002"),u(),c(6,"button",22)(7,"span",23),b(8,"\xD7"),u()()())}function Xo(o,t){o&1&&(c(0,"div"),N(1,"span",24),c(2,"span"),b(3,"Loading..."),u()())}function er(o,t){o&1&&(c(0,"div"),b(1,"\u3055\u3089\u306B\u8AAD\u307F\u8FBC\u3080"),u())}function tr(o,t){if(o&1){let e=D();c(0,"div",4),C(1,Qo,9,0,"div",20),c(2,"button",21),E("click",function(){let n=_(e),r=d();return v(r.onClickTrackback(n))}),C(3,Xo,4,0,"div")(4,er,2,0,"div"),u()()}if(o&2){let e=d();s(),x(e.isLoadingError()?1:-1),s(),g("disabled",e.isLoadingPrevious()),s(),x(e.isLoadingPrevious()?3:4)}}var Zt=class{constructor(t,e,i){this.path$=t;this.keyPath=e;this.pageRelPath=i}title;anchorLink;anchorId;updated;isCensored;isOpened;hasMain;tags},It=class{constructor(t,e=[]){this.url=t;this.entries=e}reloadId;refreshEvent},Qt=class{constructor(t,e){this.obj=t;this.key=e;this.lastAccessAt=Date.now(),this.createdAt=Date.now()}lastAccessAt;createdAt},St=class o{constructor(t,e,i,n){this.router=t;this.index=e;this.dom=i;this.reloader=n}naviEntries$;trackbackEntries$=new Y;timeline=j([]);timelineEntryCache={};MaxCacheItem=200;CacheExpireMS=3600*1e3;timelineIndices={};timelineIndicesOrdered=[];streamPrevUrl=j(null);isLoadingPrevious=j(!1);isLoadingError=j(!1);pendingAnchorNavi;backgroundFadeGradient$;destroy$=new Y;updateTimeline(){let t=[],e=this.dom.getBaseHref();for(let i of this.timelineIndicesOrdered){let n=this.timelineIndices[i];for(let r of n.entries){let a=`${e}${rt.PAGE_DATA}/${r}`,l=this.getTimelineCache(a);if(l){t.includes(l)||t.push(l);continue}let p=new Gi;p.jsonPath=a,l=new Zt(se(p),p.jsonPath,r),t.push(l),this.putTimelineCache(l)}}this.timeline.set(t)}ngOnDestroy(){f("TimelineComponent.OnDestroy()"),this.cleanupTimelineIndices(),this.destroy$.next()}ngOnInit(){f("TimelineComponent.OnInit()"),this.naviEntries$.pipe(ce(500),L(this.destroy$)).subscribe(t=>{switch(t.navigationFrom){case"click":case"url":{this.cleanupTimelineIndices();let e=new It(null,t.entries);this.timelineIndices.default=e,this.timelineIndicesOrdered.push("default")}break;case"reload":{let e=this.timelineIndices.default;e.entries=t.entries}break;default:throw new Error(`Not supported navigationFrom ${t.navigationFrom}`)}this.updateTimeline(),this.timelineIndices[t.timelineUrl]||this.streamPrevUrl.set(t.timelineUrl),this.isLoadingPrevious.set(!1)}),this.trackbackEntries$.pipe(L(this.destroy$)).subscribe(t=>{if(t.navigationFrom!=="click")throw new Error("Not a supported navigationFrom ${page.navigationFrom}");this.updateTimeline(),this.isLoadingPrevious.set(!1)}),this.router.currentFragment$.pipe(L(this.destroy$)).subscribe(t=>{this.pendingAnchorNavi=t})}rgb2hex(t){let e=t.match(/^rgb\((\d+),\s*(\d+),\s*(\d+)\)$/);return e?`#${e.slice(1).map(n=>parseInt(n,10).toString(16).padStart(2,"0")).join("")}`:null}computeBaseColor(t){let e=window.getComputedStyle(t);if(!("background-color"in e))return _e("Failed to compute background color for fade."),"#ffffff";let i=this.rgb2hex(e["background-color"]);return i||(_e("Failed to parse background color for fade."),"#ffffff")}computeBottomFade(t,e){f("Computing fade color");let i=this.computeBaseColor(t),n=`${i}ff`,r=`${i}00`;e.style.background=`linear-gradient(to top, ${n}, 90%, ${r})`}onFatalError(t,e){f("TimelineComponent.onFatalError()",e)}onErrorDraw(t,e){f("TimelineComponent.onErrorDraw()")}onLoaded(t,e,i){f("TimelineComponent.onLoaded()",t,e,i),t.title=e.title,t.anchorLink=e.anchorLink,t.anchorId=e.anchorId,t.updated=new Date(e.updatedAt||e.updated),t.isCensored=!!e.isDefaultClosed,t.isOpened=!t.isCensored,t.hasMain=e.hasMain||!1,t.tags=e.tags}toggleCensored(t){t.isOpened=!t.isOpened}onPageBodyRetrieved(){if(!this.pendingAnchorNavi)return;let t=`gitweeTimelinePage-${this.pendingAnchorNavi}`;this.dom.scrollIntoView(t)&&(this.pendingAnchorNavi=null)}cleanupIndexItem(t){t.reloadId&&(this.reloader.unregister(t.reloadId),delete t.reloadId),t.refreshEvent&&(t.refreshEvent.unsubscribe(),delete t.refreshEvent)}expireTimelineCache(){let t=Object.keys(this.timelineEntryCache),e=t.length;if(e<=this.MaxCacheItem)return;Re(`Cleaning up timeline cache size: ${e}`);let i=Date.now()-this.CacheExpireMS,n=[];for(let p of t){let h=this.timelineEntryCache[p];h.lastAccessAt>i||n.push(h)}n=n.sort((p,h)=>p.lastAccessAt===h.lastAccessAt?0:p.lastAccessAt<h.lastAccessAt?-1:1),f("Target to expire.",n);let r=e-this.MaxCacheItem;for(let p=0;p<r&&p<n.length;p++){let h=n[p];delete this.timelineEntryCache[h.key]}let l=Object.keys(this.timelineEntryCache).length;Re(`Cache was cleaned up size: ${e} -> ${l}`)}getTimelineCache(t){let e=this.timelineEntryCache[t];return e?(e.lastAccessAt=Date.now(),e.obj):null}putTimelineCache(t){let e=this.timelineEntryCache[t.keyPath];if(e){e.lastAccessAt=Date.now();return}e=new Qt(t,t.keyPath),this.timelineEntryCache[t.keyPath]=e}cleanupTimelineIndices(){if(this.timelineIndices)for(let t in this.timelineIndices){let e=this.timelineIndices[t];this.cleanupIndexItem(e)}this.expireTimelineCache(),this.timelineIndices={},this.timelineIndicesOrdered=[]}refreshIndex(t,e){let i=this.timelineIndices[t];i||(i=new It(t),this.timelineIndices[t]=i),i.entries=e.entries,this.cleanupIndexItem(i);let n=this.reloader.registerWatcher(t,new Date(e.updatedAt));i.reloadId=n,i.refreshEvent=this.reloader.refreshEvent(n).pipe(J(()=>this.index.fetchWeeklyIndex$(t)),L(this.destroy$)).subscribe(r=>{this.refreshIndex(t,r)}),this.timelineIndicesOrdered.includes(t)||this.timelineIndicesOrdered.push(t)}onClickTrackback(t){f("TimelineComponent.onClickTrackback()",t),this.isLoadingPrevious.set(!0),this.isLoadingError.set(!1);let e=new Fe(t);e.pipe(J(n=>ai(se(n),this.index.fetchWeeklyIndex$(n))),ee(1)).pipe(L(this.destroy$)).subscribe({next:([n,r])=>{if(this.refreshIndex(n,r),this.streamPrevUrl.set(r.previousIndexUrl),r.entries.length>0){let a=new He;a.entries=r.entries,a.timelineUrl=r.previousIndexUrl,a.navigationFrom="click",this.trackbackEntries$.next(a);return}r.previousIndexUrl&&(f(`Continue retrieving ${r.previousIndexUrl} since empty.`),e.next(r.previousIndexUrl))},complete:()=>{f("Successfully completed auto trackback loader"),this.isLoadingPrevious.set(!1)},error:n=>{this.isLoadingError.set(!0),this.isLoadingPrevious.set(!1)}})}static \u0275fac=function(e){return new(e||o)(F(at),F(Q),F(be),F(Pe))};static \u0275cmp=U({type:o,selectors:[["gitwee-timeline"]],inputs:{naviEntries$:"naviEntries$"},decls:3,vars:1,consts:[["timelineItemDiv",""],["pagePathComponent",""],["bottomFaderDiv",""],[1,"card","shadow-lg","rounded","m-2","gitwee-timeline-item"],[1,"p-5"],[1,"card-header"],[1,"float-start",3,"id"],[3,"routerLink","fragment"],["data-bs-toggle","collapse","aria-expanded","false",1,"btn","float-end","collapsed"],[1,"card-body",3,"id"],[1,"m-3","p-3",3,"loadPageBody","fatalError","loadPageJson","loadError","pagePath$"],[1,"timeline-fadeout-entry",3,"bottom"],[3,"tags"],[1,"card-footer"],[1,"float-end","text-muted"],["data-bs-toggle","collapse","aria-expanded","false",1,"btn","float-end","collapsed",3,"click"],["src","/assets/octicons/chevron-left.svg"],[1,"timeline-fadeout-entry",3,"appAfterIf"],[2,"position","absolute","bottom","0px"],[3,"routerLink"],["role","alert",1,"alert","alert-warning","alert-dismissible","fade","show"],["type","button",1,"btn","btn-outline-primary","btn-block",2,"width","100%",3,"click","disabled"],["type","button","data-bs-dismiss","alert","aria-label","Close",1,"btn-close"],["aria-hidden","true"],["role","status","aria-hidden","true",1,"spinner-border","text-primary"]],template:function(e,i){if(e&1&&(H(0,Zo,16,18,"div",3,jo),C(2,tr,5,3,"div",4)),e&2){let n;z(i.timeline()),s(2),x((n=i.streamPrevUrl())?2:-1,n)}},dependencies:[Ee,ot,ve,Ce,ji,Et,Oi],styles:[".timeline-fadeout-entry[_ngcontent-%COMP%]{position:absolute;width:100%;height:30%;left:0%;padding:2%}"],data:{animation:[Z("timelineEntryTrigger",[P(":enter",[T({opacity:0,transform:"translateY(10px)"}),M("300ms 300ms ease-in-out",T({transform:"none",opacity:1})),jt()]),P(":leave",[jt(),T({opacity:1,transform:"none"}),M("300ms ease-in-out",T({opacity:0,transform:"translateY(-10px)"}))])]),Z("censorButtonTrigger",[P("false => true",[T({transform:"none"}),M("500ms ease-in-out",T({transform:"rotate(-90deg)"}))]),P("true => false",[T({transform:"rotate(-90deg)"}),M("500ms ease-in-out",T({transform:"none"}))])])]}})};var ir=["tagNavi"],nr=["sideNavigator"],or=["gitweeFireGitweeContainer"];function rr(o,t){if(o&1){let e=D();c(0,"div",17,3),E("appAfterIf",function(){_(e);let n=d();return v(n.activatedFireGitwee())}),u()}}function ar(o,t){if(o&1){let e=D();c(0,"div",18),E("click",function(){_(e);let n=d();return v(n.doUnmask())}),c(1,"div",19),ui(),c(2,"svg",20)(3,"defs")(4,"linearGradient",21),N(5,"stop",22)(6,"stop",23)(7,"stop",24),u()(),c(8,"circle",25),N(9,"animateTransform",26),u(),c(10,"text",27)(11,"tspan",28),b(12,"G"),N(13,"animate",29),u(),c(14,"tspan",30),b(15,"i"),N(16,"animate",31),u(),c(17,"tspan",32),b(18,"t"),N(19,"animate",33),u(),c(20,"tspan",34),b(21,"w"),N(22,"animate",35),u(),c(23,"tspan",36),b(24,"e"),N(25,"animate",37),u(),c(26,"tspan",38),b(27,"e"),N(28,"animate",39),u()()()()()}o&2&&g("@loadingTrigger",void 0)}var Dt=class o{constructor(t,e,i,n,r,a){this.dom=t;this.route=e;this.router=i;this.index=n;this.loader=r;this.localSession=a;this.isLoading.set(!this.index.isInitialized)}targetTimeline$=new Y;destroy$=new Y;isLoading=j(!1);gitweeRoute$;defaultTopPage$;gitweeUrlPrefix;eventShowFireGitwee$;overrideStyleClass;selectedNavigator;tagNavi;sideNavigator;sidebarStickyTop$=new Fe(null);extractGitweePath(t){let e=this.gitweeUrlPrefix;if(t!==e&&!t.startsWith(`${e}/`))throw new Error(`Unable parse a GitweePath URL: ${t}`);let i=t.substring(e.length);if(i.startsWith("/")&&(i=i.substring(1)),i==="")return["Calendar",null];let n=i.match(/^timeline(?:\/(.*))?$/);if(n)return["Calendar",n[1]];let r=i.match(/^tag(?:\/(.*))?$/);if(r)return["Tag",r[1]];throw new Error(`Unsupported Path of the Gitwee ${i}`)}ngOnInit(){f("Gitwee.MainComponent.OnInit()",this.route,this.route.pathFromRoot),this.gitweeUrlPrefix="/"+this.route.pathFromRoot.reduce((p,h)=>h.routeConfig?.path?[h.routeConfig?.path,...p]:p,[]).join("/");let t=this.route.data.pipe(We(1));this.gitweeRoute$=xe([t,this.router.urlNavigation$]).pipe(k(([p,h])=>{f("MainComponent detect urlNavigation$",p,h);let I=new ht;return I.ns=p.gitweeNamespace,[I.category,I.navigators]=this.extractGitweePath(h.path),I.fragment=h.fragment,I}),ee(1)),this.index.fetchConfig$(this.route).pipe(L(this.destroy$)).subscribe(p=>{p.styles&&(this.overrideStyleClass=this.dom.overrideBasicStyle(p.styles))});let e=Je(se(window.innerHeight),ye(window,"resize").pipe(k(p=>window.innerHeight),ke())),i=ye(window,"scroll").pipe(k(p=>window.scrollY),li((p,h)=>[h,p[0],p[1]],[0,null,null])),n=oi(300).pipe(k(p=>this.sidebarElemenet?.clientHeight),ke()),r=xe([e,n]),a=0,l=0;xe([i,e,n]).pipe(L(this.destroy$)).subscribe(([[p,h,I],w,R])=>{let De=a-p,kt=60,Xt=w-R,vn=Xt>=kt?kt:Math.min(Xt,0),Ge=Math.max(Math.min(De+l,kt),vn);h<p?(I>h&&(a=p,l=Ge),this.sidebarStickyTop$.next(Ge)):h===p||(I<h&&(a=p,l=Ge),this.sidebarStickyTop$.next(Ge))}),this.eventShowFireGitwee$=xe([this.localSession.loginStateChanged$,t,this.router.currentUrl$]).pipe(k(([p,h,I])=>{if(!p)return!1;let[w,R]=this.extractGitweePath(I);return!(R||h.gitweeNamespace!=="diary"||w!=="Calendar")}),ke(),L(this.destroy$))}ngOnDestroy(){f("MainComponent.OnDestroy()"),this.dom.cleanupOverrideStyle(this.overrideStyleClass),this.destroy$.next()}ngAfterViewInit(){f("MainComponent.AfterViewInit()")}async activatedFireGitwee(){await this.doLazyLoadFireGitwee()}gitweeFireGitweeContainer;get sidebarElemenet(){return this.sideNavigator?.element.nativeElement}async doLazyLoadFireGitwee(){this.gitweeFireGitweeContainer.element.nativeElement.innerHTML="",this.gitweeFireGitweeContainer.clear();let{FireGitweeModule:t}=await import("./chunk-S7X44W4M.js"),{FireGitweeComponent:e}=await import("./chunk-HIW6MBP7.js"),i=this.loader.appendComponent(this.gitweeFireGitweeContainer,t,e)}entriesSelected(t,e){f("MainComponent.entriesSelected()",t,e),this.dom.setTitle(`Gitwee Blog: ${e.title}`),this.targetTimeline$.next(e),this.selectedNavigator&&this.selectedNavigator!==t&&(this.selectedNavigator.unselect(),this.selectedNavigator=null),this.selectedNavigator=t;let i=`${this.gitweeUrlPrefix}/${e.urlLink}`;this.router.replaceJustUrl(i),this.isLoading()&&setTimeout(()=>this.doUnmask(),3e3)}entriesNotFound(t){f("MainComponent.entriesNotFound()",t),this.router.navigateByUrl(this.gitweeUrlPrefix)}doUnmask(){this.index.initialized(),this.isLoading.set(!1)}static \u0275fac=function(e){return new(e||o)(F(be),F(fe),F(at),F(Q),F(zi),F(Yi))};static \u0275cmp=U({type:o,selectors:[["ng-component"]],viewQuery:function(e,i){if(e&1&&yi(ir,5)(nr,5,Lt)(or,5,Lt),e&2){let n;Xe(n=et())&&(i.tagNavi=n.first),Xe(n=et())&&(i.sideNavigator=n.first),Xe(n=et())&&(i.gitweeFireGitweeContainer=n.first)}},decls:18,vars:14,consts:[["sideNavigator",""],["tagNavi",""],["calendarNavi",""],["gitweeFireGitweeContainer",""],[1,"container-fluid"],["id","gitweeMainContainer",1,"row","flex-xl-nowrap"],["id","gitweeSidebarNavContainer",1,"col-12","col-md-4","col-xl-3","navbar-dark","rounded"],["type","button","data-bs-toggle","collapse","data-bs-target","#gitweeSidebarNavBody","aria-expanded","true","aria-label","Toggle docs navigation",1,"navbar-toggler","d-md-none","collapsed"],[1,"navbar-toggler-icon"],["id","gitweeSidebarNavBody",1,"collapse",2,"position","sticky"],[1,"m-1",3,"tagSelected","tagUnselected","route$","urlPrefix"],[1,"m-1",3,"nodeExpanded","notFound","route$","urlPrefix"],[1,"m-1"],["id","gitweeTimelineContainer",1,"col-12","col-md-8","col-xl-9"],["id","gitweeFireGitweeContainer"],[3,"naviEntries$"],["id","gitweeLoadingLogoMask"],["id","gitweeFireGitweeContainer",3,"appAfterIf"],["id","gitweeLoadingLogoMask",3,"click"],["id","gitweeLogoMask"],["xmlns","http://www.w3.org/2000/svg","width","45vw","height","45vw"],["id","gitweeSvgGradient1"],["offset","0%","stop-color","#31b271",1,"stop1"],["offset","50%","stop-color","#eb6ba4","stop-opacity","0.8",1,"stop2"],["offset","100%","stop-color","#1db8ee",1,"stop3"],["id","gitweeLoadingCircle","fill","none","transform-origin","center","stroke","url(#gitweeSvgGradient1)","stroke-width","1.5%","cx","50%","cy","50%","r","30%"],["attributeName","transform","attributeType","XML","keyTimes","0;1","calcMode","spline","keySplines","0.42 0.0 0.58 1.0","type","rotate","from","0","to","-2160","dur","3s","additive","replace","fill","freeze","repeatCount","indefinite"],["id","gitweeLogoText","x","28% 38% 43% 54% 65% 75% 86%","stroke","none","font-size","8vw","lengthAdjust","spacing","textLength","100%","text-anchor","middle","font-family","Verdana","y","55% 55% 55% 55% 55% 55%"],["id","gitwee-char1","fill","#eb6ba4",1,"gitwee-char"],["attributeType","XML","attributeName","dy","dur","3s","values","-15%; 0    ; -8% ; 0    ; -4% ; 0   ; -1.5% ; 0   ; 0","keyTimes","0 ; 0.03 ; 0.05 ; 0.07 ; 0.09; 0.12; 0.14; 0.16; 1","begin","1.0s;","repeatCount","indefinite"],["id","gitwee-char2","fill","#31b271",1,"gitwee-char"],["attributeType","XML","attributeName","dy","dur","3s","values","-15%; 0    ; -8% ; 0    ; -4% ; 0   ; -1.5% ; 0   ; 0","keyTimes","0 ; 0.03 ; 0.05 ; 0.07 ; 0.09; 0.12; 0.14; 0.16; 1","begin","1.8s;","repeatCount","indefinite"],["id","gitwee-char3","fill","#1db8ee",1,"gitwee-char"],["attributeType","XML","attributeName","dy","dur","3s","values","-15%; 0    ; -8% ; 0    ; -4% ; 0   ; -1.5% ; 0   ; 0","keyTimes","0 ; 0.03 ; 0.05 ; 0.07 ; 0.09; 0.12; 0.14; 0.16; 1","begin","2.6s;","repeatCount","indefinite"],["id","gitwee-char4","fill","#fff562",1,"gitwee-char"],["attributeType","XML","attributeName","dy","dur","3s","values","-15%; 0    ; -8% ; 0    ; -4% ; 0   ; -1.5% ; 0   ; 0","keyTimes","0 ; 0.03 ; 0.05 ; 0.07 ; 0.09; 0.12; 0.14; 0.16; 1","begin","1.4s;","repeatCount","indefinite"],["id","gitwee-char5","fill","#24b6b3",1,"gitwee-char"],["attributeType","XML","attributeName","dy","dur","3s","values","-15%; 0    ; -8% ; 0    ; -4% ; 0   ; -1.5% ; 0   ; 0","keyTimes","0 ; 0.03 ; 0.05 ; 0.07 ; 0.09; 0.12; 0.14; 0.16; 1","begin","2.2s;","repeatCount","indefinite"],["id","gitwee-char6","fill","#6357a3",1,"gitwee-char"],["attributeType","XML","attributeName","dy","dur","3s","values","-15%; 0    ; -8% ; 0    ; -4% ; 0   ; -1.5% ; 0   ; 0","keyTimes","0 ; 0.03 ; 0.05 ; 0.07 ; 0.09; 0.12; 0.14; 0.16; 1","begin","3.0s;","repeatCount","indefinite"]],template:function(e,i){if(e&1){let n=D();c(0,"div",4)(1,"div",5)(2,"div",6)(3,"button",7),N(4,"span",8),u(),c(5,"div",9,0),K(7,"async"),c(8,"gitwee-tag-navi",10,1),E("tagSelected",function(a){_(n);let l=$(9);return v(i.entriesSelected(l,a))})("tagUnselected",function(){_(n);let a=$(9);return v(i.entriesNotFound(a))}),u(),c(10,"gitwee-calendar-navi",11,2),E("nodeExpanded",function(a){_(n);let l=$(11);return v(i.entriesSelected(l,a))})("notFound",function(){_(n);let a=$(11);return v(i.entriesNotFound(a))}),u(),N(12,"app-external-banner",12),u()(),c(13,"div",13),C(14,rr,2,0,"div",14),K(15,"async"),N(16,"gitwee-timeline",15),u()()(),C(17,ar,29,1,"div",16)}e&2&&(g("@animationTrigger",void 0),s(5),le("top",X(7,10,i.sidebarStickyTop$),"px"),s(3),g("route$",i.gitweeRoute$)("urlPrefix",i.gitweeUrlPrefix),s(2),g("route$",i.gitweeRoute$)("urlPrefix",i.gitweeUrlPrefix),s(4),x(X(15,12,i.eventShowFireGitwee$)?14:-1),s(2),g("naviEntries$",i.targetTimeline$),s(),x(i.isLoading()?17:-1))},dependencies:[ve,Ce,Ct,Tt,wt,St,ge],styles:["#gitweeMainContainer[_ngcontent-%COMP%]{flex-direction:row-reverse}@media(min-width:768px){#gitweeSidebarNavBody[_ngcontent-%COMP%]{display:block}}@media not screen and (min-width:768px){#gitweeSidebarNavContainer[_ngcontent-%COMP%]{background-color:#cfdee7}}#gitweeSidebarNavContainer[_ngcontent-%COMP%]{text-align:left;z-index:10}#gitweeLoadingLogoMask[_ngcontent-%COMP%]{left:0%;top:0%;position:fixed;background:#8b7355;opacity:.75;width:100%;height:100%;text-align:center;z-index:99999999}#gitweeLogoMask[_ngcontent-%COMP%]{top:20%;position:relative}"],data:{animation:[Z("animationTrigger",[P(":enter",[T({opacity:0}),M("800ms ease-in-out",T({opacity:1}))])]),Z("loadingTrigger",[P(":enter",[T({transform:"translateY(-100%)",opacity:0}),M("800ms ease-in-out",T({transform:"none",opacity:"*"}))]),P(":leave",[M("800ms ease-in-out",T({transform:"translateY(-100%)",opacity:0}))])])]}})};var sr=[{path:"index.htm",redirectTo:""},{path:"jump/**",component:$i},{path:"",component:Dt,children:[{path:"timeline",children:[{path:"index.htm",redirectTo:""}]},{path:"timeline/:year",children:[{path:"index.htm",redirectTo:""}]},{path:"timeline/:year/:month",children:[{path:"index.htm",redirectTo:""}]},{path:"timeline/:year/:month/:day",children:[{path:"index.htm",redirectTo:""}]},{path:"tag/:tagkey",children:[{path:"index.htm",redirectTo:""}]},{path:"**",redirectTo:""}]}],Ft=class o{static \u0275fac=function(e){return new(e||o)};static \u0275mod=Be({type:o});static \u0275inj=$e({imports:[Ee.forChild(sr),Ee]})};var _n=class o{constructor(){Re("Dynamically loaded GitweeModule")}static \u0275fac=function(e){return new(e||o)};static \u0275mod=Be({type:o});static \u0275inj=$e({providers:[Q],imports:[Ft]})};export{_n as GitweeModule};
