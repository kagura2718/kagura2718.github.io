"use strict";(self.webpackChunkKaguraGithubPages=self.webpackChunkKaguraGithubPages||[]).push([[257],{9257:(Ot,v,m)=>{m.r(v),m.d(v,{CommentEntryComponent:()=>Rt});var a=m(5861),w=m(7081),r=m(108),t=m(9212),l=m(1626),T=m(6440),g=m(3158),x=m(5579),C=m(2425),p=m(6814),f=m(5123),Z=m(8022),F=m(9773),y=m(4664),E=m(7398),D=m(8645),A=m(2096),h=m(6323),B=m(8032),d=m(6223),k=m(2181),M=m(8441);function L(n,s){if(1&n){const e=t.EpF();t.TgZ(0,"div",9)(1,"button",10),t.NdJ("click",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.onClickDismiss())}),t.TgZ(2,"span",11),t._uU(3,"\xd7"),t.qZA()()()}}function b(n,s){1&n&&(t.TgZ(0,"div",12),t._uU(1,"OK!"),t.qZA())}function J(n,s){1&n&&(t.TgZ(0,"div",14),t._uU(1,"\u5165\u529b\u5fc5\u9808\u3067\u3059\u3002"),t.qZA())}function U(n,s){1&n&&(t.TgZ(0,"div",14),t._uU(1,"\u9577\u3059\u304e\u307e\u3059\u3002"),t.qZA())}function Q(n,s){1&n&&(t.TgZ(0,"div",14),t._uU(1,"\u77ed\u3059\u304e\u307e\u3059\u3002"),t.qZA())}function $(n,s){if(1&n&&(t.ynx(0),t.YNc(1,J,2,0,"div",13)(2,U,2,0,"div",13)(3,Q,2,0,"div",13),t.BQk()),2&n){const e=t.oxw();t.xp6(1),t.Q6J("ngIf",null==e.textareaControl.errors?null:e.textareaControl.errors.required),t.xp6(1),t.Q6J("ngIf",null==e.textareaControl.errors?null:e.textareaControl.errors.maxlength),t.xp6(1),t.Q6J("ngIf",null==e.textareaControl.errors?null:e.textareaControl.errors.minlength)}}let I=(()=>{class n{user;auth;toastr;funcs;tos;editModel;pageId;showDismiss=!1;replyId;requestSent=new t.vpe;editDismiss=new t.vpe;inputForm;constructor(e,o,i,u,c){this.user=e,this.auth=o,this.toastr=i,this.funcs=u,this.tos=c}get textareaControl(){return this.inputForm.get("commentText")}ngOnInit(){(0,r.eM)("CommentEditorComponent.OnInit()"),this.inputForm=new d.cw({}),this.inputForm.addControl("commentText",new d.NI(this.editModel?this.editModel.message:null,[d.kI.required]))}onClickDismiss(){(0,r.eM)("CommentEditorComponent.onClickDismiss()"),this.editDismiss.emit()}doNewPost(){var e=this;return(0,a.Z)(function*(){const o={message:e.textareaControl.value,pageId:e.pageId,replyId:e.replyId};return yield e.funcs.call("postComment",o)})()}doUpdatePost(e){var o=this;return(0,a.Z)(function*(){const i={pageId:o.pageId,commentId:e.id,message:o.textareaControl.value};return yield o.funcs.call("editComment",i)})()}onClickPostComment(){var e=this;(0,r.eM)("CommentEditorComponent.onClickPostComment()"),!this.inputForm.invalid&&(this.textareaControl.invalid||this.tos.confirmTos$(`${this.auth.myUid}/commentAgreement`,r.NZ.CommentServiceTosUrl).pipe((0,k.h)(o=>o)).subscribe(function(){var o=(0,a.Z)(function*(i){e.inputForm.disable();try{e.editModel?yield e.doUpdatePost(e.editModel):yield e.doNewPost(),e.toastr.info("\u6295\u7a3f\u3057\u307e\u3057\u305f\u3002(\u627f\u8a8d\u3055\u308c\u308b\u307e\u3067\u4ed6\u306e\u4eba\u306b\u306f\u8868\u793a\u3055\u308c\u307e\u305b\u3093\u3002)"),e.textareaControl.setValue(""),e.inputForm.markAsPristine(),e.inputForm.markAsUntouched(),e.requestSent.emit()}catch(u){e.toastr.error("message"in u?`\u6295\u7a3f\u306b\u5931\u6557\u3057\u307e\u3057\u305f\u3002( ${u.message} )`:"\u6295\u7a3f\u306b\u5931\u6557\u3057\u307e\u3057\u305f\u3002")}finally{e.inputForm.enable()}});return function(i){return o.apply(this,arguments)}}()))}static \u0275fac=function(o){return new(o||n)(t.Y36(h.K),t.Y36(l.e),t.Y36(C._W),t.Y36(g.c),t.Y36(M.F))};static \u0275cmp=t.Xpm({type:n,selectors:[["gitfire-comment-editor"]],inputs:{editModel:"editModel",pageId:"pageId",showDismiss:"showDismiss",replyId:"replyId"},outputs:{requestSent:"requestSent",editDismiss:"editDismiss"},decls:16,vars:14,consts:[["class","text-end",4,"ngIf"],[1,"input-group",3,"formGroup"],["title","\u3053\u306e\u540d\u524d\u3067\u6295\u7a3f\u306f\u8868\u793a\u3055\u308c\u307e\u3059\u3002","src","/assets/octicons/question.svg",1,"m-1","octicon-info","help-icon"],["disabled","",1,"m-3",3,"value"],[1,"m-3"],["autofocus","","name","commentText","formControlName","commentText","placeholder","\u6295\u7a3f\u3059\u308b\u30b3\u30e1\u30f3\u30c8\u3092\u3053\u3053\u306b\u66f8\u3044\u3066\u304f\u3060\u3055\u3044\u3002","required","","minlength","5","maxlength","65536",1,"p-3","form-control"],["class","valid-feedback",4,"ngIf"],[4,"ngIf"],["title","\u30b3\u30e1\u30f3\u30c8\u5185\u5bb9\u306f\u627f\u8a8d\u5f8c\u306b\u8868\u793a\u3055\u308c\u307e\u3059\u3002",1,"btn","btn-primary","m-2",3,"disabled","click"],[1,"text-end"],["type","button","aria-label","Close",1,"btn-close",3,"click"],["aria-hidden","true"],[1,"valid-feedback"],["class","invalid-feedback",4,"ngIf"],[1,"invalid-feedback"]],template:function(o,i){1&o&&(t.YNc(0,L,4,0,"div",0),t.TgZ(1,"div",1)(2,"div")(3,"label"),t._uU(4,"\u540d\u524d"),t._UZ(5,"img",2),t._uU(6,": "),t.qZA(),t._UZ(7,"input",3),t.ALo(8,"async"),t.qZA(),t.TgZ(9,"div",4),t._UZ(10,"textarea",5),t.YNc(11,b,2,0,"div",6)(12,$,4,3,"ng-container",7),t.qZA(),t.TgZ(13,"div")(14,"button",8),t.NdJ("click",function(){return i.onClickPostComment()}),t._uU(15,"\u6295\u7a3f\u3059\u308b"),t.qZA()()()),2&o&&(t.Q6J("ngIf",i.showDismiss),t.xp6(1),t.ekj("was-validated",i.textareaControl.dirty||i.textareaControl.touched),t.Q6J("formGroup",i.inputForm),t.xp6(6),t.s9C("value",t.lcZ(8,12,i.user.myNickname$())),t.xp6(2),t.Udp("width",100,"%"),t.xp6(1),t.Udp("height",8,"rem"),t.xp6(1),t.Q6J("ngIf",!i.textareaControl.invalid),t.xp6(1),t.Q6J("ngIf",i.textareaControl.invalid),t.xp6(2),t.Q6J("disabled",i.textareaControl.invalid||i.inputForm.disabled))},dependencies:[p.O5,d.Fj,d.JJ,d.JL,d.Q7,d.wO,d.nD,d.sg,d.u,p.Ov]})}return n})();function P(n,s){1&n&&t._UZ(0,"span",2)}function q(n,s){if(1&n&&(t.TgZ(0,"span",20)(1,"small",6),t.ALo(2,"date"),t._uU(3),t.ALo(4,"date"),t.qZA()()),2&n){const e=t.oxw().$implicit;t.xp6(1),t.s9C("title",t.xi3(2,2,e.updatedAt,"yyyy-MM-dd HH:mm")),t.xp6(2),t.hij("\u66f4\u65b0\u65e5: ",t.xi3(4,5,e.updatedAt,"yyyy-MM-dd"),"")}}function N(n,s){if(1&n&&(t.TgZ(0,"span",20)(1,"small"),t._uU(2),t.ALo(3,"date"),t.qZA()()),2&n){const e=t.oxw().$implicit;t.xp6(2),t.hij("\u627f\u8a8d\u65e5: ",t.xi3(3,1,e.decisionAt,"yyyy-MM-dd"),"")}}function Y(n,s){if(1&n){const e=t.EpF();t.TgZ(0,"a",32),t.NdJ("click",function(i){t.CHM(e);const u=t.oxw(2).$implicit,c=t.oxw(2);return t.KtG(c.onClickApprove(i,u))}),t._uU(1,"\u627f\u8a8d"),t.qZA()}}function H(n,s){if(1&n){const e=t.EpF();t.TgZ(0,"a",33),t.NdJ("click",function(i){t.CHM(e);const u=t.oxw(2).$implicit,c=t.oxw(2);return t.KtG(c.onClickApprove(i,u))}),t._uU(1,"\u7de8\u96c6\u627f\u8a8d"),t.qZA()}}function S(n,s){if(1&n){const e=t.EpF();t.TgZ(0,"a",34),t.NdJ("click",function(i){t.CHM(e);const u=t.oxw(2).$implicit,c=t.oxw(2);return t.KtG(c.onClickApprove(i,u))}),t._uU(1,"\u524a\u9664\u627f\u8a8d"),t.qZA()}}function R(n,s){if(1&n){const e=t.EpF();t.TgZ(0,"a",35),t.NdJ("click",function(i){t.CHM(e);const u=t.oxw(2).$implicit,c=t.oxw(2);return t.KtG(c.onClickReject(i,u))}),t._uU(1,"\u62d2\u5426"),t.qZA()}}function O(n,s){if(1&n){const e=t.EpF();t.TgZ(0,"a",36),t.NdJ("click",function(i){t.CHM(e);const u=t.oxw(2).$implicit,c=t.oxw(2);return t.KtG(c.onClickReject(i,u))}),t._uU(1,"\u7de8\u96c6\u62d2\u5426"),t.qZA()}}function K(n,s){if(1&n){const e=t.EpF();t.TgZ(0,"a",37),t.NdJ("click",function(i){t.CHM(e);const u=t.oxw(2).$implicit,c=t.oxw(2);return t.KtG(c.onClickReject(i,u))}),t._uU(1,"\u7de8\u96c6\u62d2\u5426"),t.qZA()}}function G(n,s){if(1&n){const e=t.EpF();t.TgZ(0,"a",38),t.NdJ("click",function(i){t.CHM(e);const u=t.oxw(2).$implicit,c=t.oxw(2);return t.KtG(c.onClickProtect(i,u))}),t._uU(1,"\u4fdd\u8b77"),t.qZA()}}function j(n,s){if(1&n){const e=t.EpF();t.TgZ(0,"a",39),t.NdJ("click",function(i){t.CHM(e);const u=t.oxw(2).$implicit,c=t.oxw(2);return t.KtG(c.onClickUnProtect(i,u))}),t._uU(1,"\u4fdd\u8b77\u89e3\u9664"),t.qZA()}}function W(n,s){if(1&n&&(t.TgZ(0,"span",21)(1,"span",22),t._uU(2,"\ufe19"),t.qZA(),t.TgZ(3,"div",23),t.YNc(4,Y,2,0,"a",24)(5,H,2,0,"a",25)(6,S,2,0,"a",26)(7,R,2,0,"a",27)(8,O,2,0,"a",28)(9,K,2,0,"a",29)(10,G,2,0,"a",30)(11,j,2,0,"a",31),t.qZA()()),2&n){const e=t.oxw().$implicit;t.xp6(4),t.Q6J("ngIf","pending"===e.store.state),t.xp6(1),t.Q6J("ngIf","approved"===e.store.state&&"edit-request"===e.store.editedState),t.xp6(1),t.Q6J("ngIf","approved"===e.store.state&&"delete-request"===e.store.editedState),t.xp6(1),t.Q6J("ngIf","pending"===e.store.state),t.xp6(1),t.Q6J("ngIf","approved"===e.store.state&&"edit-request"===e.store.editedState),t.xp6(1),t.Q6J("ngIf","approved"===e.store.state&&"delete-request"===e.store.editedState),t.xp6(1),t.Q6J("ngIf","approved"===e.store.state&&!e.store.isAdminEdit),t.xp6(1),t.Q6J("ngIf","approved"===e.store.state&&e.store.isAdminEdit)}}function X(n,s){1&n&&t._UZ(0,"gitfire-user-box",40),2&n&&t.Q6J("userPublic",s.$implicit)}function V(n,s){1&n&&(t.TgZ(0,"span",41),t._uU(1,"\u7ba1\u7406\u4eba\u306b\u3088\u308b\u4fdd\u8b77"),t.qZA())}function z(n,s){1&n&&(t.TgZ(0,"span",42),t._uU(1,"\u5374\u4e0b\u3055\u308c\u305f\u30b3\u30e1\u30f3\u30c8\u3067\u3059\u3002"),t.qZA())}function tt(n,s){1&n&&(t.TgZ(0,"span",43),t._uU(1,"\u627f\u8a8d\u5f85\u3061\u306e\u30b3\u30e1\u30f3\u30c8\u3067\u3059\u3002"),t.qZA())}function et(n,s){1&n&&(t.TgZ(0,"span",43),t._uU(1,"\u524a\u9664\u3055\u308c\u307e\u3057\u305f\u3002"),t.qZA())}function nt(n,s){1&n&&(t.TgZ(0,"span",42),t._uU(1,"\u7de8\u96c6\u7533\u8acb\u304c\u5374\u4e0b\u3055\u308c\u307e\u3057\u305f\u3002"),t.qZA())}function it(n,s){1&n&&(t.TgZ(0,"span",42),t._uU(1,"\u524a\u9664\u7533\u8acb\u304c\u5374\u4e0b\u3055\u308c\u307e\u3057\u305f\u3002"),t.qZA())}function ot(n,s){1&n&&(t.TgZ(0,"span",42),t._uU(1,"\u524a\u9664\u7533\u8acb\u4e2d\u3067\u3059\u3002"),t.qZA())}function ut(n,s){1&n&&(t.TgZ(0,"span",43),t._uU(1,"\u7de8\u96c6\u7533\u8acb\u4e2d\u3067\u3059\u3002"),t.qZA())}function st(n,s){if(1&n&&(t.ynx(0)(1,13),t.YNc(2,nt,2,0,"span",14)(3,it,2,0,"span",14)(4,ot,2,0,"span",14)(5,ut,2,0,"span",15),t.BQk()()),2&n){const e=t.oxw().$implicit;t.xp6(1),t.Q6J("ngSwitch",e.store.editedState),t.xp6(1),t.Q6J("ngSwitchCase","edit-rejected"),t.xp6(1),t.Q6J("ngSwitchCase","delete-rejected"),t.xp6(1),t.Q6J("ngSwitchCase","delete-request"),t.xp6(1),t.Q6J("ngSwitchCase","edit-request")}}function ct(n,s){if(1&n){const e=t.EpF();t.ynx(0),t.TgZ(1,"gitfire-comment-editor",45),t.NdJ("requestSent",function(){t.CHM(e);const i=t.oxw(3).$implicit,u=t.oxw(2);return t.KtG(u.onEditRequested(i))})("editDismiss",function(){t.CHM(e);const i=t.oxw(3).$implicit,u=t.oxw(2);return t.KtG(u.onEditDismissed(i))}),t.qZA(),t.BQk()}if(2&n){const e=s.$implicit,o=t.oxw(5);t.xp6(1),t.Q6J("pageId",o.pageId)("editModel",e)("showDismiss",!0)}}function rt(n,s){if(1&n&&(t.ynx(0),t.YNc(1,ct,2,3,"ng-container",1),t.ALo(2,"async"),t.BQk()),2&n){const e=t.oxw(2).$implicit;t.xp6(1),t.Q6J("ngIf",t.lcZ(2,1,e.editor$))}}function mt(n,s){if(1&n&&t._UZ(0,"div",46),2&n){const e=t.oxw(2).$implicit;t.Q6J("innerHTML",e.store.messageHtml,t.oJD)}}function _t(n,s){if(1&n&&(t.TgZ(0,"div"),t.YNc(1,rt,3,3,"ng-container",1)(2,mt,1,1,"div",44),t.qZA()),2&n){const e=t.oxw().$implicit;t.xp6(1),t.Q6J("ngIf",e.isEditing),t.xp6(1),t.Q6J("ngIf","approved"===e.store.state&&!e.isEditing)}}function at(n,s){if(1&n&&t._UZ(0,"div",46),2&n){const e=t.oxw(2).$implicit;t.Q6J("innerHTML",e.store.messageHtml,t.oJD)}}function dt(n,s){if(1&n&&(t.ynx(0),t.YNc(1,at,1,1,"div",44),t.BQk()),2&n){const e=t.oxw().$implicit;t.xp6(1),t.Q6J("ngIf","approved"===e.store.state)}}function pt(n,s){1&n&&t._UZ(0,"span",2)}function lt(n,s){1&n&&t._UZ(0,"div",53),2&n&&t.Q6J("innerHTML",s.$implicit.messageHtml,t.oJD)}function gt(n,s){if(1&n&&(t.TgZ(0,"div",51)(1,"span",43),t._uU(2,"\u7533\u8acb\u4e2d\u306e\u30e1\u30c3\u30bb\u30fc\u30b8"),t.qZA(),t.YNc(3,lt,1,1,"div",52),t.ALo(4,"async"),t.qZA()),2&n){t.oxw();const e=t.MAs(2),o=t.oxw().$implicit;t.xp6(3),t.Q6J("ngIf",t.lcZ(4,2,o.privateMessage$))("ngIfElse",e)}}function Ct(n,s){1&n&&t._UZ(0,"div",53),2&n&&t.Q6J("innerHTML",s.$implicit.messageHtml,t.oJD)}function ft(n,s){if(1&n&&(t.TgZ(0,"div",54)(1,"span",42),t._uU(2,"\u5374\u4e0b\u3055\u308c\u305f\u30e1\u30c3\u30bb\u30fc\u30b8"),t.qZA(),t.YNc(3,Ct,1,1,"div",52),t.ALo(4,"async"),t.qZA()),2&n){t.oxw();const e=t.MAs(2),o=t.oxw().$implicit;t.xp6(3),t.Q6J("ngIf",t.lcZ(4,2,o.privateMessage$))("ngIfElse",e)}}function vt(n,s){1&n&&t._UZ(0,"div",53),2&n&&t.Q6J("innerHTML",s.$implicit.messageHtml,t.oJD)}function xt(n,s){if(1&n&&(t.TgZ(0,"div",51)(1,"span",43),t._uU(2,"\u7de8\u96c6\u7533\u8acb\u4e2d\u306e\u30e1\u30c3\u30bb\u30fc\u30b8"),t.qZA(),t.YNc(3,vt,1,1,"div",52),t.ALo(4,"async"),t.qZA()),2&n){t.oxw(2);const e=t.MAs(2),o=t.oxw().$implicit;t.xp6(3),t.Q6J("ngIf",t.lcZ(4,2,o.privateMessage$))("ngIfElse",e)}}function Et(n,s){1&n&&t._UZ(0,"div",53),2&n&&t.Q6J("innerHTML",s.$implicit.messageHtml,t.oJD)}function At(n,s){if(1&n&&(t.TgZ(0,"div",54)(1,"span",42),t._uU(2,"\u7de8\u96c6\u7533\u8acb\u304c\u5374\u4e0b\u3055\u308c\u305f\u30e1\u30c3\u30bb\u30fc\u30b8"),t.qZA(),t.YNc(3,Et,1,1,"div",52),t.ALo(4,"async"),t.qZA()),2&n){t.oxw(2);const e=t.MAs(2),o=t.oxw().$implicit;t.xp6(3),t.Q6J("ngIf",t.lcZ(4,2,o.privateMessage$))("ngIfElse",e)}}function ht(n,s){if(1&n&&(t.TgZ(0,"div"),t.YNc(1,xt,5,4,"div",49)(2,At,5,4,"div",50),t.qZA()),2&n){const e=t.oxw(2).$implicit;t.xp6(1),t.Q6J("ngIf","edit-request"===e.store.editedState),t.xp6(1),t.Q6J("ngIf","edit-rejected"===e.store.editedState)}}function It(n,s){if(1&n&&(t.TgZ(0,"div",47),t.YNc(1,pt,1,0,"ng-template",null,48,t.W1O)(3,gt,5,4,"div",49)(4,ft,5,4,"div",50)(5,ht,3,2,"div",1),t.qZA()),2&n){const e=t.oxw().$implicit;t.xp6(3),t.Q6J("ngIf","pending"===e.store.state),t.xp6(1),t.Q6J("ngIf","rejected"===e.store.state),t.xp6(1),t.Q6J("ngIf","approved"===e.store.state)}}function wt(n,s){if(1&n){const e=t.EpF();t.ynx(0),t.TgZ(1,"button",55),t.NdJ("click",function(i){t.CHM(e);const u=t.oxw().$implicit,c=t.oxw(2);return t.KtG(c.onClickReply(i,u))}),t._uU(2,"\u8fd4\u4fe1"),t.qZA(),t.BQk()}}function Tt(n,s){if(1&n){const e=t.EpF();t.ynx(0),t.TgZ(1,"button",56),t.NdJ("click",function(i){t.CHM(e);const u=t.oxw().$implicit,c=t.oxw(2);return t.KtG(c.onClickDelete(i,u))}),t._uU(2,"\u524a\u9664"),t.qZA(),t.TgZ(3,"button",57),t.NdJ("click",function(i){t.CHM(e);const u=t.oxw().$implicit,c=t.oxw(2);return t.KtG(c.onClickEdit(i,u))}),t._uU(4,"\u7de8\u96c6"),t.qZA(),t.BQk()}}function Zt(n,s){if(1&n){const e=t.EpF();t.TgZ(0,"div",18)(1,"gitfire-comment-editor",58),t.NdJ("requestSent",function(){t.CHM(e);const i=t.oxw().$implicit,u=t.oxw(2);return t.KtG(u.onReplyRequested(i))})("editDismiss",function(){t.CHM(e);const i=t.oxw().$implicit,u=t.oxw(2);return t.KtG(u.onReplyDismissed(i))}),t.qZA()()}if(2&n){const e=t.oxw().$implicit,o=t.oxw(2);t.xp6(1),t.Q6J("showDismiss",!0)("replyId",e.store.id)("pageId",o.pageId)}}function Ft(n,s){if(1&n&&(t.TgZ(0,"div",5)(1,"div")(2,"div")(3,"span",6),t.ALo(4,"date"),t._uU(5),t.ALo(6,"date"),t.qZA(),t.YNc(7,q,5,8,"span",7)(8,N,4,4,"span",7)(9,W,12,8,"span",8),t.qZA(),t.TgZ(10,"div",9),t._uU(11,"\u30e6\u30fc\u30b6: "),t.YNc(12,X,1,1,"gitfire-user-box",10),t.ALo(13,"async"),t.qZA()(),t.TgZ(14,"div",11)(15,"div"),t.YNc(16,V,2,0,"span",12),t.ynx(17,13),t.YNc(18,z,2,0,"span",14)(19,tt,2,0,"span",15)(20,et,2,0,"span",15)(21,st,6,5,"ng-container",16),t.BQk(),t.qZA(),t.TgZ(22,"div"),t.YNc(23,_t,3,2,"div",1)(24,dt,2,1,"ng-container",1),t.qZA(),t.YNc(25,It,6,3,"div",17),t.qZA(),t.TgZ(26,"div",18),t.YNc(27,wt,3,0,"ng-container",1)(28,Tt,5,0,"ng-container",1),t.qZA(),t.YNc(29,Zt,2,3,"div",19),t.qZA()),2&n){const e=s.$implicit,o=s.odd,i=t.oxw(2);t.Udp("background",o?i.ACCENT_COLOR:null),t.MGl("id","appGitfireComment-",e.store.id,""),t.xp6(3),t.s9C("title",t.xi3(4,21,e.publishAt,"yyyy-MM-dd HH:mm")),t.xp6(2),t.hij("\u6295\u7a3f\u65e5\u6642: ",t.xi3(6,24,e.publishAt,"yyyy-MM-dd HH:mm"),""),t.xp6(2),t.Q6J("ngIf",e.isEdited),t.xp6(1),t.Q6J("ngIf",e.decisionAt),t.xp6(1),t.Q6J("ngIf",e.isDisplayAdmin),t.xp6(3),t.Q6J("ngIf",t.lcZ(13,27,e.user$)),t.xp6(4),t.Q6J("ngIf",e.store.isAdminEdit),t.xp6(1),t.Q6J("ngSwitch",e.store.state),t.xp6(1),t.Q6J("ngSwitchCase","rejected"),t.xp6(1),t.Q6J("ngSwitchCase","pending"),t.xp6(1),t.Q6J("ngSwitchCase","deleted"),t.xp6(1),t.Q6J("ngSwitchCase","approved"),t.xp6(2),t.Q6J("ngIf",e.isOwn),t.xp6(1),t.Q6J("ngIf",!e.isOwn),t.xp6(1),t.Q6J("ngIf",e.isOwn||e.isDisplayAdmin),t.xp6(2),t.Q6J("ngIf",e.canReply),t.xp6(1),t.Q6J("ngIf",e.canChange),t.xp6(1),t.Q6J("ngIf",e.isReplying)}}function yt(n,s){if(1&n){const e=t.EpF();t.TgZ(0,"button",59),t.NdJ("click",function(i){t.CHM(e);const u=t.oxw(2);return t.KtG(u.onClickMoreComment(i))}),t._uU(1,"\u3055\u3089\u306b\u8aad\u307f\u8fbc\u3080"),t.qZA()}}function Dt(n,s){if(1&n&&(t.TgZ(0,"div"),t.YNc(1,Ft,30,29,"div",3)(2,yt,2,0,"button",4),t.qZA()),2&n){const e=t.oxw();t.xp6(1),t.Q6J("ngForOf",e.comments),t.xp6(1),t.Q6J("ngIf",e.maybeMoreComment)}}class Bt{store;updatedAt;publishAt;decisionAt;isEdited;privateMessage$;editor$;user$;isEditing;isReplying;isDisplayAdmin;canReply;canChange;isOwn}let kt=(()=>{class n{auth;user;dialog;store;funcs;toastr;ACCENT_COLOR=r.NZ.themaColor.EVEN;destroy$=new D.x;pageId;isPageProtect=!1;comments$;comments=[];commentData={};maybeMoreComment=!1;isLoading=!0;constructor(e,o,i,u,c,_){this.auth=e,this.user=o,this.dialog=i,this.store=u,this.funcs=c,this.toastr=_}ngOnDestroy(){(0,r.eM)("CommentListComponent.OnDestroy()"),this.destroy$.next()}ngOnInit(){(0,r.eM)("CommentListComponent.OnInit()"),this.comments$=this.store.doc(`/comment/v1/page/${this.pageId}`).collection("public",e=>e.orderBy("publishAt","desc").limit(30)).valueChanges({idField:"id"}),this.comments$.pipe((0,F.R)(this.destroy$)).subscribe(e=>{for(let o of e){let i=this.commentData[o.id];i||(i=new Bt,this.comments.push(i)),i.publishAt=o.publishAt.toDate(),i.updatedAt=o.updatedAt.toDate();const u=i.updatedAt.getTime()-i.publishAt.getTime();i.isEdited="none"!==o.editedState&&Math.abs(u)>5,o.decisionAt&&(i.decisionAt=o.decisionAt.toDate()),i.user$=this.user.user$(o.owner),i.store=o,this.auth.myUid===o.owner||this.auth.isAdmin?i.privateMessage$||(i.privateMessage$=(0,A.of)({pageId:this.pageId,commentId:o.id}).pipe((0,y.w)(_=>this.funcs.call("readPrivateComment",_)),(0,E.U)(_=>_)),i.editor$=i.privateMessage$.pipe((0,E.U)(_=>({id:_.id,message:_.message,images:_.images})))):i.editor$=(0,A.of)({id:o.id,message:o.message,images:o.images}),i.isDisplayAdmin=this.auth.isAdmin,i.isOwn=o.owner===this.auth.myUid,i.canReply=!this.isPageProtect&&!i.isOwn&&"approved"==o.state&&!o.isProtect,i.canChange=i.isOwn&&!o.isAdminEdit&&!o.isProtect&&"approved"===o.state,this.commentData[o.id]=i}this.comments=this.comments.sort((o,i)=>i.publishAt.getTime()-o.publishAt.getTime()),this.isLoading=!1})}onClickEdit(e,o){(0,r.eM)("CommentListComponent.onClickEdit()"),o.isEditing=!0}doDeleteRequest(e){var o=this;return(0,a.Z)(function*(){const i={pageId:o.pageId,commentId:e.store.id};try{yield o.funcs.call("deleteComment",i),o.toastr.info("\u524a\u9664\u7533\u8acb\u3057\u307e\u3057\u305f\u3002\u627f\u8a8d\u5f8c\u306b\u524a\u9664\u3055\u308c\u307e\u3059\u3002")}catch(u){(0,r.wb)("Error while delete request",u);const c=u instanceof Error?u.message:"Unknown error";o.toastr.error(`\u524a\u9664\u306b\u5931\u6557\u3057\u307e\u3057\u305f\u3002 ( ${c} )`)}})()}onClickDelete(e,o){var i=this;return(0,a.Z)(function*(){(0,r.eM)("onClickDelete()",e,o);const u=i.dialog.createHtmlBuilder(),c=new Z.ww("\n<div>\n\u7ba1\u7406\u4eba\u306b\u627f\u8a8d\u3055\u308c\u305f\u5f8c\u3067\u524a\u9664\u3055\u308c\u307e\u3059\u3002\u3088\u308d\u3057\u3044\u3067\u3059\u304b\uff1f\n</div>\n");u.setMessage(c).setType(f.iR.Warn).setSize(f.PW.Default).setTitle("\u78ba\u8a8d").okButton((0,a.Z)(function*(){yield i.doDeleteRequest(o)})).cancelButton(()=>{}).open()})()}onClickReply(e,o){(0,r.eM)("CommentListComponent.onClickReply()",e,o),o.isReplying=!0}onEditDismissed(e){(0,r.eM)("CommentListComponent.onEditDismissed()"),e.isEditing=!1}onEditRequested(e){(0,r.eM)("CommentListComponent.onEditRequested()"),e.isEditing=!1}onReplyRequested(e){(0,r.eM)("CommentListComponent.onReplyRequested()"),e.isReplying=!1}onReplyDismissed(e){(0,r.eM)("CommentListComponent.onReplyDismissed()"),e.isReplying=!1}onClickMoreComment(e){(0,r.eM)("CommentListComponent.onClickMoreComment()")}onClickApprove(e,o){var i=this;return(0,a.Z)(function*(){(0,r.eM)("CommentListComponent.onClickApprove()");const u={pageId:i.pageId,commentId:o.store.id};try{yield i.funcs.call("approveComment",u),i.toastr.info("\u627f\u8a8d\u3057\u307e\u3057\u305f\u3002")}catch(c){(0,r.wb)("Error while approve",c);const _=c instanceof Error?c.message:"Unknown error";i.toastr.error(`\u627f\u8a8d\u3067\u304d\u307e\u305b\u3093\u3067\u3057\u305f\u3002 ( ${_} )`)}})()}onClickReject(e,o){var i=this;return(0,a.Z)(function*(){(0,r.eM)("CommentListComponent.onClickReject()");const u={pageId:i.pageId,commentId:o.store.id};try{yield i.funcs.call("rejectComment",u),i.toastr.info("\u5374\u4e0b\u3057\u307e\u3057\u305f\u3002")}catch(c){(0,r.wb)("Error while reject",c);const _=c instanceof Error?c.message:"Unknown error";i.toastr.error(`\u5374\u4e0b\u3067\u304d\u307e\u305b\u3093\u3067\u3057\u305f\u3002 ( ${_} )`)}})()}onClickProtect(e,o){var i=this;return(0,a.Z)(function*(){(0,r.eM)("CommentListComponent.onClickProtect()");const u={pageId:i.pageId,commentId:o.store.id};try{yield i.funcs.call("protectComment",u),i.toastr.info("\u4fdd\u8b77\u3057\u307e\u3057\u305f\u3002")}catch(c){(0,r.wb)("Error while protect",c);const _=c instanceof Error?c.message:"Unknown error";i.toastr.error(`\u4fdd\u8b77\u3067\u304d\u307e\u305b\u3093\u3067\u3057\u305f\u3002 ( ${_} )`)}})()}onClickUnProtect(e,o){var i=this;return(0,a.Z)(function*(){(0,r.eM)("CommentListComponent.onClickUnProtect()");const u={pageId:i.pageId,commentId:o.store.id,unprotect:!0};try{yield i.funcs.call("protectComment",u),i.toastr.info("\u4fdd\u8b77\u89e3\u9664\u3057\u307e\u3057\u305f\u3002")}catch(c){(0,r.wb)("Error while unprotect",c);const _=c instanceof Error?c.message:"Unknown error";i.toastr.error(`\u4fdd\u8b77\u89e3\u9664\u3067\u304d\u307e\u305b\u3093\u3067\u3057\u305f\u3002 ( ${_} )`)}})()}static \u0275fac=function(o){return new(o||n)(t.Y36(l.e),t.Y36(h.K),t.Y36(f.xA),t.Y36(x.ST),t.Y36(g.c),t.Y36(C._W))};static \u0275cmp=t.Xpm({type:n,selectors:[["gitfire-comment-list"]],inputs:{pageId:"pageId",isPageProtect:"isPageProtect"},decls:2,vars:2,consts:[["class","spinner-border text-primary","role","status",4,"ngIf"],[4,"ngIf"],["role","status",1,"spinner-border","text-primary"],[3,"id","background",4,"ngFor","ngForOf"],["class","btn btn-primary","title","\u53e4\u3044\u6295\u7a3f\u3092\u3055\u3089\u306b\u8aad\u307f\u8fbc\u307f\u307e\u3059\u3002",3,"click",4,"ngIf"],[3,"id"],[3,"title"],["class","mx-1",4,"ngIf"],["class","mx-2","style","position: absolute; right: 0px;","data-bs-toggle","dropdown",4,"ngIf"],[2,"height","2rem"],[3,"userPublic",4,"ngIf"],[1,"m-1"],["class","border border-danger text-danger m-1 p-1",4,"ngIf"],[3,"ngSwitch"],["class","text-warning",4,"ngSwitchCase"],["class","text-info",4,"ngSwitchCase"],[4,"ngSwitchCase"],["class","p-2",4,"ngIf"],[1,"m-2"],["class","m-2",4,"ngIf"],[1,"mx-1"],["data-bs-toggle","dropdown",1,"mx-2",2,"position","absolute","right","0px"],[1,"gitweeMenuItem"],[1,"dropdown-menu"],["class","text-info dropdown-item gitweeMenuItem","title","\u4fdd\u7559\u72b6\u614b\u306e\u30b3\u30e1\u30f3\u30c8\u3092\u627f\u8a8d\u3057\u307e\u3059\u3002",3,"click",4,"ngIf"],["class","text-info dropdown-item gitweeMenuItem","title","\u7de8\u96c6\u7533\u8acb\u3055\u308c\u305f\u30b3\u30e1\u30f3\u30c8\u3092\u627f\u8a8d\u3057\u307e\u3059\u3002",3,"click",4,"ngIf"],["class","text-info dropdown-item gitweeMenuItem","title","\u524a\u9664\u7533\u8acb\u3055\u308c\u305f\u30b3\u30e1\u30f3\u30c8\u3092\u627f\u8a8d\u3057\u307e\u3059\u3002",3,"click",4,"ngIf"],["class","text-warning dropdown-item gitweeMenuItem","title","\u4fdd\u7559\u72b6\u614b\u306e\u30b3\u30e1\u30f3\u30c8\u3092\u62d2\u5426\u3057\u307e\u3059\u3002",3,"click",4,"ngIf"],["class","text-warning dropdown-item gitweeMenuItem","title","\u7de8\u96c6\u7533\u8acb\u3055\u308c\u305f\u30b3\u30e1\u30f3\u30c8\u3092\u62d2\u5426\u3057\u307e\u3059\u3002",3,"click",4,"ngIf"],["class","text-warning dropdown-item gitweeMenuItem","title","\u524a\u9664\u7533\u8acb\u3055\u308c\u305f\u30b3\u30e1\u30f3\u30c8\u3092\u62d2\u5426\u3057\u307e\u3059\u3002",3,"click",4,"ngIf"],["class","text-danger dropdown-item gitweeMenuItem","title","\u30b3\u30e1\u30f3\u30c8\u3092\u4fdd\u8b77\u3057\u307e\u3059\u3002",3,"click",4,"ngIf"],["class","text-danger dropdown-item gitweeMenuItem","title","\u30b3\u30e1\u30f3\u30c8\u4fdd\u8b77\u3092\u89e3\u9664\u3057\u307e\u3059\u3002",3,"click",4,"ngIf"],["title","\u4fdd\u7559\u72b6\u614b\u306e\u30b3\u30e1\u30f3\u30c8\u3092\u627f\u8a8d\u3057\u307e\u3059\u3002",1,"text-info","dropdown-item","gitweeMenuItem",3,"click"],["title","\u7de8\u96c6\u7533\u8acb\u3055\u308c\u305f\u30b3\u30e1\u30f3\u30c8\u3092\u627f\u8a8d\u3057\u307e\u3059\u3002",1,"text-info","dropdown-item","gitweeMenuItem",3,"click"],["title","\u524a\u9664\u7533\u8acb\u3055\u308c\u305f\u30b3\u30e1\u30f3\u30c8\u3092\u627f\u8a8d\u3057\u307e\u3059\u3002",1,"text-info","dropdown-item","gitweeMenuItem",3,"click"],["title","\u4fdd\u7559\u72b6\u614b\u306e\u30b3\u30e1\u30f3\u30c8\u3092\u62d2\u5426\u3057\u307e\u3059\u3002",1,"text-warning","dropdown-item","gitweeMenuItem",3,"click"],["title","\u7de8\u96c6\u7533\u8acb\u3055\u308c\u305f\u30b3\u30e1\u30f3\u30c8\u3092\u62d2\u5426\u3057\u307e\u3059\u3002",1,"text-warning","dropdown-item","gitweeMenuItem",3,"click"],["title","\u524a\u9664\u7533\u8acb\u3055\u308c\u305f\u30b3\u30e1\u30f3\u30c8\u3092\u62d2\u5426\u3057\u307e\u3059\u3002",1,"text-warning","dropdown-item","gitweeMenuItem",3,"click"],["title","\u30b3\u30e1\u30f3\u30c8\u3092\u4fdd\u8b77\u3057\u307e\u3059\u3002",1,"text-danger","dropdown-item","gitweeMenuItem",3,"click"],["title","\u30b3\u30e1\u30f3\u30c8\u4fdd\u8b77\u3092\u89e3\u9664\u3057\u307e\u3059\u3002",1,"text-danger","dropdown-item","gitweeMenuItem",3,"click"],[3,"userPublic"],[1,"border","border-danger","text-danger","m-1","p-1"],[1,"text-warning"],[1,"text-info"],["class","p-2",3,"innerHTML",4,"ngIf"],[3,"pageId","editModel","showDismiss","requestSent","editDismiss"],[1,"p-2",3,"innerHTML"],[1,"p-2"],["loadingMessage",""],["class","border border-info",4,"ngIf"],["class","border border-warning",4,"ngIf"],[1,"border","border-info"],[3,"innerHTML",4,"ngIf","ngIfElse"],[3,"innerHTML"],[1,"border","border-warning"],["title","\u3053\u306e\u30b3\u30e1\u30f3\u30c8\u3078\u8fd4\u4fe1\u3057\u307e\u3059\u3002",1,"btn","btn-primary","m-1",3,"click"],["title","\u6295\u7a3f\u306e\u524a\u9664\u3092\u7533\u8acb\u3057\u307e\u3059\u3002",1,"btn","btn-warning","m-1",3,"click"],["title","\u30b3\u30e1\u30f3\u30c8\u3092\u7de8\u96c6\u3057\u307e\u3059\u3002",1,"btn","btn-secondary","m-1",3,"click"],[3,"showDismiss","replyId","pageId","requestSent","editDismiss"],["title","\u53e4\u3044\u6295\u7a3f\u3092\u3055\u3089\u306b\u8aad\u307f\u8fbc\u307f\u307e\u3059\u3002",1,"btn","btn-primary",3,"click"]],template:function(o,i){1&o&&t.YNc(0,P,1,0,"span",0)(1,Dt,3,2,"div",1),2&o&&(t.Q6J("ngIf",i.isLoading),t.xp6(1),t.Q6J("ngIf",i.comments))},dependencies:[p.sg,p.O5,p.RF,p.n9,B.a,I,p.Ov,p.uU],styles:[".gitweeMenuItem[_ngcontent-%COMP%]{cursor:pointer}"]})}return n})();function Mt(n,s){1&n&&t._UZ(0,"span",2)}function Lt(n,s){1&n&&(t.TgZ(0,"div",7),t._uU(1,"\u30b3\u30e1\u30f3\u30c8\u306f\u3042\u308a\u307e\u305b\u3093"),t.qZA())}function bt(n,s){if(1&n){const e=t.EpF();t.TgZ(0,"button",11),t.NdJ("click",function(){t.CHM(e);const i=t.oxw(4);return t.KtG(i.onClickProtect())}),t._uU(1,"\u30da\u30fc\u30b8\u3092\u4fdd\u8b77"),t.qZA()}}function Jt(n,s){if(1&n){const e=t.EpF();t.TgZ(0,"button",12),t.NdJ("click",function(){t.CHM(e);const i=t.oxw(4);return t.KtG(i.onClickUnProtect())}),t._uU(1,"\u4fdd\u8b77\u3092\u89e3\u9664"),t.qZA()}}function Ut(n,s){if(1&n&&(t.ynx(0),t.YNc(1,bt,2,0,"button",9)(2,Jt,2,0,"button",10),t.BQk()),2&n){const e=t.oxw().$implicit;t.xp6(1),t.Q6J("ngIf",!e.isProtect),t.xp6(1),t.Q6J("ngIf",e.isProtect)}}function Qt(n,s){1&n&&(t.TgZ(0,"span",14)(1,"span",15),t._uU(2,"\u30da\u30fc\u30b8\u306f\u4fdd\u8b77\u3055\u308c\u3066\u3044\u307e\u3059"),t.qZA()())}function $t(n,s){if(1&n&&(t.ynx(0),t.YNc(1,Qt,3,0,"span",13),t.BQk()),2&n){const e=t.oxw().$implicit;t.xp6(1),t.Q6J("ngIf",e.isProtect)}}function Pt(n,s){if(1&n){const e=t.EpF();t.ynx(0),t.TgZ(1,"button",16),t.NdJ("click",function(i){t.CHM(e);const u=t.oxw(3);return t.KtG(u.onClickWatchPage(i,!0))}),t._uU(2,"Watch(\u30c6\u30b9\u30c8\u4e2d)"),t.qZA(),t.TgZ(3,"button",17),t.NdJ("click",function(i){t.CHM(e);const u=t.oxw(3);return t.KtG(u.onClickWatchPage(i,!1))}),t._uU(4,"Unwatch(\u30c6\u30b9\u30c8\u4e2d)"),t.qZA(),t.BQk()}}function qt(n,s){if(1&n&&(t.TgZ(0,"span",20),t._uU(1),t.qZA()),2&n){const e=t.oxw(2).$implicit;t.xp6(1),t.hij("(\u4fdd\u7559 ",e.countPending," \u4ef6)")}}function Nt(n,s){if(1&n&&(t.TgZ(0,"div",18)(1,"span"),t._uU(2),t.qZA(),t.YNc(3,qt,2,1,"span",19),t.qZA()),2&n){const e=t.oxw().$implicit;t.xp6(2),t.hij("",e.countAll," \u4ef6\u306e\u30b3\u30e1\u30f3\u30c8"),t.xp6(1),t.Q6J("ngIf",e.countPending>0)}}function Yt(n,s){if(1&n&&(t.TgZ(0,"div")(1,"div",7),t.YNc(2,Ut,3,2,"ng-container",1)(3,$t,2,1,"ng-container",1)(4,Pt,5,0,"ng-container",1),t.qZA(),t.YNc(5,Nt,4,2,"div",8),t.qZA()),2&n){const e=s.$implicit;t.oxw();const o=t.MAs(2),i=t.oxw();t.xp6(2),t.Q6J("ngIf",i.auth.isAdmin),t.xp6(1),t.Q6J("ngIf",!i.auth.isAdmin),t.xp6(1),t.Q6J("ngIf",i.auth.hasMessaging),t.xp6(1),t.Q6J("ngIf",e.countAll>0)("ngIfElse",o)}}function Ht(n,s){if(1&n&&t._UZ(0,"gitfire-comment-editor",21),2&n){const e=t.oxw(2);t.Q6J("pageId",e.pageId)}}function St(n,s){if(1&n&&(t.TgZ(0,"div"),t.YNc(1,Lt,2,0,"ng-template",null,3,t.W1O)(3,Yt,6,5,"div",4),t.ALo(4,"async"),t.TgZ(5,"div"),t.YNc(6,Ht,1,1,"gitfire-comment-editor",5),t.ALo(7,"async"),t._UZ(8,"gitfire-comment-list",6),t.ALo(9,"async"),t.qZA()()),2&n){const e=t.MAs(2),o=t.oxw();let i,u;t.xp6(3),t.Q6J("ngIf",t.lcZ(4,5,o.pageInfo$))("ngIfElse",e),t.xp6(3),t.Q6J("ngIf",!(null!=(i=t.lcZ(7,7,o.pageInfo$))&&i.isProtect)),t.xp6(2),t.Q6J("pageId",o.pageId)("isPageProtect",null==(u=t.lcZ(9,9,o.pageInfo$))?null:u.isProtect)}}let Rt=(()=>{class n{auth;router;funcs;store;toastr;pagePath;pageJson;pageInfo$;pageId;constructor(e,o,i,u,c){this.auth=e,this.router=o,this.funcs=i,this.store=u,this.toastr=c}pagePath2PageKey(e){const o=`${r.NZ.PAGE_DATA}/`,i=o.length,u=e.jsonPath;if(!u.startsWith(o))throw new Error(`Not a supported path ${u}`);return u.substring(i-1)}buildLeafUrl(){const e=this.pageJson;return e.anchorLink?e.anchorId?`${e.anchorLink}#${e.anchorId}`:e.anchorLink:this.router.url}ngOnInit(){var e=this;return(0,a.Z)(function*(){(0,r.eM)("CommentEntryComponent.OnInit()",e.pagePath);const u={pageKey:e.pageJson?.pageKey||e.pagePath2PageKey(e.pagePath),leafUrl:e.buildLeafUrl()};e.pageId=yield e.funcs.call("getPageId",u),(0,r.eM)("getPageId",e.pageId,u),e.pageInfo$=e.store.doc(`/comment/v1/page/${e.pageId}`).valueChanges().pipe((0,w.d)(1))})()}doProtectPage(e){var o=this;return(0,a.Z)(function*(){const i={pageId:o.pageId,unprotect:e};yield o.funcs.call("protectPage",i)})()}onClickUnProtect(){var e=this;return(0,a.Z)(function*(){(0,r.eM)("CommentEntryComponent.onClickUnProtect()");try{e.doProtectPage(!0),e.toastr.info("\u30da\u30fc\u30b8\u306e\u4fdd\u8b77\u3092\u89e3\u9664\u3057\u307e\u3057\u305f\u3002")}catch(o){(0,r.wb)(o);const i=o instanceof Error?o.message:"Unknown error";e.toastr.error(`\u30da\u30fc\u30b8\u306e\u4fdd\u8b77\u3092\u89e3\u9664\u3067\u304d\u307e\u305b\u3093\u3067\u3057\u305f\u3002 ( ${i} )`)}})()}onClickWatchPage(e,o){var i=this;return(0,a.Z)(function*(){(0,r.eM)("CommentEntryComponent.onClickWatchPage()");try{const u={pageId:i.pageId,isWatch:o};yield i.funcs.call("watchCommentPage",u),i.toastr.info(o?"\u30da\u30fc\u30b8\u306e Watch \u3092\u958b\u59cb\u3057\u307e\u3057\u305f\u3002":"\u30da\u30fc\u30b8\u3092 Watch \u3092\u505c\u6b62\u3057\u307e\u3057\u305f\u3002")}catch(u){(0,r.wb)(u);const c=u instanceof Error?u.message:"Unknown error";i.toastr.error(`\u30da\u30fc\u30b8\u306e Watch \u72b6\u614b\u3092\u5909\u66f4\u3067\u304d\u307e\u305b\u3093\u3067\u3057\u305f\u3002 ( ${c} )`)}})()}onClickProtect(){var e=this;return(0,a.Z)(function*(){(0,r.eM)("CommentEntryComponent.onClickProtect()");try{e.doProtectPage(!1),e.toastr.info("\u30da\u30fc\u30b8\u3092\u4fdd\u8b77\u3057\u307e\u3057\u305f\u3002")}catch(o){(0,r.wb)(o);const i=o instanceof Error?o.message:"Unknown error";e.toastr.error(`\u30da\u30fc\u30b8\u3092\u4fdd\u8b77\u72b6\u614b\u306b\u3067\u304d\u307e\u305b\u3093\u3067\u3057\u305f\u3002 ( ${i} )`)}})()}static \u0275fac=function(o){return new(o||n)(t.Y36(l.e),t.Y36(T.Z),t.Y36(g.c),t.Y36(x.ST),t.Y36(C._W))};static \u0275cmp=t.Xpm({type:n,selectors:[["gitfire-comment-entry"]],inputs:{pagePath:"pagePath",pageJson:"pageJson"},decls:3,vars:2,consts:[["class","spinner-border text-primary","role","status",4,"ngIf"],[4,"ngIf"],["role","status",1,"spinner-border","text-primary"],["commentNothing",""],[4,"ngIf","ngIfElse"],[3,"pageId",4,"ngIf"],[3,"pageId","isPageProtect"],[1,"text-end"],["class","m-1 text-end",4,"ngIf","ngIfElse"],["class","btn btn-danger m-1","title","\u30da\u30fc\u30b8\u3078\u306e\u30b3\u30e1\u30f3\u30c8\u3092\u7981\u6b62\u3057\u307e\u3059\u3002",3,"click",4,"ngIf"],["class","btn btn-info m-1","title","\u30da\u30fc\u30b8\u3078\u306e\u30b3\u30e1\u30f3\u30c8\u3092\u53ef\u80fd\u306b\u3057\u307e\u3059\u3002",3,"click",4,"ngIf"],["title","\u30da\u30fc\u30b8\u3078\u306e\u30b3\u30e1\u30f3\u30c8\u3092\u7981\u6b62\u3057\u307e\u3059\u3002",1,"btn","btn-danger","m-1",3,"click"],["title","\u30da\u30fc\u30b8\u3078\u306e\u30b3\u30e1\u30f3\u30c8\u3092\u53ef\u80fd\u306b\u3057\u307e\u3059\u3002",1,"btn","btn-info","m-1",3,"click"],["class","p-1 border border-danger",4,"ngIf"],[1,"p-1","border","border-danger"],[1,"text-danger"],["title","\u3053\u306e\u6a5f\u80fd\u306f\u8a66\u9a13\u904b\u7528\u4e2d\u3067\u3059\u3002\u3053\u306e\u30da\u30fc\u30b8\u3078\u306e\u30b3\u30e1\u30f3\u30c8\u3001\u66f4\u65b0\u3092\u901a\u77e5\u3057\u307e\u3059\u3002",1,"btn","btn-secondary","m-1",3,"click"],["title","\u3053\u306e\u6a5f\u80fd\u306f\u8a66\u9a13\u904b\u7528\u4e2d\u3067\u3059\u3002\u3053\u306e\u30da\u30fc\u30b8\u3078\u306e\u30b3\u30e1\u30f3\u30c8\u3001\u66f4\u65b0\u901a\u77e5\u3092\u505c\u6b62\u3057\u307e\u3059\u3002",1,"btn","btn-secondary","m-1",3,"click"],[1,"m-1","text-end"],["class","text-warning",4,"ngIf"],[1,"text-warning"],[3,"pageId"]],template:function(o,i){1&o&&(t._UZ(0,"hr"),t.YNc(1,Mt,1,0,"span",0)(2,St,10,11,"div",1)),2&o&&(t.xp6(1),t.Q6J("ngIf",!i.pageId),t.xp6(1),t.Q6J("ngIf",i.pageId))},dependencies:[p.O5,kt,I,p.Ov]})}return n})()}}]);