"use strict";(self.webpackChunkKaguraGithubPages=self.webpackChunkKaguraGithubPages||[]).push([[168],{2668:(K,$,o)=>{o.d($,{s:()=>E});var e=o(8800),M=o(4704),t=o(6684),I=o(6764),s=o(6020),f=o(208),k=o(8476),h=o(2700),g=o(8960),R=o(9900),y=o(6716);class E{master;constructor(c){this.master=c}buildEvolutionForm(c,l){const r=c.raw,p=r.pokemonId;let _=p;"form"in r&&(_=`${_}:${r.form}`);const n={nodeId:_,key:_,label:p,stats:r.stats,type1:r.type};if(r.type2&&(n.type2=r.type2),l){_=`${_}:${l}`,n.key=_,n.nodeId=_,n.label=`${n.label}:${l}`,n.isMega=!0,n.isTemp=!0;const m=r.tempEvoOverrides.find(a=>a.tempEvoId===l);if(!m)throw new Error(`Unable find ${l} on ${_} settings.`);n.stats=m.stats,n.type1=m.typeOverride,"typeOverride2"in m?n.type2=m.typeOverride2:delete n.type2,n.megaBranch=l}return n}fetchEvolutionRoot$(c){return(0,h.of)(c).pipe((0,e.w)(r=>{const p=r.raw.pokemonId,_=r.raw.parentPokemonId;if(!_)return g.k;const n=r.raw.form,d=`${p}_NORMAL`;return this.master.fetchMasterJson(`pokemon/forms/${_}.json`).pipe((0,M.k)(m=>{for(const a of m){const P=a.raw.evolutionBranch;if(P){for(const T of P)if(T.evolution===p&&T.form===n)return a;if(!n)for(const T of P)if(T.evolution===p&&T.form===d)return a}}return(0,y.Yv)(`Not found branches. id:${p} -> parent:${_}`),null}),(0,t.I)(m=>!!m))})).pipe((0,I.G)())}_buildEvolutionTree(c,l){const r=c.raw.evolutionBranch,p=this.buildEvolutionForm(c,l);let _=null;!l&&r&&(_=(0,R.Q)(r).pipe((0,s.m)(d=>{if("temporaryEvolution"in d)return(0,h.of)(this._buildEvolutionTree(c,d.temporaryEvolution));const m=d.evolution,a=d.form;return this.master.fetchMasterJson(`pokemon/forms/${m}.json`).pipe((0,M.k)(P=>{for(const T of P)if(!a&&!("form"in T.raw)||"form"in T.raw&&T.raw.form===a)return this._buildEvolutionTree(T);throw new Error(`Not found ${a} in ${m}`)}))}),(0,f.K)((d,m)=>[...d,m],[]),(0,I.G)(),(0,k.C)(1)));const n={formJson:c,form:p};return null!==_&&(n.children$=_),n}buildEvolutionTree(c){return this._buildEvolutionTree(c)}}},9072:(K,$,o)=>{o.d($,{u:()=>W});var e=o(4496),M=o(6716),t=o(2332),I=o(5657),s=o(6040),f=o(4704),k=o(3412),h=o(6684),g=o(3616),R=o(7368),y=o(4e3),E=o(9568),O=o(7976),c=o(1368),l=o(6504),r=o(2064),p=o(4660),_=o(5948),n=o(4516);const d=["pokemonNameInput"];function m(D,G){if(1&D&&(e.I0R(0,"option"),e.OEk(1),e.C$Y()),2&D){const i=G.$implicit;e.yG2(),e.cNF(i.raw.form||"")}}function a(D,G){if(1&D&&e.wR5(0,"app-pokemon-type",18),2&D){const i=e.GaO();e.E7m("pokemonType",i.outputType2)("isDisplayName",!0)("isDisplayTitle",!0)("isType2",!0)}}function P(D,G){if(1&D){const i=e.KQA();e.I0R(0,"div",19)(1,"label",20)(2,"input",21),e.iHE("ngModelChange",function(u){e.usT(i);const v=e.GaO();return e.kNx(v.inputIsAlola,u)||(v.inputIsAlola=u),e.CGJ(u)}),e.C$Y(),e.I0R(3,"span",22),e.OEk(4,"POKEMON.POKEMON_FORM_ALOLA"),e.C$Y()()()}if(2&D){const i=e.GaO();e.yG2(2),e.OKB("ngModel",i.inputIsAlola)}}function T(D,G){if(1&D){const i=e.KQA();e.I0R(0,"div",23)(1,"label",20)(2,"input",21),e.iHE("ngModelChange",function(u){e.usT(i);const v=e.GaO();return e.kNx(v.inputIsGalarian,u)||(v.inputIsGalarian=u),e.CGJ(u)}),e.C$Y(),e.I0R(3,"span",22),e.OEk(4,"POKEMON.POKEMON_FORM_GALARIAN"),e.C$Y()()()}if(2&D){const i=e.GaO();e.yG2(2),e.OKB("ngModel",i.inputIsGalarian)}}function A(D,G){if(1&D){const i=e.KQA();e.I0R(0,"div",24)(1,"label",20)(2,"input",21),e.iHE("ngModelChange",function(u){e.usT(i);const v=e.GaO();return e.kNx(v.inputIsMega,u)||(v.inputIsMega=u),e.CGJ(u)}),e.C$Y(),e.I0R(3,"span",22),e.OEk(4,"POKEMON.POKEMON_FORM_MEGA_EVOLUTION"),e.C$Y()()()}if(2&D){const i=e.GaO();e.yG2(2),e.OKB("ngModel",i.inputIsMega)}}function N(D,G){1&D&&(e.I0R(0,"div",25)(1,"label",20),e.OEk(2,"Other: "),e.C$Y()())}const S=()=>({theme:"bootstrap-5"});let W=(()=>{class D{master;translate;pokemonNameInput;destroy$=new I.E;level$;pokemonId$=new I.E;pokemonForm$;pokemonFormNullable$;pokemonFormId$=new I.E;idDatabase$;outputType1=null;outputType2=null;inputIsMega;inputHasMega;inputIsShadow;inputIsAlola;inputHasAlola;inputIsGalarian;inputHasGalarian;inputHasOtherForm;basenameSource$;pokemonSetting$;pokemonFormCombo$;pokemonFormComboDisabled$;basenameChanged$=new I.E;inputSelectedForm;validatedName=new e._w7;valueChanged=new e._w7;idChanged=new e._w7;valueCleared=new e._w7;selectedForm=new e._w7;selectedRawForm=new e._w7;constructor(i,C){this.master=i,this.translate=C,(0,M.qe)("TODO translate service?",C)}ngAfterViewInit(){}ngOnInit(){this.idDatabase$=this.master.basenameDatabase$,this.basenameSource$=(0,s.E)([this.master.pokemonTranslator$,this.master.pokemonConversion$,this.idDatabase$]).pipe((0,f.k)(([i,C,u])=>this.toBasenameSource(i,C,u))),this.pokemonSetting$=this.pokemonId$.pipe((0,R.G)(i=>this.master.fetchMasterJson(`pokemon/forms/${i}.json`).pipe())),this.pokemonFormCombo$=(0,k.U)(this.pokemonSetting$,this.valueCleared.pipe((0,f.k)(()=>[]))).pipe(),this.pokemonFormComboDisabled$=this.pokemonFormCombo$.pipe((0,f.k)(i=>i&&i.length<=1)),this.pokemonForm$=(0,s.E)([this.pokemonSetting$,this.pokemonFormId$]).pipe((0,f.k)(([i,C])=>{for(const u of i)if(C&&""!==C){if("form"in u.raw&&C===u.raw.form)return u}else if(!("form"in u.raw))return u;return(0,M.sJ)(`Not matched formId ${C} on`,i),null}),(0,h.I)(i=>!!i)),this.pokemonForm$.pipe((0,y.a)(),(0,g.a)(this.destroy$)).subscribe(i=>{this.selectedRawForm.next(i)}),(0,s.E)([this.master.level$,this.pokemonForm$]).pipe((0,g.a)(this.destroy$)).subscribe(([i,C])=>{const u=new t.PokemonForm(i,C);this.selectedForm.next(u)}),this.pokemonId$.pipe((0,g.a)(this.destroy$)).subscribe(i=>{(0,M.qe)("Clearing current status checker",i),this.validatedName.next(i)}),this.basenameChanged$.pipe((0,R.G)(i=>this.idDatabase$.pipe((0,f.k)(C=>C.ids.includes(i)?i:null))),(0,g.a)(this.destroy$)).subscribe({next:i=>{i&&this.pokemonId$.next(i),this.pokemonFormId$.next(""),this.valueChanged.next()},error:i=>{(0,M.sJ)("while get basename",i)}}),this.pokemonFormId$.pipe((0,g.a)(this.destroy$)).subscribe(i=>{this.valueChanged.next()}),this.pokemonFormNullable$=(0,k.U)(this.pokemonForm$,this.valueCleared.pipe((0,f.k)(()=>null))).pipe(),this.pokemonFormNullable$.pipe((0,g.a)(this.destroy$)).subscribe(i=>{if(!i)return this.outputType1=null,void(this.outputType2=null);this.outputType1=i.built.pokemonType,this.outputType2="number"==typeof i.built.pokemonType2?i.built.pokemonType2:null})}ngOnDestroy(){this.destroy$.next()}onChangeBasename(i){const C=i;this.basenameChanged$.next(C),this.idChanged.next(C&&""!==C?C:null),(!C||""===C)&&this.valueCleared.next()}toBasenameSource(i,C,u){const v=[];for(const x of u.ids){const L=C.table[x];if(!L){(0,M.Yv)(`Not found pokemon:${L} in local database. Ignoring.`);continue}const U=i[L],B=this.translate.PRIMARY_LOCALE;let F;F="en"!==B?`${U[B]} (${L})`:U[B],v.push({id:x,text:F,additional:U})}return v}onChangeForm(i){this.pokemonFormId$.next(i||"")}onFocusPokemonName(i){(0,M.qe)("TODO event focust",i)}static \u0275fac=function(C){return new(C||D)(e.GI1(E.G),e.GI1(O.GI))};static \u0275cmp=e.In1({type:D,selectors:[["app-pokemon-form"]],viewQuery:function(C,u){if(1&C&&e.CC$(d,5),2&C){let v;e.wto(v=e.Gqi())&&(u.pokemonNameInput=v.first)}},outputs:{validatedName:"validatedName",valueChanged:"valueChanged",idChanged:"idChanged",valueCleared:"valueCleared",selectedForm:"selectedForm",selectedRawForm:"selectedRawForm"},features:[e.M5G([])],decls:29,vars:31,consts:[[1,"form-group"],[1,"row","input-group","m-2",3,"title"],["translate","",1,"col-3","p-2","text-end"],[1,"col-8",3,"data","width","options","placeholder","allowClear","valueChanged","focus"],["pokemonNameInput",""],[1,"row","input-group","m-2"],[1,"col-8"],[1,"form-select",3,"ngModel","disabled","ngModelChange"],[4,"ngFor","ngForOf"],[1,"row","m-2"],[1,"col-3","text-center",3,"pokemonFormJson"],[1,"col-4","m-1"],[3,"pokemonType","isDisplayName","isDisplayTitle"],[3,"pokemonType","isDisplayName","isDisplayTitle","isType2",4,"ngIf"],["class","form-check","title","Pokemon has an Alola form.",4,"ngIf"],["class","form-check","title","Pokemon has an Galarian form.",4,"ngIf"],["class","form-check","title","Pokemon has a Mega evoluted form.",4,"ngIf"],["class","form-check","title","Pokemon has other form",4,"ngIf"],[3,"pokemonType","isDisplayName","isDisplayTitle","isType2"],["title","Pokemon has an Alola form.",1,"form-check"],[1,"form-check-label"],["type","checkbox",1,"form-check-input",3,"ngModel","ngModelChange"],["translate",""],["title","Pokemon has an Galarian form.",1,"form-check"],["title","Pokemon has a Mega evoluted form.",1,"form-check"],["title","Pokemon has other form",1,"form-check"]],template:function(C,u){1&C&&(e.I0R(0,"div")(1,"div",0)(2,"div",1),e.wVc(3,"translate"),e.I0R(4,"label",2),e.OEk(5,"POKEMON.POKEMON_LABEL"),e.C$Y(),e.I0R(6,"ng-select2",3,4),e.qCj("valueChanged",function(x){return u.onChangeBasename(x)})("focus",function(x){return u.onFocusPokemonName(x)}),e.wVc(8,"async"),e.wVc(9,"translate"),e.C$Y()(),e.I0R(10,"div",5)(11,"label",2),e.OEk(12,"POKEMON.POKEMON_OTHER_FORMS"),e.C$Y(),e.I0R(13,"span",6)(14,"select",7),e.qCj("ngModelChange",function(x){return u.onChangeForm(x)}),e.iHE("ngModelChange",function(x){return e.kNx(u.inputSelectedForm,x)||(u.inputSelectedForm=x),x}),e.wVc(15,"async"),e.yuY(16,m,2,1,"option",8),e.wVc(17,"async"),e.C$Y()()(),e.I0R(18,"div",9),e.wR5(19,"app-pokemon-thumb",10),e.wVc(20,"async"),e.I0R(21,"span",11),e.wR5(22,"app-pokemon-type",12),e.C$Y(),e.I0R(23,"span",11),e.yuY(24,a,1,4,"app-pokemon-type",13),e.C$Y()(),e.yuY(25,P,5,1,"div",14)(26,T,5,1,"div",15)(27,A,5,1,"div",16)(28,N,3,0,"div",17),e.C$Y()()),2&C&&(e.yG2(2),e._6D("title",e.kDX(3,18,"POKEMON.TOOLTIP_POKEMON_SELECT2")),e.yG2(4),e._6D("placeholder",e.kDX(9,22,"POKEMON.POKEMON_SELECT2_PLACEHOLDER")),e.E7m("data",e.kDX(8,20,u.basenameSource$))("width","100%")("options",e.q4q(30,S))("allowClear",!0),e.yG2(8),e.OKB("ngModel",u.inputSelectedForm),e.E7m("disabled",e.kDX(15,24,u.pokemonFormComboDisabled$)),e.yG2(2),e.E7m("ngForOf",e.kDX(17,26,u.pokemonFormCombo$)),e.yG2(3),e.E7m("pokemonFormJson",e.kDX(20,28,u.pokemonFormNullable$)),e.yG2(3),e.E7m("pokemonType",u.outputType1)("isDisplayName",!0)("isDisplayTitle",!0),e.yG2(2),e.E7m("ngIf",null!=u.outputType2),e.yG2(),e.E7m("ngIf",u.inputHasAlola),e.yG2(),e.E7m("ngIf",u.inputHasGalarian),e.yG2(),e.E7m("ngIf",u.inputHasMega),e.yG2(),e.E7m("ngIf",u.inputHasOtherForm))},dependencies:[c.ay,c.u_,l.wd,l.GO,l.SU,l.GC,l.ue,l._G,r.eM,p.U,_.y,n.g,c.a,r.sD],styles:["[_nghost-%COMP%]{display:block}",".toolInputGroup[_ngcontent-%COMP%]{border:solid #eeeeee;border-radius:5px}.toolSmallText[_ngcontent-%COMP%]{font-size:.8em}.toolExtraSmallText[_ngcontent-%COMP%]{font-size:.5em}.appPokemonThumb[_ngcontent-%COMP%]{max-width:40px;max-height:40px}"]})}return D})()},7964:(K,$,o)=>{o.d($,{e:()=>E});var e=o(2540),M=o(5657),t=o(4496),I=o(9568),s=o(1368),f=o(4516),k=o(2064);function h(O,c){if(1&O&&(t.I0R(0,"span",11),t.OEk(1,", "),t.wR5(2,"app-pokemon-type",12),t.wVc(3,"async"),t.C$Y()),2&O){const l=t.GaO(2);t.yG2(2),t.E7m("pokemonType",t.kDX(3,2,l.pokemonType2$))("isDisplayName",!0)}}function g(O,c){if(1&O&&(t.I0R(0,"div",10),t.OEk(1),t.I0R(2,"span",11),t.OEk(3," ( "),t.wR5(4,"app-pokemon-type",12),t.wVc(5,"async"),t.C$Y(),t.yuY(6,h,4,4,"span",13),t.wVc(7,"async"),t.OEk(8," )"),t.C$Y()),2&O){const l=t.GaO();t.yG2(),t.cNF(l.pokemonName),t.yG2(3),t.E7m("pokemonType",t.kDX(5,4,l.pokemonType$))("isDisplayName",!0),t.yG2(2),t.E7m("ngIf",null!==t.kDX(7,6,l.pokemonType2$))}}function R(O,c){if(1&O&&(t.I0R(0,"span",4),t.OEk(1),t.C$Y()),2&O){const l=t.GaO();t.yG2(),t.oRS("SCP: ",l.status.SCP,"")}}function y(O,c){if(1&O&&(t.I0R(0,"div")(1,"span"),t.OEk(2),t.wVc(3,"translate"),t.C$Y(),t.I0R(4,"span",5),t.OEk(5),t.wVc(6,"translate"),t.wVc(7,"translate"),t.C$Y()()),2&O){const l=c.ngIf;t.yG2(2),t.oRS("",t.kDX(3,5,"POKEMON.LABEL_UNLOCK")," "),t.yG2(3),t.APW("",t.kDX(6,7,"POKEMON.LABEL_STARDUST"),": ",l.requireStardust,"",t.kDX(7,9,"POKEMON.LABEL_CANDY"),": ",l.requireCandy,"")}}let E=(()=>{class O{master;status;pokemonName=null;pokemonType=null;pokemonType$=new e.o;pokemonType2=null;unlockCost=null;pokemonType2$=new e.o;destroy$=new M.E;constructor(l){this.master=l}ngOnInit(){}ngOnDestroy(){this.destroy$.next()}ngOnChanges(l){if("pokemonType"in l){const r=l.pokemonType.currentValue;"number"==typeof r&&this.pokemonType$.next(r)}if("pokemonType2"in l){const r=l.pokemonType2.currentValue;this.pokemonType2$.next("number"==typeof r?r:null)}}static \u0275fac=function(r){return new(r||O)(t.GI1(I.G))};static \u0275cmp=t.In1({type:O,selectors:[["app-pokemon-status"]],inputs:{status:"status",pokemonName:"pokemonName",pokemonType:"pokemonType",pokemonType2:"pokemonType2",unlockCost:"unlockCost"},features:[t.SYr],decls:20,vars:20,consts:[[1,"card","m-1"],[1,"card-body"],["class","card-title",4,"ngIf"],[1,"card-text"],[1,"p-1","text-secondary"],[1,"p-1","text-primary"],["class","p-1 text-secondary",4,"ngIf"],[1,"p-1","text-info",3,"title"],[1,"p-1","text-secondary",3,"title"],[4,"ngIf"],[1,"card-title"],[1,"toolSmallText"],[3,"pokemonType","isDisplayName"],["class","toolSmallText",4,"ngIf"]],template:function(r,p){1&r&&(t.I0R(0,"span",0)(1,"div",1),t.yuY(2,g,9,8,"div",2),t.I0R(3,"div",3)(4,"div")(5,"span",4),t.OEk(6),t.C$Y(),t.I0R(7,"span",5),t.OEk(8),t.C$Y(),t.yuY(9,R,2,1,"span",6),t.C$Y(),t.I0R(10,"div")(11,"span",7),t.OEk(12),t.wVc(13,"number"),t.C$Y(),t.I0R(14,"span",7),t.OEk(15),t.wVc(16,"number"),t.C$Y(),t.I0R(17,"span",8),t.OEk(18),t.C$Y()(),t.yuY(19,y,8,11,"div",9),t.C$Y()()()),2&r&&(t.yG2(2),t.E7m("ngIf",p.pokemonName),t.yG2(4),t.oRS("CP: ",p.status.CP,""),t.yG2(2),t.oRS("PL: ",p.status.PL,""),t.yG2(),t.E7m("ngIf",p.status.SCP),t.yG2(2),t.u6R("title","Raw: ",p.status.AP,"\nActual: ",p.status.ActualAP,""),t.yG2(),t.oRS("AP: ",t.g7$(13,14,p.status.AP,".5"),""),t.yG2(2),t.u6R("title","Raw: ",p.status.DP,"\nActual: ",p.status.ActualDP,""),t.yG2(),t.oRS("DP: ",t.g7$(16,17,p.status.DP,".5"),""),t.yG2(2),t.u6R("title","Raw: ",p.status.HP,"\nActual: ",p.status.ActualHP,""),t.yG2(),t.oRS("HP: ",p.status.HP,""),t.yG2(),t.E7m("ngIf",p.unlockCost))},dependencies:[s.u_,f.g,s.a,s.hl,k.sD],styles:[".toolInputGroup[_ngcontent-%COMP%]{border:solid #eeeeee;border-radius:5px}.toolSmallText[_ngcontent-%COMP%]{font-size:.8em}.toolExtraSmallText[_ngcontent-%COMP%]{font-size:.5em}.appPokemonThumb[_ngcontent-%COMP%]{max-width:40px;max-height:40px}"]})}return O})()},5948:(K,$,o)=>{o.d($,{y:()=>r});var e=o(2540),M=o(6700),t=o(5657),I=o(6040),s=o(3412),f=o(6684),k=o(7368),h=o(4704),g=o(4680),R=o(6716),y=o(860),E=o(4496),O=o(9568),c=o(1368);function l(p,_){if(1&p){const n=E.KQA();E.I0R(0,"img",1),E.qCj("error",function(){E.usT(n);const m=E.GaO();return E.CGJ(m.onErrorLoadImage())}),E.wVc(1,"async"),E.C$Y()}if(2&p){const n=_.ngIf,d=E.GaO();E.m4B("height",d.size,"px")("width",d.size,"px"),E._6D("src",n,E.K6U),E.CI5("alt","",E.kDX(1,6,d.pokemonName$),"'s picture")}}let r=(()=>{class p{master;pokemonFormJson=null;pokemonFormJson$=new e.o;size=null;opts=null;opts$=new M.g(null);imageUrl$;pokemonName$;destroy$=new t.E;onErrorImage$=new t.E;constructor(n){this.master=n}onErrorLoadImage(){(0,R.sJ)("PokemonThumbComponent.onErrorLoadImage()"),this.onErrorImage$.next()}ngOnInit(){const n=(0,I.E)([this.pokemonFormJson$,this.opts$]).pipe((0,f.I)(([a,P])=>!!a),(0,f.I)(a=>!0),(0,k.G)(([a,P])=>new y.k(a.built.pokedexNumber,this.master,P).dataURL$)),d=this.pokemonFormJson$.pipe((0,f.I)(a=>!a),(0,h.k)(()=>null),(0,g.o)(500)),m=this.onErrorImage$.pipe((0,h.k)(()=>this.master.getNoImageUrl()));this.imageUrl$=(0,s.U)(n,d,m),this.pokemonName$=this.pokemonFormJson$.pipe((0,f.I)(a=>!!a),(0,h.k)(a=>a.raw.pokemonId),(0,f.I)(a=>!!a),(0,k.G)(a=>this.master.readPokemonName(a)))}ngOnDestroy(){this.destroy$.next()}ngOnChanges(n){"opts"in n&&this.opts$.next(n.opts.currentValue),"pokemonFormJson"in n&&this.pokemonFormJson$.next(n.pokemonFormJson.currentValue)}static \u0275fac=function(d){return new(d||p)(E.GI1(O.G))};static \u0275cmp=E.In1({type:p,selectors:[["app-pokemon-thumb"]],inputs:{pokemonFormJson:"pokemonFormJson",size:"size",opts:"opts"},features:[E.SYr],decls:2,vars:3,consts:[["class","img-fluid","style","max-height: 100%;",3,"height","width","src","alt","error",4,"ngIf"],[1,"img-fluid",2,"max-height","100%",3,"src","alt","error"]],template:function(d,m){1&d&&(E.yuY(0,l,2,8,"img",0),E.wVc(1,"async")),2&d&&E.E7m("ngIf",E.kDX(1,1,m.imageUrl$))},dependencies:[c.u_,c.a],styles:[".toolInputGroup[_ngcontent-%COMP%]{border:solid #eeeeee;border-radius:5px}.toolSmallText[_ngcontent-%COMP%]{font-size:.8em}.toolExtraSmallText[_ngcontent-%COMP%]{font-size:.5em}.appPokemonThumb[_ngcontent-%COMP%]{max-width:40px;max-height:40px}"]})}return p})()},4516:(K,$,o)=>{o.d($,{g:()=>l});var e=o(2540),M=o(6684),t=o(7368),I=o(4704),s=o(4496),f=o(9568),k=o(7976),h=o(1368),g=o(2064);function R(r,p){1&r&&(s.I0R(0,"span",3),s.OEk(1,"POKEMON.POKEMON_ATTRIBUTE_TYPE1"),s.C$Y())}function y(r,p){1&r&&(s.I0R(0,"span",3),s.OEk(1,"POKEMON.POKEMON_ATTRIBUTE_TYPE2"),s.C$Y())}function E(r,p){if(1&r&&(s.SAx(0),s.yuY(1,R,2,0,"span",2)(2,y,2,0,"span",2),s.OEk(3,": "),s.k70()),2&r){const _=s.GaO();s.yG2(),s.E7m("ngIf",!_.isType2),s.yG2(),s.E7m("ngIf",_.isType2)}}function O(r,p){if(1&r&&(s.wR5(0,"img",4),s.wVc(1,"async")),2&r){const _=p.ngIf,n=s.GaO();s._6D("title",s.kDX(1,2,n.typeName$)),s._6D("src",_,s.K6U)}}function c(r,p){if(1&r&&(s.I0R(0,"span"),s.OEk(1),s.wVc(2,"async"),s.C$Y()),2&r){const _=s.GaO();s.yG2(),s.cNF(s.kDX(2,1,_.typeName$))}}let l=(()=>{class r{master;translate;pokemonType;isDisplayName=!1;isDisplayTitle=!1;iconSize;isType2=!1;pokemonType$=new e.o;typeName$;iconUrl$;constructor(_,n){this.master=_,this.translate=n}ngOnInit(){const _=this.pokemonType$.pipe((0,M.I)(n=>null!==n));this.typeName$=_.pipe((0,t.G)(n=>this.master.readEnumTypeName$(n))),this.iconUrl$=_.pipe((0,I.k)(n=>this.master.getTypeIconUrl(n,this.iconSize)))}ngOnChanges(_){"pokemonType"in _&&this.pokemonType$.next(_.pokemonType.currentValue)}static \u0275fac=function(n){return new(n||r)(s.GI1(f.G),s.GI1(k.GI))};static \u0275cmp=s.In1({type:r,selectors:[["app-pokemon-type"]],inputs:{pokemonType:"pokemonType",isDisplayName:"isDisplayName",isDisplayTitle:"isDisplayTitle",iconSize:"iconSize",isType2:"isType2"},features:[s.SYr],decls:4,vars:5,consts:[[4,"ngIf"],[3,"title","src",4,"ngIf"],["translate","",4,"ngIf"],["translate",""],[3,"title","src"]],template:function(n,d){1&n&&(s.yuY(0,E,4,2,"ng-container",0)(1,O,2,4,"img",1),s.wVc(2,"async"),s.yuY(3,c,3,3,"span",0)),2&n&&(s.E7m("ngIf",d.isDisplayTitle),s.yG2(),s.E7m("ngIf",s.kDX(2,3,d.iconUrl$)),s.yG2(2),s.E7m("ngIf",d.isDisplayName))},dependencies:[h.u_,g.eM,h.a]})}return r})()},5928:(K,$,o)=>{o.d($,{Q:()=>_});var e=o(4496),M=o(5657),t=o(6040),I=o(4704),s=o(3616),f=o(6700),k=o(1368),h=o(6504),g=o(2064),R=o(7964);function y(n,d){1&n&&(e.I0R(0,"div",17),e.OEk(1,"Looks good"),e.C$Y())}function E(n,d){1&n&&(e.I0R(0,"div",18),e.OEk(1,"Looks bad"),e.C$Y())}function O(n,d){1&n&&(e.I0R(0,"div",17),e.OEk(1,"Looks good"),e.C$Y())}function c(n,d){1&n&&(e.I0R(0,"div",18),e.OEk(1,"Looks bad"),e.C$Y())}function l(n,d){1&n&&(e.I0R(0,"span",19),e.OEk(1,"POKEMON.STATUS_NOT_YET_KNOWN_LABEL"),e.C$Y())}function r(n,d){1&n&&e.wR5(0,"app-pokemon-status",20),2&n&&e.E7m("status",d.ngIf)}function p(n,d){if(1&n){const m=e.KQA();e.I0R(0,"div",1)(1,"div",2)(2,"label",3),e.OEk(3,"CP"),e.C$Y(),e.I0R(4,"span",4)(5,"input",5,6),e.iHE("ngModelChange",function(P){const A=e.usT(m).ngIf;return e.kNx(A.CP,P)||(A.CP=P),e.CGJ(P)}),e.qCj("ngModelChange",function(P){e.usT(m);const T=e.Gew(6),A=e.GaO();return e.CGJ(A.onChangeCP(T,P))}),e.C$Y(),e.yuY(7,y,2,0,"div",7)(8,E,2,0,"div",8),e.C$Y(),e.I0R(9,"label",9),e.OEk(10,"HP"),e.C$Y(),e.I0R(11,"span",10)(12,"input",11,12),e.iHE("ngModelChange",function(P){const A=e.usT(m).ngIf;return e.kNx(A.HP,P)||(A.HP=P),e.CGJ(P)}),e.qCj("ngModelChange",function(P){e.usT(m);const T=e.Gew(13),A=e.GaO();return e.CGJ(A.onChangeHP(T,P))}),e.C$Y(),e.yuY(14,O,2,0,"div",7)(15,c,2,0,"div",8),e.C$Y()(),e.I0R(16,"div",13)(17,"span",14),e.yuY(18,l,2,0,"span",15),e.wVc(19,"async"),e.yuY(20,r,1,1,"app-pokemon-status",16),e.wVc(21,"async"),e.C$Y()()()}if(2&n){const m=d.ngIf,a=e.Gew(6),P=e.Gew(13),T=e.GaO();e.yG2(5),e.eAK("is-valid",a.dirty&&m.isCPValid)("is-invalid",a.dirty&&!m.isCPValid),e.E7m("disabled",T.disabled),e.OKB("ngModel",m.CP),e.yG2(2),e.E7m("ngIf",(a.dirty||a.touched)&&m.isCPValid),e.yG2(),e.E7m("ngIf",(a.dirty||a.touched)&&!m.isCPValid),e.yG2(4),e.eAK("is-valid",P.dirty&&m.isHPValid)("is-invalid",P.dirty&&!m.isHPValid),e.E7m("disabled",T.disabled),e.OKB("ngModel",m.HP),e.yG2(2),e.E7m("ngIf",(P.dirty||P.touched)&&m.isHPValid),e.yG2(),e.E7m("ngIf",(P.dirty||P.touched)&&!m.isHPValid),e.yG2(3),e.E7m("ngIf",!e.kDX(19,18,T.currentStatus$)),e.yG2(2),e.E7m("ngIf",e.kDX(21,20,T.currentStatus$))}}let _=(()=>{class n{validatorResult;disabled=!1;currentStatus$;initialize;valueChanged=new e._w7;destroy$=new M.E;inputStatus={isCPValid:!1,isHPValid:!1};inputStatus$;constructor(){}ngOnDestroy(){this.destroy$.next()}ngOnInit(){this.inputStatus$=(0,t.E)([this.inputCP$,this.inputHP$]).pipe((0,I.k)(([a,P])=>({CP:a,HP:P})));let m=!1;this.inputStatus$.pipe((0,s.a)(this.destroy$)).subscribe(a=>{m||this.valueChanged.next(a)}),this.validatorResult.pipe((0,s.a)(this.destroy$)).subscribe(a=>{const P=this.inputStatus;P.isCPValid=a,P.isHPValid=a}),this.initialize.pipe((0,s.a)(this.destroy$)).subscribe(()=>{const a=this.inputStatus;delete a.CP,delete a.HP,a.isCPValid=!1,a.isHPValid=!1;try{m=!0,this.inputHP$.next(null),this.inputCP$.next(null)}finally{m=!1}a.controlCP&&a.controlCP.markAsPristine(),a.controlHP&&a.controlHP.markAsPristine()})}inputCP$=new M.E;inputHP$=new f.g(null);onChangeHP(m,a){this.inputStatus.controlHP=m.control,this.inputHP$.next(a)}onChangeCP(m,a){this.inputStatus.controlCP=m.control,this.inputCP$.next(a)}static \u0275fac=function(a){return new(a||n)};static \u0275cmp=e.In1({type:n,selectors:[["app-pokemon-visible-status"]],inputs:{validatorResult:"validatorResult",disabled:"disabled",currentStatus$:"currentStatus$",initialize:"initialize"},outputs:{valueChanged:"valueChanged"},decls:1,vars:1,consts:[["class","form-group",4,"ngIf"],[1,"form-group"],[1,"row","input-group","m-2"],["title","Pokemon's CP",1,"col-1","form-check-label","p-2","text-end"],[1,"col-6"],["type","number","min","10","max","10000","name","currentCP",1,"form-control",3,"disabled","ngModel","ngModelChange"],["currentCP","ngModel"],["class","valid-feedback",4,"ngIf"],["class","invalid-feedback",4,"ngIf"],["title","Pokemon's HP",1,"col-1","form-check-label","p-2","text-end"],[1,"col-4"],["type","number","min","1","max","1000","name","currentHP",1,"form-control",3,"disabled","ngModel","ngModelChange"],["currentHP","ngModel"],[1,"row"],[1,"col-12"],["class","text-warning","translate","",4,"ngIf"],[3,"status",4,"ngIf"],[1,"valid-feedback"],[1,"invalid-feedback"],["translate","",1,"text-warning"],[3,"status"]],template:function(a,P){1&a&&e.yuY(0,p,22,22,"div",0),2&a&&e.E7m("ngIf",P.inputStatus)},dependencies:[k.u_,h.ot,h.O4,h.ue,h.Gu,h._t,h._G,g.eM,R.e,k.a],styles:["[_nghost-%COMP%]{display:block}"]})}return n})()},860:(K,$,o)=>{o.d($,{k:()=>k});var e=o(5657),M=o(2540),t=o(6040),I=o(3412),s=o(4704),f=o(6716);class k{master;resizeOpts;dataURL$;image1$=new e.E;image2$=new M.o;constructor(g,R,y,E){this.master=R,this.resizeOpts=E;const O=new e.E,c=document.createElement("img"),l=document.createElement("img");c.src=this.master.getPokemonThumbUrl(g),c.crossOrigin="anonymous",c.onload=()=>{this.image1$.next(c)},c.onerror=p=>{(0,f.sJ)(`Failed to load ${c.src}. `,p),E?.suppressNoImage?O.next():((0,f.sJ)("Fallback to no image source."),c.src=this.master.getNoImageUrl())},y?.isShadow?(l.src=this.master.getThumbUrl("Shadow"),l.crossOrigin="anonymous",l.onload=()=>{this.image2$.next(l)}):y?.megaBranch?(l.src=this.master.getThumbUrl("Mega"),l.crossOrigin="anonymous",l.onload=()=>{this.image2$.next(l)}):this.image2$.next(null);const r=(0,t.E)([this.image1$,this.image2$]).pipe((0,s.k)(([p,_])=>this.composeImageUrl(p,_)));this.dataURL$=(0,I.U)(O.pipe((0,s.k)(()=>null)),r)}composeImageUrl(g,R){const y=document.createElement("canvas"),E=y.getContext("2d");if(null===E)throw new Error("No valid canvas 2d context");let O;if(this.resizeOpts){const r=this.resizeOpts;y.width=r.size||g.width,y.height=r.size||g.height,O=this.resizeOpts.overlayRate}else y.width=g.width,y.height=g.height;"number"!=typeof O&&(O=.3);const c=y.width*O,l=y.height*O;return E.drawImage(g,0,0,y.width,y.height),null!==R&&E.drawImage(R,y.width-c,y.height-l,c,l),y.toDataURL()}}},632:(K,$,o)=>{o.d($,{i:()=>t});var e=o(3252),M=o(8960);function t(I,s,f){if(null==s&&(s=I,I=0),s<=0)return M.k;const k=s+I;return new e._(f?h=>{let g=I;return f.schedule(function(){g<k?(h.next(g++),this.schedule()):h.complete()})}:h=>{let g=I;for(;g<k&&!h.closed;)h.next(g++);h.complete()})}},8800:(K,$,o)=>{o.d($,{w:()=>t});var e=o(5448),M=o(1968);function t(I,s=1/0,f){return s=(s||0)<1?1/0:s,(0,e.i)((k,h)=>(0,M.u)(k,h,I,s,void 0,!0,f))}}}]);