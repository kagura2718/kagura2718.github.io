"use strict";(self.webpackChunkKaguraGithubPages=self.webpackChunkKaguraGithubPages||[]).push([[831],{6831:(Le,O,p)=>{p.r(O),p.d(O,{GrowUpSimulatorModule:()=>Oe});var h=p(6814),J=p(9430),L=p(5187),I=p(3185),R=p(3366),x=p(108),u=p(9071),f=p(8645),b=p(7328),v=p(5619),r=p(7398),g=p(2572),C=p(3019),E=p(2181),$=p(9773),Q=p(1687),_=p(2096),V=p(6232),B=p(2459),N=p(9026),D=p(1479),y=p(3620),A=p(4664),k=p(7081),G=p(9336),Y=p(6328),F=p(9769),q=p(8711),e=p(9212),U=p(2586),M=p(8018),T=p(6223),z=p(9150),H=p(1881),W=p(9659),P=p(9515),S=p(4825),X=p(6699),j=p(7921);function K(a,l){if(1&a&&e._UZ(0,"div",7),2&a){const t=l.ngIf;e.ERl("transition","width ",100,"ms ease-out"),e.Udp("opacity",t[0]/50+.5)("right",0,"%")("height",100,"%")("width",t[0],"%")}}function ee(a,l){1&a&&(e.TgZ(0,"span",8),e.ALo(1,"translate"),e._uU(2,"\xa0"),e.qZA()),2&a&&e.s9C("title",e.lcZ(1,1,"POKEMON.MOVES.TOOLTIP_ELITE_MOVE"))}let te=(()=>{class a{master;translate;model;onMoveMs;name$;tooltip$;typeColor$;typeName$;powerWidth$;speedMove$;deltaGauge$;deltaGaugeHeight$;pokemonForm$;details$;constructor(t,n){this.master=t,this.translate=n}ngOnInit(){this.name$=this.master.readMovesName(this.model.movementId),this.typeColor$=this.master.typeDatabase$.pipe((0,r.U)(o=>`#${o.types[this.model.data.movesType].themeColor}`)),this.typeName$=(0,g.a)([this.master.readEnumTypeName$(this.model.data.movesType)]).pipe((0,r.U)(([o])=>o)),this.powerWidth$=(0,_.of)(this.computePowerWidth(this.model.details.actualPower)),this.onMoveMs=500*this.model.data.combatOverrides.rigidTurn;const n=(0,C.T)((0,S.H)(0,this.onMoveMs).pipe((0,r.U)(o=>o)));this.speedMove$=(0,g.a)([this.powerWidth$,n]).pipe((0,r.U)(([o,i])=>i%2==0?0:100-o)),this.deltaGaugeHeight$=this.speedMove$.pipe((0,r.U)(o=>this.model.data.combatOverrides.energyDelta),(0,X.R)((o,i)=>(o+=i)%101,0),(0,j.O)(0)),this.deltaGauge$=this.deltaGaugeHeight$.pipe((0,r.U)(o=>[o,(100-Math.max(Math.min(o,100),0))/2])),this.pokemonForm$=this.master.level$.pipe((0,r.U)(o=>new u.PokemonForm(o,this.model.pokemonSetting)),(0,k.d)(1)),this.details$=this.buildMoveDetails(),this.tooltip$=this.buildTooltip()}gaugeShadowDepth$;computePowerWidth(t){return t/32*50}buildMoveDetails(){const t=this.model.details;return(0,g.a)([this.typeName$]).pipe((0,r.U)(([n])=>{const o={};return Object.assign(o,t),o.typeName=n,o}))}buildTooltip(){return this.details$.pipe((0,A.w)(t=>{const n={energyDelta:t.energyDelta,power:t.power,actualPower:t.actualPower.toFixed(2),typeName:t.typeName,rigidTurn:t.rigidTurn,EPT:t.EPT.toFixed(2),PPT:t.PPT.toFixed(2),actualPPT:t.actualPPT.toFixed(2),EPTperAPPT:t.EPTperAPPT.toFixed(2),QMTP:t.QMTP.toFixed(2)};return this.translate.get("POKEMON.MOVES.TOOLTIP_QUICK_DETAILS",n)}))}static \u0275fac=function(n){return new(n||a)(e.Y36(U.m),e.Y36(M.xq))};static \u0275cmp=e.Xpm({type:a,selectors:[["app-pokemon-quick-move"]],inputs:{model:"model"},decls:24,vars:36,consts:[[1,"p-1",2,"cursor","pointer",3,"title"],[2,"position","relative"],[2,"position","absolute","background-color","#eeeeee","z-index","-3","width","100%","height","100%","border-radius","20px"],["style","position: absolute; background-color: #aaaaaa; z-index: -2; border-radius: 20px;",3,"transition","opacity","right","height","width",4,"ngIf"],[2,"position","absolute","z-index","-1","height","100%","border-radius","20px"],["class","toolPokemonMovesLegacyMarker",3,"title",4,"ngIf"],[2,"border-radius","10%"],[2,"position","absolute","background-color","#aaaaaa","z-index","-2","border-radius","20px"],[1,"toolPokemonMovesLegacyMarker",3,"title"]],template:function(n,o){1&n&&(e.TgZ(0,"div",0),e.ALo(1,"async"),e.TgZ(2,"div",1),e._UZ(3,"div",2),e.YNc(4,K,1,11,"div",3),e.ALo(5,"async"),e.TgZ(6,"div",4),e.ALo(7,"async"),e.ALo(8,"async"),e.ALo(9,"async"),e.qZA(),e.TgZ(10,"div"),e.YNc(11,ee,3,3,"span",5),e.TgZ(12,"span"),e._uU(13),e.ALo(14,"async"),e.qZA(),e.TgZ(15,"span"),e._uU(16,"( "),e.TgZ(17,"span"),e._uU(18),e.ALo(19,"number"),e.qZA(),e.TgZ(20,"span",6),e._uU(21),e.ALo(22,"async"),e.qZA(),e._uU(23," )"),e.qZA()()()()),2&n&&(e.s9C("title",e.lcZ(1,19,o.tooltip$)),e.xp6(4),e.Q6J("ngIf",e.lcZ(5,21,o.deltaGauge$)),e.xp6(2),e.Udp("width",e.lcZ(7,23,o.powerWidth$),"%"),e.ERl("transition","left ",o.onMoveMs,"ms ease-in-out"),e.Udp("left",e.lcZ(8,25,o.speedMove$),"%")("background-color",e.lcZ(9,27,o.typeColor$)),e.ERl("box-shadow","1px 1px 10px rgba(0, 0, 0, ",.5,")"),e.xp6(5),e.Q6J("ngIf",o.model.isLegacy),e.xp6(2),e.hij("",e.lcZ(14,29,o.name$)," "),e.xp6(5),e.AsE("",e.xi3(19,31,o.model.details.PPT,".2"),"",o.model.details.isTypeBonus?"*":"",""),e.xp6(3),e.Oqu(e.lcZ(22,34,o.typeName$)))},dependencies:[h.O5,h.Ov,h.JJ,P.X$],styles:["@keyframes _ngcontent-%COMP%_bg-color{0%{opacity:.1}25%{background-color:red;opacity:.5}50%{opacity:.1}75%{background-color:#000;opacity:.5}}.toolPokemonMovesLegacyMarker[_ngcontent-%COMP%]{border-radius:50%;top:.25em;width:1em;height:1em;position:absolute;animation:_ngcontent-%COMP%_bg-color 2s infinite;opacity:.5}"]})}return a})();function oe(a,l){1&a&&(e.TgZ(0,"span",7),e.ALo(1,"translate"),e._uU(2,"\xa0"),e.qZA()),2&a&&e.s9C("title",e.lcZ(1,1,"POKEMON.MOVES.TOOLTIP_ELITE_MOVE"))}let ne=(()=>{class a{master;translate;model;name$;tooltip$;typeColor$;typeName$;gaugePower;gaugeDelta$;details$;gaugeShadowDepth$;gaugeDeltaSwitch$;constructor(t,n){this.master=t,this.translate=n}ngOnInit(){this.gaugePower=Math.floor(this.model.details.actualPower/250*100),this.name$=this.master.readMovesName(this.model.movementId),this.typeColor$=this.master.typeDatabase$.pipe((0,r.U)(n=>`#${n.types[this.model.data.movesType].themeColor}`)),this.typeName$=(0,g.a)([this.master.readEnumTypeName$(this.model.data.movesType)]).pipe((0,r.U)(([n])=>n));const t=(0,S.H)(0,1e3).pipe((0,r.U)(n=>n%2==0));this.gaugeDeltaSwitch$=t.pipe((0,r.U)(n=>n?0:1)),this.gaugeDelta$=t.pipe((0,r.U)(n=>n?0:-this.model.data.energyDelta)),this.gaugeShadowDepth$=(0,_.of)("0.5"),this.details$=this.buildDetails(),this.tooltip$=this.buildTooltip()}buildDetails(){const t=this.model.details;return(0,g.a)([this.typeName$]).pipe((0,r.U)(([n])=>{const o={};return Object.assign(o,t),o.typeName=n,o}))}buildTooltip(){return this.details$.pipe((0,A.w)(t=>{const n={energyDelta:t.energyDelta,power:t.power,actualPower:t.actualPower,typeName:t.typeName,gaugeEfficiency:t.gaugeEfficiency.toFixed(2),actualGaugeEfficiency:t.actualGaugeEfficiency.toFixed(2)};return this.translate.get("POKEMON.MOVES.TOOLTIP_CINEMATIC_DETAILS",n)}))}static \u0275fac=function(n){return new(n||a)(e.Y36(U.m),e.Y36(M.xq))};static \u0275cmp=e.Xpm({type:a,selectors:[["app-pokemon-cinematic-move"]],inputs:{model:"model"},decls:22,vars:43,consts:[[1,"p-1",2,"cursor","pointer",3,"title"],[2,"position","relative"],[2,"position","absolute","background-color","#eeeeee","z-index","-3","width","100%","height","100%","border-radius","20px"],[2,"position","absolute","z-index","-2","border-radius","20px"],[2,"position","absolute","z-index","-1","border-radius","20px","background-color","#aaaaaa"],["class","toolPokemonMovesLegacyMarker",3,"title",4,"ngIf"],[2,"border-radius","10%"],[1,"toolPokemonMovesLegacyMarker",3,"title"]],template:function(n,o){1&n&&(e.TgZ(0,"div",0),e.ALo(1,"async"),e.TgZ(2,"div",1),e._UZ(3,"div",2),e.TgZ(4,"div",3),e.ALo(5,"async"),e.ALo(6,"async"),e.qZA(),e.TgZ(7,"div",4),e.ALo(8,"async"),e.ALo(9,"async"),e.qZA(),e.TgZ(10,"div"),e.YNc(11,oe,3,3,"span",5),e.TgZ(12,"span"),e._uU(13),e.ALo(14,"async"),e.TgZ(15,"span"),e._uU(16),e.ALo(17,"number"),e.qZA(),e.TgZ(18,"span",6),e._uU(19),e.ALo(20,"async"),e.qZA(),e._uU(21,") "),e.qZA()()()()),2&n&&(e.s9C("title",e.lcZ(1,26,o.tooltip$)),e.xp6(4),e.Udp("background-color",e.lcZ(5,28,o.typeColor$))("width",o.gaugePower,"%")("height",100,"%"),e.ERl("box-shadow","1px 1px 10px rgba(0, 0, 0, ",e.lcZ(6,30,o.gaugeShadowDepth$),")"),e.xp6(3),e.Udp("height",100,"%"),e.ERl("transition","opacity ",1e3,"ms ease-in-out, width 1000ms ease-in-out"),e.Udp("opacity",e.lcZ(8,32,o.gaugeDeltaSwitch$))("width",e.lcZ(9,34,o.gaugeDelta$),"%")("right",0,"%"),e.xp6(4),e.Q6J("ngIf",o.model.isLegacy),e.xp6(2),e.hij("",e.lcZ(14,36,o.name$)," ("),e.xp6(3),e.AsE(" ",e.xi3(17,38,o.model.details.actualGaugeEfficiency,".2"),"",o.model.details.isTypeBonus?"*":"",""),e.xp6(3),e.Oqu(e.lcZ(20,41,o.typeName$)))},dependencies:[h.O5,h.Ov,h.JJ,P.X$],styles:["@keyframes _ngcontent-%COMP%_bg-color{0%{opacity:.1}25%{background-color:red;opacity:.5}50%{opacity:.1}75%{background-color:#000;opacity:.5}}.toolPokemonMovesLegacyMarker[_ngcontent-%COMP%]{border-radius:50%;top:.25em;width:1em;height:1em;position:absolute;animation:_ngcontent-%COMP%_bg-color 2s infinite;opacity:.5}"]})}return a})();function ie(a,l){1&a&&e._UZ(0,"app-pokemon-quick-move",5),2&a&&e.Q6J("model",l.$implicit)}function ae(a,l){1&a&&e._UZ(0,"app-pokemon-cinematic-move",5),2&a&&e.Q6J("model",l.$implicit)}let se=(()=>{class a{master;pokemonFormJson;pokemonFormJson$=new b.t;pokemonForm;pokemonForm$=new b.t;opts;opts$=new v.X(null);specialMoves$;quickMoves$;moveSource$;quickMovesSorter$=new v.X(this.quickMovesSortByDefault);destroy$=new f.x;constructor(t){this.master=t}ngAfterViewInit(){}quickMovesSortByPower(t,n){return t.combatAttributes.power-n.combatAttributes.power}quickMovesSortByDefault(t,n){const o=t.combatAttributes.EPT-n.combatAttributes.EPT;return 0!==o?o:t.combatAttributes.power-n.combatAttributes.power}ngOnInit(){this.moveSource$=(0,g.a)([this.pokemonForm$,this.master.movesDatabase$,this.opts$]).pipe((0,r.U)(([n,o,i])=>new u.PokemonMovesExtra(n,o,i)),(0,k.d)(1));const t=this.moveSource$.pipe((0,r.U)(n=>{const o=[];for(const i of n.moves)i.isQuick&&o.push(i);return o}),(0,k.d)(1));this.quickMoves$=(0,g.a)([t,this.quickMovesSorter$]).pipe((0,r.U)(([n,o])=>n.sort(o))),this.specialMoves$=this.moveSource$.pipe((0,r.U)(n=>{const o=[];for(const i of n.moves)i.isSpecial&&o.push(i);return o}),(0,r.U)(n=>n.sort((o,i)=>{const s=i.data.energyDelta-o.data.energyDelta;return 0!==s?s:o.data.power-i.data.power})))}ngOnDestroy(){this.destroy$.next()}ngOnChanges(t){"pokemonFormJson"in t&&this.pokemonFormJson$.next(t.pokemonFormJson.currentValue),"pokemonForm"in t&&this.pokemonForm$.next(t.pokemonForm.currentValue),"opts"in t&&this.opts$.next(t.opts.currentValue)}trackByQuickMove(t,n){return n?n.movementId:null}static \u0275fac=function(n){return new(n||a)(e.Y36(U.m))};static \u0275cmp=e.Xpm({type:a,selectors:[["app-pokemon-moves"]],inputs:{pokemonFormJson:"pokemonFormJson",pokemonForm:"pokemonForm",opts:"opts"},features:[e.TTD],decls:15,vars:12,consts:[[1,"row"],[1,"col-6"],["translate",""],["src","/assets/octicons/question.svg",1,"m-1",3,"title"],[3,"model",4,"ngFor","ngForOf"],[3,"model"]],template:function(n,o){1&n&&(e.TgZ(0,"div",0)(1,"div",1)(2,"span",2),e._uU(3,"POKEMON.LABEL_QUICK_MOVES"),e.qZA(),e._UZ(4,"img",3),e.ALo(5,"translate"),e.YNc(6,ie,1,1,"app-pokemon-quick-move",4),e.ALo(7,"async"),e.qZA(),e.TgZ(8,"div",1)(9,"span",2),e._uU(10,"POKEMON.LABEL_SPECIAL_MOVES"),e.qZA(),e._UZ(11,"img",3),e.ALo(12,"translate"),e.YNc(13,ae,1,1,"app-pokemon-cinematic-move",4),e.ALo(14,"async"),e.qZA()()),2&n&&(e.xp6(4),e.s9C("title",e.lcZ(5,4,"LABEL_PREPARING_NOW")),e.xp6(2),e.Q6J("ngForOf",e.lcZ(7,6,o.quickMoves$)),e.xp6(5),e.s9C("title",e.lcZ(12,8,"LABEL_PREPARING_NOW")),e.xp6(2),e.Q6J("ngForOf",e.lcZ(14,10,o.specialMoves$)))},dependencies:[h.sg,P.Pi,te,ne,h.Ov,P.X$],styles:["[_nghost-%COMP%]{display:block}",".toolInputGroup[_ngcontent-%COMP%]{border:solid #eeeeee;border-radius:5px}.toolSmallText[_ngcontent-%COMP%]{font-size:.8em}.toolExtraSmallText[_ngcontent-%COMP%]{font-size:.5em}.appPokemonThumb[_ngcontent-%COMP%]{max-width:40px;max-height:40px}"]})}return a})();var pe=p(4165),re=p(4763),le=p(3081),me=p(7412);const ce=["evolutionChart"];function ue(a,l){if(1&a&&(e._UZ(0,"app-pokemon-status",28),e.ALo(1,"async"),e.ALo(2,"async"),e.ALo(3,"async"),e.ALo(4,"async")),2&a){const t=l.ngIf,n=e.oxw();e.Q6J("status",t)("pokemonName",e.lcZ(1,5,n.growupPokemonName$))("pokemonType",e.lcZ(2,7,n.growUpPokemonType$))("pokemonType2",e.lcZ(3,9,n.growUpPokemonType2$))("unlockCost",e.lcZ(4,11,n.growUpPokemonUnlockCost$))}}function de(a,l){if(1&a&&(e._UZ(0,"app-pokemon-moves",29),e.ALo(1,"async")),2&a){const t=l.ngIf,n=e.oxw();e.Q6J("pokemonForm",t)("opts",e.lcZ(1,2,n.growUpPokemonOpts$))}}function ge(a,l){1&a&&e._UZ(0,"app-pokemon-type",35),2&a&&e.Q6J("pokemonType",l.$implicit)}function he(a,l){if(1&a&&(e.TgZ(0,"div",31)(1,"div",32),e._uU(2,"x2.56"),e.qZA(),e.TgZ(3,"div",33),e.YNc(4,ge,1,1,"app-pokemon-type",34),e.qZA()()),2&a){const t=e.oxw().ngIf;e.xp6(4),e.Q6J("ngForOf",t)}}function fe(a,l){if(1&a&&(e.ynx(0),e.YNc(1,he,5,1,"div",30),e.BQk()),2&a){const t=l.ngIf;e.xp6(1),e.Q6J("ngIf",t.length>0)}}function ve(a,l){1&a&&e._UZ(0,"app-pokemon-type",35),2&a&&e.Q6J("pokemonType",l.$implicit)}function ye(a,l){if(1&a&&(e.TgZ(0,"div",37)(1,"div",38),e._uU(2,"x1.6"),e.qZA(),e.TgZ(3,"div",39),e.YNc(4,ve,1,1,"app-pokemon-type",34),e.qZA()()),2&a){const t=e.oxw().ngIf;e.xp6(4),e.Q6J("ngForOf",t)}}function $e(a,l){if(1&a&&(e.ynx(0),e.YNc(1,ye,5,1,"div",36),e.BQk()),2&a){const t=l.ngIf;e.xp6(1),e.Q6J("ngIf",t.length>0)}}function ke(a,l){1&a&&e._UZ(0,"app-pokemon-type",35),2&a&&e.Q6J("pokemonType",l.$implicit)}function Te(a,l){if(1&a&&(e.TgZ(0,"div",41)(1,"div",42),e._uU(2,"x0.625"),e.qZA(),e.TgZ(3,"div",43),e.YNc(4,ke,1,1,"app-pokemon-type",34),e.qZA()()),2&a){const t=e.oxw().ngIf;e.xp6(4),e.Q6J("ngForOf",t)}}function Pe(a,l){if(1&a&&(e.ynx(0),e.YNc(1,Te,5,1,"div",40),e.BQk()),2&a){const t=l.ngIf;e.xp6(1),e.Q6J("ngIf",t.length>0)}}function Ae(a,l){1&a&&e._UZ(0,"app-pokemon-type",35),2&a&&e.Q6J("pokemonType",l.$implicit)}function Ce(a,l){if(1&a&&(e.TgZ(0,"div",45)(1,"div",46),e._uU(2,"x0.39"),e.qZA(),e.TgZ(3,"div",47),e.YNc(4,Ae,1,1,"app-pokemon-type",34),e.qZA()()),2&a){const t=e.oxw().ngIf;e.xp6(4),e.Q6J("ngForOf",t)}}function _e(a,l){if(1&a&&(e.ynx(0),e.YNc(1,Ce,5,1,"div",44),e.BQk()),2&a){const t=l.ngIf;e.xp6(1),e.Q6J("ngIf",t.length>0)}}function Ue(a,l){1&a&&e._UZ(0,"app-pokemon-type",35),2&a&&e.Q6J("pokemonType",l.$implicit)}function Me(a,l){if(1&a&&(e.TgZ(0,"div",49)(1,"div",50),e._uU(2,"x0.244"),e.qZA(),e.TgZ(3,"div",51),e.YNc(4,Ue,1,1,"app-pokemon-type",34),e.qZA()()),2&a){const t=e.oxw().ngIf;e.xp6(4),e.Q6J("ngForOf",t)}}function Ze(a,l){if(1&a&&(e.ynx(0),e.YNc(1,Me,5,1,"div",48),e.BQk()),2&a){const t=l.ngIf;e.xp6(1),e.Q6J("ngIf",t.length>0)}}function we(a,l){if(1&a&&(e.TgZ(0,"div")(1,"h4",5),e._uU(2,"POKEMON.GROW_UP_SIMULATOR.LABEL_TYPE_AFFINITY_RATE"),e.qZA(),e.YNc(3,fe,2,1,"ng-container",27),e.ALo(4,"async"),e.YNc(5,$e,2,1,"ng-container",27),e.ALo(6,"async"),e.YNc(7,Pe,2,1,"ng-container",27),e.ALo(8,"async"),e.YNc(9,_e,2,1,"ng-container",27),e.ALo(10,"async"),e.YNc(11,Ze,2,1,"ng-container",27),e.ALo(12,"async"),e.qZA()),2&a){const t=e.oxw();e.xp6(3),e.Q6J("ngIf",e.lcZ(4,5,t.affinityVeryEffective$)),e.xp6(2),e.Q6J("ngIf",e.lcZ(6,7,t.affinityEffective$)),e.xp6(2),e.Q6J("ngIf",e.lcZ(8,9,t.affinityUneffective$)),e.xp6(2),e.Q6J("ngIf",e.lcZ(10,11,t.affinityVeryUneffective$)),e.xp6(2),e.Q6J("ngIf",e.lcZ(12,13,t.affinitySuperUneffective$))}}function xe(a,l){if(1&a&&(e.ynx(0),e.TgZ(1,"div",52)(2,"div",16)(3,"label"),e._uU(4,"Guessed Current Level: "),e.TgZ(5,"span"),e._uU(6),e.qZA()()(),e.TgZ(7,"div",16)(8,"label"),e._uU(9,"Consume Stardust: "),e.TgZ(10,"span"),e._uU(11),e.qZA()()(),e.TgZ(12,"div",16)(13,"label"),e._uU(14,"Consume Candy: "),e.TgZ(15,"span"),e._uU(16),e.qZA()()(),e.TgZ(17,"div",16)(18,"label"),e._uU(19,"Consume XL Candy: "),e.TgZ(20,"span"),e._uU(21),e.qZA()()()(),e.BQk()),2&a){const t=l.ngIf;e.xp6(6),e.Oqu(t.toPL),e.xp6(5),e.Oqu(t.requireStardust),e.xp6(5),e.Oqu(t.requireCandy),e.xp6(5),e.Oqu(t.requireXlCandy)}}const be=[{path:"index.htm",redirectTo:""},{path:"",component:(()=>{class a{master;translate;HUE_COLORS=["#FF0000AA","#FFFF00AA","#00FF00AA","#00FFFFAA","#0000FFAA","#FF00FFAA","#FF4000AA","#BFFF00AA","#00FF40AA","#00BFFFAA","#4000FFAA","#FF00BFAA","#FF8000AA","#80FF00AA","#00FF80AA","#0080FFAA","#8000FFAA","#FF0080AA","#FFBF00AA","#40FF00AA","#00FFBFAA","#0040FFAA","#BF00FFAA","#FF0040AA"];basicPokemonId$=new f.x;isValidPokemonTree$;inputPL=20;inputIV={AP:15,DP:15,HP:15};growupStatus$;growupPokemonId$;growupPokemonName$;growUpPokemonType$;growUpPokemonType2$;growUpPokemonForm$;growUpPokemonFormNullable$;growUpPokemonOpts$;growUpPokemonCalcultor$;growUpPokemonUnlockCost$;affinityVeryEffective$;affinityEffective$;affinityUneffective$;affinityVeryUneffective$;affinitySuperUneffective$;evolutionNodeSelected$=new b.t;evolutionRootCleared$=new v.X(void 0);currentStatus$=new v.X(null);growupCost;inputPL$=new v.X(this.inputPL);inputStatus$=new f.x;inputFormChanged$=new v.X(void 0);pokemonForm$=new f.x;pokemonIV$=new v.X(this.inputIV);destroy$=new f.x;evolutionRoot$;evolutionRootTree$;evolutionChart;constructor(t,n){this.master=t,this.translate=n}ngAfterViewInit(){}ngOnInit(){this.growUpPokemonOpts$=this.evolutionNodeSelected$.pipe((0,r.U)(i=>({megaBranch:i.megaBranch})));const t=(0,g.a)([this.pokemonIV$,this.inputPL$,this.evolutionNodeSelected$,this.growUpPokemonOpts$]).pipe((0,y.b)(50),(0,r.U)(([i,s,m,c])=>m.settings.computeStatus(i,s,c)));this.growupStatus$=(0,C.T)(t,this.evolutionRootCleared$.pipe((0,y.b)(50),(0,r.U)(()=>null))).pipe(),this.growUpPokemonForm$=this.evolutionNodeSelected$.pipe((0,r.U)(i=>i.settings.pokemonSetting)),this.growUpPokemonFormNullable$=(0,C.T)(this.growUpPokemonForm$,this.evolutionRootCleared$.pipe((0,r.U)(()=>null))).pipe(),this.growupPokemonId$=this.evolutionNodeSelected$.pipe((0,r.U)(i=>i.settings.getPokemonId({megaBranch:i.megaBranch}))),this.growupPokemonName$=this.growupPokemonId$.pipe((0,A.w)(i=>this.master.readPokemonName(i)));const n=(0,g.a)([this.evolutionNodeSelected$,this.growUpPokemonOpts$]).pipe((0,y.b)(50),(0,r.U)(([i,s])=>i.settings.getPokemonTypes(s)),(0,E.h)(i=>!!i),(0,k.d)(1));this.growUpPokemonType$=n.pipe((0,r.U)(i=>i.pokemonType)),this.growUpPokemonType2$=n.pipe((0,r.U)(i=>i.pokemonType2)),this.growUpPokemonCalcultor$=this.evolutionNodeSelected$.pipe((0,r.U)(i=>i.settings)),this.growUpPokemonUnlockCost$=this.growUpPokemonCalcultor$.pipe((0,r.U)(i=>i.getUnlockCost()),(0,k.d)(1)),(0,g.a)([this.master.level$,this.pokemonForm$,this.pokemonIV$,this.inputStatus$]).pipe((0,y.b)(50),(0,$.R)(this.destroy$)).subscribe(([i,s,m,c])=>{this.maybeComputePL(i,s,m,c)});const o=new R.i(this.master);this.evolutionRoot$=this.pokemonForm$.pipe((0,y.b)(500),(0,A.w)(i=>o.fetchEvolutionRoot$(i))),this.evolutionRootTree$=this.evolutionRoot$.pipe((0,r.U)(i=>o.buildEvolutionTree(i))),this.prepareChartStream(),(0,g.a)([this.evolutionNodeSelected$,this.growUpPokemonOpts$,this.pokemonIV$]).pipe((0,y.b)(50),(0,A.w)(([i,s,m])=>this.computeGrowingMaxCP$.pipe((0,r.U)(c=>i.settings.computeGrowingPL(c,m,s)))),(0,E.h)(i=>null!==i),(0,$.R)(this.destroy$)).subscribe(i=>{this.inputPL=i.PL,this.inputPL$.next(i.PL)}),this.isValidPokemonTree$=(0,C.T)(this.basicPokemonId$.pipe((0,r.U)(()=>!0)),this.evolutionRootCleared$.pipe((0,r.U)(()=>!1))).pipe(),this.prepareAffinityStream()}filterByTypeAffinity(t,n){const o=[];for(let i=0;i<Object.keys(u.PokemonTypeEnum).length/2;i++)n===t[i]&&o.push(u.PokemonTypeEnum[u.PokemonTypeEnum[i]]);return o}prepareAffinityStream(){const t=(0,g.a)([this.master.typeDatabase$,this.growUpPokemonForm$]).pipe((0,r.U)(([n,o])=>{const i=new u.PokemonType(n),s=Object.keys(u.PokemonTypeEnum).length/2,m=new Array(s);for(let c=0;c<s;c++)m[c]=i.attackEffective(u.PokemonTypeEnum[u.PokemonTypeEnum[c]],o.built.pokemonType,o.built.pokemonType2);return m}),(0,k.d)(1));this.affinityVeryEffective$=t.pipe((0,r.U)(n=>this.filterByTypeAffinity(n,u.AttackEffectivenessEnum.VeryEffective))),this.affinityEffective$=t.pipe((0,r.U)(n=>this.filterByTypeAffinity(n,u.AttackEffectivenessEnum.Effective))),this.affinityUneffective$=t.pipe((0,r.U)(n=>this.filterByTypeAffinity(n,u.AttackEffectivenessEnum.Uneffective))),this.affinityVeryUneffective$=t.pipe((0,r.U)(n=>this.filterByTypeAffinity(n,u.AttackEffectivenessEnum.VeryUneffective))),this.affinitySuperUneffective$=t.pipe((0,r.U)(n=>this.filterByTypeAffinity(n,u.AttackEffectivenessEnum.SuperUneffective)))}prepareChartStream(){(0,Q.F)(500).pipe((0,$.R)(this.destroy$)).subscribe(i=>{});const t=(0,g.a)([(0,_.of)(0),this.evolutionRootTree$]).pipe((0,G.j)(([i,s])=>s.children$?s.children$.pipe((0,Y.b)(m=>(0,B.D)(m)),(0,r.U)(m=>[i+1,m])):V.E),(0,F.z)(([i,s])=>this.master.level$.pipe((0,r.U)(m=>{const c=new u.PokemonForm(m,s.formJson),d={};s.form.megaBranch&&(d.megaBranch=s.form.megaBranch);const Z=c.getPokemonId(d),w={depth:i,settings:c,nodeId:Z,label:Z};return s.form.megaBranch&&(w.megaBranch=s.form.megaBranch),w}))),(0,F.z)(i=>this.master.readPokemonName(i.label).pipe((0,r.U)(s=>(i.label=s,i))))),n=(0,N.$)([t,(0,D.w)(1,99999)]).pipe((0,r.U)(([i,s])=>{const m=i;return m.pseudoId=s,m.colorHex=this.HUE_COLORS[s%this.HUE_COLORS.length],m}));this.inputFormChanged$.pipe((0,$.R)(this.destroy$)).subscribe(i=>{this.initializeVisibleStatus$.next(),this.currentStatus$.next(null),this.evolutionChartDataset=[],this.chartMap={},this.chartUpdated$.next()});const o=new f.x;n.pipe((0,$.R)(this.destroy$)).subscribe(i=>{this.chartMap[i.nodeId]||o.next(i),this.chartUpdated$.next()}),o.pipe((0,F.z)(i=>{const d=new q.g(i.settings.pokemonSetting.built.pokedexNumber,this.master,{megaBranch:i.megaBranch},{size:40,suppressNoImage:!0});return(0,N.$)([(0,_.of)(i),d.dataURL$])})).subscribe(([i,s])=>{const m=new Image;m.onload=()=>{c.pointStyle=m,this.chartUpdated$.next()},s&&(m.src=s);const c={backgroundColor:i.colorHex,data:[],label:i.label};this.evolutionChartDataset.push(c),this.chartMap[i.nodeId]={evolutionView:c,model:i},this.chartUpdated$.next()}),(0,g.a)([this.pokemonIV$,this.inputPL$,this.chartUpdated$]).pipe((0,y.b)(50),(0,$.R)(this.destroy$)).subscribe(([i,s,m])=>{for(const c in this.chartMap){const d=this.chartMap[c],w=d.model.settings.computeStatus(i,s,{megaBranch:d.model.megaBranch});d.evolutionView.data=[{x:w.CP,y:1}]}this.evolutionChart.update()})}chartMap={};evolutionChartOptions={responsive:!0,scales:{x:{min:0,suggestedMax:2e3},y:{display:!1,suggestedMax:1}},plugins:{legend:{position:"top"},title:{},tooltip:{callbacks:{title:this.tooltipEvolutionItem}}},elements:{point:{radius:8,hoverRadius:15}}};evolutionChartDataset=[];chartUpdated$=new f.x;findPokemonModel(t){for(const n in this.chartMap){const o=this.chartMap[n];if(o.model.label===t)return o.model}return null}tooltipEvolutionItem(t){let n="";for(const o of t)n+=`Name: ${o.dataset.label}\n`,n+=`CP: ${o.parsed.x}\n`;return n}evolutionChartClick({event:t,active:n}){(0,x.eM)("MainComponent.evolutionChartClick()",t,n),this.clickChartItem(t,n)}evolutionChartHover(t){}clickChartItem(t,n){if(!n||0===n.length)return;const m=t.chart.data.datasets[n[0].datasetIndex];for(const c in this.chartMap){const d=this.chartMap[c];if(d.evolutionView===m)return void this.evolutionNodeSelected$.next(d.model)}}onChangePL(t){this.inputPL$.next(t)}onChangeIV(t){this.inputIV=t,this.pokemonIV$.next(this.inputIV)}evolveForms$;ngOnDestroy(){this.destroy$.next()}maybeComputePL(t,n,o,i){if(!i.CP)return;const s=i.HP,m=i.CP;try{const d=new u.PokemonForm(t,n).computeMatchingLevel(m,s,o);this.currentStatus$.next(d),this.computePLValidator$.next(!0)}catch(c){(0,x.wb)("Seems compution failed. This message should be hidden.",c),this.computePLValidator$.next(!1)}}onValidatedPokemonName(t){this.basicPokemonId$.next(t)}onSelectedPokemonForm(t){this.evolutionNodeSelected$.next({settings:t})}onFormValueChanged(){this.inputFormChanged$.next()}onSelectedRawForm(t){this.pokemonForm$.next(t)}onClearedPokemonId(){this.evolutionRootCleared$.next()}onClickShowGrowUpStatus(){}computeGrowingMaxCP$=new f.x;onClickAutoPl(t,n){t.preventDefault(),this.computeGrowingMaxCP$.next(n)}computePLValidator$=new f.x;initializeVisibleStatus$=new f.x;onChangeVisibleStatus(t){this.inputStatus$.next(t)}static \u0275fac=function(n){return new(n||a)(e.Y36(U.m),e.Y36(M.xq))};static \u0275cmp=e.Xpm({type:a,selectors:[["app-training-simulator"]],viewQuery:function(n,o){if(1&n&&e.Gf(ce,5,I.jh),2&n){let i;e.iGM(i=e.CRH())&&(o.evolutionChart=i.first)}},decls:48,vars:40,consts:[[1,"toolInputGroup"],[3,"validatedName","selectedForm","selectedRawForm","valueChanged","valueCleared"],[1,"m-2","toolInputGroup",3,"valueChanged"],[1,"m-2","toolInputGroup",3,"validatorResult","initialize","disabled","currentStatus$","valueChanged"],[1,"m-2"],["translate",""],["fill","#7878dd","src","/assets/octicons/question.svg",1,"mx-1",3,"width","height","title"],[2,"display","block"],["baseChart","","height","50","type","scatter",3,"datasets","options","chartHover","chartClick"],["evolutionChart",""],["fill","#7878dd","src","/assets/octicons/question.svg",1,"mx-1",3,"title"],[1,"form-group","m-2","toolInputGroup"],[1,"input-group","row","m-2"],["title","Pokemon's Level which Grow Up to",1,"col-1","form-check-label","p-2","text-end"],[1,"col-4"],["type","number","min","1","max","52","step","0.5",1,"form-control",3,"disabled","ngModel","ngModelChange"],[1,"col-3"],[1,"btn-group"],["type","button","data-bs-toggle","dropdown","aria-expanded","false","translate","",1,"btn","btn-primary","dropdown-toggle"],[1,"dropdown-menu"],["href","#",1,"dropdown-item",3,"click"],[1,"row","m-2"],[1,"col-3","text-center"],[3,"pokemonFormJson","opts"],[1,"col-9"],[3,"status","pokemonName","pokemonType","pokemonType2","unlockCost",4,"ngIf"],["class","m-2",3,"pokemonForm","opts",4,"ngIf"],[4,"ngIf"],[3,"status","pokemonName","pokemonType","pokemonType2","unlockCost"],[1,"m-2",3,"pokemonForm","opts"],["class","row m-2 rounded border border-danger",4,"ngIf"],[1,"row","m-2","rounded","border","border-danger"],[1,"p-1","col-2","bg-danger","text-white"],["title","x2.56",1,"p-1","col"],[3,"pokemonType",4,"ngFor","ngForOf"],[3,"pokemonType"],["class","row m-2 rounded border border-warning",4,"ngIf"],[1,"row","m-2","rounded","border","border-warning"],[1,"p-1","col-2","bg-warning","text-white"],["title","x1.6",1,"p-1","col"],["class","row m-2 rounded border border-light",4,"ngIf"],[1,"row","m-2","rounded","border","border-light"],[1,"p-1","col-2","bg-light","text-dark"],["title","x0.625",1,"p-1","col"],["class","row m-2 rounded border border-success",4,"ngIf"],[1,"row","m-2","rounded","border","border-success"],[1,"p-1","col-2","bg-success","text-dark"],["title","x0.39",1,"p-1","col"],["class","row m-2 rounded border border-primary",4,"ngIf"],[1,"row","m-2","rounded","border","border-primary"],[1,"p-1","col-2","bg-primary","text-dark"],["title","x0.244",1,"p-1","col"],[1,"row"]],template:function(n,o){1&n&&(e.TgZ(0,"div",0)(1,"app-pokemon-form",1),e.NdJ("validatedName",function(s){return o.onValidatedPokemonName(s)})("selectedForm",function(s){return o.onSelectedPokemonForm(s)})("selectedRawForm",function(s){return o.onSelectedRawForm(s)})("valueChanged",function(){return o.onFormValueChanged()})("valueCleared",function(){return o.onClearedPokemonId()}),e.qZA(),e.TgZ(2,"app-pokemon-iv",2),e.NdJ("valueChanged",function(s){return o.onChangeIV(s)}),e.qZA(),e.TgZ(3,"app-pokemon-visible-status",3),e.NdJ("valueChanged",function(s){return o.onChangeVisibleStatus(s)}),e.ALo(4,"async"),e.qZA()(),e.TgZ(5,"h3",4)(6,"span",5),e._uU(7,"POKEMON.GROW_UP_SIMULATOR.LABEL_EVOLUTION_TREE"),e.qZA(),e._UZ(8,"app-inline-svg",6),e.ALo(9,"translate"),e.qZA(),e.TgZ(10,"div",7)(11,"canvas",8,9),e.NdJ("chartHover",function(s){return o.evolutionChartHover(s)})("chartClick",function(s){return o.evolutionChartClick(s)}),e.qZA()(),e.TgZ(13,"h3",4)(14,"span",5),e._uU(15,"POKEMON.GROW_UP_SIMULATOR.AFTER_GROW_UP_LABEL"),e.qZA(),e._UZ(16,"app-inline-svg",10),e.ALo(17,"translate"),e.qZA(),e.TgZ(18,"div",11)(19,"div",12)(20,"label",13),e._uU(21,"PL"),e.qZA(),e.TgZ(22,"span",14)(23,"input",15),e.NdJ("ngModelChange",function(s){return o.inputPL=s})("ngModelChange",function(s){return o.onChangePL(s)}),e.ALo(24,"async"),e.qZA()(),e.TgZ(25,"div",16)(26,"div",17)(27,"button",18),e.ALo(28,"async"),e._uU(29,"POKEMON.GROW_UP_SIMULATOR.AUTO_LABEL"),e.qZA(),e.TgZ(30,"div",19)(31,"a",20),e.NdJ("click",function(s){return o.onClickAutoPl(s,1500)}),e._uU(32,"Super League (CP 1500)"),e.qZA(),e.TgZ(33,"a",20),e.NdJ("click",function(s){return o.onClickAutoPl(s,2500)}),e._uU(34,"Hyper League (CP 2500)"),e.qZA()()()()(),e.TgZ(35,"div",21)(36,"div",22),e._UZ(37,"app-pokemon-thumb",23),e.ALo(38,"async"),e.ALo(39,"async"),e.qZA(),e.TgZ(40,"div",24),e.YNc(41,ue,5,13,"app-pokemon-status",25),e.ALo(42,"async"),e.qZA()(),e.YNc(43,de,2,4,"app-pokemon-moves",26),e.ALo(44,"async"),e.YNc(45,we,13,15,"div",27),e.ALo(46,"async"),e.YNc(47,xe,22,4,"ng-container",27),e.qZA()),2&n&&(e.xp6(3),e.Q6J("validatorResult",o.computePLValidator$)("initialize",o.initializeVisibleStatus$)("disabled",!e.lcZ(4,20,o.isValidPokemonTree$))("currentStatus$",o.currentStatus$),e.xp6(5),e.s9C("title",e.lcZ(9,22,"LABEL_PREPARING_NOW")),e.Q6J("width",20)("height",20),e.xp6(3),e.Q6J("datasets",o.evolutionChartDataset)("options",o.evolutionChartOptions),e.xp6(5),e.s9C("title",e.lcZ(17,24,"LABEL_PREPARING_NOW")),e.xp6(7),e.Q6J("disabled",!e.lcZ(24,26,o.isValidPokemonTree$))("ngModel",o.inputPL),e.xp6(4),e.ekj("disabled",!e.lcZ(28,28,o.isValidPokemonTree$)),e.xp6(10),e.Q6J("pokemonFormJson",e.lcZ(38,30,o.growUpPokemonFormNullable$))("opts",e.lcZ(39,32,o.growUpPokemonOpts$)),e.xp6(4),e.Q6J("ngIf",e.lcZ(42,34,o.growupStatus$)),e.xp6(2),e.Q6J("ngIf",e.lcZ(44,36,o.growUpPokemonCalcultor$)),e.xp6(2),e.Q6J("ngIf",e.lcZ(46,38,o.growUpPokemonFormNullable$)),e.xp6(2),e.Q6J("ngIf",o.growupCost))},dependencies:[h.sg,h.O5,T.Fj,T.wV,T.JJ,T.qQ,T.Fd,T.On,I.jh,z.i,H.l,W.J,se,pe.a,re.k,le.A,me.h,P.Pi,h.Ov,P.X$],styles:[".toolInputGroup[_ngcontent-%COMP%]{border:solid #eeeeee;border-radius:5px}.toolSmallText[_ngcontent-%COMP%]{font-size:.8em}.toolExtraSmallText[_ngcontent-%COMP%]{font-size:.5em}.appPokemonThumb[_ngcontent-%COMP%]{max-width:40px;max-height:40px}"]})}return a})(),data:{gitweeTitle:"TITLE_POKEMON_GROWUP_SIMULATOR"}}];let Fe=(()=>{class a{static \u0275fac=function(n){return new(n||a)};static \u0275mod=e.oAB({type:a});static \u0275inj=e.cJS({imports:[L.Bz.forChild(be),L.Bz]})}return a})(),Oe=(()=>{class a{constructor(){(0,x.eM)("GrowUpSimulatorModule.constructor()")}static \u0275fac=function(n){return new(n||a)};static \u0275mod=e.oAB({type:a});static \u0275inj=e.cJS({providers:[{provide:M.uY,useValue:"app/tools/pokemongo/training-simulator/training-simulator/"}],imports:[h.ez,Fe,J.i]})}return a})()}}]);