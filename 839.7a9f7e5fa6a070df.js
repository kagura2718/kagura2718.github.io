"use strict";(self.webpackChunkKaguraGithubPages=self.webpackChunkKaguraGithubPages||[]).push([[839],{4839:(Ee,I,m)=>{m.r(I),m.d(I,{GrowUpSimulatorModule:()=>Ie});var i=m(1180),f=m(6814),Q=m(9025),E=m(5187),N=m(3185),V=m(9935),F=m(553),h=m(9071),y=m(8645),O=m(7328),Z=m(5619),l=m(7398),v=m(2572),A=m(3019),S=m(2181),k=m(9773),B=m(1687),M=m(2096),G=m(6232),D=m(2459),J=m(9026),Y=m(1479),$=m(3620),C=m(4664),P=m(7081),q=m(9336),z=m(6328),L=m(9769),H=m(6570),e=m(5879),U=m(4154),w=m(3766),T=m(5739),W=m(8377),X=m(2933),j=m(6457),_=m(9515),R=m(4825),K=m(6699),ee=m(7921);function oe(s,p){if(1&s&&e._UZ(0,"div",7),2&s){const r=p.ngIf;e.ERl("transition","width ",100,"ms ease-out"),e.Udp("opacity",r[0]/50+.5)("right",0,"%")("height",100,"%")("width",r[0],"%")}}function te(s,p){1&s&&(e.TgZ(0,"span",8),e.ALo(1,"translate"),e._uU(2,"\xa0"),e.qZA()),2&s&&e.s9C("title",e.lcZ(1,1,"POKEMON.MOVES.TOOLTIP_ELITE_MOVE"))}let ne=(()=>{var s;class p{constructor(t,o){(0,i.Z)(this,"master",void 0),(0,i.Z)(this,"translate",void 0),(0,i.Z)(this,"model",void 0),(0,i.Z)(this,"onMoveMs",void 0),(0,i.Z)(this,"name$",void 0),(0,i.Z)(this,"tooltip$",void 0),(0,i.Z)(this,"typeColor$",void 0),(0,i.Z)(this,"typeName$",void 0),(0,i.Z)(this,"powerWidth$",void 0),(0,i.Z)(this,"speedMove$",void 0),(0,i.Z)(this,"deltaGauge$",void 0),(0,i.Z)(this,"deltaGaugeHeight$",void 0),(0,i.Z)(this,"pokemonForm$",void 0),(0,i.Z)(this,"details$",void 0),(0,i.Z)(this,"gaugeShadowDepth$",void 0),this.master=t,this.translate=o}ngOnInit(){this.name$=this.master.readMovesName(this.model.movementId),this.typeColor$=this.master.typeDatabase$.pipe((0,l.U)(a=>`#${a.types[this.model.data.movesType].themeColor}`)),this.typeName$=(0,v.a)([this.master.readEnumTypeName$(this.model.data.movesType)]).pipe((0,l.U)(([a])=>a)),this.powerWidth$=(0,M.of)(this.computePowerWidth(this.model.details.actualPower)),this.onMoveMs=500*this.model.data.combatOverrides.rigidTurn;const o=(0,A.T)((0,R.H)(0,this.onMoveMs).pipe((0,l.U)(a=>a)));this.speedMove$=(0,v.a)([this.powerWidth$,o]).pipe((0,l.U)(([a,n])=>n%2==0?0:100-a)),this.deltaGaugeHeight$=this.speedMove$.pipe((0,l.U)(a=>this.model.data.combatOverrides.energyDelta),(0,K.R)((a,n)=>(a+=n)%101,0),(0,ee.O)(0)),this.deltaGauge$=this.deltaGaugeHeight$.pipe((0,l.U)(a=>[a,(100-Math.max(Math.min(a,100),0))/2])),this.pokemonForm$=this.master.level$.pipe((0,l.U)(a=>new h.PokemonForm(a,this.model.pokemonSetting)),(0,P.d)(1)),this.details$=this.buildMoveDetails(),this.tooltip$=this.buildTooltip()}computePowerWidth(t){return t/32*50}buildMoveDetails(){const t=this.model.details;return(0,v.a)([this.typeName$]).pipe((0,l.U)(([o])=>{const a={};return Object.assign(a,t),a.typeName=o,a}))}buildTooltip(){return this.details$.pipe((0,C.w)(t=>{const o={energyDelta:t.energyDelta,power:t.power,actualPower:t.actualPower.toFixed(2),typeName:t.typeName,rigidTurn:t.rigidTurn,EPT:t.EPT.toFixed(2),PPT:t.PPT.toFixed(2),actualPPT:t.actualPPT.toFixed(2),EPTperAPPT:t.EPTperAPPT.toFixed(2),QMTP:t.QMTP.toFixed(2)};return this.translate.get("POKEMON.MOVES.TOOLTIP_QUICK_DETAILS",o)}))}}return s=p,(0,i.Z)(p,"\u0275fac",function(t){return new(t||s)(e.Y36(U.m),e.Y36(w.xq))}),(0,i.Z)(p,"\u0275cmp",e.Xpm({type:s,selectors:[["app-pokemon-quick-move"]],inputs:{model:"model"},decls:24,vars:36,consts:[[1,"p-1",2,"cursor","pointer",3,"title"],[2,"position","relative"],[2,"position","absolute","background-color","#eeeeee","z-index","-3","width","100%","height","100%","border-radius","20px"],["style","position: absolute; background-color: #aaaaaa; z-index: -2; border-radius: 20px;",3,"transition","opacity","right","height","width",4,"ngIf"],[2,"position","absolute","z-index","-1","height","100%","border-radius","20px"],["class","toolPokemonMovesLegacyMarker",3,"title",4,"ngIf"],[2,"border-radius","10%"],[2,"position","absolute","background-color","#aaaaaa","z-index","-2","border-radius","20px"],[1,"toolPokemonMovesLegacyMarker",3,"title"]],template:function(t,o){1&t&&(e.TgZ(0,"div",0),e.ALo(1,"async"),e.TgZ(2,"div",1),e._UZ(3,"div",2),e.YNc(4,oe,1,11,"div",3),e.ALo(5,"async"),e.TgZ(6,"div",4),e.ALo(7,"async"),e.ALo(8,"async"),e.ALo(9,"async"),e.qZA(),e.TgZ(10,"div"),e.YNc(11,te,3,3,"span",5),e.TgZ(12,"span"),e._uU(13),e.ALo(14,"async"),e.qZA(),e.TgZ(15,"span"),e._uU(16,"( "),e.TgZ(17,"span"),e._uU(18),e.ALo(19,"number"),e.qZA(),e.TgZ(20,"span",6),e._uU(21),e.ALo(22,"async"),e.qZA(),e._uU(23," )"),e.qZA()()()()),2&t&&(e.s9C("title",e.lcZ(1,19,o.tooltip$)),e.xp6(4),e.Q6J("ngIf",e.lcZ(5,21,o.deltaGauge$)),e.xp6(2),e.Udp("width",e.lcZ(7,23,o.powerWidth$),"%"),e.ERl("transition","left ",o.onMoveMs,"ms ease-in-out"),e.Udp("left",e.lcZ(8,25,o.speedMove$),"%")("background-color",e.lcZ(9,27,o.typeColor$)),e.ERl("box-shadow","1px 1px 10px rgba(0, 0, 0, ",.5,")"),e.xp6(5),e.Q6J("ngIf",o.model.isLegacy),e.xp6(2),e.hij("",e.lcZ(14,29,o.name$)," "),e.xp6(5),e.AsE("",e.xi3(19,31,o.model.details.PPT,".2"),"",o.model.details.isTypeBonus?"*":"",""),e.xp6(3),e.Oqu(e.lcZ(22,34,o.typeName$)))},dependencies:[f.O5,f.Ov,f.JJ,_.X$],styles:["@keyframes _ngcontent-%COMP%_bg-color{0%{opacity:.1}25%{background-color:red;opacity:.5}50%{opacity:.1}75%{background-color:#000;opacity:.5}}.toolPokemonMovesLegacyMarker[_ngcontent-%COMP%]{border-radius:50%;top:.25em;width:1em;height:1em;position:absolute;animation:_ngcontent-%COMP%_bg-color 2s infinite;opacity:.5}"]})),p})();function ie(s,p){1&s&&(e.TgZ(0,"span",7),e.ALo(1,"translate"),e._uU(2,"\xa0"),e.qZA()),2&s&&e.s9C("title",e.lcZ(1,1,"POKEMON.MOVES.TOOLTIP_ELITE_MOVE"))}let se=(()=>{var s;class p{constructor(t,o){(0,i.Z)(this,"master",void 0),(0,i.Z)(this,"translate",void 0),(0,i.Z)(this,"model",void 0),(0,i.Z)(this,"name$",void 0),(0,i.Z)(this,"tooltip$",void 0),(0,i.Z)(this,"typeColor$",void 0),(0,i.Z)(this,"typeName$",void 0),(0,i.Z)(this,"gaugePower",void 0),(0,i.Z)(this,"gaugeDelta$",void 0),(0,i.Z)(this,"details$",void 0),(0,i.Z)(this,"gaugeShadowDepth$",void 0),(0,i.Z)(this,"gaugeDeltaSwitch$",void 0),this.master=t,this.translate=o}ngOnInit(){this.gaugePower=Math.floor(this.model.details.actualPower/250*100),this.name$=this.master.readMovesName(this.model.movementId),this.typeColor$=this.master.typeDatabase$.pipe((0,l.U)(o=>`#${o.types[this.model.data.movesType].themeColor}`)),this.typeName$=(0,v.a)([this.master.readEnumTypeName$(this.model.data.movesType)]).pipe((0,l.U)(([o])=>o));const t=(0,R.H)(0,1e3).pipe((0,l.U)(o=>o%2==0));this.gaugeDeltaSwitch$=t.pipe((0,l.U)(o=>o?0:1)),this.gaugeDelta$=t.pipe((0,l.U)(o=>o?0:-this.model.data.energyDelta)),this.gaugeShadowDepth$=(0,M.of)("0.5"),this.details$=this.buildDetails(),this.tooltip$=this.buildTooltip()}buildDetails(){const t=this.model.details;return(0,v.a)([this.typeName$]).pipe((0,l.U)(([o])=>{const a={};return Object.assign(a,t),a.typeName=o,a}))}buildTooltip(){return this.details$.pipe((0,C.w)(t=>{const o={energyDelta:t.energyDelta,power:t.power,actualPower:t.actualPower,typeName:t.typeName,gaugeEfficiency:t.gaugeEfficiency.toFixed(2),actualGaugeEfficiency:t.actualGaugeEfficiency.toFixed(2)};return this.translate.get("POKEMON.MOVES.TOOLTIP_CINEMATIC_DETAILS",o)}))}}return s=p,(0,i.Z)(p,"\u0275fac",function(t){return new(t||s)(e.Y36(U.m),e.Y36(w.xq))}),(0,i.Z)(p,"\u0275cmp",e.Xpm({type:s,selectors:[["app-pokemon-cinematic-move"]],inputs:{model:"model"},decls:22,vars:43,consts:[[1,"p-1",2,"cursor","pointer",3,"title"],[2,"position","relative"],[2,"position","absolute","background-color","#eeeeee","z-index","-3","width","100%","height","100%","border-radius","20px"],[2,"position","absolute","z-index","-2","border-radius","20px"],[2,"position","absolute","z-index","-1","border-radius","20px","background-color","#aaaaaa"],["class","toolPokemonMovesLegacyMarker",3,"title",4,"ngIf"],[2,"border-radius","10%"],[1,"toolPokemonMovesLegacyMarker",3,"title"]],template:function(t,o){1&t&&(e.TgZ(0,"div",0),e.ALo(1,"async"),e.TgZ(2,"div",1),e._UZ(3,"div",2),e.TgZ(4,"div",3),e.ALo(5,"async"),e.ALo(6,"async"),e.qZA(),e.TgZ(7,"div",4),e.ALo(8,"async"),e.ALo(9,"async"),e.qZA(),e.TgZ(10,"div"),e.YNc(11,ie,3,3,"span",5),e.TgZ(12,"span"),e._uU(13),e.ALo(14,"async"),e.TgZ(15,"span"),e._uU(16),e.ALo(17,"number"),e.qZA(),e.TgZ(18,"span",6),e._uU(19),e.ALo(20,"async"),e.qZA(),e._uU(21,") "),e.qZA()()()()),2&t&&(e.s9C("title",e.lcZ(1,26,o.tooltip$)),e.xp6(4),e.Udp("background-color",e.lcZ(5,28,o.typeColor$))("width",o.gaugePower,"%")("height",100,"%"),e.ERl("box-shadow","1px 1px 10px rgba(0, 0, 0, ",e.lcZ(6,30,o.gaugeShadowDepth$),")"),e.xp6(3),e.Udp("height",100,"%"),e.ERl("transition","opacity ",1e3,"ms ease-in-out, width 1000ms ease-in-out"),e.Udp("opacity",e.lcZ(8,32,o.gaugeDeltaSwitch$))("width",e.lcZ(9,34,o.gaugeDelta$),"%")("right",0,"%"),e.xp6(4),e.Q6J("ngIf",o.model.isLegacy),e.xp6(2),e.hij("",e.lcZ(14,36,o.name$)," ("),e.xp6(3),e.AsE(" ",e.xi3(17,38,o.model.details.actualGaugeEfficiency,".2"),"",o.model.details.isTypeBonus?"*":"",""),e.xp6(3),e.Oqu(e.lcZ(20,41,o.typeName$)))},dependencies:[f.O5,f.Ov,f.JJ,_.X$],styles:["@keyframes _ngcontent-%COMP%_bg-color{0%{opacity:.1}25%{background-color:red;opacity:.5}50%{opacity:.1}75%{background-color:#000;opacity:.5}}.toolPokemonMovesLegacyMarker[_ngcontent-%COMP%]{border-radius:50%;top:.25em;width:1em;height:1em;position:absolute;animation:_ngcontent-%COMP%_bg-color 2s infinite;opacity:.5}"]})),p})();function ae(s,p){1&s&&e._UZ(0,"app-pokemon-quick-move",5),2&s&&e.Q6J("model",p.$implicit)}function pe(s,p){1&s&&e._UZ(0,"app-pokemon-cinematic-move",5),2&s&&e.Q6J("model",p.$implicit)}let re=(()=>{var s;class p{constructor(t){(0,i.Z)(this,"master",void 0),(0,i.Z)(this,"pokemonFormJson",void 0),(0,i.Z)(this,"pokemonFormJson$",new O.t),(0,i.Z)(this,"pokemonForm",void 0),(0,i.Z)(this,"pokemonForm$",new O.t),(0,i.Z)(this,"opts",void 0),(0,i.Z)(this,"opts$",new Z.X(null)),(0,i.Z)(this,"specialMoves$",void 0),(0,i.Z)(this,"quickMoves$",void 0),(0,i.Z)(this,"moveSource$",void 0),(0,i.Z)(this,"quickMovesSorter$",new Z.X(this.quickMovesSortByDefault)),(0,i.Z)(this,"destroy$",new y.x),this.master=t}ngAfterViewInit(){}quickMovesSortByPower(t,o){return t.combatAttributes.power-o.combatAttributes.power}quickMovesSortByDefault(t,o){const a=t.combatAttributes.EPT-o.combatAttributes.EPT;return 0!==a?a:t.combatAttributes.power-o.combatAttributes.power}ngOnInit(){this.moveSource$=(0,v.a)([this.pokemonForm$,this.master.movesDatabase$,this.opts$]).pipe((0,l.U)(([o,a,n])=>new h.PokemonMovesExtra(o,a,n)),(0,P.d)(1));const t=this.moveSource$.pipe((0,l.U)(o=>{const a=[];for(const n of o.moves)n.isQuick&&a.push(n);return a}),(0,P.d)(1));this.quickMoves$=(0,v.a)([t,this.quickMovesSorter$]).pipe((0,l.U)(([o,a])=>o.sort(a))),this.specialMoves$=this.moveSource$.pipe((0,l.U)(o=>{const a=[];for(const n of o.moves)n.isSpecial&&a.push(n);return a}),(0,l.U)(o=>o.sort((a,n)=>{const c=n.data.energyDelta-a.data.energyDelta;return 0!==c?c:a.data.power-n.data.power})))}ngOnDestroy(){this.destroy$.next()}ngOnChanges(t){"pokemonFormJson"in t&&this.pokemonFormJson$.next(t.pokemonFormJson.currentValue),"pokemonForm"in t&&this.pokemonForm$.next(t.pokemonForm.currentValue),"opts"in t&&this.opts$.next(t.opts.currentValue)}trackByQuickMove(t,o){return o?o.movementId:null}}return s=p,(0,i.Z)(p,"\u0275fac",function(t){return new(t||s)(e.Y36(U.m))}),(0,i.Z)(p,"\u0275cmp",e.Xpm({type:s,selectors:[["app-pokemon-moves"]],inputs:{pokemonFormJson:"pokemonFormJson",pokemonForm:"pokemonForm",opts:"opts"},features:[e.TTD],decls:15,vars:12,consts:[[1,"row"],[1,"col-6"],["translate",""],["src","/assets/octicons/question.svg",1,"m-1",3,"title"],[3,"model",4,"ngFor","ngForOf"],[3,"model"]],template:function(t,o){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"span",2),e._uU(3,"POKEMON.LABEL_QUICK_MOVES"),e.qZA(),e._UZ(4,"img",3),e.ALo(5,"translate"),e.YNc(6,ae,1,1,"app-pokemon-quick-move",4),e.ALo(7,"async"),e.qZA(),e.TgZ(8,"div",1)(9,"span",2),e._uU(10,"POKEMON.LABEL_SPECIAL_MOVES"),e.qZA(),e._UZ(11,"img",3),e.ALo(12,"translate"),e.YNc(13,pe,1,1,"app-pokemon-cinematic-move",4),e.ALo(14,"async"),e.qZA()()),2&t&&(e.xp6(4),e.s9C("title",e.lcZ(5,4,"LABEL_PREPARING_NOW")),e.xp6(2),e.Q6J("ngForOf",e.lcZ(7,6,o.quickMoves$)),e.xp6(5),e.s9C("title",e.lcZ(12,8,"LABEL_PREPARING_NOW")),e.xp6(2),e.Q6J("ngForOf",e.lcZ(14,10,o.specialMoves$)))},dependencies:[f.sg,_.Pi,ne,se,f.Ov,_.X$],styles:["[_nghost-%COMP%]{display:block}",".toolInputGroup[_ngcontent-%COMP%]{border:solid #eeeeee;border-radius:5px}.toolSmallText[_ngcontent-%COMP%]{font-size:.8em}.toolExtraSmallText[_ngcontent-%COMP%]{font-size:.5em}.appPokemonThumb[_ngcontent-%COMP%]{max-width:40px;max-height:40px}"]})),p})();var me=m(1143),le=m(8822),ce=m(5719),de=m(6448);const ue=["evolutionChart"];function he(s,p){if(1&s&&(e._UZ(0,"app-pokemon-status",28),e.ALo(1,"async"),e.ALo(2,"async"),e.ALo(3,"async"),e.ALo(4,"async")),2&s){const r=p.ngIf,t=e.oxw();e.Q6J("status",r)("pokemonName",e.lcZ(1,5,t.growupPokemonName$))("pokemonType",e.lcZ(2,7,t.growUpPokemonType$))("pokemonType2",e.lcZ(3,9,t.growUpPokemonType2$))("unlockCost",e.lcZ(4,11,t.growUpPokemonUnlockCost$))}}function ge(s,p){if(1&s&&(e._UZ(0,"app-pokemon-moves",29),e.ALo(1,"async")),2&s){const r=p.ngIf,t=e.oxw();e.Q6J("pokemonForm",r)("opts",e.lcZ(1,2,t.growUpPokemonOpts$))}}function ve(s,p){1&s&&e._UZ(0,"app-pokemon-type",35),2&s&&e.Q6J("pokemonType",p.$implicit)}function fe(s,p){if(1&s&&(e.TgZ(0,"div",31)(1,"div",32),e._uU(2,"x2.56"),e.qZA(),e.TgZ(3,"div",33),e.YNc(4,ve,1,1,"app-pokemon-type",34),e.qZA()()),2&s){const r=e.oxw().ngIf;e.xp6(4),e.Q6J("ngForOf",r)}}function ye(s,p){if(1&s&&(e.ynx(0),e.YNc(1,fe,5,1,"div",30),e.BQk()),2&s){const r=p.ngIf;e.xp6(1),e.Q6J("ngIf",r.length>0)}}function Ze(s,p){1&s&&e._UZ(0,"app-pokemon-type",35),2&s&&e.Q6J("pokemonType",p.$implicit)}function $e(s,p){if(1&s&&(e.TgZ(0,"div",37)(1,"div",38),e._uU(2,"x1.6"),e.qZA(),e.TgZ(3,"div",39),e.YNc(4,Ze,1,1,"app-pokemon-type",34),e.qZA()()),2&s){const r=e.oxw().ngIf;e.xp6(4),e.Q6J("ngForOf",r)}}function ke(s,p){if(1&s&&(e.ynx(0),e.YNc(1,$e,5,1,"div",36),e.BQk()),2&s){const r=p.ngIf;e.xp6(1),e.Q6J("ngIf",r.length>0)}}function Pe(s,p){1&s&&e._UZ(0,"app-pokemon-type",35),2&s&&e.Q6J("pokemonType",p.$implicit)}function Te(s,p){if(1&s&&(e.TgZ(0,"div",41)(1,"div",42),e._uU(2,"x0.625"),e.qZA(),e.TgZ(3,"div",43),e.YNc(4,Pe,1,1,"app-pokemon-type",34),e.qZA()()),2&s){const r=e.oxw().ngIf;e.xp6(4),e.Q6J("ngForOf",r)}}function _e(s,p){if(1&s&&(e.ynx(0),e.YNc(1,Te,5,1,"div",40),e.BQk()),2&s){const r=p.ngIf;e.xp6(1),e.Q6J("ngIf",r.length>0)}}function Ce(s,p){1&s&&e._UZ(0,"app-pokemon-type",35),2&s&&e.Q6J("pokemonType",p.$implicit)}function Ae(s,p){if(1&s&&(e.TgZ(0,"div",45)(1,"div",46),e._uU(2,"x0.39"),e.qZA(),e.TgZ(3,"div",47),e.YNc(4,Ce,1,1,"app-pokemon-type",34),e.qZA()()),2&s){const r=e.oxw().ngIf;e.xp6(4),e.Q6J("ngForOf",r)}}function Me(s,p){if(1&s&&(e.ynx(0),e.YNc(1,Ae,5,1,"div",44),e.BQk()),2&s){const r=p.ngIf;e.xp6(1),e.Q6J("ngIf",r.length>0)}}function Ue(s,p){1&s&&e._UZ(0,"app-pokemon-type",35),2&s&&e.Q6J("pokemonType",p.$implicit)}function we(s,p){if(1&s&&(e.TgZ(0,"div",49)(1,"div",50),e._uU(2,"x0.244"),e.qZA(),e.TgZ(3,"div",51),e.YNc(4,Ue,1,1,"app-pokemon-type",34),e.qZA()()),2&s){const r=e.oxw().ngIf;e.xp6(4),e.Q6J("ngForOf",r)}}function xe(s,p){if(1&s&&(e.ynx(0),e.YNc(1,we,5,1,"div",48),e.BQk()),2&s){const r=p.ngIf;e.xp6(1),e.Q6J("ngIf",r.length>0)}}function be(s,p){if(1&s&&(e.TgZ(0,"div")(1,"h4",5),e._uU(2,"POKEMON.GROW_UP_SIMULATOR.LABEL_TYPE_AFFINITY_RATE"),e.qZA(),e.YNc(3,ye,2,1,"ng-container",27),e.ALo(4,"async"),e.YNc(5,ke,2,1,"ng-container",27),e.ALo(6,"async"),e.YNc(7,_e,2,1,"ng-container",27),e.ALo(8,"async"),e.YNc(9,Me,2,1,"ng-container",27),e.ALo(10,"async"),e.YNc(11,xe,2,1,"ng-container",27),e.ALo(12,"async"),e.qZA()),2&s){const r=e.oxw();e.xp6(3),e.Q6J("ngIf",e.lcZ(4,5,r.affinityVeryEffective$)),e.xp6(2),e.Q6J("ngIf",e.lcZ(6,7,r.affinityEffective$)),e.xp6(2),e.Q6J("ngIf",e.lcZ(8,9,r.affinityUneffective$)),e.xp6(2),e.Q6J("ngIf",e.lcZ(10,11,r.affinityVeryUneffective$)),e.xp6(2),e.Q6J("ngIf",e.lcZ(12,13,r.affinitySuperUneffective$))}}function Fe(s,p){if(1&s&&(e.ynx(0),e.TgZ(1,"div",52)(2,"div",16)(3,"label"),e._uU(4,"Guessed Current Level: "),e.TgZ(5,"span"),e._uU(6),e.qZA()()(),e.TgZ(7,"div",16)(8,"label"),e._uU(9,"Consume Stardust: "),e.TgZ(10,"span"),e._uU(11),e.qZA()()(),e.TgZ(12,"div",16)(13,"label"),e._uU(14,"Consume Candy: "),e.TgZ(15,"span"),e._uU(16),e.qZA()()(),e.TgZ(17,"div",16)(18,"label"),e._uU(19,"Consume XL Candy: "),e.TgZ(20,"span"),e._uU(21),e.qZA()()()(),e.BQk()),2&s){const r=p.ngIf;e.xp6(6),e.Oqu(r.toPL),e.xp6(5),e.Oqu(r.requireStardust),e.xp6(5),e.Oqu(r.requireCandy),e.xp6(5),e.Oqu(r.requireXlCandy)}}const Oe=[{path:"index.htm",redirectTo:""},{path:"",component:(()=>{var s;class p{constructor(t,o){(0,i.Z)(this,"master",void 0),(0,i.Z)(this,"translate",void 0),(0,i.Z)(this,"HUE_COLORS",["#FF0000AA","#FFFF00AA","#00FF00AA","#00FFFFAA","#0000FFAA","#FF00FFAA","#FF4000AA","#BFFF00AA","#00FF40AA","#00BFFFAA","#4000FFAA","#FF00BFAA","#FF8000AA","#80FF00AA","#00FF80AA","#0080FFAA","#8000FFAA","#FF0080AA","#FFBF00AA","#40FF00AA","#00FFBFAA","#0040FFAA","#BF00FFAA","#FF0040AA"]),(0,i.Z)(this,"basicPokemonId$",new y.x),(0,i.Z)(this,"isValidPokemonTree$",void 0),(0,i.Z)(this,"inputPL",20),(0,i.Z)(this,"inputIV",{AP:15,DP:15,HP:15}),(0,i.Z)(this,"growupStatus$",void 0),(0,i.Z)(this,"growupPokemonId$",void 0),(0,i.Z)(this,"growupPokemonName$",void 0),(0,i.Z)(this,"growUpPokemonType$",void 0),(0,i.Z)(this,"growUpPokemonType2$",void 0),(0,i.Z)(this,"growUpPokemonForm$",void 0),(0,i.Z)(this,"growUpPokemonFormNullable$",void 0),(0,i.Z)(this,"growUpPokemonOpts$",void 0),(0,i.Z)(this,"growUpPokemonCalcultor$",void 0),(0,i.Z)(this,"growUpPokemonUnlockCost$",void 0),(0,i.Z)(this,"affinityVeryEffective$",void 0),(0,i.Z)(this,"affinityEffective$",void 0),(0,i.Z)(this,"affinityUneffective$",void 0),(0,i.Z)(this,"affinityVeryUneffective$",void 0),(0,i.Z)(this,"affinitySuperUneffective$",void 0),(0,i.Z)(this,"evolutionNodeSelected$",new O.t),(0,i.Z)(this,"evolutionRootCleared$",new Z.X(void 0)),(0,i.Z)(this,"currentStatus$",new Z.X(null)),(0,i.Z)(this,"growupCost",void 0),(0,i.Z)(this,"inputPL$",new Z.X(this.inputPL)),(0,i.Z)(this,"inputStatus$",new y.x),(0,i.Z)(this,"inputFormChanged$",new Z.X(void 0)),(0,i.Z)(this,"pokemonForm$",new y.x),(0,i.Z)(this,"pokemonIV$",new Z.X(this.inputIV)),(0,i.Z)(this,"destroy$",new y.x),(0,i.Z)(this,"evolutionRoot$",void 0),(0,i.Z)(this,"evolutionRootTree$",void 0),(0,i.Z)(this,"evolutionChart",void 0),(0,i.Z)(this,"chartMap",{}),(0,i.Z)(this,"evolutionChartOptions",{responsive:!0,scales:{x:{min:0,suggestedMax:2e3},y:{display:!1,suggestedMax:1}},plugins:{legend:{position:"top"},title:{},tooltip:{callbacks:{title:this.tooltipEvolutionItem}}},elements:{point:{radius:8,hoverRadius:15}}}),(0,i.Z)(this,"evolutionChartDataset",[]),(0,i.Z)(this,"chartUpdated$",new y.x),(0,i.Z)(this,"evolveForms$",void 0),(0,i.Z)(this,"computeGrowingMaxCP$",new y.x),(0,i.Z)(this,"computePLValidator$",new y.x),(0,i.Z)(this,"initializeVisibleStatus$",new y.x),this.master=t,this.translate=o}ngAfterViewInit(){}ngOnInit(){this.growUpPokemonOpts$=this.evolutionNodeSelected$.pipe((0,l.U)(n=>({megaBranch:n.megaBranch})));const t=(0,v.a)([this.pokemonIV$,this.inputPL$,this.evolutionNodeSelected$,this.growUpPokemonOpts$]).pipe((0,$.b)(50),(0,l.U)(([n,c,d,u])=>d.settings.computeStatus(n,c,u)));this.growupStatus$=(0,A.T)(t,this.evolutionRootCleared$.pipe((0,$.b)(50),(0,l.U)(()=>null))).pipe(),this.growUpPokemonForm$=this.evolutionNodeSelected$.pipe((0,l.U)(n=>n.settings.pokemonSetting)),this.growUpPokemonFormNullable$=(0,A.T)(this.growUpPokemonForm$,this.evolutionRootCleared$.pipe((0,l.U)(()=>null))).pipe(),this.growupPokemonId$=this.evolutionNodeSelected$.pipe((0,l.U)(n=>n.settings.getPokemonId({megaBranch:n.megaBranch}))),this.growupPokemonName$=this.growupPokemonId$.pipe((0,C.w)(n=>this.master.readPokemonName(n)));const o=(0,v.a)([this.evolutionNodeSelected$,this.growUpPokemonOpts$]).pipe((0,$.b)(50),(0,l.U)(([n,c])=>n.settings.getPokemonTypes(c)),(0,S.h)(n=>!!n),(0,P.d)(1));this.growUpPokemonType$=o.pipe((0,l.U)(n=>n.pokemonType)),this.growUpPokemonType2$=o.pipe((0,l.U)(n=>n.pokemonType2)),this.growUpPokemonCalcultor$=this.evolutionNodeSelected$.pipe((0,l.U)(n=>n.settings)),this.growUpPokemonUnlockCost$=this.growUpPokemonCalcultor$.pipe((0,l.U)(n=>n.getUnlockCost()),(0,P.d)(1)),(0,v.a)([this.master.level$,this.pokemonForm$,this.pokemonIV$,this.inputStatus$]).pipe((0,$.b)(50),(0,k.R)(this.destroy$)).subscribe(([n,c,d,u])=>{this.maybeComputePL(n,c,d,u)});const a=new V.i(this.master);this.evolutionRoot$=this.pokemonForm$.pipe((0,$.b)(500),(0,C.w)(n=>a.fetchEvolutionRoot$(n))),this.evolutionRootTree$=this.evolutionRoot$.pipe((0,l.U)(n=>a.buildEvolutionTree(n))),this.prepareChartStream(),(0,v.a)([this.evolutionNodeSelected$,this.growUpPokemonOpts$,this.pokemonIV$]).pipe((0,$.b)(50),(0,C.w)(([n,c,d])=>this.computeGrowingMaxCP$.pipe((0,l.U)(u=>n.settings.computeGrowingPL(u,d,c)))),(0,S.h)(n=>null!==n),(0,k.R)(this.destroy$)).subscribe(n=>{this.inputPL=n.PL,this.inputPL$.next(n.PL)}),this.isValidPokemonTree$=(0,A.T)(this.basicPokemonId$.pipe((0,l.U)(()=>!0)),this.evolutionRootCleared$.pipe((0,l.U)(()=>!1))).pipe(),this.prepareAffinityStream()}filterByTypeAffinity(t,o){const a=[];for(let n=0;n<Object.keys(h.PokemonTypeEnum).length/2;n++)o===t[n]&&a.push(h.PokemonTypeEnum[h.PokemonTypeEnum[n]]);return a}prepareAffinityStream(){const t=(0,v.a)([this.master.typeDatabase$,this.growUpPokemonForm$]).pipe((0,l.U)(([o,a])=>{const n=new h.PokemonType(o),c=Object.keys(h.PokemonTypeEnum).length/2,d=new Array(c);for(let u=0;u<c;u++)d[u]=n.attackEffective(h.PokemonTypeEnum[h.PokemonTypeEnum[u]],a.built.pokemonType,a.built.pokemonType2);return d}),(0,P.d)(1));this.affinityVeryEffective$=t.pipe((0,l.U)(o=>this.filterByTypeAffinity(o,h.AttackEffectivenessEnum.VeryEffective))),this.affinityEffective$=t.pipe((0,l.U)(o=>this.filterByTypeAffinity(o,h.AttackEffectivenessEnum.Effective))),this.affinityUneffective$=t.pipe((0,l.U)(o=>this.filterByTypeAffinity(o,h.AttackEffectivenessEnum.Uneffective))),this.affinityVeryUneffective$=t.pipe((0,l.U)(o=>this.filterByTypeAffinity(o,h.AttackEffectivenessEnum.VeryUneffective))),this.affinitySuperUneffective$=t.pipe((0,l.U)(o=>this.filterByTypeAffinity(o,h.AttackEffectivenessEnum.SuperUneffective)))}prepareChartStream(){(0,B.F)(500).pipe((0,k.R)(this.destroy$)).subscribe(n=>{});const t=(0,v.a)([(0,M.of)(0),this.evolutionRootTree$]).pipe((0,q.j)(([n,c])=>c.children$?c.children$.pipe((0,z.b)(d=>(0,D.D)(d)),(0,l.U)(d=>[n+1,d])):G.E),(0,L.z)(([n,c])=>this.master.level$.pipe((0,l.U)(d=>{const u=new h.PokemonForm(d,c.formJson),g={};c.form.megaBranch&&(g.megaBranch=c.form.megaBranch);const x=u.getPokemonId(g),b={depth:n,settings:u,nodeId:x,label:x};return c.form.megaBranch&&(b.megaBranch=c.form.megaBranch),b}))),(0,L.z)(n=>this.master.readPokemonName(n.label).pipe((0,l.U)(c=>(n.label=c,n))))),o=(0,J.$)([t,(0,Y.w)(1,99999)]).pipe((0,l.U)(([n,c])=>{const d=n;return d.pseudoId=c,d.colorHex=this.HUE_COLORS[c%this.HUE_COLORS.length],d}));this.inputFormChanged$.pipe((0,k.R)(this.destroy$)).subscribe(n=>{this.initializeVisibleStatus$.next(),this.currentStatus$.next(null),this.evolutionChartDataset=[],this.chartMap={},this.chartUpdated$.next()});const a=new y.x;o.pipe((0,k.R)(this.destroy$)).subscribe(n=>{this.chartMap[n.nodeId]||a.next(n),this.chartUpdated$.next()}),a.pipe((0,L.z)(n=>{const g=new H.g(n.settings.pokemonSetting.built.pokedexNumber,this.master,{megaBranch:n.megaBranch},{size:40,suppressNoImage:!0});return(0,J.$)([(0,M.of)(n),g.dataURL$])})).subscribe(([n,c])=>{const d=new Image;d.onload=()=>{u.pointStyle=d,this.chartUpdated$.next()},c&&(d.src=c);const u={backgroundColor:n.colorHex,data:[],label:n.label};this.evolutionChartDataset.push(u),this.chartMap[n.nodeId]={evolutionView:u,model:n},this.chartUpdated$.next()}),(0,v.a)([this.pokemonIV$,this.inputPL$,this.chartUpdated$]).pipe((0,$.b)(50),(0,k.R)(this.destroy$)).subscribe(([n,c,d])=>{for(const u in this.chartMap){const g=this.chartMap[u],b=g.model.settings.computeStatus(n,c,{megaBranch:g.model.megaBranch});g.evolutionView.data=[{x:b.CP,y:1}]}this.evolutionChart.update()})}findPokemonModel(t){for(const o in this.chartMap){const a=this.chartMap[o];if(a.model.label===t)return a.model}return null}tooltipEvolutionItem(t){let o="";for(const a of t)o+=`Name: ${a.dataset.label}\n`,o+=`CP: ${a.parsed.x}\n`;return o}evolutionChartClick({event:t,active:o}){(0,F.eM)("MainComponent.evolutionChartClick()",t,o),this.clickChartItem(t,o)}evolutionChartHover(t){}clickChartItem(t,o){if(!o||0===o.length)return;const d=t.chart.data.datasets[o[0].datasetIndex];for(const u in this.chartMap){const g=this.chartMap[u];if(g.evolutionView===d)return void this.evolutionNodeSelected$.next(g.model)}}onChangePL(t){this.inputPL$.next(t)}onChangeIV(t){this.inputIV=t,this.pokemonIV$.next(this.inputIV)}ngOnDestroy(){this.destroy$.next()}maybeComputePL(t,o,a,n){if(!n.CP)return;const c=n.HP,d=n.CP;try{const g=new h.PokemonForm(t,o).computeMatchingLevel(d,c,a);this.currentStatus$.next(g),this.computePLValidator$.next(!0)}catch(u){(0,F.wb)("Seems compution failed. This message should be hidden.",u),this.computePLValidator$.next(!1)}}onValidatedPokemonName(t){this.basicPokemonId$.next(t)}onSelectedPokemonForm(t){this.evolutionNodeSelected$.next({settings:t})}onFormValueChanged(){this.inputFormChanged$.next()}onSelectedRawForm(t){this.pokemonForm$.next(t)}onClearedPokemonId(){this.evolutionRootCleared$.next()}onClickShowGrowUpStatus(){}onClickAutoPl(t,o){t.preventDefault(),this.computeGrowingMaxCP$.next(o)}onChangeVisibleStatus(t){this.inputStatus$.next(t)}}return s=p,(0,i.Z)(p,"\u0275fac",function(t){return new(t||s)(e.Y36(U.m),e.Y36(w.xq))}),(0,i.Z)(p,"\u0275cmp",e.Xpm({type:s,selectors:[["app-training-simulator"]],viewQuery:function(t,o){if(1&t&&e.Gf(ue,5,N.jh),2&t){let a;e.iGM(a=e.CRH())&&(o.evolutionChart=a.first)}},decls:48,vars:40,consts:[[1,"toolInputGroup"],[3,"validatedName","selectedForm","selectedRawForm","valueChanged","valueCleared"],[1,"m-2","toolInputGroup",3,"valueChanged"],[1,"m-2","toolInputGroup",3,"validatorResult","initialize","disabled","currentStatus$","valueChanged"],[1,"m-2"],["translate",""],["fill","#7878dd","src","/assets/octicons/question.svg",1,"mx-1",3,"width","height","title"],[2,"display","block"],["baseChart","","height","50","type","scatter",3,"datasets","options","chartHover","chartClick"],["evolutionChart",""],["fill","#7878dd","src","/assets/octicons/question.svg",1,"mx-1",3,"title"],[1,"form-group","m-2","toolInputGroup"],[1,"input-group","row","m-2"],["title","Pokemon's Level which Grow Up to",1,"col-1","form-check-label","p-2","text-end"],[1,"col-4"],["type","number","min","1","max","52","step","0.5",1,"form-control",3,"disabled","ngModel","ngModelChange"],[1,"col-3"],[1,"btn-group"],["type","button","data-bs-toggle","dropdown","aria-expanded","false","translate","",1,"btn","btn-primary","dropdown-toggle"],[1,"dropdown-menu"],["href","#",1,"dropdown-item",3,"click"],[1,"row","m-2"],[1,"col-3","text-center"],[3,"pokemonFormJson","opts"],[1,"col-9"],[3,"status","pokemonName","pokemonType","pokemonType2","unlockCost",4,"ngIf"],["class","m-2",3,"pokemonForm","opts",4,"ngIf"],[4,"ngIf"],[3,"status","pokemonName","pokemonType","pokemonType2","unlockCost"],[1,"m-2",3,"pokemonForm","opts"],["class","row m-2 rounded border border-danger",4,"ngIf"],[1,"row","m-2","rounded","border","border-danger"],[1,"p-1","col-2","bg-danger","text-white"],["title","x2.56",1,"p-1","col"],[3,"pokemonType",4,"ngFor","ngForOf"],[3,"pokemonType"],["class","row m-2 rounded border border-warning",4,"ngIf"],[1,"row","m-2","rounded","border","border-warning"],[1,"p-1","col-2","bg-warning","text-white"],["title","x1.6",1,"p-1","col"],["class","row m-2 rounded border border-light",4,"ngIf"],[1,"row","m-2","rounded","border","border-light"],[1,"p-1","col-2","bg-light","text-dark"],["title","x0.625",1,"p-1","col"],["class","row m-2 rounded border border-success",4,"ngIf"],[1,"row","m-2","rounded","border","border-success"],[1,"p-1","col-2","bg-success","text-dark"],["title","x0.39",1,"p-1","col"],["class","row m-2 rounded border border-primary",4,"ngIf"],[1,"row","m-2","rounded","border","border-primary"],[1,"p-1","col-2","bg-primary","text-dark"],["title","x0.244",1,"p-1","col"],[1,"row"]],template:function(t,o){1&t&&(e.TgZ(0,"div",0)(1,"app-pokemon-form",1),e.NdJ("validatedName",function(n){return o.onValidatedPokemonName(n)})("selectedForm",function(n){return o.onSelectedPokemonForm(n)})("selectedRawForm",function(n){return o.onSelectedRawForm(n)})("valueChanged",function(){return o.onFormValueChanged()})("valueCleared",function(){return o.onClearedPokemonId()}),e.qZA(),e.TgZ(2,"app-pokemon-iv",2),e.NdJ("valueChanged",function(n){return o.onChangeIV(n)}),e.qZA(),e.TgZ(3,"app-pokemon-visible-status",3),e.NdJ("valueChanged",function(n){return o.onChangeVisibleStatus(n)}),e.ALo(4,"async"),e.qZA()(),e.TgZ(5,"h3",4)(6,"span",5),e._uU(7,"POKEMON.GROW_UP_SIMULATOR.LABEL_EVOLUTION_TREE"),e.qZA(),e._UZ(8,"app-inline-svg",6),e.ALo(9,"translate"),e.qZA(),e.TgZ(10,"div",7)(11,"canvas",8,9),e.NdJ("chartHover",function(n){return o.evolutionChartHover(n)})("chartClick",function(n){return o.evolutionChartClick(n)}),e.qZA()(),e.TgZ(13,"h3",4)(14,"span",5),e._uU(15,"POKEMON.GROW_UP_SIMULATOR.AFTER_GROW_UP_LABEL"),e.qZA(),e._UZ(16,"app-inline-svg",10),e.ALo(17,"translate"),e.qZA(),e.TgZ(18,"div",11)(19,"div",12)(20,"label",13),e._uU(21,"PL"),e.qZA(),e.TgZ(22,"span",14)(23,"input",15),e.NdJ("ngModelChange",function(n){return o.inputPL=n})("ngModelChange",function(n){return o.onChangePL(n)}),e.ALo(24,"async"),e.qZA()(),e.TgZ(25,"div",16)(26,"div",17)(27,"button",18),e.ALo(28,"async"),e._uU(29,"POKEMON.GROW_UP_SIMULATOR.AUTO_LABEL"),e.qZA(),e.TgZ(30,"div",19)(31,"a",20),e.NdJ("click",function(n){return o.onClickAutoPl(n,1500)}),e._uU(32,"Super League (CP 1500)"),e.qZA(),e.TgZ(33,"a",20),e.NdJ("click",function(n){return o.onClickAutoPl(n,2500)}),e._uU(34,"Hyper League (CP 2500)"),e.qZA()()()()(),e.TgZ(35,"div",21)(36,"div",22),e._UZ(37,"app-pokemon-thumb",23),e.ALo(38,"async"),e.ALo(39,"async"),e.qZA(),e.TgZ(40,"div",24),e.YNc(41,he,5,13,"app-pokemon-status",25),e.ALo(42,"async"),e.qZA()(),e.YNc(43,ge,2,4,"app-pokemon-moves",26),e.ALo(44,"async"),e.YNc(45,be,13,15,"div",27),e.ALo(46,"async"),e.YNc(47,Fe,22,4,"ng-container",27),e.qZA()),2&t&&(e.xp6(3),e.Q6J("validatorResult",o.computePLValidator$)("initialize",o.initializeVisibleStatus$)("disabled",!e.lcZ(4,20,o.isValidPokemonTree$))("currentStatus$",o.currentStatus$),e.xp6(5),e.s9C("title",e.lcZ(9,22,"LABEL_PREPARING_NOW")),e.Q6J("width",20)("height",20),e.xp6(3),e.Q6J("datasets",o.evolutionChartDataset)("options",o.evolutionChartOptions),e.xp6(5),e.s9C("title",e.lcZ(17,24,"LABEL_PREPARING_NOW")),e.xp6(7),e.Q6J("disabled",!e.lcZ(24,26,o.isValidPokemonTree$))("ngModel",o.inputPL),e.xp6(4),e.ekj("disabled",!e.lcZ(28,28,o.isValidPokemonTree$)),e.xp6(10),e.Q6J("pokemonFormJson",e.lcZ(38,30,o.growUpPokemonFormNullable$))("opts",e.lcZ(39,32,o.growUpPokemonOpts$)),e.xp6(4),e.Q6J("ngIf",e.lcZ(42,34,o.growupStatus$)),e.xp6(2),e.Q6J("ngIf",e.lcZ(44,36,o.growUpPokemonCalcultor$)),e.xp6(2),e.Q6J("ngIf",e.lcZ(46,38,o.growUpPokemonFormNullable$)),e.xp6(2),e.Q6J("ngIf",o.growupCost))},dependencies:[f.sg,f.O5,T.Fj,T.wV,T.JJ,T.qQ,T.Fd,T.On,N.jh,W.i,X.l,j.J,re,me.a,le.k,ce.A,de.h,_.Pi,f.Ov,_.X$],styles:[".toolInputGroup[_ngcontent-%COMP%]{border:solid #eeeeee;border-radius:5px}.toolSmallText[_ngcontent-%COMP%]{font-size:.8em}.toolExtraSmallText[_ngcontent-%COMP%]{font-size:.5em}.appPokemonThumb[_ngcontent-%COMP%]{max-width:40px;max-height:40px}"]})),p})(),data:{gitweeTitle:"TITLE_POKEMON_GROWUP_SIMULATOR"}}];let Le=(()=>{var s;class p{}return s=p,(0,i.Z)(p,"\u0275fac",function(t){return new(t||s)}),(0,i.Z)(p,"\u0275mod",e.oAB({type:s})),(0,i.Z)(p,"\u0275inj",e.cJS({imports:[E.Bz.forChild(Oe),E.Bz]})),p})(),Ie=(()=>{var s;class p{constructor(){(0,F.eM)("GrowUpSimulatorModule.constructor()")}}return s=p,(0,i.Z)(p,"\u0275fac",function(t){return new(t||s)}),(0,i.Z)(p,"\u0275mod",e.oAB({type:s})),(0,i.Z)(p,"\u0275inj",e.cJS({providers:[{provide:w.uY,useValue:"app/tools/pokemongo/training-simulator/training-simulator/"}],imports:[f.ez,Le,Q.i]})),p})()}}]);