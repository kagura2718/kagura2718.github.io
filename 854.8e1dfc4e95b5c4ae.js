"use strict";(self.webpackChunkKaguraGithubPages=self.webpackChunkKaguraGithubPages||[]).push([[854],{490(an,tt,g){g.d(tt,{TT:()=>wt,gf:()=>$e,ni:()=>St,xD:()=>X});var b=g(467),xe=(g(5557),g(8779)),v=g(6749),T=g(1871),i=g(1631);const Ie="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",bt="google.c.a.c_id";var M=function(c){return c.PUSH_RECEIVED="push-received",c.NOTIFICATION_CLICKED="notification-clicked",c}(M||{});function H(c){const h=new Uint8Array(c);return btoa(String.fromCharCode(...h)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function Ve(c){const a=(c+"=".repeat((4-c.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),l=atob(a),p=new Uint8Array(l.length);for(let _=0;_<l.length;++_)p[_]=l.charCodeAt(_);return p}const we="fcm_token_details_db",rt="fcm_token_object_Store";function D(){return D=(0,b.A)(function*(c){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(_=>_.name).includes(we))return null;let h=null;return(yield(0,v.P2)(we,5,{upgrade:(l=(0,b.A)(function*(p,_,A,S){var P;if(_<2||!p.objectStoreNames.contains(rt))return;const V=S.objectStore(rt),Z=yield V.index("fcmSenderId").get(c);if(yield V.clear(),Z)if(2===_){const I=Z;if(!I.auth||!I.p256dh||!I.endpoint)return;h={token:I.fcmToken,createTime:null!==(P=I.createTime)&&void 0!==P?P:Date.now(),subscriptionOptions:{auth:I.auth,p256dh:I.p256dh,endpoint:I.endpoint,swScope:I.swScope,vapidKey:"string"==typeof I.vapidKey?I.vapidKey:H(I.vapidKey)}}}else if(3===_){const I=Z;h={token:I.fcmToken,createTime:I.createTime,subscriptionOptions:{auth:H(I.auth),p256dh:H(I.p256dh),endpoint:I.endpoint,swScope:I.swScope,vapidKey:H(I.vapidKey)}}}else if(4===_){const I=Z;h={token:I.fcmToken,createTime:I.createTime,subscriptionOptions:{auth:H(I.auth),p256dh:H(I.p256dh),endpoint:I.endpoint,swScope:I.swScope,vapidKey:H(I.vapidKey)}}}}),function(_,A,S,P){return l.apply(this,arguments)})})).close(),yield(0,v.MR)(we),yield(0,v.MR)("fcm_vapid_details_db"),yield(0,v.MR)("undefined"),function O(c){if(!c||!c.subscriptionOptions)return!1;const{subscriptionOptions:h}=c;return"number"==typeof c.createTime&&c.createTime>0&&"string"==typeof c.token&&c.token.length>0&&"string"==typeof h.auth&&h.auth.length>0&&"string"==typeof h.p256dh&&h.p256dh.length>0&&"string"==typeof h.endpoint&&h.endpoint.length>0&&"string"==typeof h.swScope&&h.swScope.length>0&&"string"==typeof h.vapidKey&&h.vapidKey.length>0}(h)?h:null;var l}),D.apply(this,arguments)}const Se="firebase-messaging-store";let ue=null;function Ne(){return ue||(ue=(0,v.P2)("firebase-messaging-database",1,{upgrade:(c,h)=>{0===h&&c.createObjectStore(Se)}})),ue}function fe(c){return $.apply(this,arguments)}function $(){return $=(0,b.A)(function*(c){const h=me(c),l=yield(yield Ne()).transaction(Se).objectStore(Se).get(h);if(l)return l;{const p=yield function Pt(c){return D.apply(this,arguments)}(c.appConfig.senderId);if(p)return yield J(c,p),p}}),$.apply(this,arguments)}function J(c,h){return ce.apply(this,arguments)}function ce(){return(ce=(0,b.A)(function*(c,h){const a=me(c),p=(yield Ne()).transaction(Se,"readwrite");return yield p.objectStore(Se).put(h,a),yield p.done,h})).apply(this,arguments)}function le(){return(le=(0,b.A)(function*(c){const h=me(c),l=(yield Ne()).transaction(Se,"readwrite");yield l.objectStore(Se).delete(h),yield l.done})).apply(this,arguments)}function me({appConfig:c}){return c.appId}const L=new T.FA("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function xt(c,h){return He.apply(this,arguments)}function He(){return(He=(0,b.A)(function*(c,h){const a=yield d(c),l=st(h),p={method:"POST",headers:a,body:JSON.stringify(l)};let _;try{_=yield(yield fetch(de(c.appConfig),p)).json()}catch(A){throw L.create("token-subscribe-failed",{errorInfo:A?.toString()})}if(_.error)throw L.create("token-subscribe-failed",{errorInfo:_.error.message});if(!_.token)throw L.create("token-subscribe-no-token");return _.token})).apply(this,arguments)}function q(){return(q=(0,b.A)(function*(c,h){const a=yield d(c),l=st(h.subscriptionOptions),p={method:"PATCH",headers:a,body:JSON.stringify(l)};let _;try{_=yield(yield fetch(`${de(c.appConfig)}/${h.token}`,p)).json()}catch(A){throw L.create("token-update-failed",{errorInfo:A?.toString()})}if(_.error)throw L.create("token-update-failed",{errorInfo:_.error.message});if(!_.token)throw L.create("token-update-no-token");return _.token})).apply(this,arguments)}function E(c,h){return _e.apply(this,arguments)}function _e(){return(_e=(0,b.A)(function*(c,h){const l={method:"DELETE",headers:yield d(c)};try{const _=yield(yield fetch(`${de(c.appConfig)}/${h}`,l)).json();if(_.error)throw L.create("token-unsubscribe-failed",{errorInfo:_.error.message})}catch(p){throw L.create("token-unsubscribe-failed",{errorInfo:p?.toString()})}})).apply(this,arguments)}function de({projectId:c}){return`https://fcmregistrations.googleapis.com/v1/projects/${c}/registrations`}function d(c){return x.apply(this,arguments)}function x(){return(x=(0,b.A)(function*({appConfig:c,installations:h}){const a=yield h.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":c.apiKey,"x-goog-firebase-installations-auth":`FIS ${a}`})})).apply(this,arguments)}function st({p256dh:c,auth:h,endpoint:a,vapidKey:l}){const p={web:{endpoint:a,auth:h,p256dh:c}};return l!==Ie&&(p.web.applicationPubKey=l),p}function Q(){return Q=(0,b.A)(function*(c){const h=yield function Et(c,h){return ne.apply(this,arguments)}(c.swRegistration,c.vapidKey),a={vapidKey:c.vapidKey,swScope:c.swRegistration.scope,endpoint:h.endpoint,auth:H(h.getKey("auth")),p256dh:H(h.getKey("p256dh"))},l=yield fe(c.firebaseDependencies);if(l){if(function At(c,h){return h.vapidKey===c.vapidKey&&h.endpoint===c.endpoint&&h.auth===c.auth&&h.p256dh===c.p256dh}(l.subscriptionOptions,a))return Date.now()>=l.createTime+6048e5?function ye(c,h){return Ae.apply(this,arguments)}(c,{token:l.token,createTime:Date.now(),subscriptionOptions:a}):l.token;try{yield E(c.firebaseDependencies,l.token)}catch(p){console.warn(p)}return be(c.firebaseDependencies,a)}return be(c.firebaseDependencies,a)}),Q.apply(this,arguments)}function ve(){return ve=(0,b.A)(function*(c){const h=yield fe(c.firebaseDependencies);h&&(yield E(c.firebaseDependencies,h.token),yield function Ut(c){return le.apply(this,arguments)}(c.firebaseDependencies));const a=yield c.swRegistration.pushManager.getSubscription();return!a||a.unsubscribe()}),ve.apply(this,arguments)}function Ae(){return Ae=(0,b.A)(function*(c,h){try{const a=yield function Ee(c,h){return q.apply(this,arguments)}(c.firebaseDependencies,h),l=Object.assign(Object.assign({},h),{token:a,createTime:Date.now()});return yield J(c.firebaseDependencies,l),a}catch(a){throw a}}),Ae.apply(this,arguments)}function be(c,h){return Y.apply(this,arguments)}function Y(){return(Y=(0,b.A)(function*(c,h){const l={token:yield xt(c,h),createTime:Date.now(),subscriptionOptions:h};return yield J(c,l),l.token})).apply(this,arguments)}function ne(){return(ne=(0,b.A)(function*(c,h){return(yield c.pushManager.getSubscription())||c.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:Ve(h)})})).apply(this,arguments)}function Xe(c){const h={from:c.from,collapseKey:c.collapse_key,messageId:c.fcmMessageId};return function Fe(c,h){if(!h.notification)return;c.notification={};const a=h.notification.title;a&&(c.notification.title=a);const l=h.notification.body;l&&(c.notification.body=l);const p=h.notification.image;p&&(c.notification.image=p);const _=h.notification.icon;_&&(c.notification.icon=_)}(h,c),function ut(c,h){h.data&&(c.data=h.data)}(h,c),function kt(c,h){var a,l,p,_,A;if(!(h.fcmOptions||null!==(a=h.notification)&&void 0!==a&&a.click_action))return;c.fcmOptions={};const S=null!==(p=null===(l=h.fcmOptions)||void 0===l?void 0:l.link)&&void 0!==p?p:null===(_=h.notification)||void 0===_?void 0:_.click_action;S&&(c.fcmOptions.link=S);const P=null===(A=h.fcmOptions)||void 0===A?void 0:A.analytics_label;P&&(c.fcmOptions.analyticsLabel=P)}(h,c),h}function De(c){return L.create("missing-app-config-values",{valueName:c})}!function Nt(c,h){const a=[];for(let l=0;l<c.length;l++)a.push(c.charAt(l)),l<h.length&&a.push(h.charAt(l));a.join("")}("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class ct{constructor(h,a,l){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const p=function Mt(c){if(!c||!c.options)throw De("App Configuration Object");if(!c.name)throw De("App Name");const h=["projectId","apiKey","appId","messagingSenderId"],{options:a}=c;for(const l of h)if(!a[l])throw De(l);return{appName:c.name,projectId:a.projectId,apiKey:a.apiKey,appId:a.appId,senderId:a.messagingSenderId}}(h);this.firebaseDependencies={app:h,appConfig:p,installations:a,analyticsProvider:l}}_delete(){return Promise.resolve()}}function ze(c){return Me.apply(this,arguments)}function Me(){return Me=(0,b.A)(function*(c){try{c.swRegistration=yield navigator.serviceWorker.register("/firebase-messaging-sw.js",{scope:"/firebase-cloud-messaging-push-scope"}),c.swRegistration.update().catch(()=>{}),yield function j(c){return he.apply(this,arguments)}(c.swRegistration)}catch(h){throw L.create("failed-service-worker-registration",{browserErrorMessage:h?.message})}}),Me.apply(this,arguments)}function he(){return(he=(0,b.A)(function*(c){return new Promise((h,a)=>{const l=setTimeout(()=>a(new Error("Service worker not registered after 10000 ms")),1e4),p=c.installing||c.waiting;c.active?(clearTimeout(l),h()):p?p.onstatechange=_=>{var A;"activated"===(null===(A=_.target)||void 0===A?void 0:A.state)&&(p.onstatechange=null,clearTimeout(l),h())}:(clearTimeout(l),a(new Error("No incoming service worker found.")))})})).apply(this,arguments)}function qe(){return(qe=(0,b.A)(function*(c,h){if(!h&&!c.swRegistration&&(yield ze(c)),h||!c.swRegistration){if(!(h instanceof ServiceWorkerRegistration))throw L.create("invalid-sw-registration");c.swRegistration=h}})).apply(this,arguments)}function Be(){return(Be=(0,b.A)(function*(c,h){h?c.vapidKey=h:c.vapidKey||(c.vapidKey=Ie)})).apply(this,arguments)}function lt(c,h){return dt.apply(this,arguments)}function dt(){return dt=(0,b.A)(function*(c,h){if(!navigator)throw L.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw L.create("permission-blocked");return yield function Oe(c,h){return Be.apply(this,arguments)}(c,h?.vapidKey),yield function Je(c,h){return qe.apply(this,arguments)}(c,h?.serviceWorkerRegistration),function Ye(c){return Q.apply(this,arguments)}(c)}),dt.apply(this,arguments)}function ht(){return(ht=(0,b.A)(function*(c,h,a){const l=function re(c){switch(c){case M.NOTIFICATION_CLICKED:return"notification_open";case M.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}(h);(yield c.firebaseDependencies.analyticsProvider.get()).logEvent(l,{message_id:a[bt],message_name:a["google.c.a.c_l"],message_time:a["google.c.a.ts"],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function pt(){return pt=(0,b.A)(function*(c,h){const a=h.data;if(!a.isFirebaseMessaging)return;c.onMessageHandler&&a.messageType===M.PUSH_RECEIVED&&("function"==typeof c.onMessageHandler?c.onMessageHandler(Xe(a)):c.onMessageHandler.next(Xe(a)));const l=a.data;(function Rt(c){return"object"==typeof c&&!!c&&bt in c})(l)&&"1"===l["google.c.a.e"]&&(yield function It(c,h,a){return ht.apply(this,arguments)}(c,a.messageType,l))}),pt.apply(this,arguments)}const Te="@firebase/messaging",gt="0.12.22",Qe=c=>{const h=new ct(c.getProvider("app").getImmediate(),c.getProvider("installations-internal").getImmediate(),c.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",a=>function Le(c,h){return pt.apply(this,arguments)}(h,a)),h},G=c=>{const h=c.getProvider("messaging").getImmediate();return{getToken:l=>lt(h,l)}};function wt(){return Ue.apply(this,arguments)}function Ue(){return(Ue=(0,b.A)(function*(){try{yield(0,T.eX)()}catch{return!1}return typeof window<"u"&&(0,T.zW)()&&(0,T.dM)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}function et(){return et=(0,b.A)(function*(c){if(!navigator)throw L.create("only-available-in-window");return c.swRegistration||(yield ze(c)),function at(c){return ve.apply(this,arguments)}(c)}),et.apply(this,arguments)}function $e(c,h){return ke.apply(this,arguments)}function ke(){return(ke=(0,b.A)(function*(c,h){return lt(c=(0,T.Ku)(c),h)})).apply(this,arguments)}function St(c){return function Ze(c){return et.apply(this,arguments)}(c=(0,T.Ku)(c))}function X(c,h){return function ft(c,h){if(!navigator)throw L.create("only-available-in-window");return c.onMessageHandler=h,()=>{c.onMessageHandler=null}}(c=(0,T.Ku)(c),h)}!function Pe(){(0,i._registerComponent)(new xe.uA("messaging",Qe,"PUBLIC")),(0,i._registerComponent)(new xe.uA("messaging-internal",G,"PRIVATE")),(0,i.registerVersion)(Te,gt),(0,i.registerVersion)(Te,gt,"esm2017")}()},1848(an,tt,g){g.d(tt,{ap:()=>ir});var b=g(9079),R=g(5407),xe=g(1985),v=g(7673),T=g(8455),i=g(152),nt=g(6354),ae=g(941),Ie=g(5558),N=g(375),bt=g(5547),Tt=g(4121),Ge=g(9253),ge=g(9574),z=g(467),U=g(1631),M=g(1871),H=g(8779);const Ve="firebasestorage.googleapis.com",we="storageBucket";class D extends M.g{constructor(n,t,r=0){super(it(n),`Firebase Storage: ${t} (${it(n)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,D.prototype)}get status(){return this.status_}set status(n){this.status_=n}_codeEquals(n){return it(n)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(n){this.customData.serverResponse=n,this.message=this.customData.serverResponse?`${this._baseMessage}\n${this.customData.serverResponse}`:this._baseMessage}}var O=function(e){return e.UNKNOWN="unknown",e.OBJECT_NOT_FOUND="object-not-found",e.BUCKET_NOT_FOUND="bucket-not-found",e.PROJECT_NOT_FOUND="project-not-found",e.QUOTA_EXCEEDED="quota-exceeded",e.UNAUTHENTICATED="unauthenticated",e.UNAUTHORIZED="unauthorized",e.UNAUTHORIZED_APP="unauthorized-app",e.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",e.INVALID_CHECKSUM="invalid-checksum",e.CANCELED="canceled",e.INVALID_EVENT_NAME="invalid-event-name",e.INVALID_URL="invalid-url",e.INVALID_DEFAULT_BUCKET="invalid-default-bucket",e.NO_DEFAULT_BUCKET="no-default-bucket",e.CANNOT_SLICE_BLOB="cannot-slice-blob",e.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",e.NO_DOWNLOAD_URL="no-download-url",e.INVALID_ARGUMENT="invalid-argument",e.INVALID_ARGUMENT_COUNT="invalid-argument-count",e.APP_DELETED="app-deleted",e.INVALID_ROOT_OPERATION="invalid-root-operation",e.INVALID_FORMAT="invalid-format",e.INTERNAL_ERROR="internal-error",e.UNSUPPORTED_ENVIRONMENT="unsupported-environment",e}(O||{});function it(e){return"storage/"+e}function We(){return new D(O.UNKNOWN,"An unknown error occurred, please check the error payload for server response.")}function J(){return new D(O.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function ce(){return new D(O.CANCELED,"User canceled the upload/download.")}function ot(){return new D(O.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function Ee(e){return new D(O.INVALID_ARGUMENT,e)}function q(){return new D(O.APP_DELETED,"The Firebase app was deleted.")}function E(e){return new D(O.INVALID_ROOT_OPERATION,"The operation '"+e+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function _e(e,n){return new D(O.INVALID_FORMAT,"String does not match format '"+e+"': "+n)}function de(e){throw new D(O.INTERNAL_ERROR,"Internal error: "+e)}class d{constructor(n,t){this.bucket=n,this.path_=t}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const n=encodeURIComponent;return"/b/"+n(this.bucket)+"/o/"+n(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(n,t){let r;try{r=d.makeFromUrl(n,t)}catch{return new d(n,"")}if(""===r.path)return r;throw function le(e){return new D(O.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+e+"'.")}(n)}static makeFromUrl(n,t){let r=null;const o="([A-Za-z0-9.\\-_]+)",f=new RegExp("^gs://"+o+"(/(.*))?$","i");function y(te){te.path_=decodeURIComponent(te.path)}const k=t.replace(/[.]/g,"\\."),se=[{regex:f,indices:{bucket:1,path:3},postModify:function s(te){"/"===te.path.charAt(te.path.length-1)&&(te.path_=te.path_.slice(0,-1))}},{regex:new RegExp(`^https?://${k}/v[A-Za-z0-9_]+/b/${o}/o(/([^?#]*).*)?$`,"i"),indices:{bucket:1,path:3},postModify:y},{regex:new RegExp(`^https?://${t===Ve?"(?:storage.googleapis.com|storage.cloud.google.com)":t}/${o}/([^?#]*)`,"i"),indices:{bucket:1,path:2},postModify:y}];for(let te=0;te<se.length;te++){const Ht=se[te],Yt=Ht.regex.exec(n);if(Yt){let sn=Yt[Ht.indices.path];sn||(sn=""),r=new d(Yt[Ht.indices.bucket],sn),Ht.postModify(r);break}}if(null==r)throw function Ut(e){return new D(O.INVALID_URL,"Invalid URL '"+e+"'.")}(n);return r}}class x{constructor(n){this.promise_=Promise.reject(n)}getPromise(){return this.promise_}cancel(n=!1){}}function ve(e){return"string"==typeof e||e instanceof String}function ye(e){return Ae()&&e instanceof Blob}function Ae(){return typeof Blob<"u"}function be(e,n,t,r){if(r<n)throw Ee(`Invalid value for '${e}'. Expected ${n} or greater.`);if(r>t)throw Ee(`Invalid value for '${e}'. Expected ${t} or less.`)}function Y(e,n,t){let r=n;return null==t&&(r=`https://${n}`),`${t}://${r}/v0${e}`}function Et(e){const n=encodeURIComponent;let t="?";for(const r in e)e.hasOwnProperty(r)&&(t=t+(n(r)+"=")+n(e[r])+"&");return t=t.slice(0,-1),t}var ne=function(e){return e[e.NO_ERROR=0]="NO_ERROR",e[e.NETWORK_ERROR=1]="NETWORK_ERROR",e[e.ABORT=2]="ABORT",e}(ne||{});function At(e,n){const t=e>=500&&e<600,o=-1!==[408,429].indexOf(e),s=-1!==n.indexOf(e);return t||o||s}class Xe{constructor(n,t,r,o,s,u,f,m,y,C,k,F=!0,w=!1){this.url_=n,this.method_=t,this.headers_=r,this.body_=o,this.successCodes_=s,this.additionalRetryCodes_=u,this.callback_=f,this.errorCallback_=m,this.timeout_=y,this.progressCallback_=C,this.connectionFactory_=k,this.retry=F,this.isUsingEmulator=w,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((B,oe)=>{this.resolve_=B,this.reject_=oe,this.start_()})}start_(){const t=(r,o)=>{const s=this.resolve_,u=this.reject_,f=o.connection;if(o.wasSuccessCode)try{const m=this.callback_(f,f.getResponse());!function Ye(e){return void 0!==e}(m)?s():s(m)}catch(m){u(m)}else if(null!==f){const m=We();m.serverResponse=f.getErrorText(),u(this.errorCallback_?this.errorCallback_(f,m):m)}else u(o.canceled?this.appDelete_?q():ce():J())};this.canceled_?t(0,new Fe(!1,null,!0)):this.backoffId_=function st(e,n,t){let r=1,o=null,s=null,u=!1,f=0;function m(){return 2===f}let y=!1;function C(...W){y||(y=!0,n.apply(null,W))}function k(W){o=setTimeout(()=>{o=null,e(w,m())},W)}function F(){s&&clearTimeout(s)}function w(W,...vt){if(y)return void F();if(W)return F(),void C.call(null,W,...vt);if(m()||u)return F(),void C.call(null,W,...vt);let se;r<64&&(r*=2),1===f?(f=2,se=0):se=1e3*(r+Math.random()),k(se)}let B=!1;function oe(W){B||(B=!0,F(),!y&&(null!==o?(W||(f=2),clearTimeout(o),k(0)):W||(f=1)))}return k(0),s=setTimeout(()=>{u=!0,oe(!0)},t),oe}((r,o)=>{if(o)return void r(!1,new Fe(!1,null,!0));const s=this.connectionFactory_();this.pendingConnection_=s;const u=f=>{null!==this.progressCallback_&&this.progressCallback_(f.loaded,f.lengthComputable?f.total:-1)};null!==this.progressCallback_&&s.addUploadProgressListener(u),s.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{null!==this.progressCallback_&&s.removeUploadProgressListener(u),this.pendingConnection_=null;const f=s.getErrorCode()===ne.NO_ERROR,m=s.getStatus();if(!f||At(m,this.additionalRetryCodes_)&&this.retry){const C=s.getErrorCode()===ne.ABORT;return void r(!1,new Fe(!1,null,C))}const y=-1!==this.successCodes_.indexOf(m);r(!0,new Fe(y,s))})},t,this.timeout_)}getPromise(){return this.promise_}cancel(n){this.canceled_=!0,this.appDelete_=n||!1,null!==this.backoffId_&&function Ct(e){e(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()}}class Fe{constructor(n,t,r){this.wasSuccessCode=n,this.connection=t,this.canceled=!!r}}function ct(...e){const n=function De(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}();if(void 0!==n){const t=new n;for(let r=0;r<e.length;r++)t.append(e[r]);return t.getBlob()}if(Ae())return new Blob(e);throw new D(O.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}const j={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class he{constructor(n,t){this.data=n,this.contentType=t||null}}function Je(e,n){switch(e){case j.RAW:return new he(qe(n));case j.BASE64:case j.BASE64URL:return new he(Be(e,n));case j.DATA_URL:return new he(function dt(e){const n=new lt(e);return n.base64?Be(j.BASE64,n.rest):function Oe(e){let n;try{n=decodeURIComponent(e)}catch{throw _e(j.DATA_URL,"Malformed data URL.")}return qe(n)}(n.rest)}(n),function It(e){return new lt(e).contentType}(n))}throw We()}function qe(e){const n=[];for(let t=0;t<e.length;t++){let r=e.charCodeAt(t);r<=127?n.push(r):r<=2047?n.push(192|r>>6,128|63&r):55296==(64512&r)?t<e.length-1&&56320==(64512&e.charCodeAt(t+1))?(r=65536|(1023&r)<<10|1023&e.charCodeAt(++t),n.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|63&r)):n.push(239,191,189):56320==(64512&r)?n.push(239,191,189):n.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(n)}function Be(e,n){switch(e){case j.BASE64:{const o=-1!==n.indexOf("-"),s=-1!==n.indexOf("_");if(o||s)throw _e(e,"Invalid character '"+(o?"-":"_")+"' found: is it base64url encoded?");break}case j.BASE64URL:{const o=-1!==n.indexOf("+"),s=-1!==n.indexOf("/");if(o||s)throw _e(e,"Invalid character '"+(o?"+":"/")+"' found: is it base64 encoded?");n=n.replace(/-/g,"+").replace(/_/g,"/");break}}let t;try{t=function Me(e){if(typeof atob>"u")throw function He(e){return new D(O.UNSUPPORTED_ENVIRONMENT,`${e} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}("base-64");return atob(e)}(n)}catch(o){throw o.message.includes("polyfill")?o:_e(e,"Invalid character found")}const r=new Uint8Array(t.length);for(let o=0;o<t.length;o++)r[o]=t.charCodeAt(o);return r}class lt{constructor(n){this.base64=!1,this.contentType=null;const t=n.match(/^data:([^,]+)?,/);if(null===t)throw _e(j.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=t[1]||null;null!=r&&(this.base64=function ht(e,n){return e.length>=n.length&&e.substring(e.length-n.length)===n}(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=n.substring(n.indexOf(",")+1)}}class re{constructor(n,t){let r=0,o="";ye(n)?(this.data_=n,r=n.size,o=n.type):n instanceof ArrayBuffer?(t?this.data_=new Uint8Array(n):(this.data_=new Uint8Array(n.byteLength),this.data_.set(new Uint8Array(n))),r=this.data_.length):n instanceof Uint8Array&&(t?this.data_=n:(this.data_=new Uint8Array(n.length),this.data_.set(n)),r=n.length),this.size_=r,this.type_=o}size(){return this.size_}type(){return this.type_}slice(n,t){if(ye(this.data_)){const o=function ze(e,n,t){return e.webkitSlice?e.webkitSlice(n,t):e.mozSlice?e.mozSlice(n,t):e.slice?e.slice(n,t):null}(this.data_,n,t);return null===o?null:new re(o)}{const r=new Uint8Array(this.data_.buffer,n,t-n);return new re(r,!0)}}static getBlob(...n){if(Ae()){const t=n.map(r=>r instanceof re?r.data_:r);return new re(ct.apply(null,t))}{const t=n.map(u=>ve(u)?Je(j.RAW,u).data:u.data_);let r=0;t.forEach(u=>{r+=u.byteLength});const o=new Uint8Array(r);let s=0;return t.forEach(u=>{for(let f=0;f<u.length;f++)o[s++]=u[f]}),new re(o,!0)}}uploadData(){return this.data_}}function Le(e){let n;try{n=JSON.parse(e)}catch{return null}return function at(e){return"object"==typeof e&&!Array.isArray(e)}(n)?n:null}function gt(e){const n=e.lastIndexOf("/",e.length-2);return-1===n?e:e.slice(n+1)}function Qe(e,n){return n}class G{constructor(n,t,r,o){this.server=n,this.local=t||n,this.writable=!!r,this.xform=o||Qe}}let Pe=null;function Ue(){if(Pe)return Pe;const e=[];e.push(new G("bucket")),e.push(new G("generation")),e.push(new G("metageneration")),e.push(new G("name","fullPath",!0));const t=new G("name");t.xform=function n(s,u){return function wt(e){return!ve(e)||e.length<2?e:gt(e)}(u)},e.push(t);const o=new G("size");return o.xform=function r(s,u){return void 0!==u?Number(u):u},e.push(o),e.push(new G("timeCreated")),e.push(new G("updated")),e.push(new G("md5Hash",null,!0)),e.push(new G("cacheControl",null,!0)),e.push(new G("contentDisposition",null,!0)),e.push(new G("contentEncoding",null,!0)),e.push(new G("contentLanguage",null,!0)),e.push(new G("contentType",null,!0)),e.push(new G("metadata","customMetadata",!0)),Pe=e,Pe}function ft(e,n,t){const r=Le(n);return null===r?null:function et(e,n,t){const r={type:"file"},o=t.length;for(let s=0;s<o;s++){const u=t[s];r[u.local]=u.xform(r,n[u.server])}return function Ze(e,n){Object.defineProperty(e,"ref",{get:function t(){const s=new d(e.bucket,e.fullPath);return n._makeStorageReference(s)}})}(r,e),r}(e,r,t)}function $e(e,n){const t={},r=n.length;for(let o=0;o<r;o++){const s=n[o];s.writable&&(t[s.server]=e[s.local])}return JSON.stringify(t)}const ke="prefixes";class h{constructor(n,t,r,o){this.url=n,this.method=t,this.handler=r,this.timeout=o,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function a(e){if(!e)throw We()}function l(e,n){return function t(r,o){const s=ft(e,o,n);return a(null!==s),s}}function A(e){return function n(t,r){let o;return o=401===t.getStatus()?t.getErrorText().includes("Firebase App Check token is invalid")?function fe(){return new D(O.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}():function Ne(){return new D(O.UNAUTHENTICATED,"User is not authenticated, please authenticate using Firebase Authentication and try again.")}():402===t.getStatus()?function ue(e){return new D(O.QUOTA_EXCEEDED,"Quota for bucket '"+e+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}(e.bucket):403===t.getStatus()?function $(e){return new D(O.UNAUTHORIZED,"User does not have permission to access '"+e+"'.")}(e.path):r,o.status=t.getStatus(),o.serverResponse=r.serverResponse,o}}function S(e){const n=A(e);return function t(r,o){let s=n(r,o);return 404===r.getStatus()&&(s=function Se(e){return new D(O.OBJECT_NOT_FOUND,"Object '"+e+"' does not exist.")}(e.path)),s.serverResponse=o.serverResponse,s}}function P(e,n,t){const o=Y(n.fullServerUrl(),e.host,e._protocol),u=e.maxOperationRetryTime,f=new h(o,"GET",l(e,t),u);return f.errorHandler=S(n),f}function V(e,n,t,r,o){const s={};s.prefix=n.isRoot?"":n.path+"/",t&&t.length>0&&(s.delimiter=t),r&&(s.pageToken=r),o&&(s.maxResults=o);const f=Y(n.bucketOnlyServerUrl(),e.host,e._protocol),y=e.maxOperationRetryTime,C=new h(f,"GET",function p(e,n){return function t(r,o){const s=function c(e,n,t){const r=Le(t);return null===r?null:function X(e,n,t){const r={prefixes:[],items:[],nextPageToken:t.nextPageToken};if(t[ke])for(const o of t[ke]){const s=o.replace(/\/$/,""),u=e._makeStorageReference(new d(n,s));r.prefixes.push(u)}if(t.items)for(const o of t.items){const s=e._makeStorageReference(new d(n,o.name));r.items.push(s)}return r}(e,n,r)}(e,n,o);return a(null!==s),s}}(e,n.bucket),y);return C.urlParams=s,C.errorHandler=A(n),C}function jt(e,n,t){const r=Object.assign({},t);return r.fullPath=e.path,r.size=n.size(),r.contentType||(r.contentType=function ie(e,n){return e&&e.contentType||n&&n.type()||"application/octet-stream"}(null,n)),r}class Vt{constructor(n,t,r,o){this.current=n,this.total=t,this.finalized=!!r,this.metadata=o||null}}function Re(e,n){let t=null;try{t=e.getResponseHeader("X-Goog-Upload-Status")}catch{a(!1)}return a(!!t&&-1!==(n||["active"]).indexOf(t)),t}const Jt={STATE_CHANGED:"state_changed"},ee={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function qt(e){switch(e){case"running":case"pausing":case"canceling":return ee.RUNNING;case"paused":return ee.PAUSED;case"success":return ee.SUCCESS;case"canceled":return ee.CANCELED;default:return ee.ERROR}}class In{constructor(n,t,r){if(function Q(e){return"function"==typeof e}(n)||null!=t||null!=r)this.next=n,this.error=t??void 0,this.complete=r??void 0;else{const s=n;this.next=s.next,this.error=s.error,this.complete=s.complete}}}function Ft(e){return(...n)=>{Promise.resolve().then(()=>e(...n))}}class wn{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=ne.NO_ERROR,this.sendPromise_=new Promise(n=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=ne.ABORT,n()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=ne.NETWORK_ERROR,n()}),this.xhr_.addEventListener("load",()=>{n()})})}send(n,t,r,o,s){if(this.sent_)throw de("cannot .send() more than once");if((0,M.zJ)(n)&&r&&(this.xhr_.withCredentials=!0),this.sent_=!0,this.xhr_.open(t,n,!0),void 0!==s)for(const u in s)s.hasOwnProperty(u)&&this.xhr_.setRequestHeader(u,s[u].toString());return void 0!==o?this.xhr_.send(o):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw de("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw de("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw de("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw de("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(n){return this.xhr_.getResponseHeader(n)}addUploadProgressListener(n){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",n)}removeUploadProgressListener(n){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",n)}}class Sn extends wn{initXhr(){this.xhr_.responseType="text"}}function K(){return new Sn}class hn{isExponentialBackoffExpired(){return this.sleepTime>this.maxSleepTime}constructor(n,t,r=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=n,this._blob=t,this._metadata=r,this._mappings=Ue(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=o=>{if(this._request=void 0,this._chunkMultiplier=1,o._codeEquals(O.CANCELED))this._needToFetchStatus=!0,this.completeTransitions_();else{const s=this.isExponentialBackoffExpired();if(At(o.status,[])){if(!s)return this.sleepTime=Math.max(2*this.sleepTime,1e3),this._needToFetchStatus=!0,void this.completeTransitions_();o=J()}this._error=o,this._transition("error")}},this._metadataErrorHandler=o=>{this._request=void 0,o._codeEquals(O.CANCELED)?this.completeTransitions_():(this._error=o,this._transition("error"))},this.sleepTime=0,this.maxSleepTime=this._ref.storage.maxUploadRetryTime,this._promise=new Promise((o,s)=>{this._resolve=o,this._reject=s,this._start()}),this._promise.then(null,()=>{})}_makeProgressCallback(){const n=this._transferred;return t=>this._updateProgress(n+t)}_shouldDoResumable(n){return n.size()>262144}_start(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this.pendingTimeout=setTimeout(()=>{this.pendingTimeout=void 0,this._continueUpload()},this.sleepTime):this._oneShotUpload())}_resolveToken(n){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([t,r])=>{switch(this._state){case"running":n(t,r);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused")}})}_createResumable(){this._resolveToken((n,t)=>{const r=function Lt(e,n,t,r,o){const s=n.bucketOnlyServerUrl(),u=jt(n,r,o),f={name:u.fullPath},m=Y(s,e.host,e._protocol),C={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${r.size()}`,"X-Goog-Upload-Header-Content-Type":u.contentType,"Content-Type":"application/json; charset=utf-8"},k=$e(u,t),B=new h(m,"POST",function w(oe){let W;Re(oe);try{W=oe.getResponseHeader("X-Goog-Upload-URL")}catch{a(!1)}return a(ve(W)),W},e.maxUploadRetryTime);return B.urlParams=f,B.headers=C,B.body=k,B.errorHandler=A(n),B}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),o=this._ref.storage._makeRequest(r,K,n,t);this._request=o,o.getPromise().then(s=>{this._request=void 0,this._uploadUrl=s,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const n=this._uploadUrl;this._resolveToken((t,r)=>{const o=function cn(e,n,t,r){const m=new h(t,"POST",function s(y){const C=Re(y,["active","final"]);let k=null;try{k=y.getResponseHeader("X-Goog-Upload-Size-Received")}catch{a(!1)}k||a(!1);const F=Number(k);return a(!isNaN(F)),new Vt(F,r.size(),"final"===C)},e.maxUploadRetryTime);return m.headers={"X-Goog-Upload-Command":"query"},m.errorHandler=A(n),m}(this._ref.storage,this._ref._location,n,this._blob),s=this._ref.storage._makeRequest(o,K,t,r);this._request=s,s.getPromise().then(u=>{this._request=void 0,this._updateProgress(u.current),this._needToFetchStatus=!1,u.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const n=262144*this._chunkMultiplier,t=new Vt(this._transferred,this._blob.size()),r=this._uploadUrl;this._resolveToken((o,s)=>{let u;try{u=function Rn(e,n,t,r,o,s,u,f){const m=new Vt(0,0);if(u?(m.current=u.current,m.total=u.total):(m.current=0,m.total=r.size()),r.size()!==m.total)throw function L(){return new D(O.SERVER_FILE_WRONG_SIZE,"Server recorded incorrect upload file size, please retry the upload.")}();const y=m.total-m.current;let C=y;o>0&&(C=Math.min(C,o));const k=m.current;let w="";w=0===C?"finalize":y===C?"upload, finalize":"upload";const B={"X-Goog-Upload-Command":w,"X-Goog-Upload-Offset":`${m.current}`},oe=r.slice(k,k+C);if(null===oe)throw ot();const se=new h(t,"POST",function W(te,Ht){const Yt=Re(te,["active","final"]),or=m.current+C,sn=r.size();let sr;return sr="final"===Yt?l(n,s)(te,Ht):null,new Vt(or,sn,"final"===Yt,sr)},n.maxUploadRetryTime);return se.headers=B,se.body=oe.uploadData(),se.progressCallback=f||null,se.errorHandler=A(e),se}(this._ref._location,this._ref.storage,r,this._blob,n,this._mappings,t,this._makeProgressCallback())}catch(m){return this._error=m,void this._transition("error")}const f=this._ref.storage._makeRequest(u,K,o,s,!1);this._request=f,f.getPromise().then(m=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(m.current),m.finalized?(this._metadata=m.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){262144*this._chunkMultiplier*2<33554432&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((n,t)=>{const r=P(this._ref.storage,this._ref._location,this._mappings),o=this._ref.storage._makeRequest(r,K,n,t);this._request=o,o.getPromise().then(s=>{this._request=void 0,this._metadata=s,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((n,t)=>{const r=function Gt(e,n,t,r,o){const s=n.bucketOnlyServerUrl(),u={"X-Goog-Upload-Protocol":"multipart"},m=function f(){let se="";for(let te=0;te<2;te++)se+=Math.random().toString().slice(2);return se}();u["Content-Type"]="multipart/related; boundary="+m;const y=jt(n,r,o),C=$e(y,t),w=re.getBlob("--"+m+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+C+"\r\n--"+m+"\r\nContent-Type: "+y.contentType+"\r\n\r\n",r,"\r\n--"+m+"--");if(null===w)throw ot();const B={name:y.fullPath},oe=Y(s,e.host,e._protocol),vt=e.maxUploadRetryTime,yt=new h(oe,"POST",l(e,t),vt);return yt.urlParams=B,yt.headers=u,yt.body=w.uploadData(),yt.errorHandler=A(n),yt}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),o=this._ref.storage._makeRequest(r,K,n,t);this._request=o,o.getPromise().then(s=>{this._request=void 0,this._metadata=s,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(n){const t=this._transferred;this._transferred=n,this._transferred!==t&&this._notifyObservers()}_transition(n){if(this._state!==n)switch(n){case"canceling":case"pausing":this._state=n,void 0!==this._request?this._request.cancel():this.pendingTimeout&&(clearTimeout(this.pendingTimeout),this.pendingTimeout=void 0,this.completeTransitions_());break;case"running":const t="paused"===this._state;this._state=n,t&&(this._notifyObservers(),this._start());break;case"paused":case"error":case"success":this._state=n,this._notifyObservers();break;case"canceled":this._error=ce(),this._state=n,this._notifyObservers()}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}}get snapshot(){const n=qt(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:n,metadata:this._metadata,task:this,ref:this._ref}}on(n,t,r,o){const s=new In(t||void 0,r||void 0,o||void 0);return this._addObserver(s),()=>{this._removeObserver(s)}}then(n,t){return this._promise.then(n,t)}catch(n){return this.then(null,n)}_addObserver(n){this._observers.push(n),this._notifyObserver(n)}_removeObserver(n){const t=this._observers.indexOf(n);-1!==t&&this._observers.splice(t,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(t=>{this._notifyObserver(t)})}_finishPromise(){if(void 0!==this._resolve){let n=!0;switch(qt(this._state)){case ee.SUCCESS:Ft(this._resolve.bind(null,this.snapshot))();break;case ee.CANCELED:case ee.ERROR:Ft(this._reject.bind(null,this._error))();break;default:n=!1}n&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(n){switch(qt(this._state)){case ee.RUNNING:case ee.PAUSED:n.next&&Ft(n.next.bind(n,this.snapshot))();break;case ee.SUCCESS:n.complete&&Ft(n.complete.bind(n))();break;default:n.error&&Ft(n.error.bind(n,this._error))()}}resume(){const n="paused"===this._state||"pausing"===this._state;return n&&this._transition("running"),n}pause(){const n="running"===this._state;return n&&this._transition("pausing"),n}cancel(){const n="running"===this._state||"pausing"===this._state;return n&&this._transition("canceling"),n}}class mt{constructor(n,t){this._service=n,this._location=t instanceof d?t:d.makeFromUrl(t,n.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(n,t){return new mt(n,t)}get root(){const n=new d(this._location.bucket,"");return this._newRef(this._service,n)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return gt(this._location.path)}get storage(){return this._service}get parent(){const n=function pt(e){if(0===e.length)return null;const n=e.lastIndexOf("/");return-1===n?"":e.slice(0,n)}(this._location.path);if(null===n)return null;const t=new d(this._location.bucket,n);return new mt(this._service,t)}_throwIfRoot(n){if(""===this._location.path)throw E(n)}}function pn(e,n,t){return en.apply(this,arguments)}function en(){return(en=(0,z.A)(function*(e,n,t){const o=yield gn(e,{pageToken:t});n.prefixes.push(...o.prefixes),n.items.push(...o.items),null!=o.nextPageToken&&(yield pn(e,n,o.nextPageToken))})).apply(this,arguments)}function gn(e,n){null!=n&&"number"==typeof n.maxResults&&be("options.maxResults",1,1e3,n.maxResults);const t=n||{},r=V(e.storage,e._location,"/",t.pageToken,t.maxResults);return e.storage.makeRequestWithTokens(r,K)}function fn(e){e._throwIfRoot("getDownloadURL");const n=function I(e,n,t){const o=Y(n.fullServerUrl(),e.host,e._protocol),u=e.maxOperationRetryTime,f=new h(o,"GET",function _(e,n){return function t(r,o){const s=ft(e,o,n);return a(null!==s),function Bt(e,n,t,r){const o=Le(n);if(null===o||!ve(o.downloadTokens))return null;const s=o.downloadTokens;if(0===s.length)return null;const u=encodeURIComponent;return s.split(",").map(y=>{const k=e.fullPath;return Y("/b/"+u(e.bucket)+"/o/"+u(k),t,r)+Et({alt:"media",token:y})})[0]}(s,o,e.host,e._protocol)}}(e,t),u);return f.errorHandler=S(n),f}(e.storage,e._location,Ue());return e.storage.makeRequestWithTokens(n,K).then(t=>{if(null===t)throw function xt(){return new D(O.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}();return t})}function mn(e,n){const t=function Te(e,n){const t=n.split("/").filter(r=>r.length>0).join("/");return 0===e.length?t:e+"/"+t}(e._location.path,n),r=new d(e._location.bucket,t);return new mt(e.storage,r)}function _n(e,n){if(e instanceof nn){const t=e;if(null==t._bucket)throw function me(){return new D(O.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+we+"' property when initializing the app?")}();const r=new mt(t,t._bucket);return null!=n?_n(r,n):r}return void 0!==n?mn(e,n):e}function Mn(e,n){if(n&&function Nn(e){return/^[A-Za-z]+:\/\//.test(e)}(n)){if(e instanceof nn)return function tn(e,n){return new mt(e,n)}(e,n);throw Ee("To use ref(service, url), the first argument must be a Storage instance.")}return _n(e,n)}function vn(e,n){const t=n?.[we];return null==t?null:d.makeFromBucketSpec(t,e)}class nn{constructor(n,t,r,o,s,u=!1){this.app=n,this._authProvider=t,this._appCheckProvider=r,this._url=o,this._firebaseVersion=s,this._isUsingEmulator=u,this._bucket=null,this._host=Ve,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=o?d.makeFromBucketSpec(o,this._host):vn(this._host,this.app.options)}get host(){return this._host}set host(n){this._host=n,this._bucket=null!=this._url?d.makeFromBucketSpec(this._url,n):vn(n,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(n){be("time",0,Number.POSITIVE_INFINITY,n),this._maxUploadRetryTime=n}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(n){be("time",0,Number.POSITIVE_INFINITY,n),this._maxOperationRetryTime=n}_getAuthToken(){var n=this;return(0,z.A)(function*(){if(n._overrideAuthToken)return n._overrideAuthToken;const t=n._authProvider.getImmediate({optional:!0});if(t){const r=yield t.getToken();if(null!==r)return r.accessToken}return null})()}_getAppCheckToken(){var n=this;return(0,z.A)(function*(){if((0,U._isFirebaseServerApp)(n.app)&&n.app.settings.appCheckToken)return n.app.settings.appCheckToken;const t=n._appCheckProvider.getImmediate({optional:!0});return t?(yield t.getToken()).token:null})()}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(n=>n.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(n){return new mt(this,n)}_makeRequest(n,t,r,o,s=!0){if(this._deleted)return new x(q());{const u=function Mt(e,n,t,r,o,s,u=!0,f=!1){const m=Et(e.urlParams),y=e.url+m,C=Object.assign({},e.headers);return function Rt(e,n){n&&(e["X-Firebase-GMPID"]=n)}(C,n),function ut(e,n){null!==n&&n.length>0&&(e.Authorization="Firebase "+n)}(C,t),function kt(e,n){e["X-Firebase-Storage-Version"]="webjs/"+(n??"AppManager")}(C,s),function Nt(e,n){null!==n&&(e["X-Firebase-AppCheck"]=n)}(C,r),new Xe(y,e.method,C,e.body,e.successCodes,e.additionalRetryCodes,e.handler,e.errorHandler,e.timeout,e.progressCallback,o,u,f)}(n,this._appId,r,o,t,this._firebaseVersion,s,this._isUsingEmulator);return this._requests.add(u),u.getPromise().then(()=>this._requests.delete(u),()=>this._requests.delete(u)),u}}makeRequestWithTokens(n,t){var r=this;return(0,z.A)(function*(){const[o,s]=yield Promise.all([r._getAuthToken(),r._getAppCheckToken()]);return r._makeRequest(n,t,o,s).getPromise()})()}}const yn="@firebase/storage",bn="0.13.14";function Cn(e,n){return Mn(e=(0,M.Ku)(e),n)}function Yn(e,{instanceIdentifier:n}){const t=e.getProvider("app").getImmediate(),r=e.getProvider("auth-internal"),o=e.getProvider("app-check-internal");return new nn(t,r,o,n,U.SDK_VERSION)}!function Xn(){(0,U._registerComponent)(new H.uA("storage",Yn,"PUBLIC").setMultipleInstances(!0)),(0,U.registerVersion)(yn,bn,""),(0,U.registerVersion)(yn,bn,"esm2017")}();class $t{constructor(n,t,r){this._delegate=n,this.task=t,this.ref=r}get bytesTransferred(){return this._delegate.bytesTransferred}get metadata(){return this._delegate.metadata}get state(){return this._delegate.state}get totalBytes(){return this._delegate.totalBytes}}class Kt{constructor(n,t){this._delegate=n,this._ref=t,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}get snapshot(){return new $t(this._delegate.snapshot,this,this._ref)}then(n,t){return this._delegate.then(r=>{if(n)return n(new $t(r,this,this._ref))},t)}on(n,t,r,o){let s;return t&&(s="function"==typeof t?u=>t(new $t(u,this,this._ref)):{next:t.next?u=>t.next(new $t(u,this,this._ref)):void 0,complete:t.complete||void 0,error:t.error||void 0}),this._delegate.on(n,s,r||void 0,o||void 0)}}class An{constructor(n,t){this._delegate=n,this._service=t}get prefixes(){return this._delegate.prefixes.map(n=>new je(n,this._service))}get items(){return this._delegate.items.map(n=>new je(n,this._service))}get nextPageToken(){return this._delegate.nextPageToken||null}}class je{constructor(n,t){this._delegate=n,this.storage=t}get name(){return this._delegate.name}get bucket(){return this._delegate.bucket}get fullPath(){return this._delegate.fullPath}toString(){return this._delegate.toString()}child(n){const t=function Hn(e,n){return mn(e,n)}(this._delegate,n);return new je(t,this.storage)}get root(){return new je(this._delegate.root,this.storage)}get parent(){const n=this._delegate.parent;return null==n?null:new je(n,this.storage)}put(n,t){return this._throwIfRoot("put"),new Kt(function Ln(e,n,t){return function Qt(e,n,t){return e._throwIfRoot("uploadBytesResumable"),new hn(e,new re(n),t)}(e=(0,M.Ku)(e),n,t)}(this._delegate,n,t),this)}putString(n,t=j.RAW,r){this._throwIfRoot("putString");const o=Je(t,n),s=Object.assign({},r);return null==s.contentType&&null!=o.contentType&&(s.contentType=o.contentType),new Kt(new hn(this._delegate,new re(o.data,!0),s),this)}listAll(){return function Vn(e){return function On(e){const n={prefixes:[],items:[]};return pn(e,n).then(()=>n)}(e=(0,M.Ku)(e))}(this._delegate).then(n=>new An(n,this.storage))}list(n){return function Gn(e,n){return gn(e=(0,M.Ku)(e),n)}(this._delegate,n||void 0).then(t=>new An(t,this.storage))}getMetadata(){return function $n(e){return function Pn(e){e._throwIfRoot("getMetadata");const n=P(e.storage,e._location,Ue());return e.storage.makeRequestWithTokens(n,K)}(e=(0,M.Ku)(e))}(this._delegate)}updateMetadata(n){return function jn(e,n){return function Un(e,n){e._throwIfRoot("updateMetadata");const t=function Xt(e,n,t,r){const s=Y(n.fullServerUrl(),e.host,e._protocol),f=$e(t,r),y=e.maxOperationRetryTime,C=new h(s,"PATCH",l(e,r),y);return C.headers={"Content-Type":"application/json; charset=utf-8"},C.body=f,C.errorHandler=S(n),C}(e.storage,e._location,n,Ue());return e.storage.makeRequestWithTokens(t,K)}(e=(0,M.Ku)(e),n)}(this._delegate,n)}getDownloadURL(){return function Kn(e){return fn(e=(0,M.Ku)(e))}(this._delegate)}delete(){return this._throwIfRoot("delete"),function Wn(e){return function xn(e){e._throwIfRoot("deleteObject");const n=function un(e,n){const r=Y(n.fullServerUrl(),e.host,e._protocol),f=new h(r,"DELETE",function u(m,y){},e.maxOperationRetryTime);return f.successCodes=[200,204],f.errorHandler=S(n),f}(e.storage,e._location);return e.storage.makeRequestWithTokens(n,K)}(e=(0,M.Ku)(e))}(this._delegate)}_throwIfRoot(n){if(""===this._delegate._location.path)throw E(n)}}class rn{constructor(n,t){this.app=n,this._delegate=t}get maxOperationRetryTime(){return this._delegate.maxOperationRetryTime}get maxUploadRetryTime(){return this._delegate.maxUploadRetryTime}ref(n){if(Ot(n))throw Ee("ref() expected a child path but got a URL, use refFromURL instead.");return new je(Cn(this._delegate,n),this)}refFromURL(n){if(!Ot(n))throw Ee("refFromURL() expected a full URL but got a child path, use ref() instead.");try{d.makeFromUrl(n,this._delegate.host)}catch{throw Ee("refFromUrl() expected a valid full URL but got an invalid one.")}return new je(Cn(this._delegate,n),this)}setMaxUploadRetryTime(n){this._delegate.maxUploadRetryTime=n}setMaxOperationRetryTime(n){this._delegate.maxOperationRetryTime=n}useEmulator(n,t,r={}){!function En(e,n,t,r={}){!function Bn(e,n,t,r={}){e.host=`${n}:${t}`;const o=(0,M.zJ)(n);o&&((0,M.gE)(`https://${e.host}/b`),(0,M.P1)("Storage",!0)),e._isUsingEmulator=!0,e._protocol=o?"https":"http";const{mockUserToken:s}=r;s&&(e._overrideAuthToken="string"==typeof s?s:(0,M.Fy)(s,e.app.options.projectId))}(e,n,t,r)}(this._delegate,n,t,r)}}function Ot(e){return/^[A-Za-z]+:\/\//.test(e)}function qn(e,{instanceIdentifier:n}){const t=e.getProvider("app-compat").getImmediate(),r=e.getProvider("storage").getImmediate({identifier:n});return new rn(t,r)}function kn(e){const n=function Zn(e){return new xe.c(n=>{const t=u=>n.next(u);t(e.snapshot);const s=e.on("state_changed",t);return e.then(u=>{t(u),n.complete()},u=>{t(e.snapshot),(u=>{n.error(u)})(u)}),function(){s()}}).pipe((0,i.B)(0))}(e);return{task:e,then:e.then.bind(e),catch:e.catch.bind(e),pause:e.pause.bind(e),cancel:e.cancel.bind(e),resume:e.resume.bind(e),snapshotChanges:()=>n,percentageChanges:()=>n.pipe((0,nt.T)(t=>t.bytesTransferred/t.totalBytes*100))}}function Wt(e,n){return{getDownloadURL:()=>(0,v.of)(void 0).pipe((0,ae.Q)(n.get(R.u0).outsideAngular),(0,Ie.n)(()=>e.getDownloadURL()),(0,b.YV)(n)),getMetadata:()=>(0,v.of)(void 0).pipe((0,ae.Q)(n.get(R.u0).outsideAngular),(0,Ie.n)(()=>e.getMetadata()),(0,b.YV)(n)),delete:()=>(0,T.H)(e.delete()),child:t=>Wt(e.child(t),n),updateMetadata:t=>(0,T.H)(e.updateMetadata(t)),put:(t,r)=>kn(e.put(t,r)),putString:(t,r,o)=>kn(e.putString(t,r,o)),list:t=>(0,T.H)(e.list(t)),listAll:()=>(0,T.H)(e.listAll())}}!function Qn(e){const n={TaskState:ee,TaskEvent:Jt,StringFormat:j,Storage:rn,Reference:je};e.INTERNAL.registerComponent(new H.uA("storage-compat",qn,"PUBLIC").setServiceProps(n).setMultipleInstances(!0)),e.registerVersion("@firebase/storage-compat","0.3.24")}(ge.A),g(762);const er=new N.nKC("angularfire2.storageBucket"),tr=new N.nKC("angularfire2.storage.maxUploadRetryTime"),nr=new N.nKC("angularfire2.storage.maxOperationRetryTime"),rr=new N.nKC("angularfire2.storage.use-emulator");let ir=(()=>{class e{storage;injector=(0,N.WQX)(N.uvJ);constructor(t,r,o,s,u,f,m,y,C,k){const F=(0,Ge.iB)(t,u,r);this.storage=(0,Ge.BM)(`${F.name}.storage.${o}`,"AngularFireStorage",F.name,()=>{const w=u.runOutsideAngular(()=>F.storage(o||void 0)),B=C;return B&&w.useEmulator(...B),m&&w.setMaxUploadRetryTime(m),y&&w.setMaxOperationRetryTime(y),w},[m,y])}ref(t){return Wt(this.storage.ref(t),this.injector)}refFromURL(t){return Wt(this.storage.refFromURL(t),this.injector)}upload(t,r,o){return Wt(this.storage.ref(t),this.injector).put(r,o)}static \u0275fac=function(r){return new(r||e)(N.KVO(Ge.rx),N.KVO(Ge.uP,8),N.KVO(er,8),N.KVO(bt.Agw),N.KVO(N.SKi),N.KVO(R.u0),N.KVO(tr,8),N.KVO(nr,8),N.KVO(rr,8),N.KVO(Tt.kR,8))};static \u0275prov=N.jDH({token:e,factory:e.\u0275fac,providedIn:"any"})}return e})()},2854(an,tt,g){g.r(tt),g.d(tt,{GitfireModule:()=>mr});var b=g(9769),R=g(9417),xe=g(4441),v=g(467),T=g(375),i=g(5547),nt=g(5407),ae=g(9253),Ie=g(490),N=g(7673),bt=g(983),Tt=g(1985),Ge=g(8793),ge=g(6745),z=g(941),U=g(5558),M=g(6354),H=g(9568),Ve=g(7083),we=g(9437),Ke=g(1397),rt=g(9901);g(762);const O=new T.nKC("angularfire2.messaging.vapid-key"),it=new T.nKC("angularfire2.messaging.service-worker-registeration");let We=(()=>{class e{requestPermission;getToken;tokenChanges;messages;requestToken;deleteToken;constructor(t,r,o,s,u,f,m){const y=m,C=(0,N.of)(void 0).pipe((0,ge._)(u.outsideAngular),(0,z.Q)(u.insideAngular),(0,U.n)(Ie.TT),(0,U.n)(w=>w?g.e(304).then(g.bind(g,8304)):bt.w),(0,M.T)(()=>(0,ae.iB)(t,s,r)),(0,U.n)(w=>(0,ae.BM)(`${w.name}.messaging`,"AngularFireMessaging",w.name,()=>(0,N.of)(w.messaging()),[])),(0,H.t)({bufferSize:1,refCount:!1}));this.requestPermission=C.pipe((0,ge._)(u.outsideAngular),(0,z.Q)(u.insideAngular),(0,U.n)(()=>Notification.requestPermission())),this.getToken=C.pipe((0,ge._)(u.outsideAngular),(0,z.Q)(u.insideAngular),(0,U.n)(function(){var w=(0,v.A)(function*(B){if("granted"===Notification.permission){const oe=y?yield y:null;return yield B.getToken({vapidKey:f,serviceWorkerRegistration:oe})}return null});return function(B){return w.apply(this,arguments)}}()));const k=new Tt.c(w=>{navigator.permissions.query({name:"notifications"}).then(B=>{B.onchange=()=>w.next()})}),F=C.pipe((0,ge._)(u.outsideAngular),(0,z.Q)(u.insideAngular),(0,Ve.K)(k),(0,Ve.K)(this.getToken));return this.tokenChanges=C.pipe((0,ge._)(u.outsideAngular),(0,z.Q)(u.insideAngular),(0,U.n)(()=>(0,Ge.x)(this.getToken,F))),this.messages=C.pipe((0,ge._)(u.outsideAngular),(0,z.Q)(u.insideAngular),(0,U.n)(w=>new Tt.c(B=>w.onMessage(B)))),this.requestToken=C.pipe((0,ge._)(u.outsideAngular),(0,z.Q)(u.insideAngular),(0,U.n)(()=>this.requestPermission),(0,we.W)(()=>(0,N.of)(null)),(0,Ke.Z)(()=>this.tokenChanges)),this.deleteToken=()=>C.pipe((0,ge._)(u.outsideAngular),(0,z.Q)(u.insideAngular),(0,U.n)(w=>w.deleteToken()),(0,rt.U)(!1)),(0,ae.Gt)(this,C,s)}static \u0275fac=function(r){return new(r||e)(T.KVO(ae.rx),T.KVO(ae.uP,8),T.KVO(i.Agw),T.KVO(T.SKi),T.KVO(nt.u0),T.KVO(O,8),T.KVO(it,8))};static \u0275prov=T.jDH({token:e,factory:e.\u0275fac,providedIn:"any"})}return e})();var ue=g(5794),Ne=g(3049),fe=g(1413),$=g(6977),J=g(6697),ce=g(5964),Ut=g(9974),le=g(4360),me=g(8750),ot=g(3669),L=g(5343),xt=g(9326),Ee=g(7935),q=g(8531),E=g(5312);let _e=(()=>{class e extends q.s{constructor(){super()}ngOnInit(){(0,E.Oi)("DeleteConfirmComponent.OnInit()")}static \u0275fac=function(r){return new(r||e)};static \u0275cmp=i.VBU({type:e,selectors:[["gitfire-delete-confirm"]],features:[i.Vt3],decls:10,vars:0,consts:[[1,"m-3"]],template:function(r,o){1&r&&(i.rj2(0,"div",0)(1,"div"),i.EFF(2,"\u672c\u5f53\u306b\u524a\u9664\u3057\u307e\u3059\u304b\uff1f"),i.eux(),i.rj2(3,"ul")(4,"li"),i.EFF(5,"Google / Twitter \u306a\u3069\u306e\u30a2\u30ab\u30a6\u30f3\u30c8\u60c5\u5831\u306f\u524a\u9664\u3055\u308c\u307e\u305b\u3093\u3002"),i.eux(),i.rj2(6,"li"),i.EFF(7,"\u516c\u958b\u3055\u308c\u305f\u6295\u7a3f\u306f\u524a\u9664\u3055\u308c\u307e\u305b\u3093\u3002"),i.eux(),i.rj2(8,"li"),i.EFF(9,"\u53d6\u308a\u6d88\u3057\u306f\u3067\u304d\u307e\u305b\u3093\u3002"),i.eux()()())},encapsulation:2})}return e})();var de=g(8115),d=g(7917),x=g(9164),Ye=(g(3832),g(1563),g(4012));function Q(){return window}function ye(){return ye=(0,v.A)(function*(e,n,t){const{BuildInfo:r}=Q();(0,d.av)(n.sessionId,"AuthEvent did not contain a session ID");const o=yield function Xe(e){return Fe.apply(this,arguments)}(n.sessionId),s={};return(0,d.aw)()?s.ibi=r.packageName:(0,d.ax)()?s.apn=r.packageName:(0,d.ay)(e,"operation-not-supported-in-this-environment"),r.displayName&&(s.appDisplayName=r.displayName),s.sessionId=o,(0,d.az)(e,t,n.type,void 0,n.eventId??void 0,s)}),ye.apply(this,arguments)}function be(){return(be=(0,v.A)(function*(e){const{BuildInfo:n}=Q(),t={};(0,d.aw)()?t.iosBundleId=n.packageName:(0,d.ax)()?t.androidPackageName=n.packageName:(0,d.ay)(e,"operation-not-supported-in-this-environment"),yield(0,d.aA)(e,t)})).apply(this,arguments)}function ne(){return(ne=(0,v.A)(function*(e,n,t){const{cordova:r}=Q();let o=()=>{};try{yield new Promise((s,u)=>{let f=null;function m(){s();const k=r.plugins.browsertab?.close;"function"==typeof k&&k(),"function"==typeof t?.close&&t.close()}function y(){f||(f=window.setTimeout(()=>{u((0,d.aC)(e,"redirect-cancelled-by-user"))},2e3))}function C(){"visible"===document?.visibilityState&&y()}n.addPassiveListener(m),document.addEventListener("resume",y,!1),(0,d.ax)()&&document.addEventListener("visibilitychange",C,!1),o=()=>{n.removePassiveListener(m),document.removeEventListener("resume",y,!1),document.removeEventListener("visibilitychange",C,!1),f&&window.clearTimeout(f)}})}finally{o()}})).apply(this,arguments)}function Fe(){return(Fe=(0,v.A)(function*(e){const n=function ut(e){if((0,d.av)(/[0-9a-zA-Z]+/.test(e),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return(new TextEncoder).encode(e);const n=new ArrayBuffer(e.length),t=new Uint8Array(n);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}(e),t=yield crypto.subtle.digest("SHA-256",n);return Array.from(new Uint8Array(t)).map(o=>o.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}class Rt extends d.aE{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(n=>{this.resolveInitialized=n})}addPassiveListener(n){this.passiveListeners.add(n)}removePassiveListener(n){this.passiveListeners.delete(n)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(n){return this.resolveInitialized(),this.passiveListeners.forEach(t=>t(n)),super.onEvent(n)}initialized(){var n=this;return(0,v.A)(function*(){yield n.initPromise})()}}function De(e){return ct.apply(this,arguments)}function ct(){return(ct=(0,v.A)(function*(e){const n=yield j()._get(he(e));return n&&(yield j()._remove(he(e))),n})).apply(this,arguments)}function Me(){const e=[];for(let t=0;t<20;t++){const r=Math.floor(62*Math.random());e.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(r))}return e.join("")}function j(){return(0,d.aF)(d.b)}function he(e){return(0,d.aG)("authEvent",e.config.apiKey,e.name)}function Oe(e){if(!e?.includes("?"))return{};const[n,...t]=e.split("?");return(0,x.I9)(t.join("?"))}const dt=class lt{constructor(){this._redirectPersistence=d.c,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=d.aH,this._overrideRedirectResult=d.aI}_initialize(n){var t=this;return(0,v.A)(function*(){const r=n._key();let o=t.eventManagers.get(r);return o||(o=new Rt(n),t.eventManagers.set(r,o),t.attachCallbackListeners(n,o)),o})()}_openPopup(n){(0,d.ay)(n,"operation-not-supported-in-this-environment")}_openRedirect(n,t,r,o){var s=this;return(0,v.A)(function*(){!function At(e){const n=Q();(0,d.aD)("function"==typeof n?.universalLinks?.subscribe,e,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),(0,d.aD)(typeof n?.BuildInfo?.packageName<"u",e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),(0,d.aD)("function"==typeof n?.cordova?.plugins?.browsertab?.openUrl,e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,d.aD)("function"==typeof n?.cordova?.plugins?.browsertab?.isAvailable,e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,d.aD)("function"==typeof n?.cordova?.InAppBrowser?.open,e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(n);const u=yield s._initialize(n);yield u.initialized(),u.resetRedirect(),(0,d.aJ)(),yield s._originValidation(n);const f=function Nt(e,n,t=null){return{type:n,eventId:t,urlResponse:null,sessionId:Me(),postBody:null,tenantId:e.tenantId,error:(0,d.aC)(e,"no-auth-event")}}(n,r,o);yield function Mt(e,n){return j()._set(he(e),n)}(n,f);const m=yield function ve(e,n,t){return ye.apply(this,arguments)}(n,f,t),y=yield function Y(e){const{cordova:n}=Q();return new Promise(t=>{n.plugins.browsertab.isAvailable(r=>{let o=null;r?n.plugins.browsertab.openUrl(e):o=n.InAppBrowser.open(e,(0,d.aB)()?"_blank":"_system","location=yes"),t(o)})})}(m);return function Et(e,n,t){return ne.apply(this,arguments)}(n,u,y)})()}_isIframeWebStorageSupported(n,t){throw new Error("Method not implemented.")}_originValidation(n){const t=n._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=function Ae(e){return be.apply(this,arguments)}(n)),this.originValidationPromises[t]}attachCallbackListeners(n,t){const{universalLinks:r,handleOpenURL:o,BuildInfo:s}=Q(),u=setTimeout((0,v.A)(function*(){yield De(n),t.onEvent(It())}),500),f=function(){var C=(0,v.A)(function*(k){clearTimeout(u);const F=yield De(n);let w=null;F&&k?.url&&(w=function ze(e,n){const t=function qe(e){const n=Oe(e),t=n.link?decodeURIComponent(n.link):void 0,r=Oe(t).link,o=n.deep_link_id?decodeURIComponent(n.deep_link_id):void 0;return Oe(o).link||o||r||t||e}(n);if(t.includes("/__/auth/callback")){const r=Oe(t),s=(r.firebaseError?function Je(e){try{return JSON.parse(e)}catch{return null}}(decodeURIComponent(r.firebaseError)):null)?.code?.split("auth/")?.[1],u=s?(0,d.aC)(s):null;return u?{type:e.type,eventId:e.eventId,tenantId:e.tenantId,error:u,urlResponse:null,sessionId:null,postBody:null}:{type:e.type,eventId:e.eventId,tenantId:e.tenantId,sessionId:e.sessionId,urlResponse:t,postBody:null}}return null}(F,k.url)),t.onEvent(w||It())});return function(F){return C.apply(this,arguments)}}();typeof r<"u"&&"function"==typeof r.subscribe&&r.subscribe(null,f);const m=o,y=`${s.packageName.toLowerCase()}://`;Q().handleOpenURL=function(){var C=(0,v.A)(function*(k){if(k.toLowerCase().startsWith(y)&&f({url:k}),"function"==typeof m)try{m(k)}catch(F){console.error(F)}});return function(k){return C.apply(this,arguments)}}()}};function It(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:(0,d.aC)("no-auth-event")}}function Te(){return self?.location?.protocol||null}function Qe(e=(0,x.ZQ)()){return!("file:"!==Te()&&"ionic:"!==Te()&&"capacitor:"!==Te()||!e.toLowerCase().match(/iphone|ipad|ipod|android/))}function Ze(){try{const e=self.localStorage,n=d.aO();if(e)return e.setItem(n,"1"),e.removeItem(n),!function Ue(e=(0,x.ZQ)()){return function Pe(){return(0,x.lT)()&&11===document?.documentMode}()||function wt(e=(0,x.ZQ)()){return/Edge\/\d+/.test(e)}(e)}()||(0,x.zW)()}catch{return et()&&(0,x.zW)()}return!1}function et(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function ft(){return(function gt(){return"http:"===Te()||"https:"===Te()}()||(0,x.sr)()||Qe())&&!function G(){return(0,x.lV)()||(0,x.Ll)()}()&&Ze()&&!et()}function Bt(){return Qe()&&typeof document<"u"}function ke(){return(ke=(0,v.A)(function*(){return!!Bt()&&new Promise(e=>{const n=setTimeout(()=>{e(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(n),e(!0)})})})).apply(this,arguments)}const X={LOCAL:"local",NONE:"none",SESSION:"session"},c=d.aD,h="persistence";function l(e){return p.apply(this,arguments)}function p(){return(p=(0,v.A)(function*(e){yield e._initializationPromise;const n=A(),t=d.aG(h,e.config.apiKey,e.name);n&&n.setItem(t,e._getPersistenceType())})).apply(this,arguments)}function A(){try{return function St(){return typeof window<"u"?window:null}()?.sessionStorage||null}catch{return null}}const S=d.aD;class P{constructor(){this.browserResolver=d.aF(d.m),this.cordovaResolver=d.aF(dt),this.underlyingResolver=null,this._redirectPersistence=d.c,this._completeRedirectFn=d.aH,this._overrideRedirectResult=d.aI}_initialize(n){var t=this;return(0,v.A)(function*(){return yield t.selectUnderlyingResolver(),t.assertedUnderlyingResolver._initialize(n)})()}_openPopup(n,t,r,o){var s=this;return(0,v.A)(function*(){return yield s.selectUnderlyingResolver(),s.assertedUnderlyingResolver._openPopup(n,t,r,o)})()}_openRedirect(n,t,r,o){var s=this;return(0,v.A)(function*(){return yield s.selectUnderlyingResolver(),s.assertedUnderlyingResolver._openRedirect(n,t,r,o)})()}_isIframeWebStorageSupported(n,t){this.assertedUnderlyingResolver._isIframeWebStorageSupported(n,t)}_originValidation(n){return this.assertedUnderlyingResolver._originValidation(n)}get _shouldInitProactively(){return Bt()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return S(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var n=this;return(0,v.A)(function*(){if(n.underlyingResolver)return;const t=yield function $e(){return ke.apply(this,arguments)}();n.underlyingResolver=t?n.cordovaResolver:n.browserResolver})()}}function V(e){return e.unwrap()}function I(e){return un(e)}function un(e){const{_tokenResponse:n}=e instanceof x.g?e.customData:e;if(!n)return null;if(!(e instanceof x.g)&&"temporaryProof"in n&&"phoneNumber"in n)return d.P.credentialFromResult(e);const t=n.providerId;if(!t||t===d.q.PASSWORD)return null;let r;switch(t){case d.q.GOOGLE:r=d.Y;break;case d.q.FACEBOOK:r=d.X;break;case d.q.GITHUB:r=d.Z;break;case d.q.TWITTER:r=d.a0;break;default:const{oauthIdToken:o,oauthAccessToken:s,oauthTokenSecret:u,pendingToken:f,nonce:m}=n;return s||u||o||f?f?t.startsWith("saml.")?d.aR._create(t,f):d.Q._fromParams({providerId:t,signInMethod:t,pendingToken:f,idToken:o,accessToken:s}):new d._(t).credential({idToken:o,accessToken:s,rawNonce:m}):null}return e instanceof x.g?r.credentialFromError(e):r.credentialFromResult(e)}function ie(e,n){return n.catch(t=>{throw t instanceof x.g&&function Xt(e,n){const t=n.customData?._tokenResponse;if("auth/multi-factor-auth-required"===n?.code)n.resolver=new Vt(e,d.at(e,n));else if(t){const r=un(n),o=n;r&&(o.credential=r,o.tenantId=t.tenantId||void 0,o.email=t.email||void 0,o.phoneNumber=t.phoneNumber||void 0)}}(e,t),t}).then(t=>{const o=t.user;return{operationType:t.operationType,credential:I(t),additionalUserInfo:d.ar(t),user:Re.getOrCreate(o)}})}function jt(e,n){return Gt.apply(this,arguments)}function Gt(){return(Gt=(0,v.A)(function*(e,n){const t=yield n;return{verificationId:t.verificationId,confirm:r=>ie(e,t.confirm(r))}})).apply(this,arguments)}class Vt{constructor(n,t){this.resolver=t,this.auth=function Z(e){return e.wrapped()}(n)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(n){return ie(V(this.auth),this.resolver.resolveSignIn(n))}}class Re{constructor(n){this._delegate=n,this.multiFactor=d.au(n)}static getOrCreate(n){return Re.USER_MAP.has(n)||Re.USER_MAP.set(n,new Re(n)),Re.USER_MAP.get(n)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(n){return this._delegate.getIdTokenResult(n)}getIdToken(n){return this._delegate.getIdToken(n)}linkAndRetrieveDataWithCredential(n){return this.linkWithCredential(n)}linkWithCredential(n){var t=this;return(0,v.A)(function*(){return ie(t.auth,d.a3(t._delegate,n))})()}linkWithPhoneNumber(n,t){var r=this;return(0,v.A)(function*(){return jt(r.auth,d.l(r._delegate,n,t))})()}linkWithPopup(n){var t=this;return(0,v.A)(function*(){return ie(t.auth,d.e(t._delegate,n,P))})()}linkWithRedirect(n){var t=this;return(0,v.A)(function*(){return yield l(d.aK(t.auth)),d.h(t._delegate,n,P)})()}reauthenticateAndRetrieveDataWithCredential(n){return this.reauthenticateWithCredential(n)}reauthenticateWithCredential(n){var t=this;return(0,v.A)(function*(){return ie(t.auth,d.a4(t._delegate,n))})()}reauthenticateWithPhoneNumber(n,t){return jt(this.auth,d.r(this._delegate,n,t))}reauthenticateWithPopup(n){return ie(this.auth,d.f(this._delegate,n,P))}reauthenticateWithRedirect(n){var t=this;return(0,v.A)(function*(){return yield l(d.aK(t.auth)),d.j(t._delegate,n,P)})()}sendEmailVerification(n){return d.ah(this._delegate,n)}unlink(n){var t=this;return(0,v.A)(function*(){return yield d.aq(t._delegate,n),t})()}updateEmail(n){return d.am(this._delegate,n)}updatePassword(n){return d.an(this._delegate,n)}updatePhoneNumber(n){return d.u(this._delegate,n)}updateProfile(n){return d.al(this._delegate,n)}verifyBeforeUpdateEmail(n,t){return d.ai(this._delegate,n,t)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}Re.USER_MAP=new WeakMap;const Lt=d.aD;let cn=(()=>{class e{constructor(t,r){if(this.app=t,r.isInitialized())return this._delegate=r.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:o}=t.options;Lt(o,"invalid-api-key",{appName:t.name}),Lt(o,"invalid-api-key",{appName:t.name});const s=typeof window<"u"?P:void 0;this._delegate=r.initialize({options:{persistence:Rn(o,t.name),popupRedirectResolver:s}}),this._delegate._updateErrorMap(d.H),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?Re.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(t){this._delegate.languageCode=t}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(t){this._delegate.tenantId=t}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(t,r){d.L(this._delegate,t,r)}applyActionCode(t){return d.a8(this._delegate,t)}checkActionCode(t){return d.a9(this._delegate,t)}confirmPasswordReset(t,r){return d.a7(this._delegate,t,r)}createUserWithEmailAndPassword(t,r){var o=this;return(0,v.A)(function*(){return ie(o._delegate,d.ab(o._delegate,t,r))})()}fetchProvidersForEmail(t){return this.fetchSignInMethodsForEmail(t)}fetchSignInMethodsForEmail(t){return d.ag(this._delegate,t)}isSignInWithEmailLink(t){return d.ae(this._delegate,t)}getRedirectResult(){var t=this;return(0,v.A)(function*(){Lt(ft(),t._delegate,"operation-not-supported-in-this-environment");const r=yield d.k(t._delegate,P);return r?ie(t._delegate,Promise.resolve(r)):{credential:null,user:null}})()}addFrameworkForLogging(t){!function ht(e,n){(0,d.aK)(e)._logFramework(n)}(this._delegate,t)}onAuthStateChanged(t,r,o){const{next:s,error:u,complete:f}=zt(t,r,o);return this._delegate.onAuthStateChanged(s,u,f)}onIdTokenChanged(t,r,o){const{next:s,error:u,complete:f}=zt(t,r,o);return this._delegate.onIdTokenChanged(s,u,f)}sendSignInLinkToEmail(t,r){return d.ad(this._delegate,t,r)}sendPasswordResetEmail(t,r){return d.a6(this._delegate,t,r||void 0)}setPersistence(t){var r=this;return(0,v.A)(function*(){let o;switch(function a(e,n){c(Object.values(X).includes(n),e,"invalid-persistence-type"),(0,x.lV)()?c(n!==X.SESSION,e,"unsupported-persistence-type"):(0,x.Ll)()?c(n===X.NONE,e,"unsupported-persistence-type"):et()?c(n===X.NONE||n===X.LOCAL&&(0,x.zW)(),e,"unsupported-persistence-type"):c(n===X.NONE||Ze(),e,"unsupported-persistence-type")}(r._delegate,t),t){case X.SESSION:o=d.c;break;case X.LOCAL:o=(yield d.aF(d.i)._isAvailable())?d.i:d.b;break;case X.NONE:o=d.V;break;default:return d.ay("argument-error",{appName:r._delegate.name})}return r._delegate.setPersistence(o)})()}signInAndRetrieveDataWithCredential(t){return this.signInWithCredential(t)}signInAnonymously(){return ie(this._delegate,d.a1(this._delegate))}signInWithCredential(t){return ie(this._delegate,d.a2(this._delegate,t))}signInWithCustomToken(t){return ie(this._delegate,d.a5(this._delegate,t))}signInWithEmailAndPassword(t,r){return ie(this._delegate,d.ac(this._delegate,t,r))}signInWithEmailLink(t,r){return ie(this._delegate,d.af(this._delegate,t,r))}signInWithPhoneNumber(t,r){return jt(this._delegate,d.s(this._delegate,t,r))}signInWithPopup(t){var r=this;return(0,v.A)(function*(){return Lt(ft(),r._delegate,"operation-not-supported-in-this-environment"),ie(r._delegate,d.d(r._delegate,t,P))})()}signInWithRedirect(t){var r=this;return(0,v.A)(function*(){return Lt(ft(),r._delegate,"operation-not-supported-in-this-environment"),yield l(r._delegate),d.g(r._delegate,t,P)})()}updateCurrentUser(t){return this._delegate.updateCurrentUser(t)}verifyPasswordResetCode(t){return d.aa(this._delegate,t)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return e.Persistence=X,e})();function zt(e,n,t){let r=e;"function"!=typeof e&&({next:r,error:n,complete:t}=e);const o=r;return{next:u=>o(u&&Re.getOrCreate(u)),error:n,complete:t}}function Rn(e,n){const t=function _(e,n){const t=A();if(!t)return[];const r=d.aG(h,e,n);switch(t.getItem(r)){case X.NONE:return[d.V];case X.LOCAL:return[d.i,d.c];case X.SESSION:return[d.c];default:return[]}}(e,n);if(typeof self<"u"&&!t.includes(d.i)&&t.push(d.i),typeof window<"u")for(const r of[d.b,d.c])t.includes(r)||t.push(r);return t.includes(d.V)||t.push(d.V),t}class Jt{static credential(n,t){return d.P.credential(n,t)}constructor(){this.providerId="phone",this._delegate=new d.P(V(de.A.auth()))}verifyPhoneNumber(n,t){return this._delegate.verifyPhoneNumber(n,t)}unwrap(){return this._delegate}}Jt.PHONE_SIGN_IN_METHOD=d.P.PHONE_SIGN_IN_METHOD,Jt.PROVIDER_ID=d.P.PROVIDER_ID;const ee=d.aD;class qt{constructor(n,t,r=de.A.app()){ee(r.options?.apiKey,"invalid-api-key",{appName:r.name}),this._delegate=new d.R(r.auth(),n,t),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function Ft(e){e.INTERNAL.registerComponent(new Ye.uA("auth-compat",n=>{const t=n.getProvider("app-compat").getImmediate(),r=n.getProvider("auth");return new cn(t,r)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:d.A.EMAIL_SIGNIN,PASSWORD_RESET:d.A.PASSWORD_RESET,RECOVER_EMAIL:d.A.RECOVER_EMAIL,REVERT_SECOND_FACTOR_ADDITION:d.A.REVERT_SECOND_FACTOR_ADDITION,VERIFY_AND_CHANGE_EMAIL:d.A.VERIFY_AND_CHANGE_EMAIL,VERIFY_EMAIL:d.A.VERIFY_EMAIL}},EmailAuthProvider:d.W,FacebookAuthProvider:d.X,GithubAuthProvider:d.Z,GoogleAuthProvider:d.Y,OAuthProvider:d._,SAMLAuthProvider:d.$,PhoneAuthProvider:Jt,PhoneMultiFactorGenerator:d.n,RecaptchaVerifier:qt,TwitterAuthProvider:d.a0,Auth:cn,AuthCredential:d.M,Error:x.g}).setInstantiationMode("LAZY").setMultipleInstances(!1)),e.registerVersion("@firebase/auth-compat","0.6.2")}(de.A);var ln=g(4333);const wn=["specialAuthContainer"];function Sn(e,n){if(1&e){const t=i.RV6();i.j41(0,"a",7),i.bIt("click",function(o){const s=T.eBV(t).$implicit,u=i.XpG();return T.Njj(u.onClickReauthProvider(o,s))}),i.EFF(1),i.k0s()}if(2&e){const t=n.$implicit;i.R7$(),i.JRh(t.providerId)}}class K extends q.s{loader;toastr;static SUPPORTED_PROVIDERS={};static SupportedOauthProviderIds=[];destroy$=new fe.B;get providers(){return this.currentUser.providerData}currentUser;reauthed=new T.bkB;specialAuthContainer;static{const n=K.SUPPORTED_PROVIDERS,t=Ee.A.auth;n[t.EmailAuthProvider.PROVIDER_ID]=t.EmailAuthProvider,n[t.TwitterAuthProvider.PROVIDER_ID]=t.TwitterAuthProvider,n[t.GoogleAuthProvider.PROVIDER_ID]=t.GoogleAuthProvider,n[t.GithubAuthProvider.PROVIDER_ID]=t.GithubAuthProvider;const r=K.SupportedOauthProviderIds;r.push(t.TwitterAuthProvider.PROVIDER_ID),r.push(t.GoogleAuthProvider.PROVIDER_ID),r.push(t.GithubAuthProvider.PROVIDER_ID)}constructor(n,t){super(),this.loader=n,this.toastr=t}ngOnDestroy(){this.destroy$.next()}isOAuthProvider(n){return!!K.SupportedOauthProviderIds.includes(n)}onClickReauthProvider(n,t){var r=()=>super.close,o=this;return(0,v.A)(function*(){(0,E.Oi)("onClickReauthProvider()",n,t),n.preventDefault();const u=new(0,K.SUPPORTED_PROVIDERS[t.providerId]);if(o.specialAuthContainer.clear(),o.isOAuthProvider(t.providerId)){try{yield o.currentUser.reauthenticateWithPopup(u)}catch(f){(0,E.sJ)("Error while reauth",f);const m=f instanceof Error?f.message:"Unknown error";return void o.toastr.error(`\u518d\u8a8d\u8a3c\u306b\u5931\u6557\u3057\u307e\u3057\u305f\u3002 ( ${m} )`)}(0,E.Oi)("Reanthenticated via OAuth provider")}else{const{GitfireLoginModule:f}=yield Promise.resolve().then(g.bind(g,1951)),{InputAuthComponent:m}=yield Promise.resolve().then(g.bind(g,2751)),y=o.loader.appendComponent(o.specialAuthContainer,f,m);y.isReauth=!0,y.reauthUser=o.currentUser,y.showFederations=!1;const C=y.reauthed.pipe((0,J.s)(1));try{yield C.toPromise()}catch(k){(0,E.sJ)("Error while reauth done",k);const F=k instanceof Error?k.message:"Unknown error";return void o.toastr.error(`\u518d\u8a8d\u8a3c\u306b\u5931\u6557\u3057\u307e\u3057\u305f\u3002 ( ${F} )`)}(0,E.Oi)("Reanthenticated via password")}o.reauthed.next(),r().call(o)})()}static \u0275fac=function(t){return new(t||K)(i.rXU(ln.Z),i.rXU(ue.tw))};static \u0275cmp=i.VBU({type:K,selectors:[["gitfire-reauth-box"]],viewQuery:function(t,r){if(1&t&&i.GBs(wn,5,i.c1b),2&t){let o;i.mGM(o=i.lsd())&&(r.specialAuthContainer=o.first)}},inputs:{currentUser:"currentUser"},outputs:{reauthed:"reauthed"},features:[i.Vt3],decls:10,vars:1,consts:[["specialAuthContainer",""],[1,"m-3"],[1,"btn-group"],["type","button","data-bs-toggle","dropdown","aria-haspopup","true","aria-expanded","false",1,"btn","btn-primary","dropdown-toggle"],[1,"visually-hidden"],[1,"dropdown-menu"],["class","dropdown-item","href","#",3,"click",4,"ngFor","ngForOf"],["href","#",1,"dropdown-item",3,"click"]],template:function(t,r){1&t&&(i.j41(0,"div",1)(1,"div",2)(2,"button",3)(3,"span",4),i.EFF(4,"Toggle Dropdown"),i.k0s(),i.EFF(5,"\u8a8d\u8a3c\u65b9\u6cd5"),i.k0s(),i.j41(6,"div",5),i.DNE(7,Sn,2,1,"a",6),i.k0s()(),i.nrm(8,"div",null,0),i.k0s()),2&t&&(i.R7$(7),i.Y8G("ngForOf",r.providers))},dependencies:[b.MD,b.Sq],encapsulation:2})}var dn=g(4572),Fn=g(3294),Dn=g(8141),Ce=g(619),hn=g(4019),mt=g(2275);function _t(e,n){if(e.value!==n){if(e.dirty)return void(0,E.sJ)(`Upstream value has been changed to ${e.value} -> ${n} but sillengly ignore the value.`);e.setErrors(null),e.setValue(n)}}function pe(e){e.markAsPristine(),e.markAsUntouched()}var Dt=g(1474),Qt=g(8334),Zt=g(4871);function On(e,n){if(1&e){const t=i.RV6();i.j41(0,"button",22),i.bIt("click",function(o){T.eBV(t);const s=i.XpG().$implicit,u=i.XpG();return T.Njj(u.onClickDeleteDevice(o,s))}),i.EFF(1,"\u524a\u9664"),i.k0s()}}function pn(e,n){if(1&e){const t=i.RV6();i.j41(0,"div",19)(1,"app-switch",20),i.nI1(2,"date"),i.bIt("checkChanged",function(o){const s=T.eBV(t).$implicit,u=i.XpG();return T.Njj(u.onToggleDevice(o,s))}),i.k0s(),i.DNE(3,On,2,0,"button",21),i.k0s()}if(2&e){const t=n.$implicit,r=i.XpG();i.R7$(),i.Y8G("controlLabel",i.VFN("",t.name||"No Name"," ",t.id===r.registeredDeviceId?"[\u3053\u306e\u7aef\u672b]":null," (\u767b\u9332\u65e5: ",i.i5U(2,8,t.createdAt.toDate(),"yyyy-MM-dd"),")"))("formName",i.VkB("device-",t.id))("parentForm",r.deviceForm),i.R7$(2),i.Y8G("ngIf",t.id!==r.registeredDeviceId)}}function en(e,n){if(1&e&&(i.j41(0,"div"),i.EFF(1),i.k0s()),2&e){const t=n.$implicit,r=n.index;i.R7$(),i.Lme("",r,": ",t)}}function gn(e,n){if(1&e&&(i.j41(0,"div"),i.EFF(1),i.k0s()),2&e){const t=n.$implicit,r=n.index;i.R7$(),i.Lme("",r,": ",t)}}function Pn(e,n){if(1&e&&(i.j41(0,"div"),i.EFF(1),i.k0s()),2&e){const t=n.$implicit,r=n.index;i.R7$(),i.Lme("",r,": ",t)}}function Un(e,n){if(1&e&&(i.j41(0,"div"),i.EFF(1),i.nI1(2,"json"),i.k0s()),2&e){const t=n.$implicit;i.R7$(),i.JRh(i.bMT(2,1,t))}}let fn=(()=>{class e{auth;dialog;toastr;store;funcs;messaging;destroy$=new fe.B;mainForm;userPrivStore$;deviceForm;messagingTypeArray;configArray;currentUser$;registeredDeviceId;registeredToken;debugObservable={};devices;tokenReceived=new fe.B;tokenReceived$;privUser;constructor(t,r,o,s,u,f){this.auth=t,this.dialog=r,this.toastr=o,this.store=s,this.funcs=u,this.messaging=f,this.privUser=this.store.collection("/users/v1/protected"),this.currentUser$=this.auth.clientSideUser$.pipe((0,ce.p)(m=>!!m))}onToggleDevice(t,r){(0,E.Oi)("onToggleDevice()");const o=this.getDeviceControl(r),s={deviceId:r.id,off:!o.value};try{this.funcs.call("toggleSuspendDevice",s),this.toastr.success("\u7aef\u672b\u306e\u8a2d\u5b9a\u3092\u66f4\u65b0\u3057\u307e\u3057\u305f\u3002")}catch{this.toastr.error("\u7aef\u672b\u306e\u8a2d\u5b9a\u304c\u66f4\u65b0\u3067\u304d\u307e\u305b\u3093\u3067\u3057\u305f\u3002")}}onClickDeleteDevice(t,r){var u,o=this;(0,E.Oi)("onClickDeleteDevice()"),this.messaging.deleteToken(r.token).pipe((0,$.Q)(this.destroy$)).subscribe({next:(u=(0,v.A)(function*(f){(0,E.rD)(`deleteToken() result ${f}`),o.toastr.success("\u7aef\u672b\u306e\u901a\u77e5\u3092\u89e3\u9664\u3057\u307e\u3057\u305f\u3002")}),function(m){return u.apply(this,arguments)}),error:u=>{(0,E.sJ)(`Failed to delete token token: ${r.token}`,u),this.toastr.error("\u7aef\u672b\u306e\u901a\u77e5\u3092\u89e3\u9664\u3067\u304d\u307e\u305b\u3093\u3067\u3057\u305f\u3002\u65e2\u306b\u5931\u52b9\u3057\u3066\u3044\u308b\u53ef\u80fd\u6027\u304c\u3042\u308a\u307e\u3059\u3002")}});const s={deviceId:r.id};try{this.funcs.call("revokeDevice",s),this.toastr.success("\u30b7\u30b9\u30c6\u30e0\u4e0a\u304b\u3089\u7aef\u672b\u306e\u901a\u77e5\u3092\u89e3\u9664\u3057\u307e\u3057\u305f\u3002")}catch{this.toastr.error("\u30b7\u30b9\u30c6\u30e0\u4e0a\u306e\u7aef\u672b\u306e\u901a\u77e5\u3092\u89e3\u9664\u3067\u304d\u307e\u305b\u3093\u3067\u3057\u305f\u3002")}}ngOnInit(){var t=this;const o=this.currentUser$.pipe((0,J.s)(1),(0,ce.p)(s=>!!s)).pipe((0,U.n)(s=>this.store.collection(`users/v1/protected/${s.uid}/fcm`).valueChanges({idField:"id"})),(0,H.t)(1));o.pipe((0,$.Q)(this.destroy$)).subscribe(s=>{this.devices=s;for(const u in this.deviceForm.controls)this.deviceForm.removeControl(u);for(const u of this.devices)this.addDeviceControl(u);this.triggerTokenRefresh()}),this.mainForm.addControl("messagingOn",new R.MJ(!1,[])),this.deviceForm=new R.gE({}),this.mainForm.addControl("devices",this.deviceForm),this.mainForm.addControl("messagingSystemCheck",new R.MJ(!1,[])),this.mainForm.addControl("messagingTrivialCheck",new R.MJ(!1,[])),this.mainForm.addControl("messagingMentionCheck",new R.MJ(!1,[])),this.mainForm.addControl("messagingAdminCheck",new R.MJ(!1,[])),this.messagingTypeArray=new R.Yp([this.typeSystemControl,this.typeMentionControl,this.typeAdminControl]),this.configArray=new R.Yp([this.typeTrivialControl,this.messagingTypeArray]),this.userPrivStore$.pipe((0,$.Q)(this.destroy$)).subscribe(s=>{(0,E.rD)("this.userPrivStore$.subscribe()",s);const u=s.messagingTypes||["mention","admin"];_t(this.typeSystemControl,u.includes("system")),_t(this.typeMentionControl,u.includes("mention")),_t(this.typeAdminControl,u.includes("admin")),_t(this.typeTrivialControl,s.isWatchTrivial)}),this.tokenReceived$=this.tokenReceived.pipe((0,ce.p)(s=>null!==s),(0,Fn.F)()),(0,dn.z)(this.tokenReceived$,o).pipe((0,$.Q)(this.destroy$)).subscribe(function(){var s=(0,v.A)(function*([u,f]){if((0,E.Oi)("this.messaging.tokenReceived subscribe()",u,f),t.debugObservable.registeredToken=u,t.registeredToken=u,u){const y=t.findDeviceId(u,f);if(!y)return void t.toastr.error("\u30c7\u30d0\u30a4\u30b9\u306e\u53d6\u5f97\u306b\u5931\u6557\u3057\u307e\u3057\u305f\u3002");t.registeredDeviceId=y}_t(t.messagingOnControl,!!t.registeredDeviceId)});return function(u){return s.apply(this,arguments)}}()),this.triggerTokenRefresh(),this.debugObservable.messages=[],this.messaging.messages.pipe((0,$.Q)(this.destroy$)).subscribe(s=>{(0,E.rD)("message received from messaging",s),this.debugObservable.messages.push(s)}),this.debugObservable.getToken$=this.messaging.getToken,this.debugObservable.getToken=[],this.debugObservable.getToken$.subscribe({next:s=>this.debugObservable.getToken.push(s),complete:()=>(0,E.rD)("Complete getToken()")}),this.debugObservable.tokenChanges$=this.messaging.tokenChanges,this.debugObservable.tokenChanges=[],this.debugObservable.tokenChanges$.subscribe({next:s=>this.debugObservable.tokenChanges.push(s),complete:()=>(0,E.rD)("Complete tokenChanges()")}),this.debugObservable.tokenReceived=[]}findDeviceId(t,r){for(const o of r)if(o.token===t)return o.id;return null}ngOnDestroy(){this.destroy$.next()}triggerTokenRefresh(){this.messaging.getToken.pipe((0,J.s)(1),(0,$.Q)(this.destroy$)).subscribe({next:t=>this.tokenReceived.next(t),complete:()=>(0,E.Oi)("Completed getToken")})}get messagingOnControl(){return this.mainForm.get("messagingOn")}getDeviceControl(t){return this.deviceForm.get(`device-${t.id}`)}addDeviceControl(t){const r=new R.MJ(!t.isSuspend,[]);this.deviceForm.addControl(`device-${t.id}`,r)}get typeTrivialControl(){return this.mainForm.get("messagingTrivialCheck")}get typeSystemControl(){return this.mainForm.get("messagingSystemCheck")}get typeMentionControl(){return this.mainForm.get("messagingMentionCheck")}get typeAdminControl(){return this.mainForm.get("messagingAdminCheck")}revokeNotification(){var t=this;return(0,v.A)(function*(){if(!t.registeredDeviceId)return(0,E.sJ)("Unexpectedly no deviceId is found."),void t.toastr.error("\u30c7\u30d0\u30a4\u30b9\u60c5\u5831\u3092\u7121\u52b9\u306b\u3067\u304d\u307e\u305b\u3093\u3002");try{t.funcs.call("revokeDevice",{deviceId:t.registeredDeviceId}),t.toastr.info("\u30b7\u30b9\u30c6\u30e0\u304b\u3089\u901a\u77e5\u60c5\u5831\u3092\u524a\u9664\u3057\u307e\u3057\u305f\u3002")}catch(r){return(0,E.sJ)("Error while deleting token via Functions",r),t.messagingOnControl.setValue(!0),pe(t.messagingOnControl),void t.toastr.error("\u30b7\u30b9\u30c6\u30e0\u306e\u901a\u77e5\u60c5\u5831\u3092\u524a\u9664\u3067\u304d\u307e\u305b\u3093\u3067\u3057\u305f\u3002")}t.messaging.getToken.pipe((0,Dn.M)(r=>(0,E.Oi)(`getToken before deleteToken ${r}`)),(0,Ke.Z)(r=>t.messaging.deleteToken(r)),(0,J.s)(1),(0,$.Q)(t.destroy$)).subscribe({next:r=>{(0,E.rD)(`Deleted result: ${r} on FCM.`),pe(t.messagingOnControl),t.toastr.success("\u901a\u77e5\u60c5\u5831\u3092\u524a\u9664\u3057\u307e\u3057\u305f\u3002")},error:r=>{(0,E.sJ)("Error while deleting token on FCM",r),t.toastr.error("\u901a\u77e5\u60c5\u5831\u304c\u524a\u9664\u3067\u304d\u307e\u305b\u3093\u3067\u3057\u305f\u3002")}})})()}onToggleMessaging(t){var r=this;return(0,v.A)(function*(){if((0,E.Oi)("UserSettingsComponent.onToggleMessaging()"),r.messagingOnControl.value){if(!r.registeredDeviceId&&r.devices&&r.devices.length>=E.cA.FCMDeviceMaxCount)return void r.toastr.error("\u767b\u9332\u3055\u308c\u305f\u30c7\u30d0\u30a4\u30b9\u304c\u591a\u3059\u304e\u307e\u3059\u3002\u524a\u9664\u3057\u3066\u304b\u3089\u3084\u308a\u76f4\u3057\u3066\u304f\u3060\u3055\u3044\u3002");yield r.updateRequestToken()}else{const s=r.dialog.createHtmlBuilder(),u=new mt.tt("\n<div>\n\u767b\u9332\u3092\u89e3\u9664\u3059\u308b\u3068\u3059\u3079\u3066\u306e\u901a\u77e5\u306f\u505c\u6b62\u3057\u307e\u3059\u3002\u3088\u308d\u3057\u3044\u3067\u3059\u304b\uff1f\n</div>\n");s.setMessage(u).setType(Ce.hs.Warn).setSize(Ce.EV.Default).setTitle("\u78ba\u8a8d").okButton((0,v.A)(function*(){yield r.revokeNotification()})).cancelButton(()=>{r.messagingOnControl.setValue(!0),pe(r.messagingOnControl)}).open()}})()}getMessagingTypes(){const t=[];return this.typeSystemControl.value&&t.push("system"),this.typeMentionControl.value&&t.push("mention"),this.typeAdminControl.value&&t.push("admin"),t}updateRequestToken(){var t=this;return(0,v.A)(function*(){var r;t.messaging.requestToken.pipe((0,J.s)(1),(0,$.Q)(t.destroy$)).subscribe({next:(r=(0,v.A)(function*(o){if(t.tokenReceived.next(o),t.debugObservable.tokenReceived.push(o),!o)return(0,E.sJ)("No token returned from requestToken"),t.messagingOnControl.setValue(!1),pe(t.messagingOnControl),void t.toastr.error("\u901a\u77e5\u60c5\u5831\u3092\u53d6\u5f97\u3067\u304d\u307e\u305b\u3093\u3067\u3057\u305f\u3002");try{(0,E.Oi)(`Updated token with ${o}`);const s={token:o,deviceId:t.registeredDeviceId};t.registeredToken=o,t.registeredDeviceId=yield t.funcs.call("saveDeviceToken",s),t.toastr.success("\u901a\u77e5\u60c5\u5831\u3092\u4fdd\u5b58\u3057\u307e\u3057\u305f\u3002"),pe(t.messagingOnControl)}catch(s){(0,E.sJ)("Error while save token to Firestore",s),t.messagingOnControl.setValue(!1),pe(t.messagingOnControl),t.toastr.error("\u901a\u77e5\u60c5\u5831\u3092\u4fdd\u5b58\u3067\u304d\u307e\u305b\u3093\u3067\u3057\u305f\u3002")}}),function(s){return r.apply(this,arguments)}),error:r=>{(0,E.sJ)("Error while request Token",r),t.messagingOnControl.setValue(!1),pe(t.messagingOnControl),t.toastr.error("\u901a\u77e5\u3092\u6709\u52b9\u306b\u3067\u304d\u307e\u305b\u3093\u3067\u3057\u305f\u3002\u30d6\u30e9\u30a6\u30b6\u306e\u8a2d\u5b9a\u3092\u78ba\u8a8d\u3057\u3066\u304f\u3060\u3055\u3044\u3002")}})})()}onClickUpdateMessaging(t){var r=this;return(0,v.A)(function*(){(0,E.Oi)("UserSettingsComponent.onClickUpdateMessaging()");try{const o={messageTypes:r.getMessagingTypes(),token:r.registeredToken,isWatchTrivial:r.typeTrivialControl.value};yield r.funcs.call("setNotifications",o),pe(r.configArray),r.toastr.success("\u8a2d\u5b9a\u3092\u4fdd\u5b58\u3057\u307e\u3057\u305f\u3002")}catch(o){(0,E.sJ)("Failed to save configuration",o),r.toastr.error("\u8a2d\u5b9a\u304c\u4fdd\u5b58\u3067\u304d\u307e\u305b\u3093\u3067\u3057\u305f\u3002")}})()}onClickSubscribeTopic(t){var r=this;return(0,v.A)(function*(){if(!r.debugObservable.topicText)return void alert("Not set");const o={topic:r.debugObservable.topicText,token:r.registeredToken},s=yield r.funcs.call("subscribeTopicTest",o);(0,E.rD)("subscribeTopicTest ->",s),r.toastr.success(`done subscribe ${s}`)})()}onClickUnsubscribeTopic(t){var r=this;return(0,v.A)(function*(){if(!r.debugObservable.topicText)return void alert("Not set");const o={topic:r.debugObservable.topicText,token:r.registeredToken},s=yield r.funcs.call("unsubscribeTopicTest",o);(0,E.rD)("unsubscribeTopicTest ->",s),r.toastr.success(`done unsubscribe ${s}`)})()}onClickPostToTopic(t){var r=this;return(0,v.A)(function*(){if(!r.debugObservable.topicText||!r.debugObservable.topicPostText)return void alert("Not set");const o={topic:r.debugObservable.topicText,title:r.debugObservable.topicPostText},s=yield r.funcs.call("postTopicTest",o);(0,E.rD)("postTopicTest ->",s),r.toastr.success(`done post ${s}`)})()}onClickConditionPostToTopic(t){var r=this;return(0,v.A)(function*(){if(!r.debugObservable.conditionTopicPostText||!r.debugObservable.conditionTopicPostText)return void alert("Not set");const o={topic:r.debugObservable.conditionTopicPostText,title:r.debugObservable.topicPostText},s=yield r.funcs.call("postConditionTopicTest",o);(0,E.rD)("postConditionTopicTest ->",s),r.toastr.success(`done post ${s}`)})()}onClickClearMessages(t){this.debugObservable.messages=[]}static \u0275fac=function(r){return new(r||e)(i.rXU(Dt.u),i.rXU(Ce.o3),i.rXU(ue.tw),i.rXU(Qt.Qe),i.rXU(Zt.Y),i.rXU(We))};static \u0275cmp=i.VBU({type:e,selectors:[["gitfire-user-notification"]],inputs:{mainForm:"mainForm",userPrivStore$:"userPrivStore$"},decls:69,vars:16,consts:[[1,"m-2"],["title","\u3053\u306e\u6a5f\u80fd\u306f\u30c6\u30b9\u30c8\u4e2d\u306e\u305f\u3081\u5909\u66f4\u3055\u308c\u308b\u3053\u3068\u3084\u3001\u60f3\u5b9a\u5916\u306e\u6319\u52d5\u3092\u3059\u308b\u5834\u5408\u304c\u3042\u308a\u307e\u3059\u3002\u30d6\u30e9\u30a6\u30b6\u304b\u3089\u306e\u901a\u77e5\u3092\u30b3\u30f3\u30c8\u30ed\u30fc\u30eb\u3057\u307e\u3059\u3002\u8a2d\u5b9a\u304c\u3046\u307e\u304f\u3044\u304b\u306a\u3044\u5834\u5408\u306f\u30d6\u30e9\u30a6\u30b6\u304b\u3089\u5f53\u30b5\u30a4\u30c8\u306e\u901a\u77e5 on/off \u3092\u3057\u305f\u308a\u3001\u300e\u7aef\u672b\u306e\u524a\u9664\u300f\u3092\u304a\u8a66\u3057\u304f\u3060\u3055\u3044\u3002","src","/assets/octicons/question.svg",1,"m-3","octicon-info","help-icon"],[1,"m-2",3,"formGroup"],[1,"row","p-1"],[1,"d-flex","align-content-start","flex-wrap","p-1"],["controlLabel","\u901a\u77e5\u3092\u53d7\u3051\u53d6\u308b","formName","messagingOn","tooltipText","\u30d6\u30e9\u30a6\u30b6\u304b\u3089\u306e\u901a\u77e5\u3092\u30b3\u30f3\u30c8\u30ed\u30fc\u30eb\u3057\u307e\u3059\u3002",1,"p-2",3,"checkChanged","parentForm"],[1,"d-flex","align-content-start","flex-wrap","p-3"],["class","m-1 input-group",4,"ngFor","ngForOf"],[1,"row","m-2"],["controlLabel","\u3061\u3087\u3063\u3068\u3057\u305f\u901a\u77e5","formName","messagingTrivialCheck","tooltipText","\u3061\u3087\u3063\u3068\u3057\u305f\u901a\u77e5\u3082\u53d7\u3051\u53d6\u308b\u304b\u3069\u3046\u304b\u3092\u8a2d\u5b9a\u3057\u307e\u3059\u3002\u901a\u5e38\u306f\u4e0d\u8981\u3067\u3059\u3002",1,"p-2",3,"parentForm"],["controlLabel","\u30b7\u30b9\u30c6\u30e0","formName","messagingSystemCheck","tooltipText","\u30b7\u30b9\u30c6\u30e0\u304b\u3089\u306e\u901a\u77e5\u3092\u9001\u308b\u304b\u3069\u3046\u304b\u3092\u8a2d\u5b9a\u3057\u307e\u3059\u3002",1,"p-2",3,"parentForm"],["controlLabel","\u3042\u306a\u305f\u3078\u306e\u8a00\u53ca","formName","messagingMentionCheck","tooltipText","\u30b7\u30b9\u30c6\u30e0\u306e\u30e1\u30c3\u30bb\u30fc\u30b8\u30b7\u30b9\u30c6\u30e0\u3067\u3042\u306a\u305f\u306b\u8a00\u53ca\u3055\u308c\u305f\u5834\u5408\u306b\u901a\u77e5\u3092\u9001\u308b\u304b\u3069\u3046\u304b\u3092\u8a2d\u5b9a\u3057\u307e\u3059\u3002",1,"p-2",3,"parentForm"],["controlLabel","\u7ba1\u7406\u4eba\u304b\u3089","formName","messagingAdminCheck","tooltipText","\u7ba1\u7406\u4eba\u304c\u624b\u52d5\u3067\u3042\u306a\u305f\u306b\u30e1\u30c3\u30bb\u30fc\u30b8\u3092\u9001\u3063\u305f\u5834\u5408\u306b\u901a\u77e5\u3092\u9001\u308b\u304b\u3069\u3046\u304b\u3092\u8a2d\u5b9a\u3057\u307e\u3059\u3002",1,"p-2",3,"parentForm"],[1,"btn","btn-primary",3,"click","disabled"],[2,"width","100%","overflow-wrap","break-word"],[4,"ngFor","ngForOf"],["type","text",3,"ngModelChange","ngModel"],[1,"btn","btn-primary",3,"click"],[1,"btn","btn-warning",3,"click"],[1,"m-1","input-group"],["tooltipText","\u767b\u9332\u3055\u308c\u305f Device \u306e\u901a\u77e5\u3092\u4e00\u6642\u7684\u306b\u505c\u6b62\u3057\u307e\u3059\u3002",1,"m-2",3,"checkChanged","parentForm","controlLabel","formName"],["class","btn btn-warning","title","\u767b\u9332\u60c5\u5831\u3092\u524a\u9664\u3057\u3066\u3001\u3053\u306e\u7aef\u672b\u3078\u306e\u901a\u77e5\u3092\u89e3\u9664\u3057\u307e\u3059\u3002",3,"click",4,"ngIf"],["title","\u767b\u9332\u60c5\u5831\u3092\u524a\u9664\u3057\u3066\u3001\u3053\u306e\u7aef\u672b\u3078\u306e\u901a\u77e5\u3092\u89e3\u9664\u3057\u307e\u3059\u3002",1,"btn","btn-warning",3,"click"]],template:function(r,o){1&r&&(i.j41(0,"h2",0),i.EFF(1,"\u901a\u77e5\u8a2d\u5b9a (\u30c6\u30b9\u30c8\u4e2d)"),i.nrm(2,"img",1),i.k0s(),i.j41(3,"div",2)(4,"div",3)(5,"div",4)(6,"app-switch",5),i.bIt("checkChanged",function(u){return o.onToggleMessaging(u)}),i.k0s()()(),i.j41(7,"div",0)(8,"h3"),i.EFF(9,"\u767b\u9332\u3055\u308c\u305f\u30c7\u30d0\u30a4\u30b9"),i.k0s(),i.j41(10,"div",6),i.DNE(11,pn,4,11,"div",7),i.k0s()(),i.j41(12,"div")(13,"div",8)(14,"h3"),i.EFF(15,"\u91cd\u8981\u5ea6"),i.k0s(),i.j41(16,"div",4),i.nrm(17,"app-switch",9),i.k0s()(),i.j41(18,"div",8)(19,"h3"),i.EFF(20,"\u7a2e\u985e"),i.k0s(),i.j41(21,"div",4),i.nrm(22,"app-switch",10)(23,"app-switch",11)(24,"app-switch",12),i.k0s()(),i.j41(25,"div",8)(26,"button",13),i.bIt("click",function(u){return o.onClickUpdateMessaging(u)}),i.EFF(27,"\u66f4\u65b0"),i.k0s()()()(),i.j41(28,"div",14)(29,"div"),i.EFF(30,"Token: "),i.j41(31,"div"),i.EFF(32),i.k0s()(),i.j41(33,"div"),i.EFF(34,"GetToken: "),i.DNE(35,en,2,2,"div",15),i.k0s(),i.j41(36,"div"),i.EFF(37,"TokenChanges: "),i.DNE(38,gn,2,2,"div",15),i.k0s(),i.j41(39,"div"),i.EFF(40,"TokenReceived: "),i.DNE(41,Pn,2,2,"div",15),i.k0s(),i.j41(42,"div")(43,"div")(44,"label"),i.EFF(45,"Topic: "),i.j41(46,"input",16),i.mxI("ngModelChange",function(u){return i.DH7(o.debugObservable.topicText,u)||(o.debugObservable.topicText=u),u}),i.k0s()(),i.j41(47,"button",17),i.bIt("click",function(u){return o.onClickSubscribeTopic(u)}),i.EFF(48,"subscribe"),i.k0s(),i.j41(49,"button",17),i.bIt("click",function(u){return o.onClickUnsubscribeTopic(u)}),i.EFF(50,"unsubscribe"),i.k0s()(),i.j41(51,"div")(52,"label"),i.EFF(53,"Post Title: "),i.j41(54,"input",16),i.mxI("ngModelChange",function(u){return i.DH7(o.debugObservable.topicPostText,u)||(o.debugObservable.topicPostText=u),u}),i.k0s()(),i.j41(55,"button",17),i.bIt("click",function(u){return o.onClickPostToTopic(u)}),i.EFF(56,"Post"),i.k0s()(),i.j41(57,"div")(58,"label"),i.EFF(59,"Condition Topic Post: "),i.j41(60,"input",16),i.mxI("ngModelChange",function(u){return i.DH7(o.debugObservable.conditionTopicPostText,u)||(o.debugObservable.conditionTopicPostText=u),u}),i.k0s()(),i.j41(61,"button",17),i.bIt("click",function(u){return o.onClickConditionPostToTopic(u)}),i.EFF(62,"CondPost"),i.k0s()()()(),i.j41(63,"div")(64,"button",18),i.bIt("click",function(u){return o.onClickClearMessages(u)}),i.EFF(65,"Clear"),i.k0s(),i.j41(66,"div"),i.EFF(67,"Messages: "),i.DNE(68,Un,3,3,"div",15),i.k0s()()),2&r&&(i.R7$(3),i.Y8G("formGroup",o.mainForm),i.R7$(3),i.Y8G("parentForm",o.mainForm),i.R7$(5),i.Y8G("ngForOf",o.devices),i.R7$(6),i.Y8G("parentForm",o.mainForm),i.R7$(5),i.Y8G("parentForm",o.mainForm),i.R7$(),i.Y8G("parentForm",o.mainForm),i.R7$(),i.Y8G("parentForm",o.mainForm),i.R7$(2),i.Y8G("disabled",o.configArray.invalid||!o.configArray.dirty),i.R7$(6),i.JRh(o.debugObservable.registeredToken),i.R7$(3),i.Y8G("ngForOf",o.debugObservable.getToken),i.R7$(3),i.Y8G("ngForOf",o.debugObservable.tokenChanges),i.R7$(3),i.Y8G("ngForOf",o.debugObservable.tokenReceived),i.R7$(5),i.R50("ngModel",o.debugObservable.topicText),i.R7$(8),i.R50("ngModel",o.debugObservable.topicPostText),i.R7$(6),i.R50("ngModel",o.debugObservable.conditionTopicPostText),i.R7$(8),i.Y8G("ngForOf",o.debugObservable.messages))},dependencies:[b.MD,b.Sq,b.bT,R.X1,R.me,R.BC,R.cb,R.j4,R.YN,R.vS,hn.c,b.TG,b.vh],encapsulation:2})}return e})();var xn=g(6469),mn=g(1848),Nn=g(1637),tn=g(9182);const _n=["protectedSettings"],Mn=["imageBox"];function vn(e,n){1&e&&i.EFF(0,"\u753b\u50cf\u304c\u3042\u308a\u307e\u305b\u3093")}function Bn(e,n){if(1&e&&i.nrm(0,"img",38),2&e){const t=i.XpG().ngIf;i.Y8G("src",i.mNQ(t.photoURL),i.B4B)}}function nn(e,n){if(1&e){const t=i.RV6();i.qex(0),i.j41(1,"span",39),i.EFF(2," -> "),i.k0s(),i.j41(3,"label",11),i.EFF(4,"\u65b0\u3057\u3044\u753b\u50cf"),i.k0s(),i.nrm(5,"img",40),i.j41(6,"button",41),i.bIt("click",function(o){const s=T.eBV(t).ngIf,u=i.XpG(2);return T.Njj(u.onClickOkImage(o,s))}),i.EFF(7,"\u78ba\u5b9a"),i.k0s(),i.bVm()}if(2&e){const t=n.ngIf;i.R7$(5),i.Y8G("src",i.mNQ(t),i.B4B)}}function yn(e,n){1&e&&i.nrm(0,"div",42)}function bn(e,n){if(1&e&&(i.j41(0,"div",42),i.EFF(1),i.k0s()),2&e){const t=i.XpG(3);i.R7$(),i.SpI("\u6b8b\u308a ",t.nicknameResult.changesRemain," \u56de \u5909\u66f4\u3067\u304d\u307e\u3059\u3002")}}function Tn(e,n){1&e&&(i.j41(0,"div",44),i.EFF(1,"\u3053\u308c\u4ee5\u4e0a\u306f\u5909\u66f4\u3067\u304d\u307e\u305b\u3093\u3002"),i.k0s())}function ar(e,n){if(1&e&&(i.qex(0),i.DNE(1,bn,2,1,"div",20)(2,Tn,2,0,"div",43),i.bVm()),2&e){const t=i.XpG(2);i.R7$(),i.Y8G("ngIf",t.nicknameResult.changesRemain>0),i.R7$(),i.Y8G("ngIf",0===t.nicknameResult.changesRemain)}}function ur(e,n){1&e&&(i.j41(0,"div",44),i.EFF(1,"\u5165\u529b\u5fc5\u9808\u3067\u3059\u3002"),i.k0s())}function cr(e,n){1&e&&(i.j41(0,"div",44),i.EFF(1,"\u9577\u3059\u304e\u307e\u3059\u3002"),i.k0s())}function Ln(e,n){1&e&&(i.j41(0,"div",44),i.EFF(1,"\u77ed\u3059\u304e\u307e\u3059\u3002"),i.k0s())}function $n(e,n){if(1&e&&(i.qex(0),i.DNE(1,ur,2,0,"div",43)(2,cr,2,0,"div",43)(3,Ln,2,0,"div",43),i.bVm()),2&e){const t=i.XpG(2);i.R7$(),i.Y8G("ngIf",null==t.nicknameControl.errors?null:t.nicknameControl.errors.required),i.R7$(),i.Y8G("ngIf",null==t.nicknameControl.errors?null:t.nicknameControl.errors.maxlength),i.R7$(),i.Y8G("ngIf",null==t.nicknameControl.errors?null:t.nicknameControl.errors.minlength)}}function jn(e,n){1&e&&i.nrm(0,"div",42)}function Gn(e,n){1&e&&(i.j41(0,"div",44),i.EFF(1,"\u9577\u3059\u304e\u307e\u3059\u3002"),i.k0s())}function Vn(e,n){if(1&e&&(i.qex(0),i.DNE(1,Gn,2,0,"div",43),i.bVm()),2&e){const t=i.XpG(2);i.R7$(),i.Y8G("ngIf",null==t.aboutControl.errors?null:t.aboutControl.errors.maxlength)}}function Kn(e,n){if(1&e&&(i.qex(0),i.nrm(1,"hr")(2,"gitfire-user-notification",45),i.bVm()),2&e){const t=i.XpG(2);i.R7$(2),i.Y8G("mainForm",t.notificationForm)("userPrivStore$",t.userPrivate$)}}function Wn(e,n){1&e&&i.nrm(0,"div",42)}function Cn(e,n){1&e&&(i.j41(0,"div",44),i.EFF(1,"E \u30e1\u30fc\u30eb\u306f\u5fc5\u9808\u3067\u3059\u3002"),i.k0s())}function Hn(e,n){1&e&&(i.j41(0,"div",44),i.EFF(1,"E \u30e1\u30fc\u30eb\u30a2\u30c9\u30ec\u30b9\u3092\u5165\u529b\u3057\u3066\u304f\u3060\u3055\u3044\u3002"),i.k0s())}function lr(e,n){if(1&e&&(i.qex(0),i.DNE(1,Cn,2,0,"div",43)(2,Hn,2,0,"div",43),i.bVm()),2&e){const t=i.XpG(2);i.R7$(),i.Y8G("ngIf",null==t.emailControl.errors?null:t.emailControl.errors.required),i.R7$(),i.Y8G("ngIf",(null==t.emailControl.errors?null:t.emailControl.errors.minlength)||(null==t.emailControl.errors?null:t.emailControl.errors.maxlength))}}function En(e,n){1&e&&(i.j41(0,"div",42),i.EFF(1,"\u30d1\u30b9\u30ef\u30fc\u30c9\u306e\u5f37\u5ea6\u306f\u5145\u5206\u306b\u3057\u3066\u304f\u3060\u3055\u3044\u3002"),i.k0s())}function dr(e,n){1&e&&(i.j41(0,"div",44),i.EFF(1,"\u30d1\u30b9\u30ef\u30fc\u30c9\u306f\u5fc5\u9808\u3067\u3059\u3002"),i.k0s())}function hr(e,n){1&e&&(i.j41(0,"div",44),i.EFF(1,"\u30d1\u30b9\u30ef\u30fc\u30c9\u306e\u9577\u3055\u304c\u8db3\u308a\u307e\u305b\u3093\u3002"),i.k0s())}function Yn(e,n){if(1&e&&(i.qex(0),i.DNE(1,dr,2,0,"div",43)(2,hr,2,0,"div",43),i.bVm()),2&e){const t=i.XpG(2);i.R7$(),i.Y8G("ngIf",null==t.passwordControl.errors?null:t.passwordControl.errors.required),i.R7$(),i.Y8G("ngIf",null==t.passwordControl.errors?null:t.passwordControl.errors.minlength)}}function Xn(e,n){if(1&e){const t=i.RV6();i.qex(0),i.j41(1,"div",5)(2,"form",6,0)(4,"h2",7),i.EFF(5,"\u516c\u958b\u8a2d\u5b9a"),i.nrm(6,"img",8),i.k0s(),i.j41(7,"div")(8,"div",9)(9,"div",10)(10,"label",11),i.EFF(11,"\u73fe\u5728\u306e\u753b\u50cf"),i.k0s(),i.DNE(12,vn,1,0,"ng-template",null,1,i.C5r)(14,Bn,1,2,"img",12)(15,nn,8,2,"ng-container",4),i.nI1(16,"async"),i.k0s(),i.j41(17,"div",13),i.nrm(18,"input",14,2),i.j41(20,"button",15),i.bIt("click",function(o){T.eBV(t);const s=i.XpG();return T.Njj(s.onClickUploadImage(o))}),i.EFF(21,"Upload"),i.k0s()()(),i.j41(22,"div",16)(23,"label",17),i.EFF(24,"\u30cb\u30c3\u30af\u30cd\u30fc\u30e0"),i.nrm(25,"img",18),i.k0s(),i.nrm(26,"input",19),i.j41(27,"button",15),i.bIt("click",function(o){T.eBV(t);const s=i.XpG();return T.Njj(s.onClickUpdateNickname(o))}),i.EFF(28,"\u66f4\u65b0"),i.k0s()(),i.DNE(29,yn,1,0,"div",20)(30,ar,3,2,"ng-container",4)(31,$n,4,3,"ng-container",4),i.j41(32,"div",16)(33,"label",17),i.EFF(34,"\u81ea\u5df1\u7d39\u4ecb"),i.nrm(35,"img",21),i.k0s(),i.nrm(36,"textarea",22),i.j41(37,"button",23),i.bIt("click",function(o){T.eBV(t);const s=i.XpG();return T.Njj(s.onClickUpdateAbout(o))}),i.EFF(38,"\u66f4\u65b0"),i.k0s()()(),i.DNE(39,jn,1,0,"div",20)(40,Vn,2,1,"ng-container",4)(41,Kn,3,2,"ng-container",4),i.nrm(42,"hr"),i.j41(43,"a",24),i.bIt("click",function(o){T.eBV(t);const s=i.XpG();return T.Njj(s.onClickImportant(o))}),i.EFF(44),i.k0s(),i.j41(45,"div",25,3)(47,"div",26)(48,"label",27),i.EFF(49,"\u540d\u524d"),i.nrm(50,"img",28),i.k0s(),i.nrm(51,"input",29),i.k0s(),i.j41(52,"div",26)(53,"label",27),i.EFF(54,"Email"),i.nrm(55,"img",30),i.k0s(),i.nrm(56,"input",31),i.j41(57,"button",32),i.bIt("click",function(o){T.eBV(t);const s=i.XpG();return T.Njj(s.onClickUpdateEmail(o))}),i.EFF(58,"\u66f4\u65b0"),i.k0s(),i.DNE(59,Wn,1,0,"div",20)(60,lr,3,2,"ng-container",4),i.k0s(),i.j41(61,"div",26)(62,"label",27),i.EFF(63,"Password"),i.nrm(64,"img",33),i.k0s(),i.nrm(65,"input",34),i.j41(66,"button",32),i.bIt("click",function(o){T.eBV(t);const s=i.XpG();return T.Njj(s.onClickUpdatePassword(o))}),i.EFF(67,"\u66f4\u65b0"),i.k0s(),i.DNE(68,En,2,0,"div",20)(69,Yn,3,2,"ng-container",4),i.k0s(),i.j41(70,"h3",35),i.EFF(71,"\u30a2\u30ab\u30a6\u30f3\u30c8\u306e\u7d42\u4e86"),i.k0s(),i.j41(72,"div",36)(73,"button",37),i.bIt("click",function(o){T.eBV(t);const s=i.XpG();return T.Njj(s.onClickDeleteAccount(o))}),i.EFF(74,"\u30a2\u30ab\u30a6\u30f3\u30c8\u3092\u524a\u9664"),i.k0s()()()()(),i.bVm()}if(2&e){const t=n.ngIf,r=i.sdS(13),o=i.XpG();i.R7$(2),i.Y8G("formGroup",o.inputForm),i.R7$(12),i.Y8G("ngIf",t.photoURL)("ngIfElse",r),i.R7$(),i.Y8G("ngIf",i.bMT(16,29,o.profileTempImage$)),i.R7$(5),i.Y8G("disabled",o.userIconControl.invalid||!o.userIconControl.dirty),i.R7$(2),i.AVh("was-validated",o.nicknameControl.dirty||o.nicknameControl.touched),i.R7$(5),i.Y8G("disabled",o.nicknameControl.invalid||!o.nicknameControl.dirty),i.R7$(2),i.Y8G("ngIf",!o.nicknameControl.invalid),i.R7$(),i.Y8G("ngIf",o.nicknameResult),i.R7$(),i.Y8G("ngIf",o.nicknameControl.invalid),i.R7$(),i.AVh("was-validated",o.aboutControl.dirty||o.aboutControl.touched),i.R7$(5),i.Y8G("disabled",o.aboutControl.invalid||!o.aboutControl.dirty),i.R7$(2),i.Y8G("ngIf",!o.aboutControl.invalid),i.R7$(),i.Y8G("ngIf",o.aboutControl.invalid),i.R7$(),i.Y8G("ngIf",o.auth.isDeveloper),i.R7$(3),i.JRh(o.isOpenOther?"\u518d\u8a8d\u8a3c":"\u305d\u306e\u4ed6\u306e\u8a2d\u5b9a"),i.R7$(7),i.Y8G("value",t.displayName),i.R7$(),i.AVh("was-validated",o.emailControl.dirty||o.emailControl.touched),i.R7$(5),i.Y8G("disabled",o.emailControl.invalid||!o.emailControl.dirty),i.R7$(2),i.Y8G("ngIf",!o.emailControl.invalid),i.R7$(),i.Y8G("ngIf",o.emailControl.invalid),i.R7$(),i.AVh("was-validated",o.passwordControl.dirty||o.passwordControl.touched),i.R7$(5),i.Y8G("disabled",!o.passwordControl.value||o.passwordControl.invalid||!o.passwordControl.dirty),i.R7$(2),i.Y8G("ngIf",!o.passwordControl.invalid),i.R7$(),i.Y8G("ngIf",o.passwordControl.invalid)}}let $t=(()=>{class e{auth;storage;funcs;store;toastr;router;dialog;localSession;destroy$=new fe.B;viewInited$=new fe.B;currentUser;currentUser$;userPublic;userPrivate$=new fe.B;profileTempImage$;inputForm;notificationForm;isOpenOther=!1;nicknameResult=null;protectedSettings;imageBox;pubUser;privUser;nicknameIndex;constructor(t,r,o,s,u,f,m,y){this.auth=t,this.storage=r,this.funcs=o,this.store=s,this.toastr=u,this.router=f,this.dialog=m,this.localSession=y,(0,E.Oi)("UserSettingsComponent()"),this.inputForm=new R.gE({}),this.pubUser=this.store.collection("/users/v1/public"),this.privUser=this.store.collection("/users/v1/protected"),this.nicknameIndex=this.store.collection("/index/users/usernick"),this.currentUser$=this.auth.clientSideUser$,this.currentUser$.pipe((0,$.Q)(this.destroy$)).subscribe(k=>{this.currentUser=k});const C=this.currentUser$.pipe((0,J.s)(1),(0,ce.p)(k=>!!k));C.pipe((0,U.n)(k=>this.pubUser.doc(k.uid).valueChanges()),(0,$.Q)(this.destroy$)).subscribe(k=>{this.userPublic=k,_t(this.aboutControl,k.about),this.aboutControl.enable(),_t(this.nicknameControl,k.nickname),this.nicknameControl.enable()}),C.pipe((0,U.n)(k=>this.privUser.doc(k.uid).valueChanges()),(0,$.Q)(this.destroy$)).subscribe(k=>{this.userPrivate$.next(k)}),C.pipe(function He(...e){const n=(0,xt.ms)(e);return(0,Ut.N)((t,r)=>{const o=e.length,s=new Array(o);let u=e.map(()=>!1),f=!1;for(let m=0;m<o;m++)(0,me.Tg)(e[m]).subscribe((0,le._)(r,y=>{s[m]=y,!f&&!u[m]&&(u[m]=!0,(f=u.every(ot.D))&&(u=null))},L.l));t.subscribe((0,le._)(r,m=>{if(f){const y=[m,...s];r.next(n?n(...y):y)}}))})}(this.viewInited$),(0,M.T)(([k,F])=>k),(0,$.Q)(this.destroy$)).subscribe(k=>{this.emailControl.setValue(k.email)})}ngOnInit(){(0,E.Oi)("UserSettingsComponent.OnInit()"),this.inputForm.addControl("userIcon",new R.MJ("",[R.k0.required])),this.inputForm.addControl("email",new R.MJ({value:"",disabled:!1},[R.k0.required])),this.inputForm.addControl("password",new R.MJ("",[])),this.inputForm.addControl("nickname",new R.MJ({value:"",disabled:!0},[R.k0.required])),this.inputForm.addControl("about",new R.MJ({value:"",disabled:!0},[])),this.notificationForm=new R.gE({}),this.inputForm.addControl("messaging",this.notificationForm)}ngAfterViewInit(){this.viewInited$.next()}ngOnDestroy(){this.destroy$.next()}get emailControl(){return this.inputForm.get("email")}get passwordControl(){return this.inputForm.get("password")}get aboutControl(){return this.inputForm.get("about")}get nicknameControl(){return this.inputForm.get("nickname")}get userIconControl(){return this.inputForm.get("userIcon")}onClickDeleteAccount(t){this.dialog.createDefaultBuilder().prepareBody(_e).setType(Ce.hs.Warn).setSize(Ce.EV.Default).setTitle("\u6700\u7d42\u78ba\u8a8d").okButton(()=>{this.doDeleteAccount()}).cancelButton(()=>{}).open()}doDeleteAccount(){var t=this;return(0,v.A)(function*(){try{yield t.currentUser.delete(),(0,E.Oi)("Account is deleted")}catch(o){(0,E.sJ)("Error while delete account",o);const s=o instanceof Error?o.message:"Unknown error";return void t.toastr.error(`\u30a2\u30ab\u30a6\u30f3\u30c8\u3092\u524a\u9664\u3067\u304d\u307e\u305b\u3093\u3067\u3057\u305f\u3002 ( ${s} )`)}t.localSession.unmarkLogin(),t.router.navigate(["/"])})()}updateError(t,r){(0,E.sJ)(`Error while update tag:${t}`,r);const o=r instanceof Error?r.message:"Unknown error";this.toastr.error(`${t} \u306e\u66f4\u65b0\u306b\u5931\u6557\u3057\u307e\u3057\u305f\u3002 ( ${o} )`)}updateSucceeded(t,r){this.toastr.success(`${t} \u3092 "${r}" \u306b\u66f4\u65b0\u3057\u307e\u3057\u305f\u3002`)}updateProfileImage(t){var r=this;return(0,v.A)(function*(){if(""===t)return;const o="\u30d7\u30ed\u30d5\u30a3\u30fc\u30eb\u753b\u50cf";try{yield r.currentUser.updateProfile({photoURL:t});const u={photoURL:t,updatedAt:Ee.A.firestore.FieldValue.serverTimestamp()};yield r.pubUser.doc(r.currentUser.uid).update(u),r.updateSucceeded(o,"Upload \u3057\u305f\u753b\u50cf"),r.getProfileRef("temp_profile").delete(),r.profileTempImage$=null,r.userIconControl.setValue(""),pe(r.userIconControl)}catch(s){r.updateError(o,s)}})()}onClickUpdateNickname(t){var r=this;return(0,v.A)(function*(){if(r.nicknameControl.invalid)return;const o=r.nicknameControl.value;if(o===r.userPublic.nickname)return;const s="\u30cb\u30c3\u30af\u30cd\u30fc\u30e0";try{const u={nickname:o};r.nicknameResult=yield r.funcs.call("updateNickname",u),r.updateSucceeded(s,o),pe(r.nicknameControl)}catch(u){r.updateError(s,u)}})()}onClickUpdateAbout(t){var r=this;return(0,v.A)(function*(){if(r.aboutControl.invalid)return;const o=r.aboutControl.value;if(o===r.userPublic.about)return;const s="\u81ea\u5df1\u7d39\u4ecb";try{const u={about:o};yield r.funcs.call("updateAbout",u),r.updateSucceeded(s,o),pe(r.aboutControl)}catch(u){r.updateError(s,u)}})()}onClickUpdateEmail(t){var r=this;return(0,v.A)(function*(){if(r.emailControl.invalid)return;const o=r.emailControl.value;o!==r.currentUser.email&&r.dialog.createSimpleBuilder().setType(Ce.hs.Warn).setSize(Ce.EV.Default).setMessage("\u767b\u9332\u30e1\u30fc\u30eb\u30a2\u30c9\u30ec\u30b9\u3092\u5909\u66f4\u3057\u307e\u3059\u3002\u3088\u308d\u3057\u3044\u3067\u3059\u304b\uff1f").setTitle("\u78ba\u8a8d").okButton(()=>{r.doChangeEmail(o)}).cancelButton(()=>{}).open()})()}doChangeEmail(t){var r=this;return(0,v.A)(function*(){const o="Email";try{yield r.currentUser.updateEmail(t),yield r.currentUser.sendEmailVerification(),r.updateSucceeded(o,t),pe(r.emailControl),r.toastr.info("\u78ba\u8a8d\u306e\u30e1\u30fc\u30eb\u3092\u9001\u4fe1\u3057\u307e\u3057\u305f\u3002")}catch(s){r.updateError(o,s)}})()}onClickUpdatePassword(t){var r=this;return(0,v.A)(function*(){if(r.passwordControl.invalid)return;const o=r.passwordControl.value;if(""===o)return;const s="\u30d1\u30b9\u30ef\u30fc\u30c9";try{yield r.currentUser.updatePassword(o),r.updateSucceeded(s,"********"),pe(r.passwordControl)}catch(u){r.updateError(s,u)}finally{r.passwordControl.setValue("")}})()}listProvider(){}ensureImageFile(){const t=this.imageBox.nativeElement;if(0===t.files.length)return this.toastr.error("\u30d5\u30a1\u30a4\u30eb\u3092\u9078\u629e\u3057\u3066\u304f\u3060\u3055\u3044\u3002"),null;const r=t.files[0];return r.size>=524288?(this.toastr.error("\u30d5\u30a1\u30a4\u30eb\u306e\u30b5\u30a4\u30ba\u304c\u5927\u304d\u3059\u304e\u307e\u3059\u3002(\u7d04 500kb \u307e\u3067)"),null):r}getProfileRef(t){return this.storage.ref(`/image/${this.currentUser.uid}/profile/${t}`)}onClickUploadImage(t){var r=this;return(0,v.A)(function*(){const o=r.ensureImageFile();if(!o)return;const s=yield r.uploadProfileImage("temp_profile",o);r.profileTempImage$=s.ref.getDownloadURL()})()}uploadProfileImage(t,r){var o=this;return(0,v.A)(function*(){return yield o.getProfileRef(t).put(r)})()}doChangePhoto(t){var r=this;return(0,v.A)(function*(){const s=yield(yield r.uploadProfileImage("profile",t)).ref.getDownloadURL();r.updateProfileImage(s)})()}initializeReauth(t){t.currentUser=this.currentUser,t.reauthed.subscribe(()=>{new xn.SD(this.protectedSettings.nativeElement).show(),this.isOpenOther=!0})}constructReauth(){return t=>{}}onClickImportant(t){(0,E.Oi)("onClickImportant()"),this.dialog.createDefaultBuilder().prepareBody(K,o=>this.initializeReauth(o)).setupChild(this.constructReauth()).setType(Ce.hs.Info).setSize(Ce.EV.Default).setTitle("\u518d\u8a8d\u8a3c").cancelButton(()=>{}).closeButton(()=>{}).open()}onClickOkImage(t,r){const o=this.ensureImageFile();o&&this.dialog.createSimpleBuilder().setType(Ce.hs.Info).setSize(Ce.EV.Default).setMessage("\u753b\u50cf\u306f\u516c\u958b\u3055\u308c\u307e\u3059\u3002\u3088\u308d\u3057\u3044\u3067\u3059\u304b\uff1f").setTitle("\u78ba\u8a8d").okButton(()=>{this.doChangePhoto(o)}).cancelButton(()=>{}).open()}static \u0275fac=function(r){return new(r||e)(i.rXU(Dt.u),i.rXU(mn.ap),i.rXU(Zt.Y),i.rXU(Qt.Qe),i.rXU(ue.tw),i.rXU(Nn.O),i.rXU(Ce.o3),i.rXU(tn.Q))};static \u0275cmp=i.VBU({type:e,selectors:[["ng-component"]],viewQuery:function(r,o){if(1&r&&i.GBs(_n,5)(Mn,5),2&r){let s;i.mGM(s=i.lsd())&&(o.protectedSettings=s.first),i.mGM(s=i.lsd())&&(o.imageBox=s.first)}},decls:1,vars:1,consts:[["configForm",""],["noPhoto",""],["imageBox",""],["protectedSettings",""],[4,"ngIf"],[1,"container"],[3,"formGroup"],[1,"mb-3"],["title","\u4e00\u822c\u516c\u958b\u3055\u308c\u308b\u60c5\u5831\u3092\u7de8\u96c6\u3067\u304d\u307e\u3059\u3002","src","/assets/octicons/question.svg",1,"m-3","octicon-info","help-icon"],[1,"my-2"],[1,"input-group","my-1"],[1,"visually-hidden"],["class","user-settings-profile-image rounded","alt","Profile \u753b\u50cf",3,"src",4,"ngIf","ngIfElse"],[1,"input-group"],["id","appGitfireInputIconFileInput","name","userIcon","formControlName","userIcon","type","file","placeholder","\u30a2\u30a4\u30b3\u30f3\u3092\u9078\u629e","accept","image/*",1,"form-control"],[1,"btn","btn-primary",3,"click","disabled"],[1,"input-group","my-2"],[1,"input-group-text"],["title","\u30e1\u30c3\u30bb\u30fc\u30b8\u4e0a\u306b\u8868\u793a\u3055\u308c\u308b\u3042\u306a\u305f\u306e\u540d\u524d\u3067\u3059\u3002","src","/assets/octicons/question.svg",1,"m-1","octicon-info","help-icon"],["name","nickname","placeholder","\u4f8b: hogehoge1032","formControlName","nickname","autofocus","","type","text","maxlength","19","minlength","4","required","",1,"form-control"],["class","valid-feedback",4,"ngIf"],["title","\u30d5\u30ea\u30fc\u30d5\u30a9\u30fc\u30de\u30c3\u30c8\u3067\u3059\u3002","src","/assets/octicons/question.svg",1,"m-1","octicon-info","help-icon"],["name","about","placeholder","\u4f8b: Ingress: kagura2718 (RES) \u30dd\u30b1\u30e2\u30f3go: kagura271(\u8d64)","formControlName","about","maxlength","200","type","text",1,"form-control"],["type","button",1,"btn","btn-primary",3,"click","disabled"],["role","button","aria-expanded","false",1,"btn","btn-secondary","collapsed",3,"click"],["id","appGitfireUserSettingsSecretContainer",1,"collapse","m-3"],[1,"row","input-group","m-3"],[1,"col-2","text-md-end","col-form-label"],["title","\u8a8d\u8a3c\u30d7\u30ed\u30d0\u30a4\u30c0\u304b\u3089\u63d0\u4f9b\u3055\u308c\u305f\u540d\u524d\u3067\u3059\u3002(\u975e\u516c\u958b)","src","/assets/octicons/question.svg",1,"m-1","octicon-info","help-icon"],["name","displayname","placeholder","\u4f8b: hogehoge1032","type","text","disabled","",1,"col-10","form-control",3,"value"],["title","\u8a8d\u8a3c\u306b\u4f7f\u308f\u308c\u308b\u30e1\u30fc\u30eb\u30a2\u30c9\u30ec\u30b9\u3067\u3059\u3002(\u975e\u516c\u958b)","src","/assets/octicons/question.svg",1,"m-1","octicon-info","help-icon"],["name","email","placeholder","email@example.com","formControlName","email","autocomplete","email","type","email","required","","autofill","","maxlength","1024","minlength","5",1,"col-8","form-control"],[1,"btn","btn-primary","col-2",3,"click","disabled"],["title","\u30ed\u30b0\u30a4\u30f3\u6642\u306e\u30d1\u30b9\u30ef\u30fc\u30c9\u3067\u3059\u3002\u4ed6\u4eba\u306b\u63a8\u6e2c\u3055\u308c\u306a\u3044\u3082\u306e\u3092\u4f7f\u7528\u3057\u3066\u304f\u3060\u3055\u3044\u3002(\u975e\u516c\u958b)","src","/assets/octicons/question.svg",1,"m-1","octicon-info","help-icon"],["name","password","placeholder","\u5909\u66f4\u306a\u3057","formControlName","password","type","password","autocomplete","new-password","maxlength","256","minlength","6",1,"col-8","form-control"],[1,"m-3"],[1,"input-group","m-3"],["tabindex","-1",1,"btn","btn-warning",3,"click"],["alt","Profile \u753b\u50cf",1,"user-settings-profile-image","rounded",3,"src"],[1,"p-3"],["alt","\u65b0\u3057\u3044 Profile \u753b\u50cf",1,"user-settings-profile-image","rounded",3,"src"],[1,"btn","btn-primary",3,"click"],[1,"valid-feedback"],["class","invalid-feedback",4,"ngIf"],[1,"invalid-feedback"],[3,"mainForm","userPrivStore$"]],template:function(r,o){1&r&&i.DNE(0,Xn,75,31,"ng-container",4),2&r&&i.Y8G("ngIf",o.currentUser)},dependencies:[b.MD,b.bT,R.X1,R.qT,R.me,R.BC,R.cb,R.YS,R.xh,R.tU,R.j4,R.JD,fn,b.Jj],styles:[".user-settings-profile-image[_ngcontent-%COMP%]{width:80px;height:80px}.help-icon[_ngcontent-%COMP%]{width:20px;height:20px}"]})}return e})();var Kt=g(9787);function An(e,n){if(1&e&&(i.j41(0,"div"),i.EFF(1),i.k0s()),2&e){const t=i.XpG().$implicit;i.R7$(),i.SpI("URL: ",t.url)}}function je(e,n){if(1&e&&(i.j41(0,"div")(1,"div")(2,"div"),i.EFF(3),i.k0s(),i.DNE(4,An,2,1,"div",0),i.j41(5,"div"),i.EFF(6),i.k0s(),i.j41(7,"div"),i.EFF(8),i.nI1(9,"date"),i.k0s()(),i.nrm(10,"hr"),i.j41(11,"div"),i.EFF(12),i.k0s()()),2&e){const t=n.$implicit;i.R7$(3),i.SpI("Title: ",t.title),i.R7$(),i.Y8G("ngIf",t.url),i.R7$(2),i.SpI("Done: ",t.hasRead),i.R7$(2),i.SpI("Date: ",i.i5U(9,5,t.createdAt.toDate(),"yyyy-MM-dd hh:mm:ss")),i.R7$(4),i.JRh(t.body)}}let rn=(()=>{class e{auth;route;store;destroy$=new fe.B;id$;trayStore;constructor(t,r,o){this.auth=t,this.route=r,this.store=o}ngOnDestroy(){this.destroy$.next()}ngOnInit(){(0,E.Oi)("UserTrayMessageComponent.OnInit()",this.route.snapshot),this.id$=this.route.queryParams.pipe((0,ce.p)(t=>"id"in t),(0,M.T)(t=>t.id)),this.id$.pipe((0,U.n)(t=>(0,dn.z)((0,N.of)(t),this.auth.clientSideUser$)),(0,ce.p)(([t,r])=>null!==r),(0,U.n)(([t,r])=>this.store.doc(`/users/v1/protected/${r.uid}/tray/${t}`).valueChanges({idField:"id"}).pipe((0,J.s)(1))),(0,$.Q)(this.destroy$)).subscribe(t=>{this.trayStore=t})}static \u0275fac=function(r){return new(r||e)(i.rXU(Dt.u),i.rXU(Kt.nX),i.rXU(Qt.Qe))};static \u0275cmp=i.VBU({type:e,selectors:[["app-user-tray-message"]],decls:1,vars:1,consts:[[4,"ngIf"]],template:function(r,o){1&r&&i.DNE(0,je,13,8,"div",0),2&r&&i.Y8G("ngIf",o.trayStore)},dependencies:[b.MD,b.bT,b.vh],encapsulation:2})}return e})(),Ot=(()=>{class e{auth;localSession;router;constructor(t,r,o){this.auth=t,this.localSession=r,this.router=o,(0,E.Oi)("AuthGuard.constructor")}canActivate(t,r){return this.auth.clientSideUser$.pipe((0,M.T)(o=>{if((0,E.rD)("AuthGuard",o),o)return!0;const s={queryParams:{redirectPath:r.url}};return(0,E.Oi)("auth.guard Prepare to redirect",s),this.router.createUrlTree(["/Gitfire/login"],s)}))}static \u0275fac=function(r){return new(r||e)(T.KVO(Dt.u),T.KVO(tn.Q),T.KVO(Kt.Ix))};static \u0275prov=T.jDH({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();var zn=g(1152);let on=(()=>{class e{auth;localSession;router;constructor(t,r,o){this.auth=t,this.localSession=r,this.router=o}canActivate(t,r){return this.auth.authState.pipe((0,M.T)(o=>((0,E.rD)("LoginGuard",o),!o||this.router.createUrlTree(["/"]))))}static \u0275fac=function(r){return new(r||e)(T.KVO(zn.DS),T.KVO(tn.Q),T.KVO(Kt.Ix))};static \u0275prov=T.jDH({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();const Jn=[{path:"login.htm",loadChildren:()=>Promise.resolve().then(g.bind(g,1951)).then(e=>e.GitfireLoginModule),data:{mode:"login"},canActivate:[on]},{path:"login",redirectTo:"login.htm"},{path:"signup.htm",loadChildren:()=>Promise.resolve().then(g.bind(g,1951)).then(e=>e.GitfireLoginModule),data:{mode:"signup"},canActivate:[on]},{path:"signup",redirectTo:"signup.htm"},{path:"reset.htm",loadChildren:()=>Promise.resolve().then(g.bind(g,1951)).then(e=>e.GitfireLoginModule),data:{mode:"reset"}},{path:"reset",redirectTo:"reset.htm"},{path:"chat.htm",loadChildren:()=>g.e(471).then(g.bind(g,471)).then(e=>e.GitfireChatModule),canActivate:[Ot]},{path:"chat",redirectTo:"chat.htm"},{path:"post.htm",loadChildren:()=>g.e(421).then(g.bind(g,7421)).then(e=>e.GitfirePostModule),canActivate:[Ot]},{path:"post",redirectTo:"post.htm"},{path:"settings.htm",component:$t,canActivate:[Ot]},{path:"settings",redirectTo:"settings.htm"},{path:"tray.htm",component:rn,canActivate:[Ot]},{path:"tray",redirectTo:"tray.htm"}];let qn=(()=>{class e{static \u0275fac=function(r){return new(r||e)};static \u0275mod=i.$C({type:e});static \u0275inj=T.G2t({imports:[Ne.iI.forChild(Jn),Ne.iI]})}return e})();var Qn=g(1951),pr=g(9970),Zn=g(4710),kn=g(5371),Wt=g(3691),er=g(7234),tr=g(9243);let nr=(()=>{class e{static \u0275fac=function(r){return new(r||e)};static \u0275mod=i.$C({type:e});static \u0275inj=T.G2t({providers:[tr.D,er.u],imports:[b.MD,R.YN,R.X1,Wt.Q,pr.CommentEntryComponent,Zn.F,kn.m]})}return e})();var rr=g(5427),ir=g(6332),gr=g(3371),fr=g(2614);let mr=(()=>{class e{constructor(){(0,E.rD)("Dynamically loaded GitfireModule")}static \u0275fac=function(r){return new(r||e)};static \u0275mod=i.$C({type:e});static \u0275inj=T.G2t({providers:[ue.tw,Dt.u,Ot,on,Zt.Y,{provide:xe.Zg,useValue:E.cA.FirebaseCloudFunctionsRegion},{provide:O,useValue:E.cA.firebaseVapidKey}],imports:[b.MD,R.YN,R.X1,qn,Qn.GitfireLoginModule,nr,ue._B.forRoot(E.cA.toastrConfig),rr.j,$t,ir.UserStatusComponent,gr.O,K,fn,fr.UserTrayComponent,rn]})}return e})()},3691(an,tt,g){g.d(tt,{Q:()=>T});var b=g(9769),R=g(681),xe=g(375),v=g(5547);let T=(()=>{class i{static \u0275fac=function(Ie){return new(Ie||i)};static \u0275mod=v.$C({type:i});static \u0275inj=xe.G2t({imports:[b.MD,R.g]})}return i})()},5557(an,tt,g){var b=g(467),R=g(1631),xe=g(8779),v=g(1871),T=g(6749);const i="@firebase/installations",nt="0.6.18",Ie=`w:${nt}`,N="FIS_v2",U=new v.FA("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function M(a){return a instanceof v.g&&a.code.includes("request-failed")}function H({projectId:a}){return`https://firebaseinstallations.googleapis.com/v1/projects/${a}/installations`}function Ve(a){return{token:a.token,requestStatus:2,expiresIn:it(a.expiresIn),creationTime:Date.now()}}function we(a,l){return Ke.apply(this,arguments)}function Ke(){return(Ke=(0,b.A)(function*(a,l){const _=(yield l.json()).error;return U.create("request-failed",{requestName:a,serverCode:_.code,serverMessage:_.message,serverStatus:_.status})})).apply(this,arguments)}function rt({apiKey:a}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":a})}function D(a){return O.apply(this,arguments)}function O(){return(O=(0,b.A)(function*(a){const l=yield a();return l.status>=500&&l.status<600?a():l})).apply(this,arguments)}function it(a){return Number(a.replace("s","000"))}function ue(){return(ue=(0,b.A)(function*({appConfig:a,heartbeatServiceProvider:l},{fid:p}){const _=H(a),A=rt(a),S=l.getImmediate({optional:!0});if(S){const I=yield S.getHeartbeatsHeader();I&&A.append("x-firebase-client",I)}const V={method:"POST",headers:A,body:JSON.stringify({fid:p,authVersion:N,appId:a.appId,sdkVersion:Ie})},Z=yield D(()=>fetch(_,V));if(Z.ok){const I=yield Z.json();return{fid:I.fid||p,registrationStatus:2,refreshToken:I.refreshToken,authToken:Ve(I.authToken)}}throw yield we("Create Installation",Z)})).apply(this,arguments)}function Ne(a){return new Promise(l=>{setTimeout(l,a)})}const $=/^[cdef][\w-]{21}$/;function ce(){try{const a=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(a),a[0]=112+a[0]%16;const p=function Ut(a){return function fe(a){return btoa(String.fromCharCode(...a)).replace(/\+/g,"-").replace(/\//g,"_")}(a).substr(0,22)}(a);return $.test(p)?p:""}catch{return""}}function le(a){return`${a.appName}!${a.appId}`}const me=new Map;function ot(a,l){const p=le(a);He(p,l),function Ee(a,l){const p=function E(){return!q&&"BroadcastChannel"in self&&(q=new BroadcastChannel("[Firebase] FID Change"),q.onmessage=a=>{He(a.data.key,a.data.fid)}),q}();p&&p.postMessage({key:a,fid:l}),function _e(){0===me.size&&q&&(q.close(),q=null)}()}(p,l)}function He(a,l){const p=me.get(a);if(p)for(const _ of p)_(l)}let q=null;const x="firebase-installations-store";let st=null;function Ct(){return st||(st=(0,T.P2)("firebase-installations-database",1,{upgrade:(a,l)=>{0===l&&a.createObjectStore(x)}})),st}function Ye(a,l){return Q.apply(this,arguments)}function Q(){return(Q=(0,b.A)(function*(a,l){const p=le(a),A=(yield Ct()).transaction(x,"readwrite"),S=A.objectStore(x),P=yield S.get(p);return yield S.put(l,p),yield A.done,(!P||P.fid!==l.fid)&&ot(a,l.fid),l})).apply(this,arguments)}function at(a){return ve.apply(this,arguments)}function ve(){return(ve=(0,b.A)(function*(a){const l=le(a),_=(yield Ct()).transaction(x,"readwrite");yield _.objectStore(x).delete(l),yield _.done})).apply(this,arguments)}function ye(a,l){return Ae.apply(this,arguments)}function Ae(){return(Ae=(0,b.A)(function*(a,l){const p=le(a),A=(yield Ct()).transaction(x,"readwrite"),S=A.objectStore(x),P=yield S.get(p),V=l(P);return void 0===V?yield S.delete(p):yield S.put(V,p),yield A.done,V&&(!P||P.fid!==V.fid)&&ot(a,V.fid),V})).apply(this,arguments)}function be(a){return Y.apply(this,arguments)}function Y(){return Y=(0,b.A)(function*(a){let l;const p=yield ye(a.appConfig,_=>{const A=function Et(a){return Rt(a||{fid:ce(),registrationStatus:0})}(_),S=function ne(a,l){if(0===l.registrationStatus){if(!navigator.onLine)return{installationEntry:l,registrationPromise:Promise.reject(U.create("app-offline"))};const p={fid:l.fid,registrationStatus:1,registrationTime:Date.now()},_=function At(a,l){return Xe.apply(this,arguments)}(a,p);return{installationEntry:p,registrationPromise:_}}return 1===l.registrationStatus?{installationEntry:l,registrationPromise:Fe(a)}:{installationEntry:l}}(a,A);return l=S.registrationPromise,S.installationEntry});return""===p.fid?{installationEntry:yield l}:{installationEntry:p,registrationPromise:l}}),Y.apply(this,arguments)}function Xe(){return Xe=(0,b.A)(function*(a,l){try{const p=yield function Se(a,l){return ue.apply(this,arguments)}(a,l);return Ye(a.appConfig,p)}catch(p){throw M(p)&&409===p.customData.serverCode?yield at(a.appConfig):yield Ye(a.appConfig,{fid:l.fid,registrationStatus:0}),p}}),Xe.apply(this,arguments)}function Fe(a){return ut.apply(this,arguments)}function ut(){return(ut=(0,b.A)(function*(a){let l=yield kt(a.appConfig);for(;1===l.registrationStatus;)yield Ne(100),l=yield kt(a.appConfig);if(0===l.registrationStatus){const{installationEntry:p,registrationPromise:_}=yield be(a);return _||p}return l})).apply(this,arguments)}function kt(a){return ye(a,l=>{if(!l)throw U.create("installation-not-found");return Rt(l)})}function Rt(a){return function Nt(a){return 1===a.registrationStatus&&a.registrationTime+1e4<Date.now()}(a)?{fid:a.fid,registrationStatus:0}:a}function De(){return(De=(0,b.A)(function*({appConfig:a,heartbeatServiceProvider:l},p){const _=function ct(a,{fid:l}){return`${H(a)}/${l}/authTokens:generate`}(a,p),A=function Pt(a,{refreshToken:l}){const p=rt(a);return p.append("Authorization",function We(a){return`${N} ${a}`}(l)),p}(a,p),S=l.getImmediate({optional:!0});if(S){const I=yield S.getHeartbeatsHeader();I&&A.append("x-firebase-client",I)}const V={method:"POST",headers:A,body:JSON.stringify({installation:{sdkVersion:Ie,appId:a.appId}})},Z=yield D(()=>fetch(_,V));if(Z.ok)return Ve(yield Z.json());throw yield we("Generate Auth Token",Z)})).apply(this,arguments)}function ze(a){return Me.apply(this,arguments)}function Me(){return Me=(0,b.A)(function*(a,l=!1){let p;const _=yield ye(a.appConfig,S=>{if(!Be(S))throw U.create("not-registered");const P=S.authToken;if(!l&&function lt(a){return 2===a.requestStatus&&!function dt(a){const l=Date.now();return l<a.creationTime||a.creationTime+a.expiresIn<l+36e5}(a)}(P))return S;if(1===P.requestStatus)return p=function j(a,l){return he.apply(this,arguments)}(a,l),S;{if(!navigator.onLine)throw U.create("app-offline");const V=function It(a){const l={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},a),{authToken:l})}(S);return p=function qe(a,l){return Oe.apply(this,arguments)}(a,V),V}});return p?yield p:_.authToken}),Me.apply(this,arguments)}function he(){return(he=(0,b.A)(function*(a,l){let p=yield Je(a.appConfig);for(;1===p.authToken.requestStatus;)yield Ne(100),p=yield Je(a.appConfig);const _=p.authToken;return 0===_.requestStatus?ze(a,l):_})).apply(this,arguments)}function Je(a){return ye(a,l=>{if(!Be(l))throw U.create("not-registered");return function ht(a){return 1===a.requestStatus&&a.requestTime+1e4<Date.now()}(l.authToken)?Object.assign(Object.assign({},l),{authToken:{requestStatus:0}}):l})}function Oe(){return Oe=(0,b.A)(function*(a,l){try{const p=yield function Mt(a,l){return De.apply(this,arguments)}(a,l),_=Object.assign(Object.assign({},l),{authToken:p});return yield Ye(a.appConfig,_),p}catch(p){if(!M(p)||401!==p.customData.serverCode&&404!==p.customData.serverCode){const _=Object.assign(Object.assign({},l),{authToken:{requestStatus:0}});yield Ye(a.appConfig,_)}else yield at(a.appConfig);throw p}}),Oe.apply(this,arguments)}function Be(a){return void 0!==a&&2===a.registrationStatus}function Le(){return(Le=(0,b.A)(function*(a){const l=a,{installationEntry:p,registrationPromise:_}=yield be(l);return _?_.catch(console.error):ze(l).catch(console.error),p.fid})).apply(this,arguments)}function Te(){return Te=(0,b.A)(function*(a,l=!1){const p=a;return yield function gt(a){return Qe.apply(this,arguments)}(p),(yield ze(p,l)).token}),Te.apply(this,arguments)}function Qe(){return(Qe=(0,b.A)(function*(a){const{registrationPromise:l}=yield be(a);l&&(yield l)})).apply(this,arguments)}function $e(a){return U.create("missing-app-config-values",{valueName:a})}const ke="installations",X=a=>{const l=a.getProvider("app").getImmediate(),p=function Bt(a){if(!a||!a.options)throw $e("App Configuration");if(!a.name)throw $e("App Name");const l=["projectId","apiKey","appId"];for(const p of l)if(!a.options[p])throw $e(p);return{appName:a.name,projectId:a.options.projectId,apiKey:a.options.apiKey,appId:a.options.appId}}(l);return{app:l,appConfig:p,heartbeatServiceProvider:(0,R._getProvider)(l,"heartbeat"),_delete:()=>Promise.resolve()}},c=a=>{const l=a.getProvider("app").getImmediate(),p=(0,R._getProvider)(l,ke).getImmediate();return{getId:()=>function re(a){return Le.apply(this,arguments)}(p),getToken:A=>function pt(a){return Te.apply(this,arguments)}(p,A)}};(function h(){(0,R._registerComponent)(new xe.uA(ke,X,"PUBLIC")),(0,R._registerComponent)(new xe.uA("installations-internal",c,"PRIVATE"))})(),(0,R.registerVersion)(i,nt),(0,R.registerVersion)(i,nt,"esm2017")}}]);